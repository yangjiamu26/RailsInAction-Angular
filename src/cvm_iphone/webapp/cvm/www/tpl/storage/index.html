
<!-- Page, data-page contains page name-->
<div data-page="storage-index" class="page">
    <div class="navbar">
      <div class="navbar-inner">
          <div class="left">
            <a href="#" class="link open-popover">
              <i class="icon icon-bars"></i>
              <span>存储池</span>
            </a>
          </div>
          <div class="center" data-bind="with: dcInfo"><span data-bind="text: name"></span>-资源</div>
          <div class=" right">
            <a href="#" class="link icon-only open-panel" data-panel="right">筛选</a>
          </div>
      </div>
    </div>
    <!-- Scrollable page content-->
    <div class="page-content pull-to-refresh-content">
        <div class="pull-to-refresh-layer">
          <div class="preloader"></div>
          <div class="pull-to-refresh-arrow"></div>
        </div>
        
        <div class="storagechartlist" data-bind="with: infos">
          <div class="list-block contacts-block list-progress">
            <div class="list-group">
              <ul>
                
                <li>
                  <div class="item-content">
                    <div class="item-inner">
                      <div class="item-title"><i></i>存储总量（<span data-bind="text: totalSize || 0"></span>T）</div>
                      <div class="item-after"><i class="progress progress-bar-normal tag-progress"></i>可用<span data-bind="text: availSize || 0"></span>TB / <i class="progress progress-bar-warning tag-progress"></i>已用<span data-bind="text: (totalSize-availSize).toFixed(2) || 0"></span>TB</div>
                    </div>
                  </div>
                  <div style="margin:0 12px;">
                    <div class="progress progress-bar-normal" style="height:3px;"><span class="progress-bar progress-bar-warning" data-bind="attr:{'style':'width:'+myApp.CalculatPercent(totalSize-availSize,totalSize)+'%'}"></span></div>
                  </div>
                </li>
                <li>
                  <div class="item-content">
                    <div class="item-inner">
                      <div class="item-title"><i></i>存储总量（<span data-bind="text: totalSize || 0"></span>T）</div>
                      <div class="item-after"><i class="progress progress-bar-normal tag-progress"></i>共享<span data-bind="text: sharedSize || 0"></span>TB / <i class="progress progress-bar-warning tag-progress"></i>非共享<span data-bind="text: (totalSize-sharedSize).toFixed(2) || 0"></span>TB</div>
                    </div>
                  </div>
                  <div style="margin:0 12px;">
                    <div class="progress progress-bar-warning" style="height:3px;"><span class="progress-bar progress-bar-normal" data-bind="attr:{'style':'width:'+myApp.CalculatPercent(sharedSize,totalSize)+'%'}"></span></div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <table data-bind="visible: dataList().length==0" width="100%">
          <tbody>
            <tr>
              <td colspan="4" align="center">暂无数据</td>
            </tr>
          </tbody>
        </table>
        <!-- ko foreach: dataList-->
        <div class="list-block card">
          <a data-bind="attr:{'href':'tpl/storage/summary.html?belongTab=storage&name='+name+'&resourcePoolId='+resourcePoolId+'&hypervisor='+hypervisor+'&id='+id}" class="item-link">
            <div class="item-content card-content">
              <div class="item-media"><span class="mini-state normal"></span><i class="icon icon-storage"></i></div>
              <div class="item-inner card-content-inner">
                <div class="cart-content-block">
                  <strong data-bind="text: name"></strong>
                  <div class="row">
                    <span class="col-50">所属资源池：</span><span class="col-50"><span data-bind="text: resourcePoolName"></span></span>
                    <span class="col-50">IP：</span><span class="col-50"><span data-bind="text: hostIp"></span></span>
                    <span class="col-50">虚拟磁盘：</span><span class="col-50"><span data-bind="text: vdisk"></span>个</span>
                  </div>
                </div>
              </div>
            </div>
          </a>
        </div>
        <!-- /ko -->
        <div style="margin-top:10px;" class="text-center" data-bind="visible: noMore()&&dataList().length>0">所有数据加载完毕！</div>
        <div style="height:60px;"></div>
        
        <div class="infinite-scroll-preloader">
          <div class="preloader"></div>
        </div>
            
    </div>
</div>
