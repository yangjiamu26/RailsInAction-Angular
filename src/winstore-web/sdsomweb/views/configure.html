<style type="text/css">
  body {
    background: #253143 no-repeat center 0px scroll;
  }
</style>
<div id="AlertInfo" class="modal hide fade" style="background-color: #4f97dc;"
tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header" style="font-size:15px;">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            ×
        </button>
        <h3 id="myModalLabel" style="color:#fff;padding-top:20px;">
            提示
        </h3>
    </div>
    <div class="modal-body" style="background-color:#fff;padding:20px 50px;color:#97acc1;">
        <p ng-bind="DialogInfo">
        </p>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">
            确定
        </button>
    </div>
</div>

<div id="LogShow" class="modal hide fade" style="left:45%; top:20%; width:700px; background-color: #4f97dc;"
tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header" style="font-size:15px;width:670px">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            ×
        </button>
        <h3 id="showLogLabel" style="color:#fff;padding-top:20px;">
            {{now_show_log}} 节点安装日志
        </h3>
    </div>
    <div id="LogRecorderDiv" class="modal-body" style="background-color:#fff;padding:20px 50px; color:#000;width:600px; height:300px;top:20%; overflow:auto;">
        <p id="LogRecorder" ng-bind-html="showInstallLogRecorder | to_trusted" style="margin-left:80px"></p>
    </div>
</div>

<div id="configContainer" class="div-relative" ng-init="initWindow()">
    <div class="div-pic"></div>
    <div class="div-title"></div>

    <div id="complete" class="modal hide fade" style="background-color: #4f97dc;width:380px;left: 60%;" tabindex="-1"
         role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
        <div class="modal-header" style="font-size:15px;">
            <a href="http://{{nodeObj.cluster.omBussinessIpaddr}}:6680/">
                <button type="button" class="close" aria-hidden="true">×</button>
            </a>
            <h3 id="myModalLabel1" style="color:#fff;padding-top:20px;">提示</h3>
        </div>
        <div class="modal-body" style="background-color:#fff;padding:20px 50px;color:#97acc1;">
            <span style="padding: 0; color: red">创建成功</span>
        </div>
        <div class="modal-footer">
            <a href="http://{{nodeObj.cluster.omBussinessIpaddr}}:6680/">
                <button class="btn btn-success">&nbsp;确&nbsp;&nbsp;&nbsp;定&nbsp;</button>
            </a>
        </div>
    </div>

    <!--节点时间配置界面-->
    <div id="alertTimeDrift" class="modal hide fade" style="background-color: #4f97dc;"
    tabindex="-1" role="dialog" aria-labelledby="myModalLabel2" aria-hidden="true">
        <div class="modal-header" style="font-size:15px;">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                ×
            </button>
            <h3 id="myModalLabel2" style="color:#fff;padding-top:20px;">
                提示
            </h3>
        </div>
        <div class="modal-body" style="background-color:#fff;padding:20px 50px;color:#FF0000;">
            <p ng-bind="DialogInfo">
            </p>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true" ng-click="showTimeManagementBox()">
                继续
            </button>
        </div>
    </div>

    <div id="timeManagement" class="modal hide fade" style="background-color: #4f97dc;width:600px;"
    tabindex="-1" role="dialog" aria-labelledby="myModalLabel3" aria-hidden="true">
        <div class="modal-header" style="font-size:15px;">
            <h3 id="myModalLabel3" style="color:#fff;padding-top:20px;">
                节点时间管理
            </h3>
        </div>
        <div class="modal-body" style="background-color:#fff;">
            <div style="width: 100%;max-height: 1800px;overflow-y: auto;">
                <table class="table table-bordered" style="border: 2px #98CDFF solid">
                    <tr style="background-color: #D6E8FA;">
                        <td style="width: 20%; text-align: center;">
                            节点IP地址
                        </td>
                        <td style="width: 40%; text-align: center;">
                            扫描时间  <button style="background:#EEEE00" ng-click="refreshTimeInfo(true)"> <i class="icon-refresh" ng-click="refreshTimeInfo()"></i> </button>
                        </td>
                        <td style="width: 40%; text-align: center;">
                            操作
                        </td>
                    </tr>

                    <tr ng-repeat="server in nodeObj.servers">
                        <td style="width: 20%; text-align: center;">
                            {{server.originalIp.ipaddr}}
                        </td>
                        <td style="width: 40%; text-align: center;">
                            {{server.humanCheckTime}}
                        </td>
                        <td style="width: 40%; text-align: center; cursor:pointer;">
                            <span style="color:#4bd37e;" ng-click="showSetNodeTime(server)" role="button">修改</span>
                            <span> |</span>
                            <span style="color:#A0522D;" ng-click="showConfirmSyncTimeDialog(server)" role="button" >同步</span>
                        </td>
                    </tr>
                </table>
            </div>
            <div id="timeConfigNoticeMessage" ng-bind="timeConfigNoticeMessage" style="text-align:left;font-size:16px;color:green;">
                <span style="float:right" ng-show="(showSetTimeProccessing)">&nbsp;<img src="images/configure/loading.gif"></span>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" ng-click="closeTimeManagementBox()">
                关闭
            </button>
        </div>
    </div>

    <!--节点时间同步确认对话框-->
    <div id="syncConfirmDialog" class="modal hide fade" style="background-color: #4f97dc;width:520px;"
    role="dialog" aria-labelledby="myModalLabel4" aria-hidden="true">
        <div class="modal-header" style="font-size:15px;">
            <h3 id="myModalLabel4" style="color:#fff;padding-top:20px;">
                节点时间同步确认
            </h3>
        </div>

        <div class="modal-body" style="background-color:#fff;">
            <span> 点击确认，将以节点{{ntpserver.originalIp.ipaddr}}的时间为标准，同步所有节点时间！</span>
        </div>

        <div class="modal-footer">
            <button class="btn" ng-click="syncServersTime()" ng-disabled="isAdd">
                确定
            </button>
            <button class="btn" ng-click="closeConfirmSyncTimeDialog()" ng-disabled="isAdd">
                关闭
            </button>
        </div>
    </div>

    <!--节点时间同步操作管理-->
    <div id="nodeTimeSet" class="modal hide fade" style="background-color: #4f97dc;width:520px;"
    tabindex="-1" role="dialog" aria-labelledby="myModalLabel4" aria-hidden="true">
        <div class="modal-header" style="font-size:15px;">
            <h3 id="myModalLabel4" style="color:#fff;padding-top:20px;">
                节点时间设置
            </h3>
        </div>

        <div class="modal-body" style="background-color:#fff;">
            <div class="row-fluid">
                <div class="row-fluid" style="margin: 10px 0px;">
                    <div class="span11 offset1">
                        <label style="font-weight: bolder;">
                            节点地址： {{nodeToChangeTime.originalIp.ipaddr}}
                        </label>
                    </div>
                </div>

                <div class="row-fluid" style="margin: 10px 0px;">
                    <div class="span11 offset1">
                        <label style="font-weight: bolder;">
                            扫描时间： {{nodeToChangeTime.humanCheckTime}}
                        </label>
                    </div>
                </div>
                <div class="row-fluid" style="margin: 10px 0px;">
                    <div class="span11 offset1">
                        <label style="font-weight: bolder;">
                        <span >更新时间：</span> <input type="text" ng-model="newSystemTime" style="font-weight: bolder;width: 50%;" />
                        </label>

                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn" ng-click="updateNodeTime()" ng-disabled="isAdd">
                保存
            </button>
            <button class="btn" ng-click="closeNodeTimeSet()" ng-disabled="isAdd">
                关闭
            </button>
        </div>
    </div>

    <div>
        <!-- 扫描网段 -->
        <div class="div-config" ng-show="isScanning">
            <div class="div-header">
                <img style="padding: 10px" src="images/configure/pic_groud.png"/>系统初始化设置
            </div>
            <div class="row-fluid">
                <div class="span7 offset2 control-group" id="iprange" style="width:250px;">
                    <label class="control-label" style="font-weight: bold;line-height: 30px;margin-top: 10px;" for="inputEmail">请输入网段</label>
                    <div class="controls">
                        <input type="text" placeholder="开始地址" ng-model="startIp1" name="startIpRangeList"/>
                    </div>
                    <div class="controls">
                        <input type="text" placeholder="结束地址" ng-model="endIp1" name="endIpRangeList" />
                        <div class="icon-plus-sign" onclick="addIpRange()"></div>
                    </div>
                </div>
            </div>

            <div class="row-fluid">
                <div class="span7 offset2 control-group" id="ip" style="width: 250px;">
                    <label class="control-label" style="font-weight: bold;line-height: 30px;margin-top: 10px;" for="inputEmail">请输入IP地址</label>
                    <div class="controls">
                        <input type="text" placeholder="单IP地址" ng-model="ip1" name="ipList"/>
                        <div class="icon-plus-sign" onclick="addIp()"></div>
                    </div>
                </div>
            </div>
            <div class="control-label" id="errorMessageBox" ng-bind="errorMessageBox" style="font-weight: bold;line-height: 30px;margin-left: 67px;margin-bottom: 10px; color:#FF0000" for="inputEmail"></div>
            <div class="row-fluid">
                <div class="span7 offset2 control-group">
                    <div class="controls">
                        <button class="btn btn-large btn-block btn-primary" type="button"
                                ng-disabled="showLoading" ng-click="scanningIp()" data-loading-text="Loading...">
                            <span ng-show="!showLoading">开始扫描</span>
                            <span ng-show="showLoading">
                                <img src="images/configure/loading2.gif"/>
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 系统设置 -->
        <div class="div-cluster" ng-show="isConfig">
            <div style="text-align:right;height:40px;line-height:50px;font-size:20px;color:#fff;padding:10px;margin:20px 20px -70px 20px;background-color:#253143;">
                <img style="padding: 10px" src="images/configure/pic_groud.png"/>系统初始化设置
            </div>
            <div class="alarm-container div-initconfigure" style="padding:10px 10px 0 10px;margin-left:20px;/*border:1px solid blue;*/">
                <!--我是分隔线-->
                <div class="row-fluid">
                    <div class="span12">
                        <div class="span3" style="line-height:15px;font-size:18px;padding:20px 0 0 20px;">系统</div>
                        <div class="span9" style="padding: 20px 10px 0 10px;text-align:right;font-size:15px;color:rgb(255, 155, 0);">提示：感谢使用云宏公司云系列分布式存储产品！</div>
                        <div><img src="images/configure/pic_line.png" style="height:1px;width:100%;"/></div>
                    </div>
                </div>
                <form style="margin: 0">
                    <div class="control-group" style="padding:10px 0 10px 0; margin: 0; max-height: 490px;overflow: hidden;">
                        <div class="span2 controls">
                            <label class="control-label" for="omBussinessIpaddr" style="color:white;">管理系统IP地址</label>
                            <input class="span2" type="text" id="omBussinessIpaddr" ng-model="nodeObj.cluster.omBussinessIpaddr"/>
                        </div>
                        <div class="span2 controls" ng-show="!isOmBizNetAndBizNetSharedNics">
                            <label class="control-label" for="omBussinessNetmask" style="color:white;">管理系统子网掩码</label>
                            <input class="span2" type="text" id="omBussinessNetmask" ng-model="nodeObj.cluster.omBussinessNetmask"/>
                        </div>
                        <div class="span2 controls" ng-show="!isOmBizNetAndBizNetSharedNics">
                            <label class="control-label" for="omBussinessGateway" style="color:white;">管理系统网关IP地址</label>
                            <input class="span2" type="text" id="omBussinessGateway" ng-model="nodeObj.cluster.omBussinessGateway"/>
                        </div>
                        <div class="span2 controls">
                            <label class="control-label" for="omClusterIpaddr" style="color:white;">管理系统内部IP地址</label>
                            <input class="span2" type="text" id="omClusterIpaddr" ng-model="nodeObj.cluster.omClusterIpaddr"/>
                        </div>

                        <button class="btn-add-short" ng-click="showModal('advancedOption')" href="#poolModal" role="button" data-toggle="modal" style="margin-left: 30px; margin-top: 23px;" ng-disabled="false">
                            &nbsp;&nbsp;高级选项&nbsp;
                        </button>
                        <button class="btn-add-short" ng-click="showTimeManagementBox()" role="button" data-toggle="modal" style="margin-left: 30px; margin-top: 23px;" ng-disabled="false">
                            &nbsp;&nbsp;时间管理&nbsp;
                        </button>
                        <button class="btn-add-short" ng-click="rescanConfig()" role="button" data-toggle="modal" style="margin-left: 30px; margin-top: 23px;" ng-disabled="false">
                            <span ng-show="!showReLoading">&nbsp;&nbsp;重新扫描&nbsp;</span>
                            <span ng-show="showReLoading">
                                <img src="images/configure/loading2.gif"/>
                            </span>
                        </button>
                    </div>
                </form>

                <!--我是分隔线-->
                <div class="row-fluid">
                    <div class="span12">
                        <div class="span3" style="line-height:15px;font-size:18px;padding:20px 0 0 20px;">节点</div>
                        <div class="span9" id="configMessage" ng-bind="configMessage" style="padding: 20px 10px 0 10px;text-align:left;font-size:15px;color:yellow;"></div>
                        <div><img src="images/configure/pic_line.png" style="height:1px;width:100%;"/></div>
                    </div>
                </div>
                    <div class="row-fluid clearfix" id="TDiv">
                        <div style="width:410px;margin:0;padding:0;float:left;border-left:1px solid #ddd;">
                            <div>
                                <table class="table-cluster" style="width:410px;">
                                    <thead>
                                        <tr>
                                            <th width="30px"><input type="checkbox" ng-checked="allIsChecked" ng-click="checkAll()" ng-disabled="isComplete"></th>
                                            <th width="50px">进度</th>
                                            <th width="30px">日志</th>
                                            <th width="100px">节点名称</th>
                                            <th width="100px">当前IP地址</th>
                                            <th width="100px">子网掩码</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>

                            <div style="height:335px;overflow-y:hidden;overflow-x:scroll;" id="leftTable">
                                <table class="table-cluster" style="width:410px;margin-bottom:120px;">
                                    <tbody>
                                        <tr ng-repeat="node in nodeObj.servers">
                                            <td width="30px"><input type="checkbox" ng-checked="node.$checked" ng-click="oneCheck(node)" ng-disabled="{{node.progress != -1}}"></td>
                                            <td width="50px">
                                                <span>{{node.progress}}%</span>
                                                <span style="float:right" ng-show="(showInstallProccessing) || (node.selected == 1 && node.progress != -1 && node.progress != 100)">&nbsp;<img src="images/configure/loading.gif"></span>
                                            </td>
                                            <td width="30px"><i class="icon-info-sign icon-white" ng-click="showInstallLog(node.originalIp.ipaddr)"></i></td>
                                            <td width="100px">{{node.hostid}}</td>
                                            <td width="100px">{{node.originalIp.ipaddr}}</td>
                                            <td width="100px">{{node.originalIp.netmask}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div style="width:690px;margin:0;padding:0;float:left;" id="rightTDiv">
                            <div style="width:100%;overflow:hidden;" id="rightHead">
                                <table class="table-cluster" style="width:1357px">
                                    <thead>
                                        <tr>
                                            <th width="280px" ng-show="!isOmBizNetAndBizNetSharedNics">管理系统网卡</th>
                                            <th width="120px">iSCSI服务IP地址</th>
                                            <th width="120px">子网掩码</th>
                                            <th width="120px" ng-show="isOmBizNetAndBizNetSharedNics">默认网关</th>
                                            <th width="280px" ng-show="!isBizNetAndClusterNetSharedNics">iSCSI服务网卡</th>
                                            <th width="120px">内部网络IP地址</th>
                                            <th width="120px">子网掩码</th>
                                            <th width="280px" ng-show="!isBizNetAndClusterNetSharedNics">内部网络网卡</th>
                                            <th width="280px" ng-show="isBizNetAndClusterNetSharedNics">iSCSI服务/内部网络&nbsp;网卡</th>
                                            <th width="300px">数据盘</th>
                                            <th width="300px" ng-show="!isReadWriteCacheMix">写缓存盘</th>
                                            <th width="300px" ng-show="!isReadWriteCacheMix">读缓存盘</th>
                                            <th width="300px" ng-show="isReadWriteCacheMix">缓存盘</th>
                                            <th width="17px"></th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                            <div style="width:100%;height:335px;overflow:scroll;" id="rightTable">
                                <table class="table-cluster" style="width:1740px;margin-bottom:120px;" id="configureTable">
                                    <tbody>
                                        <tr ng-repeat="node in nodeObj.servers" ng-init="regDropdown()">
                                            <td width="280px" style="color: #00ff54;cursor: pointer;text-align:center;" ng-click="selectCell(node.nics, 'om_bussiness')"
                                            ng-show="!isOmBizNetAndBizNetSharedNics">
                                                <div class="dropdown">
                                                    <div class="dropdown-toggle" data-toggle="dropdown">&nbsp;{{node.nics | selectedToStr:'om_bussiness'}}</div>
                                                    <div class="dropdown-menu dropdown-select" role="menu" aria-labelledby="dLabel">
                                                        <div style="border:1px solid #ddd;line-height:25px;width:280px;">
                                                            <div style="padding:0 5px;height:30px;background-color: #60718d;color: #10f758;">
                                                                {{selectArr | selectedToStr:'om_bussiness'}}
                                                                <span class="caret" style="margin-top:10px;float:right;cursor:pointer;" class="dropdown-toggle" data-toggle="dropdown"></span>
                                                            </div>
                                                            <div style="cursor:pointer;background-color: #fff;color: #000;max-height: 100px;overflow-y:scroll;text-align:left">
                                                                <div ng-repeat="obj in selectArr" ng-click="selectRadio(obj, 'om_bussiness')">
                                                                    <input type="radio" style="margin:0 5px;padding:0;" ng-checked="obj.selected && obj.network=='om_bussiness'">
                                                                    <span width="50px">{{obj.name}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;{{obj.mac}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;状态:&nbsp;</span>
                                                                    <span style="color: green;" ng-show="{{obj.status == 'OK'}}">{{obj.status}}</span>
                                                                    <span style="color: red;" ng-show="{{obj.status != 'OK'}}">{{obj.status}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td width="120px">
                                                <div class="dropdown">
                                                    <div class="dropdown-toggle" data-toggle="dropdown" style="color: #ffcb00;">&nbsp;{{node.bussinessIP.ipaddr}}</div>
                                                    <div class="dropdown-menu dropdown-input" role="menu" aria-labelledby="dLabel">
                                                        <input type="text" ng-model="node.bussinessIP.ipaddr">
                                                    </div>
                                                </div>
                                            </td>
                                            <td width="120px">
                                                <div class="dropdown">
                                                    <div class="dropdown-toggle" data-toggle="dropdown" style="color: #ffcb00;">&nbsp;{{node.bussinessIP.netmask}}</div>
                                                    <div class="dropdown-menu dropdown-input" role="menu" aria-labelledby="dLabel">
                                                        <input type="text" ng-model="node.bussinessIP.netmask">
                                                    </div>
                                                </div>
                                            </td>
                                            <td width="120px" ng-show="isOmBizNetAndBizNetSharedNics">
                                                <div class="dropdown">
                                                    <div class="dropdown-toggle" data-toggle="dropdown" style="color: #ffcb00;">&nbsp;{{node.bussinessIP.gateway}}</div>
                                                    <div class="dropdown-menu dropdown-input" role="menu" aria-labelledby="dLabel">
                                                        <input type="text" ng-model="node.bussinessIP.gateway">
                                                    </div>
                                                </div>
                                            </td>

                                            <td width="280px" style="color: #00ff54;cursor: pointer;text-align:center;" ng-click="selectCell(node.nics, 'bussiness')"
                                            ng-show="!isBizNetAndClusterNetSharedNics">
                                                <div class="dropdown">
                                                    <div class="dropdown-toggle" data-toggle="dropdown">&nbsp;{{node.nics | selectedToStr:'bussiness'}}</div>
                                                    <div class="dropdown-menu dropdown-select" role="menu" aria-labelledby="dLabel">
                                                        <div style="border:1px solid #ddd;line-height:25px;width:280px;">
                                                            <div style="padding:0 5px;height:30px;background-color: #60718d;color: #10f758;">
                                                                {{selectArr | selectedToStr:'bussiness'}}
                                                                <span class="caret" style="margin-top:10px;float:right;cursor:pointer;" class="dropdown-toggle" data-toggle="dropdown"></span>
                                                            </div>
                                                            <div style="cursor:pointer;background-color: #fff;color: #000;max-height: 100px;overflow-y:scroll;text-align:left">
                                                                <div ng-repeat="obj in selectArr" ng-click="select(obj, 'bussiness')">
                                                                    <input type="checkbox" style="margin:0 5px;padding:0;" ng-checked="obj.selected && obj.network=='bussiness'">
                                                                    <span width="50px">{{obj.name}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;{{obj.mac}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;状态:&nbsp;</span>
                                                                    <span style="color: green;" ng-show="{{obj.status == 'OK'}}">{{obj.status}}</span>
                                                                    <span style="color: red;" ng-show="{{obj.status != 'OK'}}">{{obj.status}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td width="120px">
                                                <div class="dropdown">
                                                    <div class="dropdown-toggle" data-toggle="dropdown" style="color: #ffcb00;">&nbsp;{{node.clusterIP.ipaddr}}</div>
                                                    <div class="dropdown-menu dropdown-input" role="menu" aria-labelledby="dLabel">
                                                        <input type="text" ng-model="node.clusterIP.ipaddr">
                                                    </div>
                                                </div>
                                            </td>
                                            <td width="120px">
                                                <div class="dropdown">
                                                    <div class="dropdown-toggle" data-toggle="dropdown" style="color: #ffcb00;">&nbsp;{{node.clusterIP.netmask}}</div>
                                                    <div class="dropdown-menu dropdown-input" role="menu" aria-labelledby="dLabel">
                                                        <input type="text" ng-model="node.clusterIP.netmask">
                                                    </div>
                                                </div>
                                            </td>

                                            <td width="280px" style="color: #00ff54;cursor: pointer;text-align:center;" ng-click="selectCell(node.nics, 'cluster')">
                                                <div class="dropdown">
                                                    <div class="dropdown-toggle" data-toggle="dropdown">&nbsp;{{node.nics | selectedToStr:'cluster'}}</div>
                                                    <div class="dropdown-menu dropdown-select" role="menu" aria-labelledby="dLabel">
                                                        <div style="border:1px solid #ddd;line-height:25px;width:280px;">
                                                            <div style="padding:0 5px;height:30px;background-color: #60718d;color: #10f758;">
                                                                {{selectArr | selectedToStr:'cluster'}}
                                                                <span class="caret" style="margin-top:10px;float:right;cursor:pointer;" class="dropdown-toggle" data-toggle="dropdown"></span>
                                                            </div>
                                                            <div style="cursor:pointer;background-color: #fff;color: #000;max-height: 200px;overflow-y:scroll;text-align:left">
                                                                <div ng-repeat="obj in selectArr" ng-click="select(obj, 'cluster')">
                                                                    <input type="checkbox" style="margin:0 5px;padding:0;" ng-checked="obj.selected && obj.network=='cluster'">
                                                                    <span width="50px">{{obj.name}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;{{obj.mac}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;状态:&nbsp;</span>
                                                                    <span style="color: green;" ng-show="{{obj.status == 'OK'}}">{{obj.status}}</span>
                                                                    <span style="color: red;" ng-show="{{obj.status != 'OK'}}">{{obj.status}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td width="300px" style="color: #00ff54;cursor: pointer;text-align:center;" ng-click="selectCell(node.disks)">
                                                <div class="dropdown">
                                                    <div class="dropdown-toggle" data-toggle="dropdown">&nbsp;{{node.disks | selectedToStr2:'osddisk'}}</div>
                                                    <div class="dropdown-menu dropdown-select" role="menu" aria-labelledby="dLabel">
                                                        <div style="line-height:25px;width:300px;">
                                                            <div style="padding:0 5px;height:30px;background-color: #60718d;color: #10f758;">
                                                                {{selectArr | selectedToStr2:'osddisk'}}
                                                                <span class="caret" style="margin-top:10px;float:right;cursor:pointer;"></span>
                                                            </div>
                                                            <div style="cursor:pointer;background-color: #fff;color: #000;max-height: 200px;overflow-y:scroll;text-align:left;">
                                                                <div ng-repeat="disk in selectArr" ng-click="select2(disk, 'osddisk', node)">
                                                                    <input type="checkbox" style="margin:0 5px;padding:0;" ng-checked="disk.selected && disk.purpose=='osddisk'">
                                                                    <span>{{disk.name}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;类型:&nbsp;{{disk.type}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;容量:&nbsp;{{disk.capacity/1024 | GBorTB}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td width="300px" style="color: #00ff54;cursor: pointer;text-align:center;"
                                            ng-show="!isReadWriteCacheMix" ng-click="selectCell(node.disks)">
                                                <div class="dropdown">
                                                    <div class="dropdown-toggle" data-toggle="dropdown">&nbsp;{{node.disks | selectedToStr2:'writecache'}}</div>
                                                    <div class="dropdown-menu dropdown-select" role="menu" aria-labelledby="dLabel">
                                                        <div style="line-height:25px;width:300px;">
                                                            <div style="padding:0 5px;height:30px;background-color: #60718d;color: #10f758;">
                                                                {{selectArr | selectedToStr2:'writecache'}}
                                                                <span class="caret" style="margin-top:10px;float:right;cursor:pointer;"></span>
                                                            </div>
                                                            <div style="cursor:pointer;background-color: #fff;color: #000;max-height: 200px;overflow-y:scroll;text-align:left;">
                                                                <div ng-repeat="disk in selectArr" ng-click="select2(disk, 'writecache', node)">
                                                                    <input type="checkbox" style="margin:0 5px;padding:0;" ng-checked="disk.selected && disk.purpose=='writecache'">
                                                                    <span>{{disk.name}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;类型:&nbsp;{{disk.type}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;容量:&nbsp;{{disk.capacity/1024 | GBorTB}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td width="300px" style="color: #00ff54;cursor: pointer;text-align:center;"
                                            ng-show="!isReadWriteCacheMix" ng-click="selectCell(node.disks)">
                                                <div class="dropdown">
                                                    <div class="dropdown-toggle" data-toggle="dropdown">&nbsp;{{node.disks | selectedToStr2:'readcache'}}</div>
                                                    <div class="dropdown-menu dropdown-select" role="menu" aria-labelledby="dLabel">
                                                        <div style="line-height:25px;width:300px;">
                                                            <div style="padding:0 5px;height:30px;background-color: #60718d;color: #10f758;">
                                                                {{selectArr | selectedToStr2:'readcache'}}
                                                                <span class="caret" style="margin-top:10px;float:right;cursor:pointer;"></span>
                                                            </div>
                                                            <div style="cursor:pointer;background-color: #fff;color: #000;max-height: 200px;overflow-y:scroll;text-align:left;">
                                                                <div ng-repeat="disk in selectArr" ng-click="select2(disk, 'readcache', node)">
                                                                    <input type="checkbox" style="margin:0 5px;padding:0;" ng-checked="disk.selected && disk.purpose=='readcache'" id="{{disk.wwid + 'readcache'}}">
                                                                    <span>{{disk.name}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;类型:&nbsp;{{disk.type}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;容量:&nbsp;{{disk.capacity/1024 | GBorTB}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td width="300px" style="color: #00ff54;cursor: pointer;text-align:center;"
                                            ng-show="isReadWriteCacheMix" ng-click="selectCell(node.disks)">
                                                <div class="dropdown">
                                                    <div class="dropdown-toggle" data-toggle="dropdown">&nbsp;{{node.disks | selectedToStr2:'rwcache'}}</div>
                                                    <div class="dropdown-menu dropdown-select" role="menu" aria-labelledby="dLabel">
                                                        <div style="line-height:25px;width:300px;">
                                                            <div style="padding:0 5px;height:30px;background-color: #60718d;color: #10f758;">
                                                                {{selectArr | selectedToStr2:'rwcache'}}
                                                                <span class="caret" style="margin-top:10px;float:right;cursor:pointer;"></span>
                                                            </div>
                                                            <div style="cursor:pointer;background-color: #fff;color: #000;max-height: 200px;overflow-y:scroll;text-align:left;">
                                                                <div ng-repeat="disk in selectArr" ng-click="select2(disk, 'rwcache', node)">
                                                                    <input type="checkbox" style="margin:0 5px;padding:0;" ng-checked="disk.selected && disk.purpose=='rwcache'" id="{{disk.wwid + 'rwcache'}}">
                                                                    <span>{{disk.name}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;类型:&nbsp;{{disk.type}}</span>
                                                                    <span>&nbsp;&nbsp;&nbsp;容量:&nbsp;{{disk.capacity/1024 | GBorTB}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                        <div class="clearfix">
                           <button class="btn pull-right btn-primary" type="button" ng-click="createConfig()" ng-disabled="disablecreate" style="width:140px;margin:10px 0 10px 0;">
                                <img src="images/storage/pic_add.png">&nbsp;&nbsp;创建
                            </button>
                        </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 操作系统不支持Modal -->
<div id="osSupport" class="modal hide fade" style="background-color: #4f97dc;width:500px;left: 50%;"
tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header" style="font-size:15px;">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="osSupportCancel()">
            ×
        </button>
        <h3 id="myModalLabel" style="color:#fff;padding-top:20px;">
            警告
        </h3>
    </div>
    <div class="modal-body" style="background-color:#fff;">
        <p>
            <div class="span9" style="padding: 20px 10px 20px 10px;text-align:left;font-size:15px;color:black;width:440px;">
                <div>
                    <label>节点 {{osSupportShowObj.hostid}} 内核版本为: {{osSupportShowObj.versionName}}</label>
                </div>
                <br>
                <div ng-hide="osSupportShowObj.maxVersionSupport == '0'">
                    <label>暂不支持该内核版本!是否要继续设置{{osSupportShowObj.diskName}}作为缓存盘?</label>
                </div>
                <div ng-hide="osSupportShowObj.maxVersionSupport == '1'">
                    <label>暂不支持该内核版本!</label>
                </div>
                <br>
                <div>
                    <label>所支持内核版本列表如下:</label>
                </div>
                <div ng-repeat="kernelVersion in osSupportShowObj.kernelVersionSupportList">
                    <label>{{kernelVersion}}</label>
                </div>
            </div>
        </p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="osSupportClick()" aria-hidden="true" data-dismiss="modal" ng-disabled ="osSupportShowObj.maxVersionSupport == '0' ">
            继续
        </button>
        <button class="btn" data-dismiss="modal" aria-hidden="true" ng-click="osSupportCancel()">
            取消
        </button>
    </div>
</div>

<!-- 集群配置信息展示Modal -->
<div id="poolModal" class="modal hide fade" style="background-color: #4f97dc;" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header" style="font-size:15px;">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel" style="color:#fff;padding-top:20px;">{{modal.message}}</h3>
    <div style="margin-left:110px;margin-top:-25px;width:20px;height:20px;background:#4F97DC" ng-click="showFeatureSelected()"></div>
  </div>
  <div class="modal-body" style="background-color:#fff;padding:20px 50px 10px 50px;color:#97acc1;">
    <form style="margin-bottom: 5px; color:black;">
        <div ng-show="modal.to=='advancedOption'" style="color:black;margin-left:5px;">
            <div>
                <label class="span2">交换机配置端口聚合</label>
                <input type="radio" value="0" ng-model="nodeObj.cluster.bondingMode" style="margin-left:10px;"/>
                    <a title="优点：网络负载均衡性更好，性能最优&nbsp;&nbsp;缺点：需要配置交换机做端口聚合" style="color:black;">
                    是</a>
                <input type="radio" value="6" ng-model="nodeObj.cluster.bondingMode" style="margin-left:10px;"/>
                    <a title="优点：不需要对交换机进行配置&nbsp;&nbsp;缺点：网络负载均衡性稍差，性能稍差" style="color:black;">
                    否</a>
            </div>
            <br>
            <div>
                <label class="span4">iSCSI服务与内部网络共用网卡</label>
                <input type="radio" value="1" ng-model="nodeObj.cluster.bizNetAndClusterNetSharedNics"
                ng-click="networkingModeChanged(1)"  style="margin-left:10px;"/>
                <a title="iSCSI服务与内部网络使用相同的物理网卡，可能会影响性能" style="color:black;">
                    是</a>
                <input type="radio" value="0" ng-model="nodeObj.cluster.bizNetAndClusterNetSharedNics"
                ng-click="networkingModeChanged(0)"  style="margin-left:10px;"/>
                <a title="iSCSI服务与内部网络分别使用不同的物理网卡" style="color:black;">
                    否</a>
            </div>
            <br>
            <div>
                <label class="span4">管理系统与iSCSI服务网络共用网卡</label>
                <input type="radio" value="1" ng-model="nodeObj.cluster.omBizNetAndBizNetSharedNics"
                ng-click="omBizNetworkingModeChanged(1)"  style="margin-left:10px;"/>
                <a title="管理系统外部网络与iSCSI服务网络使用相同的物理网卡" style="color:black;">
                    是</a>
                <input type="radio" value="0" ng-model="nodeObj.cluster.omBizNetAndBizNetSharedNics"
                ng-click="omBizNetworkingModeChanged(0)"  style="margin-left:10px;"/>
                <a title="管理系统外部网络与iSCSI服务网络使用不同的物理网卡" style="color:black;">
                    否</a>
            </div>
            <br>
            <div>
                <label class="span4">读写共用缓存盘</label>
                <input type="radio" value="1" ng-model="nodeObj.cluster.isReadWriteCacheMix"
                ng-click="readWriteCacheMixChanged(1)"  style="margin-left:10px;"/>
                <a title="" style="color:black;">
                    是</a>
                <input type="radio" value="0" ng-model="nodeObj.cluster.isReadWriteCacheMix"
                ng-click="readWriteCacheMixChanged(0)"  style="margin-left:10px;"/>
                <a title="" style="color:black;">
                    否</a>
            </div>
            <br>
            <div>
                <label class="span2" >启用磁盘写加速</label>
                <input type="radio" value="1" ng-model="nodeObj.cluster.isSdsCacheWB" style="margin-left:10px;"/>
                <a style="color:black;">是</a>
                <input type="radio" value="0" ng-model="nodeObj.cluster.isSdsCacheWB" style="margin-left:10px;"/>
                <a style="color:black;">否</a>
            </div>
            <br>
            <div>
                <label class="span2">磁盘替换模式</label>
                <input type="radio" value="auto" ng-model="nodeObj.cluster.diskReplaceMode"
                ng-disabled="nodeObj.cluster.application.jzgk.selected == 1" style="margin-left:10px;">
                    <a title="当系统发现有磁盘被拔出并且有新的磁盘插入时，会自动使用新盘替换" style="color:black;">
                        自动
                    </a>
                </input>
                <input type="radio" value="manual" ng-model="nodeObj.cluster.diskReplaceMode"
                ng-disabled="nodeObj.cluster.application.jzgk.selected == 1" style="margin-left:10px">
                    <a title="由管理员手动选择用于替换的磁盘和被替换的磁盘" style="color:black;">
                        手动
                    </a>
                </input>
            </div>
            <br>
            <div>
                <label class="span2">节点名称前缀</label>
                <input type="text" id="nodeNamePrefix" ng-model="nodeObj.cluster.nodeNamePrefix"
                placeholder="仅支持以英文字母，长度为1-12"/>
            </div>
            <br>
            <div class="form-group">
                <label class="span2">应用场景</label>
                <select class="form-control" ng-model="appSelectValue" ng-change="appSelect()">
                    <option value="0">通用存储</option>
                    <option value="1">与集中管控对接</option>
                    <option value="2">与openstack对接</option>
                </select>
            </div>
            <div ng-show="nodeObj.cluster.application.jzgk.selected == 1">
                <div>
                    <label class="span2" for="datasize" style="color:black;float:left;margin-left:20px;">集中管控数据盘(MB)</label>
                    <input type="text" id="datasize" ng-model="nodeObj.cluster.application.jzgk.datasize"/>
                </div>
                <div>
                    <label class="span2" for="dbsize" style="color:black;float:left;margin-left:20px;">集中管控DB盘(MB)</label>
                    <input type="text" id="dbsize" ng-model="nodeObj.cluster.application.jzgk.dbsize"/>
                </div>
            </div>
            <br>
            <div ng-show="showAdvancedOption">
                <div>
                    <label class="span2" >启用EC</label>
                    <input type="radio" value="1" name="erasureCode" id="erasureCode" ng-model="nodeObj.cluster.policy.erasureCode" style="margin-left:10px;"/>
                    <a style="color:black;">是</a>
                    <input type="radio" value="0" name="erasureCode" id="erasureCode" ng-model="nodeObj.cluster.policy.erasureCode" style="margin-left:10px;"/>
                    <a style="color:black;">否</a>
                </div>
                <br>
                <div>
                    <label class="span2" for="journalNum" style="color:black;float:left;">日志分区</label>
                    <input type="text" id="journalNum" style="width: 80px" ng-model="nodeObj.cluster.osdJournalNum"/>
                </div>
                <div>
                    <label class="span2" >启用副本加速</label>
                    <input type="radio" value="1" ng-model="nodeObj.cluster.osdReplicateMode" style="margin-left:10px;"/>
                    <a style="color:black;">是</a>
                    <input type="radio" value="0" ng-model="nodeObj.cluster.osdReplicateMode" style="margin-left:10px;"/>
                    <a style="color:black;">否</a>
                </div>
                <br>
                <div>
                    <label class="span2" >OSD文件系统</label>
                    <input type="radio" value="xfs" ng-model="nodeObj.cluster.osdFilesystem" style="margin-left:10px;"/>
                    <a style="color:black;">xfs</a>
                    <input type="radio" value="ext4" ng-model="nodeObj.cluster.osdFilesystem" style="margin-left:10px;"/>
                    <a style="color:black;">ext4</a>
                </div>
                <br>
            </div>
        </div>
    </form>
    <!-- 加载中 -->
    <div class="spin"></div>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
  </div>
</div>
<!-- 存储池弹出框信息控制DIV展示完 -->

<script type="text/javascript">
    function addIpRange(){
        var o = document.getElementById("iprange");
        var o_contain = document.createElement("div");
        var divStart = document.createElement("div");
        divStart.className = "controls";
        var boxStart = document.createElement("input");
        boxStart.className = "ng-pristine ng-valid";
        boxStart.type = "text";
        boxStart.placeholder = "开始地址";
        boxStart.name = "startIpRangeList";
        divStart.appendChild(boxStart);
        o_contain.appendChild(divStart);
        var minus = document.createElement("div");
        minus.className = "icon-minus-sign";
        minus.setAttribute("onclick","ipRangeRemoveElement(this)")
        var add = document.createElement("div");
        add.className = "icon-plus-sign";
        add.setAttribute("onclick","addIpRange()")
        var divEnd = document.createElement("div");
        divEnd.className = "controls";
        var boxEnd = document.createElement("input");
        boxEnd.className = "ng-pristine ng-valid";
        boxEnd.type = "text";
        boxEnd.placeholder = "结束地址";
        boxEnd.name = "endIpRangeList";
        divEnd.appendChild(boxEnd);
        divEnd.appendChild(add);
        divEnd.appendChild(minus);
        o_contain.appendChild(divEnd);
        o.appendChild(o_contain);
    }
    function addIp(){
        var o = document.getElementById("ip");
        var div = document.createElement("div");
        div.class = "controls";
        var box = document.createElement("input");
        box.className = "ng-pristine ng-valid";
        box.type = "text";
        box.placeholder = "单IP地址";
        box.name = "ipList";
        var add = document.createElement("div");
        add.className = "icon-plus-sign";
        add.setAttribute("onclick","addIp()")
        var minus = document.createElement("div");
        minus.className = "icon-minus-sign";
        minus.setAttribute("onclick","ipRemoveElement(this)")
        div.appendChild(box);
        div.appendChild(add);
        div.appendChild(minus);
        o.appendChild(div);
    }
    function ipRemoveElement(_element){
        var _parentElement = _element.parentNode.parentNode;
        if(_parentElement){
            _parentElement.removeChild(_element.parentNode);
        }
    }
    function ipRangeRemoveElement(_element){
        var _parentElement = _element.parentNode.parentNode.parentNode;
        if(_parentElement){
            _parentElement.removeChild(_element.parentNode.parentNode);
        }
    }
</script>
