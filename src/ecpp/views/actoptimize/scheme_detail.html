<div id="scheme_detail_wizard">
  <!-- 第一步开始 -->
    <h2>方案基本信息</h2>
    <section>
      <form class="form-horizontal">
        <div class="form-group">
            <label class="col-md-3 control-label">方案名称</label>
            <div class="col-md-6">
                <input type="text" class="form-control">
            </div>
        </div>  
        <div class="form-group">
            <label class="col-md-3 control-label">方案内容</label>
            <div class="col-md-8">
                <textarea rows="3" cols="20" class="form-control"></textarea>
            </div>
        </div> 
        <div class="form-group">
            <label class="col-md-3 control-label">备注</label>
            <div class="col-md-8">
                <textarea rows="3" cols="20" class="form-control"></textarea>
            </div>
        </div> 
      </form>                     
    </section>
    <!-- 第一步结束 -->
    <!-- 第二步开始 -->
    <h2>选择客户群和渠道</h2>
    <section>
        <div class="row">
          <!-- 常用群组 -->
          <div class="col-md-6">
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title">常用群组</h3>
                    <ul class="panel-control">
                        <li><a class="minus" href="javascript:void(0)" title="伸缩"><i class="fa fa-minus"></i></a></li>
                    </ul>                      
                </div>
                <div class="panel-body">
                    <div class="scroll_normal">
                      <ul class="filter scheme_detail_filter_group clearfix">
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                      </ul>                          
                    </div>                   
                </div>
            </div>
          </div>
          <!-- 推荐群组 -->
          <div class="col-md-6">
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title">推荐群组</h3>
                    <ul class="panel-control">
                        <li><a class="minus" href="javascript:void(0)" title="伸缩"><i class="fa fa-minus"></i></a></li>
                    </ul>                      
                </div>
                <div class="panel-body">
                    <div class="scroll_normal">
                      <ul class="filter scheme_detail_filter_group clearfix">
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                        <li><a href="#"><span>广东省高学历已婚群一</span></a><i></i></li>
                      </ul>                          
                    </div>                   
                </div>
            </div>
          </div>
        </div>
        <div class="row">
          <!-- 选择客户群 -->
          <div class="col-md-6">
            <div class="panel panel-danger">
                <div class="panel-heading clearfix">
                  <h3 class="panel-title pull-left">已选择的客户群和渠道</h3>                      
                  <div class="form-inline pull-right">
                      <button class="btn btn-info btn-sm" type="button"><i class="fa fa-plus"></i> 新建群组</button>
                  </div>
                </div>
                <div class="panel-body">  
                  <div class="row">
                    <div class="col-md-6">
                      <form class="form-inline">
                          <select class="form-control">
                            <option>全部</option>
                            <option>常用</option>
                            <option>推荐</option>
                            <option>其他</option>
                          </select>
                          <select id="scheme_detail_myGroup_select" class="form-control" style="width:200px">
                            <option value="">请输入关键字快速搜索</option>
                              <option value="a" selected="selected">Item A</option>
                              <option value="b">Item B</option>
                            </optgroup>
                          </select>

                      </form> 
                      <ul class="itemStyle2">
                        <li>
                            <h5>广东省高学历已婚群一<span class="blue">(233位)</span></h5>
                            <div class="desc">
                            省份：<span class="red">"广东省"</span> <b class="blue">并且</b> 教育程度：<span class="red">"较高"</span> <b class="blue">并且</b> 婚姻状况：<span class="red">"已婚"</span> <b class="blue">并且</b> 家庭人数：<span class="red">"较少"</span> <b class="blue">并且</b> 家庭人数：<span class="red">"较少"</span>
                            </div>
                        </li>
                      </ul>   
                    </div>
                    <div class="col-md-6">
                      <!-- 操作栏 -->
                      <p>
                          <button class="btn btn-info btn-sm" type="button">
                              <i class="fa fa-plus"></i> 添加渠道 
                          </button>
                      </p>    

                      <div class="ls-table scheme_detail_channel_scroll">
                          <table class="table table-striped table-condensed noborder">
                              <tbody>
                                <tr>
                                  <th width="30%">渠道</th>
                                  <th>客户数</th>
                                  <th>成本(元)</th>
                                  <th></th>
                                </tr>
                                <tr>
                                  <td>
                                    <select class="form-control">
                                        <option value="1">微博</option>
                                        <option value="2">微信</option>
                                        <option value="3">短信</option>
                                        <option value="4">邮件</option>
                                        <option value="5">手机</option>
                                      </optgroup>
                                    </select>
                                  </td>
                                  <td><input type="text" class="form-control" disabled="disabled" value="2300"></td>
                                  <td><input type="text" class="form-control" /></td>
                                  <td><button title="删除" class="btn btn-xs btn-danger"><i class="fa fa-minus"></i></button></td>
                                </tr>
                                <tr>
                                  <td>
                                    <select class="form-control">
                                        <option value="1">微博</option>
                                        <option value="2">微信</option>
                                        <option value="3">短信</option>
                                        <option value="4">邮件</option>
                                        <option value="5">手机</option>
                                      </optgroup>
                                    </select>
                                  </td>
                                  <td><input type="text" class="form-control" value="2300" disabled="disabled" /></td>
                                  <td><input type="text" class="form-control" /></td>
                                  <td><button title="删除" class="btn btn-xs btn-danger"><i class="fa fa-minus"></i></button></td>
                                </tr>
                              </tbody>
                          </table>                    
                      </div>
                    </div>
                  </div> 
                </div>
            </div>
          </div>
          <!-- 图例 -->
          <div class="col-md-6">
            <div class="panel panel-warning">
                <div class="panel-heading">
                    <h3 class="panel-title">所选客户群图例</h3>
                </div>
                <div class="panel-body">
                  <div id="scheme_detail_user_chart" style="height:190px;"></div>
                </div>
            </div>
          </div>

        </div>

    </section>
    <!-- 第二步结束 -->
    <!-- 第三步开始 -->
    <h2>完成</h2>
    <section>
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-danger">
              <div class="panel-heading">
                  <h3 class="panel-title">您创建的方案</h3>
              </div>
              <div class="panel-body">
                <table class="table table-striped table-hover">
                    <tbody>
                      <tr>
                        <td>  
                          <ul>
                            <li class="fontbig">针对<span class="red">广东省高学历已婚群一</span>，客户数<span class="yellow">2300</span>，通过<span class="lightGreen">微信</span>渠道</li>
                            <li class="fontbig">针对<span class="red">购买高端手机的中高收入女性白领群</span>，客户数<span class="yellow">500</span>，通过<span class="lightGreen">微信</span>渠道</li>                                
                            <li>1.买活龙虾，送新春10-100元红包</li>
                            <li>2.买满100元送30元现金券</li>
                          </ul>                              
                        </td>
                      </tr>

                    </tbody>                    
                </table>
              </div>
          </div>
        </div>
      </div>
    </section>
    <!-- 第三步结束 -->
</div> 

<script type="text/javascript">

    // 上一步下一步初始化
    $("#scheme_detail_wizard").steps({
        cssClass: "wizard wizard4",
        headerTag: "h2",
        bodyTag: "section",
        transitionEffect: "slideLeft",
        // forceMoveForward: true, //用于是否激活上一步
        labels: {
          finish: "保存",
          next: "下一步",
          previous: "上一步",
      },
      onStepChanged: initEchart,
      onFinished: function () { 
        $("#tab_schemeList").trigger("click");
      }      
    });

    /*
    * 百度echarts
    */
    // 路径配置
    function initEchart(){

        require.config({
            paths: {
                echarts: 'assets/js/plugins/echarts'
            }
        });

        // 客户统计
        require(
            [
                'echarts',
                'echarts/theme/macarons', //加载主题macarons
                'echarts/chart/line' // 使用折线图，按需加载
            ],
            function (ec,theme) {
                // 基于准备好的dom，初始化echarts图表
                var scheme_detail_user_chart = ec.init(document.getElementById('scheme_detail_user_chart'),theme); 
                var option = {
                    tooltip : {
                        trigger: 'axis',
                        formatter: "{a} <br/>{b} : {c}位"
                    },
                    legend: {
                        data:['客户数']
                    },
                    calculable : true,
                    xAxis : [
                        {
                            type : 'category',
                            boundaryGap : false,
                            data : ['微信','微博','短信','邮件','手机']
                        }
                    ],
                    yAxis : [
                        {
                            type : 'value',
                            name : '客户数(位)'
                        }
                    ],
                    grid: {
                        x2: 20,
                        x: 50,
                        y2: 30,
                    },                    
                    series : [
                        {
                            name:'客户数',
                            type:'line',
                            smooth:true,
                            itemStyle: {normal: {areaStyle: {type: 'default'}}},
                            data:[100, 70, 150, 50, 88]
                        }
                    ]
                };      

                // 为echarts对象加载数据 
                scheme_detail_user_chart.setOption(option); 
            }
        );

    }

    // 选择客户群和渠道块滚动条
    $('.scheme_detail_channel_scroll').slimscroll({
      height: '150',
      alwaysVisible: true,
    }); 

    // 客户群下拉框初始化
    $('#scheme_detail_myGroup_select').selectize({
        sortField: {
            field: 'text',
        }
    }); 

    // 选中群组更换样式
    $(function(){
      $(".scheme_detail_filter_group > li").bind("click",function(){
        $(this).addClass("selected").siblings().removeClass("selected");

      })

    });

</script>
