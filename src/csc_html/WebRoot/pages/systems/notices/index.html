<div class="bg-light lter b-b wrapper-sm">
  <ol class="breadcrumb">
    <li>当前位置：</li>
    <li>系统</li>
    <li class="active">通知</li>
  </ol>
</div>
<div class='wrapper-md'>
  <div class="nav-tabs-alt bg-white-only">
    <ul class="nav nav-tabs" role="tablist">
      <li class="active" role="presentation">
        <a aria-controls="system" data-toggle="tab" href="#system" role="tab">系统通知</a>
      </li>
      <li role="presentation">
        <a aria-controls="message" data-toggle="tab" href="#message" role="tab">短信通知</a>
      </li>
      <li role="presentation">
        <a aria-controls="email" data-toggle="tab" href="#email" role="tab">邮件通知</a>
      </li>
    </ul>

    <div class="tab-content">
      <div class="tab-pane active" id="system" role="tabpanel">


        <div class="panel panel-default">

          <div class="row wrapper">
            <div class="col-md-1">
                <button class="btn btn-sm btn-info" data-bind="click: read">设为已阅</button>
            </div>
            <div class="col-md-3">
              <div class="input-group">
                <span class="input-group-addon">通知类型</span>
                <select class="form-control input-sm" data-bind="value: searchParam().catelog">
                  <option value="">全部</option>
                  <option value="">资源</option>
                </select>
              </div>      
            </div>          
            <div class="col-md-3">
                <div class="input-group">
                   <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                   <input type="text" class="form-control input-sm" id="system_daterange" data-bind="value: searchParam().daterange">
                </div>        
            </div>
            <div class="col-md-3">
                <div class="input-group">
                   <span class="input-group-addon">通知详情</span>
                   <input type="text" value="" class="form-control input-sm" data-bind="value: searchParam().content">
                </div>        
            </div>
            <div class="col-md-2">
                <button class="btn btn-sm" type="button" data-bind="click: reset">重置</button>
                <button class="btn btn-default btn-sm" type="submit" data-bind="click: search">搜索</button>
            </div>

          </div>          
          <div class="table-responsive" data-bind="with: table">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>
                    <div class="checkbox">
                      <label class="i-checks">
                        <input type="checkbox" data-bind="checked: isSelectedAll">
                        <i></i>
                      </label>
                    </div>                    
                  </th>
                  <th>通知标题</th>
                  <th>通知类别</th>
                  <th>通知详情</th>
                  <th>通知时间</th>
                  <th>状态</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                <tr data-bind="visible: showNoData">
                  <td colspan=7 class="aligncenter">
                    This table has no data.
                  </td>
                </tr>
                <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
                <tr>
                  <td>
                    <div class="checkbox">
                      <label class="i-checks">
                        <input type="checkbox" data-bind="checkedValue: $data, checked: $parent.chosenItems">
                        <i></i>
                      </label>
                    </div>
                  </td>
                  <td>订单待施工</td>
                  <td>资源待施工</td>
                  <td>资源iscsiVMare在2016-06-23 09:53:35时已被删除</td>
                  <td>2016-06-23 09:53:54</td>
                  <td><span class="label label-success">已阅</span><span class="label label-warning">未阅</span></td>
                  <td><a>设为已阅</a></td>
                </tr>
                <!-- /ko -->
              </tbody>
            </table>
          </div>
          <footer class="panel-footer" data-bind="with: table, visible: table.pages() > 1">
            <ul class="pagination">
              <li data-bind="css: leftPagerClass, click: prevPage">
                <a href="#">&laquo;</a>
              </li>
              <!-- ko foreach: {data: (new Array(pages()))} -->
              <li data-bind="css: $parent.pageClass($index() + 1)">
                <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
              </li>
              <!-- /ko -->
              <li data-bind="css: rightPagerClass, click: nextPage">
                <a href="#">&raquo;</a>
              </li>
            </ul>
          </footer>
        </div>

      </div>
      <div class="tab-pane" id="message" role="tabpanel">
        

        <div class="panel panel-default">

          <div class="row wrapper">
            <div class="col-md-3">
              <div class="input-group">
                <span class="input-group-addon">通知类型</span>
                <select class="form-control input-sm" data-bind="value: searchParam().catelog">
                  <option value="1">全部</option>
                  <option value="2">资源到期提醒</option>
                </select>
              </div>      
            </div>          
            <div class="col-md-3">
              <div class="input-group">
                <span class="input-group-addon">发送结果</span>
                <select class="form-control input-sm" data-bind="value: searchParam().status">
                  <option value="1">全部</option>
                  <option value="2">发送成功</option>
                </select>
              </div>      
            </div>          
            <div class="col-md-3">
                <div class="input-group">
                   <span class="input-group-addon">账号</span>
                   <input type="text" value="" class="form-control input-sm" data-bind="value: searchParam().account">
                </div>        
            </div>
            <div class="col-md-2">
                <button class="btn btn-sm" type="button" data-bind="click: reset">重置</button>
                <button class="btn btn-default btn-sm" type="submit" data-bind="click: search">搜索</button>
            </div>

          </div>
          <div class="table-responsive" data-bind="with: table">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>通知类型</th>
                  <th>短信内容</th>
                  <th>用户</th>
                  <th>账号</th>
                  <th>手机号码</th>
                  <th>发送结果</th>
                </tr>
              </thead>
              <tbody>
                <tr data-bind="visible: showNoData">
                  <td colspan=6 class="aligncenter">
                    This table has no data.
                  </td>
                </tr>
                <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
                <tr>
                  <td>资源到期提醒</td>
                  <td>资源zhansan申请截至2016年6月23日还有5天过期</td>
                  <td>张三</td>
                  <td>zhangsan</td>
                  <td>13631488888</td>
                  <td>发送成功</td>
                </tr>
                <!-- /ko -->
              </tbody>
            </table>
          </div>
          <footer class="panel-footer" data-bind="with: table, visible: table.pages() > 1">
            <ul class="pagination">
              <li data-bind="css: leftPagerClass, click: prevPage">
                <a href="#">&laquo;</a>
              </li>
              <!-- ko foreach: {data: (new Array(pages()))} -->
              <li data-bind="css: $parent.pageClass($index() + 1)">
                <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
              </li>
              <!-- /ko -->
              <li data-bind="css: rightPagerClass, click: nextPage">
                <a href="#">&raquo;</a>
              </li>
            </ul>
          </footer>
        </div>
      </div>
      <div class="tab-pane" id="email" role="tabpanel">           
        

        <div class="panel panel-default">
          <div class="row wrapper">
            <div class="col-md-3">
              <div class="input-group">
                <span class="input-group-addon">通知类型</span>
                <select class="form-control input-sm" data-bind="value: searchParam().catelog">
                  <option value="1">全部</option>
                  <option value="2">资源到期提醒</option>
                </select>
              </div>      
            </div>          
            <div class="col-md-3">
              <div class="input-group">
                <span class="input-group-addon">发送结果</span>
                <select class="form-control input-sm" data-bind="value: searchParam().status">
                  <option value="1">全部</option>
                  <option value="2">发送成功</option>
                </select>
              </div>      
            </div>          
            <div class="col-md-3">
                <div class="input-group">
                   <span class="input-group-addon">账号</span>
                   <input type="text" value="" class="form-control input-sm" data-bind="value: searchParam().account">
                </div>        
            </div>
            <div class="col-md-2">
                <button class="btn btn-sm" type="button" data-bind="click: reset">重置</button>
                <button class="btn btn-default btn-sm" type="submit" data-bind="click: search">搜索</button>
            </div>

          </div>
          <div class="table-responsive" data-bind="with: table">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>通知类型</th>
                  <th>邮件内容</th>
                  <th>用户</th>
                  <th>账号</th>
                  <th>邮箱</th>
                  <th>发送结果</th>
                </tr>
              </thead>
              <tbody>
                <tr data-bind="visible: showNoData">
                  <td colspan=6 class="aligncenter">
                    This table has no data.
                  </td>
                </tr>
                <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
                <tr>
                  <td>资源到期提醒</td>
                  <td>资源zhansan申请截至2016年6月23日还有5天过期</td>
                  <td>张三</td>
                  <td>zhangsan</td>
                  <td>zhangsan@winhong.com</td>
                  <td>发送成功</td>
                </tr>
                <!-- /ko -->
              </tbody>
            </table>
          </div>
          <footer class="panel-footer" data-bind="with: table, visible: table.pages() > 1">
            <ul class="pagination">
              <li data-bind="css: leftPagerClass, click: prevPage">
                <a href="#">&laquo;</a>
              </li>
              <!-- ko foreach: {data: (new Array(pages()))} -->
              <li data-bind="css: $parent.pageClass($index() + 1)">
                <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
              </li>
              <!-- /ko -->
              <li data-bind="css: rightPagerClass, click: nextPage">
                <a href="#">&raquo;</a>
              </li>
            </ul>
          </footer>
        </div>
      </div>

    </div>

  </div>
</div>

<!-- page specific plugin scripts -->
<script type="text/javascript">
  var scripts = [null, "assets/lib/moment/moment.js","assets/lib/bootstrap-daterangepicker/daterangepicker.js"]
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {

    // daterange             
    $('#system_daterange').val(moment().subtract('days', 29).format('YYYY/MM/DD') + ' 至 ' + moment().format('YYYY/MM/DD')).daterangepicker(
      {
        format:'YYYY/MM/DD',
        startDate: moment().subtract('days', 29),
        endDate: moment(),
        separator:'至',
        locale:{
          applyLabel: '确认',
          cancelLabel: '取消',
          fromLabel: '开始日期',
          toLabel: '结束日期',
          weekLabel: '周',
          customRangeLabel: '自定义范围',                            
          daysOfWeek:["日","一","二","三","四","五","六"],
          monthNames:['01月','02月','03月','04月','05月','06月','07月','08月','09月','10月','11月','12月',]
        },
        ranges: {
         '当天': [moment(), moment()],
         '昨天': [moment().subtract('days', 1), moment().subtract('days', 1)],
         '近7天': [moment().subtract('days', 6), moment()],
         '近30天': [moment().subtract('days', 29), moment()],
         '当月': [moment().startOf('month'), moment().endOf('month')],
         '上月': [moment().subtract('month', 1).startOf('month'), moment().subtract('month', 1).endOf('month')]
        }
      }
    ); 

    function ViewModel(){
      this.read = function(){

      }
      this.searchParam = ko.observable({
        catelog: '',
        daterange: '',
        content: '',
        status: '',
        account: ''
      })

      this.reset = function(){
        this.searchParam({
          catelog: '',
          daterange: '',
          content: '',
          status: '',
          account: ''
        })
      }
      this.search = function(){
        this.table.params(this.searchParam());
      }
      this.table = new DataTable([], {path: 'pages/systems/notices/index.json'})  
    }

    $("#page-content .tab-pane").each(function(index, item){
      ko.applyBindings(new ViewModel(), item);    
    })


  });
</script>