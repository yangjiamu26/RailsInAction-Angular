  <div class="panel panel-info">
    <div class="panel-heading">申请信息</div>
    <div id="orderDetailedList" class="wrapper">

          <h5 class="text-info">基本信息</h5>
          <div class='form-horizontal'>
            <div class="form-group">
              <label class="col-xs-1 control-label no-padder-h">云主机名称</label>
              <div class="col-xs-2">
                <input type="text" class="form-control" data-bind="value: currentVO().name"/>
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
              <label class="col-xs-1 control-label no-padder-h">所属VDC</label>
              <div class="col-xs-2">
                <select class="form-control input-sm" data-bind="value: currentVO().vdcId, options: $root.add_vdcs, optionsText: 'name', optionsValue: 'uuid',event: {change: $root.onchange_add_vdcs}"></select>
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
              <label class="col-xs-1 control-label no-padder-h">可用分区</label>
              <div class="col-xs-2">
                <select class="form-control input-sm" data-bind="value: currentVO().partition, options: $root.add_partitions, optionsText: 'name', optionsValue: 'uuid',event: {change: $root.onchange_add_partitions}"></select>
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
            </div>
            <div class="form-group">
              <label class="col-xs-1 control-label no-padder-h">操作系统类型</label>
              <div class="col-xs-2">
                <select class="form-control input-sm" data-bind="value: currentVO().systemType">
                  <option value="">1</option>
                </select>
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
              <label class="col-xs-1 control-label no-padder-h">操作系统版本</label>
              <div class="col-xs-2">
                <select class="form-control input-sm" data-bind="value: currentVO().systemVersion">
                  <option value="">1</option>
                </select>
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
              <label class="col-xs-1 control-label no-padder-h">CPU(个)</label>
              <div class="col-xs-2">
                <input type="text" class="form-control" data-bind="value: currentVO().vcpu"/>
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
            </div>
            <div class="form-group">
              <label class="col-xs-1 control-label no-padder-h">内存(GB)</label>
              <div class="col-xs-2">
                <input type="text" class="form-control" data-bind="value: currentVO().memory"/>
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
              <label class="col-xs-1 control-label no-padder-h">存储(GB)</label>
              <div class="col-xs-2">
                <input type="text" class="form-control" data-bind="value: currentVO().storage"/>
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
              <label class="col-xs-1 control-label no-padder-h">VPC/IP池</label>
              <div class="col-xs-2">
                <select class="form-control input-sm" data-bind="value: currentVO().ipPool, options: $root.add_vpcs, optionsText: 'name', optionsValue: 'uuid',event: {change: $root.onchange_add_vpcs}"></select>
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
            </div>
            <div class="form-group">
              <label class="col-xs-1 control-label no-padder-h">网络名称</label>
              <div class="col-xs-2">
                <select class="form-control input-sm" data-bind="value: currentVO().network, options: $root.add_networks, optionsText: 'name', optionsValue: 'originalId'"></select>
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
              <label class="col-xs-1 control-label no-padder-h">指定IP</label>
              <div class="col-xs-2">
                <input type="text" class="form-control" data-bind="value: currentVO().assignIp">
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
                <a href="#" class="text-info">选择</a>
              </div>
            </div>
            <div class="form-group">
              <label class="col-xs-1 control-label no-padder-h">主机账号</label>
              <div class="col-xs-2">
                <input type="text" class="form-control" data-bind="value: currentVO().account">
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
              <label class="col-xs-1 control-label no-padder-h">密码</label>
              <div class="col-xs-2">
                <input type="password" class="form-control" data-bind="value: currentVO().password">
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div> 
              <label class="col-xs-1 control-label no-padder-h">重复密码</label>
              <div class="col-xs-2">
                <input type="password" class="form-control" data-bind="value: currentVO().repeatPassword">
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
            </div>
            <div class="form-group">
              <label class="col-xs-1 control-label no-padder-h">绑定密钥</label>
              <div class="col-xs-2">
                <select class="form-control" data-bind="value: currentVO().isBind, options: $root.add_isBinds, optionsText: 'text', optionsValue: 'option', event: {change: $root.onchange_add_isBind}">
                </select>
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
              <div id="resource_instance_vm_add_ssh">
                <label class="col-xs-1 control-label no-padder-h">选择密钥</label>
                <div class="col-xs-2">
                  <select class="form-control input-sm" data-bind="value: currentVO().sshKey, options: $root.add_sshKeys, optionsText: 'name', optionsValue: 'uuid'"></select>
                </div>
                <div class="col-xs-1">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>
              </div>
            </div>
            <div class="form-group">
              <label class="col-xs-1 control-label no-padder-h">申请时长</label>
              <div class="col-xs-10">
                <label class="radio-inline" style="padding-top: 2px">
                  <input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1"> 永久
                </label>
                <label class="radio-inline">
                  <input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2" style="margin-top:10px"> 
                  <input type="text" class="form-control inline w-xxs">
                  <select class="form-control inline w-xs">
                    <option value="">月</option>
                  </select>  
                </label>
                <label class="radio-inline">
                  <input type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3" style="margin-top:10px"> 有效期至
                  <input type="text" value="" class="form-control inline w" id="vm_duration">
                </label>                                    
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
            </div>
            <div class="form-group">
              <label class="col-xs-1 control-label no-padder-h">套餐</label>
              <div class="col-xs-10">
                  <select class="form-control inline w-xs">
                    <option value="">包月</option>
                  </select>    
                  费用：100元/月                                
              </div>
              <div class="col-xs-1">
                <span class="text-danger inline m-l-n m-t-sm">*</span>
              </div>
            </div>
          </div>

          <div class="clear">
            <h5 class="text-info pull-left">挂载云硬盘</h5>
            <a href="#" class="pull-right text-info m-t-sm">添加硬盘</a>
          </div>
          <div class="table-responsive no-height">
              <table class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th>序号</th>
                    <th>云硬盘名称<span class="text-danger">*</span></th>
                    <th>存储大小(GB)<span class="text-danger">*</span></th>
                    <th>所属服务<span class="text-danger">*</span></th>
                    <th>申请时长</th>
                    <th>套餐</th>
                    <th>收费标准</th>
                    <th>操作</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td><input type="text" class="form-control input-sm"></td>
                    <td><input type="text" class="form-control input-sm"></td>
                    <td>
                       <input type="text" class="form-control inline input-sm w-sm m-r-sm"> <a href="#" class="text-info">选择</a>                      
                    </td>
                    <td>有效期至2017-06-22</td>
                    <td>
                      <select class="form-control">
                        <option value="">包月</option>
                      </select>                      
                    </td>
                    <td>0.5元/月</td>
                    <td><a href="#">删除</a></td>
                  </tr>
                </tbody>
              </table>
          </div>

          <div class="clear">
            <h5 class="text-info pull-left">安装软件</h5>
            <a href="#" class="pull-right text-info m-t-sm">添加软件</a>
          </div>
          <div class="table-responsive no-height">
            <table class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>软件名称</th>
                  <th>软件分类</th>
                  <th>软件类型</th>
                  <th>软件版本</th>
                  <th>静默安装属性</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>oracle</td>
                  <td>数据库</td>
                  <td>oracle</td>
                  <td>10g企业版</td>
                  <td>
                    <a class="expand-btn">查看 <i class="fa fa-angle-double-right"></i></a> |
                    <a class="expand-btn">修改 <i class="fa fa-angle-double-right"></i></a>
                  </td>
                  <td><a href="#">删除</a></td>
                </tr>
                <tr style="display: none">
                    <td colspan="7" class="no-padder">
                      <div class="b wrapper-sm">
                        <h5><i class="fa fa-minus fa-rotate-90 text-info"></i>静默安装属性</h5>
                        <div class="form-horizontal">
                          <div class="form-group">
                            <label class="col-xs-1 control-label">参数名称</label>
                            <div class="col-xs-3">
                              <input class="form-control" type="text" value="test1">
                            </div>
                            <label class="col-xs-1 control-label">参数代码</label>
                            <div class="col-xs-3">
                              <input class="form-control" type="text" value="test1">
                            </div>
                            <label class="col-xs-1 control-label">默认值</label>
                            <div class="col-xs-3">
                              <input class="form-control" type="text" value="test1">
                            </div>
                          </div>                        
                        </div>
                        <div class="wrapper-sm text-center"><button class="btn btn-sm btn-info">保存</button></div>
                      </div>                    
                    </td>
                </tr>                
              </tbody>
            </table>            
          </div>

          <div class="clear">
            <h5 class="text-info pull-left">系统盘分区</h5>
            <a href="#" class="pull-right text-info m-t-sm">添加分区</a>
          </div>
          <div class="table-responsive no-height">
            <table class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>分区名称</th>
                  <th>分区大小</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>NFS</td>
                  <td>100G</td>
                  <td><a href="#">修改</a> | <a href="#">删除</a></td>
                </tr>
              </tbody>
            </table>            
          </div>

          <h5 class="text-info">高级选项</h5>
          <div class="form-horizontal">
            <div class="form-group">
              <label class="col-xs-2 control-label">所属业务系统</label>
              <div class="col-xs-5">
                <select class="form-control">
                  <option value="">VDC1</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="col-xs-2 control-label">备注</label>
              <div class="col-xs-5">
                <textarea cols="5" rows="5" class="form-control"></textarea>
              </div>
            </div>            
          </div>

    </div>

<script type="text/javascript">
  var scripts = [null, "assets/lib/moment/moment.js","assets/lib/bootstrap-daterangepicker/daterangepicker.js", null];
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
	  
	  function ViewModel(){
	      var self = this;
    
		  this.currentVO = ko.validatedObservable({
	        id: ko.observable(),
	        instanceName: ko.observable("").extend({required: true}),
	        vdcId: ko.observable("").extend({required: true}),
	        partition: ko.observable().extend({required: true}),
	        systemType: ko.observable("").extend({required: true}),
	        systemVersion: ko.observable("").extend({required: true}),
	        vcpu: ko.observable("").extend({required: true}),
	        memory: ko.observable("").extend({required: true}),
	        storage: ko.observable("").extend({required: true}),
	        ipPool: ko.observable("").extend({required: true}),
	        network: ko.observable("").extend({required: true}),
	        assignIp: ko.observable("").extend({required: true}),
	        account: ko.observable("").extend({required: true}),
	        password: ko.observable("").extend({required: true}),
	        repeatPassword: ko.observable("").extend({required: true}),
	        isBind: ko.observable("").extend({required: true}),
	        sshKey: ko.observable("").extend({required: true})
	      });
		  
		  csc.rest.get('api/v5.0.0/workflows/tasks/'+args.taskId,function(data){
    	     var processInstanceId = data.taskInfo[0].processInstanceId;
			 //获取订单数据
	      	 csc.rest.get('api/v5.0.0/orders/flow/'+processInstanceId+'/items',function(data){
	      		 console.log(data);
	      		var vmData = data.vms[0];
	      		var vmObject = {
	      			name : vmData.instanceName,
	      			vcpu : vmData.vcpu
	      		}
			    self.currentVO(vmObject);
	      	 })
		  })
		  
	  }
	  ko.applyBindings(new ViewModel(), $('#page-content .tab-pane')[0]);

    $('#applyServiceVmBox_daterange').val(moment().subtract('days', 29).format('YYYY/MM/DD') + ' 至 ' + moment().format('YYYY/MM/DD')).daterangepicker(
          {
            format:'YYYY/MM/DD',
            startDate: moment().subtract('days', 29),
            endDate: moment(),
            separator:'至',
            locale:{
              applyLabel: '确认',
              cancelLabel: '取消',
              fromLabel: '开始日期',
              toLabel: '结束日期',
              weekLabel: '周',
              customRangeLabel: '自定义范围',                            
              daysOfWeek:["日","一","二","三","四","五","六"],
              monthNames:['01月','02月','03月','04月','05月','06月','07月','08月','09月','10月','11月','12月',]
            }
          }
        );

          // daterange             
          $('#vm_duration').val(moment().subtract('days', 29).format('YYYY/MM/DD') + ' 至 ' + moment().format('YYYY/MM/DD')).daterangepicker(
            {
              format:'YYYY/MM/DD',
              startDate: moment().subtract('days', 29),
              endDate: moment(),
              separator:'至',
              locale:{
                applyLabel: '确认',
                cancelLabel: '取消',
                fromLabel: '开始日期',
                toLabel: '结束日期',
                weekLabel: '周',
                customRangeLabel: '自定义范围',                            
                daysOfWeek:["日","一","二","三","四","五","六"],
                monthNames:['01月','02月','03月','04月','05月','06月','07月','08月','09月','10月','11月','12月',]
              },
              ranges: {
               '当天': [moment(), moment()],
               '昨天': [moment().subtract('days', 1), moment().subtract('days', 1)],
               '近7天': [moment().subtract('days', 6), moment()],
               '近30天': [moment().subtract('days', 29), moment()],
               '当月': [moment().startOf('month'), moment().endOf('month')],
               '上月': [moment().subtract('month', 1).startOf('month'), moment().subtract('month', 1).endOf('month')]
              }
            }

          ); 

    
        $(".expand-btn").click(function(){
          $(this).find('i').toggleClass("fa-angle-double-down");
          $(this).parents('tr').next("tr").toggle();
        });


  })
</script>