<div class="wrapper-md">
<div class="panel panel-info resouce-recovery">
    <div style="display:none" id="resource_delete_" class="panel-heading" >基本信息</div>
    <div style="display:none" id="resource_recycle_" class="panel-heading" >基本信息</div>
    <div id="orderDetailedList" class="wrapper">
      <div class="row">
        <div class="col-xs-4">资源名称：<span data-bind="text:resourceInfoVo().name"></span> <a class="link_in_detail" id="showDetail" data-bind="click:showDetail">查看</a></div>
        <div id="resource_vdc_" class="col-xs-4">所属VDC：<span data-bind="text:resourceInfoVo().vdcName"></span></div>
        <div class="col-xs-4">资源类型：<span data-bind="text:resourceInfoVo().typeText"></span></div>
      </div>
      <p>&nbsp;</p>
      <div class="row">
          <div class="col-xs-4" style="display:none" id="subsys">所属业务系统：<span data-bind="text:resourceInfoVo().busSysName"></span></div>
          <div id="resource_expiryDate_" class="col-xs-4">失效时间：<span data-bind="text:resourceInfoVo().expiryDate"></span></div>
          <div class="col-xs-4">施工状态：
             <span class="label label-warning" data-bind="if:resourceInfoVo().itemState()=='CONSTRUCTION_READY'">待施工</span>
             <span class="label label-info" data-bind="if:resourceInfoVo().itemState()=='CONSTRUCTION_DOING'">施工中</span>
             <span class="label label-success" data-bind="if:resourceInfoVo().itemState()=='CONSTRUCTION_SUCCESS'">施工成功</span>
             <span class="label label-danger" data-bind="if:resourceInfoVo().itemState()=='CONSTRUCTION_FAILED'">施工失败</span>
             <span data-bind="if:resourceInfoVo().itemState()=='CONSTRUCTION_FAILED'" id="construction_fail_"><a class="link_in_detail" data-bind="click:showWorkFailedMessage">失败原因</a></span> 
          </div>
      </div>
    </div>
    <!-- 云主机详情  start -->
    <div role="dialog" aria-hidden="true" class="modal fade " data-bind="modal: { show: showVmDetailModel }">
         <div class='modal-dialog modal-lg' style="width:600px;">
             <div class='modal-content'>
                <div class='modal-header'>
                  <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>资源信息</h3>
                </div>
                <div class='modal-body'>
                  <div class="order-base-info">
                    <div class="wrapper-sm"><h4 style="font-weight:bold;">云主机</h4></div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >云主机名称：</strong><span data-bind="text:resourceDetailVo().name"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>IP地址：</strong><span data-bind="text:resourceDetailVo().ip"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >状态：</strong><span data-bind="text:resourceDetailVo().runState"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>所属VDC：</strong><span data-bind="text:resourceDetailVo().vdcName"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >可用分区：</strong><span data-bind="text:resourceDetailVo().azName"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>所属VPC：</strong><span data-bind="text:resourceDetailVo().vpc"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >服务状态：</strong><span data-bind="text:resourceDetailVo().serviceState"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>有效期：</strong><span data-bind="text:resourceDetailVo().expiryDate"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >CPU：</strong><span data-bind="text:resourceDetailVo().cpu"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>内存：</strong><span data-bind="text:resourceDetailVo().memory"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >存储：</strong><span data-bind="text:resourceDetailVo().storage"></span></p>
                      </div>
                    </div>
                  </div>
               </div>
               <div class='modal-footer' style="text-align:center;">
                 <a class="btn btn-default btn btn-default" data-dismiss="modal">关闭</a>
               </div>
             </div>
         </div>
    </div>
    <!-- 云主机详情 end  -->
    
    <!-- 云硬盘详情  start -->
    <div role="dialog" aria-hidden="true" class="modal fade " data-bind="modal: { show: showDiskDetailModel }">
         <div class='modal-dialog modal-lg' style="width:600px;">
             <div class='modal-content'>
                <div class='modal-header'>
                  <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>资源信息</h3>
                </div>
                <div class='modal-body'>
                  <div class="order-base-info">
                    <div class="wrapper-sm"><h4 style="font-weight:bold;">云硬盘</h4></div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >云硬盘名称：</strong><span data-bind="text:resourceDetailVo().name"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>所属VDC：</strong><span data-bind="text:resourceDetailVo().vdcName"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >可用分区：</strong><span data-bind="text:resourceDetailVo().azName"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>大小：</strong><span data-bind="text:resourceDetailVo().diskSize"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >状态：</strong><span data-bind="text:resourceDetailVo().runState"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>服务状态：</strong><span data-bind="text:resourceDetailVo().serviceState"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >有效期：</strong><span data-bind="text:resourceDetailVo().expiryDate"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>关联云主机：</strong><span data-bind="text:resourceDetailVo().mountVm"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >路径：</strong><span data-bind="text:resourceDetailVo().path"></span></p>
                      </div>
                    </div>
                  </div>
               </div>
               <div class='modal-footer' style="text-align:center;">
                 <a class="btn btn-default btn btn-default" data-dismiss="modal">关闭</a>
               </div>
             </div>
         </div>
    </div>
    <!-- 云硬盘详情 end  -->
    
    <!-- 负载均衡器详情 start -->
    <div role="dialog" aria-hidden="true" class="modal fade " data-bind="modal: { show: showLoadBalancersDetailModel }">
         <div class='modal-dialog modal-lg' style="width:600px;">
             <div class='modal-content'>
                <div class='modal-header'>
                  <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>资源信息</h3>
                </div>
                <div class='modal-body'>
                  <div class="order-base-info">
                    <div class="wrapper-sm"><h4 style="font-weight:bold;">负载均衡器</h4></div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >负载均衡器名称：</strong><span data-bind="text:resourceDetailVo().name"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>所属VDC：</strong><span data-bind="text:resourceDetailVo().vdcName"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >可用分区：</strong><span data-bind="text:resourceDetailVo().azName"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>所属VPC：</strong><span data-bind="text:resourceDetailVo().vpc"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >网络：</strong><span data-bind="text:resourceDetailVo().netWork"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>协议：</strong><span data-bind="text:resourceDetailVo().protocol"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >负载方式：</strong><span data-bind="text:resourceDetailVo().loadWays"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>状态：</strong><span data-bind="text:resourceDetailVo().runState"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >VIP：</strong><span data-bind="text:resourceDetailVo().vip"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>VIP地址：</strong><span data-bind="text:resourceDetailVo().vipAddr"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >服务状态：</strong><span data-bind="text:resourceDetailVo().serviceState"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong >有效期：</strong><span data-bind="text:resourceDetailVo().expiryDate"></span></p>
                      </div>
                    </div>
                  </div>
               </div>
               <div class='modal-footer' style="text-align:center;">
                 <a class="btn btn-default btn btn-default" data-dismiss="modal">关闭</a>
               </div>
             </div>
         </div>
    </div>
    <!-- 负载均衡器详情 end -->
    
    <!-- 对象存储详情 start -->
    <div role="dialog" aria-hidden="true" class="modal fade " data-bind="modal: { show: showObjectStorageDetailModel }">
         <div class='modal-dialog modal-lg' style="width:600px;">
             <div class='modal-content'>
                <div class='modal-header'>
                  <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>资源信息</h3>
                </div>
                <div class='modal-body'>
                  <div class="order-base-info">
                    <div class="wrapper-sm"><h4 style="font-weight:bold;">对象存储</h4></div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >对象存储名称：</strong><span data-bind="text:resourceDetailVo().name"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>可用分区：</strong><span data-bind="text:resourceDetailVo().azName"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >所属VDC：</strong><span data-bind="text:resourceDetailVo().vdcName"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>总大小：</strong><span data-bind="text:resourceDetailVo().objectStorageTotalSize"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >已使用：</strong><span data-bind="text:resourceDetailVo().objectStorageUsedSize"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>剩余：</strong><span data-bind="text:resourceDetailVo().objectStorageFreeSize"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong>服务状态：</strong><span data-bind="text:resourceDetailVo().serviceState"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong >有效期：</strong><span data-bind="text:resourceDetailVo().expiryDate"></span></p>
                      </div>
                     </div>
               </div>
               <div class='modal-footer' style="text-align:center;">
                 <a class="btn btn-default btn btn-default" data-dismiss="modal">关闭</a>
               </div>
             </div>
         </div>
       </div>
    </div>
    <!-- 对象存储详情 end -->
    
    <!-- 公网IP详情 start -->
    <div role="dialog" aria-hidden="true" class="modal fade " data-bind="modal: { show: showPublicIpDetailModel }">
         <div class='modal-dialog modal-lg' style="width:600px;">
             <div class='modal-content'>
                <div class='modal-header'>
                  <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>资源信息</h3>
                </div>
                <div class='modal-body'>
                  <div class="order-base-info">
                    <div class="wrapper-sm"><h4 style="font-weight:bold;">公网IP</h4></div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >公网IP名称：</strong><span data-bind="text:resourceDetailVo().name"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>IP地址：</strong><span data-bind="text:resourceDetailVo().ip"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >子网掩码：</strong><span data-bind="text:resourceDetailVo().subNet"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>所属VDC：</strong><span data-bind="text:resourceDetailVo().vdcName"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong >可用分区：</strong><span data-bind="text:resourceDetailVo().azName"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong>所属VPC：</strong><span data-bind="text:resourceDetailVo().vpc"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong>路由器：</strong><span data-bind="text:resourceDetailVo().rounter"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong >云主机：</strong><span data-bind="text:resourceDetailVo().mountVm"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-7">
                       <p><strong>服务状态：</strong><span data-bind="text:resourceDetailVo().serviceState"></span></p>
                      </div>
                      <div class="col-xs-5">
                       <p><strong >有效期：</strong><span data-bind="text:resourceDetailVo().expiryDate"></span></p>
                      </div>
                    </div>
               </div>
               <div class='modal-footer' style="text-align:center;">
                 <a class="btn btn-default btn btn-default" data-dismiss="modal">关闭</a>
               </div>
             </div>
         </div>
       </div>
    </div>
    <!-- 公网IP详情 end -->
    
    <!-- ssh详情 start -->
    <div role="dialog" aria-hidden="true" class="modal fade " data-bind="modal: { show: showSshDetailModel }">
         <div class='modal-dialog modal-lg' style="width:600px;">
             <div class='modal-content'>
                <div class='modal-header'>
                  <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>资源信息</h3>
                </div>
                <div class='modal-body'>
                  <div class="order-base-info">
                    <div class="wrapper-sm"><h4 style="font-weight:bold;">SSH密钥</h4></div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-5">
                       <p><strong >SSH密钥名称：</strong><span data-bind="text:resourceDetailVo().name"></span></p>
                      </div>
                      <div class="col-xs-7">
                       <p><strong>指纹：</strong><span data-bind="text:resourceDetailVo().fingerprint"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-5">
                       <p><strong >可用分区：</strong><span data-bind="text:resourceDetailVo().azName"></span></p>
                      </div>
                      <div class="col-xs-7">
                       <p><strong>所属VDC：</strong><span data-bind="text:resourceDetailVo().vdcName"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-5">
                       <p><strong>服务状态：</strong><span data-bind="text:resourceDetailVo().serviceState"></span></p>
                      </div>
                      <div class="col-xs-7">
                       <p><strong>有效期：</strong><span data-bind="text:resourceDetailVo().expiryDate"></span></p>
                      </div>
                    </div>
                    <div class="wrapper-sm row">
                      <div class="col-xs-8">
                       <p><strong>公钥：</strong><span data-bind="text:resourceDetailVo().publicKeyString,attr:{title:resourceDetailVo().publicKey}"></span></p>
                      </div>
                    </div>
               </div>
               <div class='modal-footer' style="text-align:center;">
                 <a class="btn btn-default btn btn-default" data-dismiss="modal">关闭</a>
               </div>
             </div>
         </div>
       </div>
    </div>
    <!-- ssh详情 end -->
</div>
    
</div>


<!-- page specific plugin scripts -->
<script type="text/javascript">
    var scripts = [null, "assets/lib/moment/moment.js","assets/lib/bootstrap-daterangepicker/daterangepicker.js", null];
    $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
        function ViewModel(){
            
            var self = this;
            this.resourceInfoVo = ko.validatedObservable({
                name:ko.observable(""),
                typeText:ko.observable(""),
                vdcName:ko.observable(""),
                busSysName:ko.observable(""),
                expiryDate:ko.observable(""),
                resourceType:ko.observable(),
                itemState:ko.observable(""),
                resourceUuid:ko.observable()
            });
            var repConstructOrderItem=null;//重施工需要的orderItems值
            var workFailedMessage = "";
            this.loadData = function(){
                    csc.rest.get('api/v5.0.0/orders/byFlowInstanceUuid/'+args.flowInstanceId,function(data){
                        var operationType = data.type;
                        if (operationType=="RESOURCE_DELETE"){
                            $("#resource_delete_").css('display', 'block');//显示类型信息
                        }else{
                            $("#resource_recycle_").css('display', 'block');//显示类型信息
                        }
                        var resourceType = data.resourceType;
                        var orderItems = data.orderItems;
                        var operationType = data.type;
                        //获取订单详情
                        var orderItem = orderItems[0];
                        if(!csc.util.isNotNull(orderItem)) return;
                        var resourceUuid = orderItem.resourceUuid;
                        if(!csc.util.isNotNull(resourceUuid)) return;
                        workFailedMessage = orderItem.workFailedMessage;
                        var itemState = orderItem.itemState;  //施工状态，用于判断当为CONSTRUCTION_SUCCESS时，隐藏除了名称和类型的其他信息
                        repConstructOrderItem=orderItem;
                        var instanceName = orderItem.instanceName;
                        self.resourceInfoVo.fromJSON({
                            name:instanceName,
                            resourceType:resourceType,
                            itemState:itemState,
                            resourceUuid:resourceUuid
                        });
                        if(orderItems.length==0) return;
                        if(resourceType=="VM"){
                            $("#subsys").css('display', 'block');//显示业务系统
                            self.resourceInfoVo.fromJSON({
                                typeText:"云主机"
                            });
                            csc.rest.get('api/v5.0.0/vms/'+resourceUuid,function(vmData){
                                if(vmData){
                                    self.resourceInfoVo.fromJSON({
                                        expiryDate:vmData.expiryDate,
                                        vdcName:vmData.vdcName,
                                        busSysName:vmData.busSysName
                                    });
                                }
                           });
                            
                        }else if(resourceType=="PUBLICIP"){
                            self.resourceInfoVo.fromJSON({
                                typeText:"公网IP"
                            });
                            csc.rest.get("api/v5.0.0/publicIps/"+resourceUuid,function(data){
                                self.resourceInfoVo.fromJSON({
                                    expiryDate:data.expiryDate,
                                    vdcName:data.vdcName
                                });
                                
                            })
                        }else if(resourceType=="DISK"){
                            var metaData = orderItem.metaData;
                            if(!csc.util.isNotNull(metaData)) return;
                            var metaDataJson = JSON.parse(metaData);
                            var resBaseInfo = metaDataJson.resBaseInfo;
                            var resBaseInfoJson = JSON.parse(resBaseInfo);
                            var vmUuid = resBaseInfoJson.vmUuid;
                            self.resourceInfoVo.fromJSON({
                                typeText:"云硬盘"
                            });
                            if(!csc.util.isNotNull(vmUuid)) return;
                            csc.rest.get('api/v5.0.0/vms/'+vmUuid,function(vmData){
                               self.resourceInfoVo.fromJSON({
                                   expiryDate:vmData.expiryDate,
                                   vdcName:vmData.vdcName,
                                   busSysName:vmData.busSysName
                               });
                           });
                        }else if(resourceType=="OBJECT_STORAGE"){
                            self.resourceInfoVo.fromJSON({
                                typeText:"对象存储"
                            });
                            csc.rest.get('api/v5.0.0/objectStorages/'+resourceUuid,function(data){
                               self.resourceInfoVo.fromJSON({
                                   expiryDate:data.expiryDate,
                                   vdcName:data.vdcName
                               });
                           });
                        }else if(resourceType=="LOAD_BALANCING"){
                            self.resourceInfoVo.fromJSON({
                                typeText:"负载均衡器"
                            });
                            csc.rest.get('api/v5.0.0/loadBalancers/'+resourceUuid,function(data){
                                self.resourceInfoVo.fromJSON({
                                    expiryDate:data.expiredDate,
                                    vdcName:data.vdcName
                                });
                           });
                        } else if(resourceType=="SECRET_KEY"){
                            self.resourceInfoVo.fromJSON({
                                typeText:"SSH密钥"
                            });
                            csc.rest.get('api/v5.0.0/sshKeys/'+resourceUuid,function(data){
                                self.resourceInfoVo.fromJSON({
                                    expiryDate:data.expiryDate,
                                    vdcName:data.vdcName
                                });
                           });
                        }
                        
                        if(itemState=="CONSTRUCTION_SUCCESS"){
                            $("#resource_vdc_").css('display', 'none');
                            $("#resource_expiryDate_").css('display', 'none');
                            $("#showDetail").css('display', 'none');
                        }
                    });
            }
            self.loadData();
            
            this.showWorkFailedMessage = function(){
            	alert(workFailedMessage);
            }
            
            /***********************以下是查询详情*************************/
             this.resourceDetailVo = ko.validatedObservable({
                name:ko.observable(""),
                vdcName:ko.observable(""),
                expiryDate:ko.observable(""),
                runState:ko.observable(""),
                serviceState:ko.observable(""),
                ip:ko.observable(""),
                azName:ko.observable(""),
                vpc:ko.observable(""),
                
                busSysName:ko.observable(""),
                cpu:ko.observable(""),
                memory:ko.observable(""),
                storage:ko.observable(""),
                
                diskSize:ko.observable(""),
                mountVm:ko.observable(""),
                path:ko.observable(""),
                
                subNet:ko.observable(""),
                rounter:ko.observable(""),
                
                netWork:ko.observable(""),
                protocol:ko.observable(""),
                loadWays:ko.observable(""),
                vip:ko.observable(""),
                vipAddr:ko.observable(""),
                
                objectStorageTotalSize:ko.observable(""),
                objectStorageUsedSize:ko.observable(""),
                objectStorageFreeSize:ko.observable(""),
                
                fingerprint:ko.observable(""),
                publicKeyString:ko.observable(""),
                publicKey:ko.observable("")
                
            });
            this.showVmDetailModel = ko.observable(false);
            this.showDiskDetailModel = ko.observable(false);
            this.showLoadBalancersDetailModel = ko.observable(false);
            this.showObjectStorageDetailModel = ko.observable(false);
            this.showPublicIpDetailModel = ko.observable(false);
            this.showSshDetailModel = ko.observable(false);
            
            this.showDetail = function(data){
                var resourceType = data.resourceInfoVo().resourceType();
                if(!csc.util.isNotNull(resourceType)) return;
                var resourceUuid = data.resourceInfoVo().resourceUuid();
                var resourceUuid = data.resourceInfoVo().resourceUuid();
                var instanceName = data.resourceInfoVo().name();
                if(!csc.util.isNotNull(resourceUuid)) return;
                self.resourceDetailVo.fromJSON({
                    name:instanceName
                });
                if (resourceType=="VM"){//云主机详情
                    self.showVmDetailModel(true);
                    csc.rest.get('api/v5.0.0/vms/'+resourceUuid,function(data){

                        if(!data.uuid){return;}
                        
                        var state_ = data.state;
                        switch(state_)
                        {
                        case 'ACTIVE':
                            state_ = "运行中";
                          break;
                        case 'SHUTOFF':
                            state_ = "已关机";
                          break;
                        case 'SUSPENDED':
                            state_ = "已挂起";
                          break;
                        case 'POWERING_OFF':
                            state_ = "正在关机";
                          break;
                        case 'POWERING_ON':
                            state_ = "正在启动";
                          break;
                        case 'REBOOTING':
                            state_ = "正在重启";
                          break;
                        case 'REBOOTING_HARD':
                            state_ = "正在强制重启";
                          break;
                        case 'SUSPENDING':
                            state_ = "正在挂起";
                          break;
                        case 'RESUMING':
                            state_ = "正在恢复";
                          break;
                        case 'DELETING':
                            state_ = "正在删除";
                          break;
                        case 'RESIZING':
                            state_ = "正在调整";
                          break;
                        default:
                            state_ = "已挂起";
                        }
                        
                        var isValidate_ = data.isValidate;
                        if(isValidate_){
                            isValidate_ = "正常";
                        }else{
                            isValidate_ = "过期";
                        }
                        self.resourceDetailVo.fromJSON({
                            expiryDate:data.expiryDate,
                            vdcName:data.vdcName,
                            runState:state_,
                            serviceState:isValidate_,
                            ip:data.ip,
                            azName:data.azName,
                            cpu:data.vcpu+'个',
                            memory:data.memory+'G',
                            storage:data.storage+'G',
                            vpc:data.vpcName
                        });
                   });
                }else if (resourceType=="LOAD_BALANCING"){//负载均衡器详情
                    self.showLoadBalancersDetailModel(true);
                    csc.rest.get('api/v5.0.0/loadBalancers/'+resourceUuid,function(data){

                        if(!data.uuid){return;}
                        
                        var state_ = data.state;
                        if(state_=='ACTIVE'){
                            state_ = "运行中";
                        }else if(state_=='ERROR'){
                            state_ = "异常";
                        }else if(state_=='PENDING_CREATE'){
                            state_ = "正在创建";
                        }else if(state_=='PENDING_UPDATE'){
                            state_ = "正在修改";
                        }
                        var isValidate_ = data.isValidate;
                        if(isValidate_){
                            isValidate_ = "正常";
                        }else{
                            isValidate_ = "过期";
                        }
                        self.resourceDetailVo.fromJSON({
                            name:instanceName,
                            expiryDate:data.expiredDate,
                            vdcName:data.vdcName,
                            runState:state_,
                            serviceState:isValidate_,
                            netWork:data.networkName,
                            protocol:data.protocol,
                            loadWays:data.lbMethod,
                            azName:data.azName,
                            vip:data.vipName,
                            vipAddr:data.vipAddress,
                            vpc:data.vpcName
                        });
                   });
                }else if(resourceType=="OBJECT_STORAGE"){//对象存储
                    self.showObjectStorageDetailModel(true);
                    csc.rest.get('api/v5.0.0/objectStorages/'+resourceUuid,function(data){
                        
                        if(!data.uuid){return;}
                        
                        var isValidate_ = data.isValidate;
                        if(isValidate_){
                            isValidate_ = "正常";
                        }else{
                            isValidate_ = "过期";
                        }
                        var applySize = data.applySize;
                        var availableSize = data.availableSize;
                        var usedSize = parseInt(applySize)-parseInt(availableSize);
                        self.resourceDetailVo.fromJSON({
                            name:instanceName,
                            expiryDate:data.expiryDate,
                            vdcName:data.vdcName,
                            serviceState:isValidate_,
                            azName:data.azName,
                            objectStorageTotalSize:applySize+'G',
                            objectStorageUsedSize:usedSize+'G',
                            objectStorageFreeSize:availableSize+'G'
                        });
                   });
                }else if(resourceType=="PUBLICIP"){//公网IP
                    self.showPublicIpDetailModel(true);
                    csc.rest.get('api/v5.0.0/publicIps/'+resourceUuid,function(data){

                        if(!data.uuid){return;}
                        
                        var isValidate_ = data.isValidate;
                        if(isValidate_){
                            isValidate_ = "正常";
                        }else{
                            isValidate_ = "过期";
                        }
                        self.resourceDetailVo.fromJSON({
                            name:instanceName,
                            expiryDate:data.expiryDate,
                            vdcName:data.vdcName,
                            serviceState:isValidate_,
                            azName:data.azName,
                            mountVm:data.vmName,
                            ip:data.ip,
                            vpc:data.vpcName,
                            rounter:data.routerName
                        });
                   },function(){},null,true);
                }else if(resourceType=="DISK"){//云硬盘
                    self.showDiskDetailModel(true);
                    csc.rest.get('api/v5.0.0/volumes/'+resourceUuid,function(data){

                        if(!data.uuid){return;}
                        
                        /*****硬盘状态需要转换中文说明****/
                        var volumeStatus_ = data.volumeStatus;
                        /*****硬盘状态需要转换中文说明****/
                        var isValidate_ = data.isValidate;
                        if(isValidate_){
                            isValidate_ = "正常";
                        }else{
                            isValidate_ = "过期";
                        }
                        self.resourceDetailVo.fromJSON({
                            name:instanceName,
                            expiryDate:data.expiryDate,
                            vdcName:data.vdcName,
                            runState:volumeStatus_,
                            serviceState:isValidate_,
                            azName:data.azName,
                            mountVm:data.volumeServerName,
                            diskSize:data.volumeSize+'G',
                            vpc:data.vpcName,
                            rounter:data.routerName,
                            path:data.path
                        });
                   });
                }else if(resourceType=="SECRET_KEY"){//ssh密钥
                    self.showSshDetailModel(true);
                    csc.rest.get('api/v5.0.0/sshKeys/'+resourceUuid,function(data){

                        if(!data.uuid){return;}
                        
                        /*****硬盘状态需要转换中文说明****/
                        var volumeStatus_ = data.volumeStatus;
                        /*****硬盘状态需要转换中文说明****/
                        var isValidate_ = data.isValidate;
                        if(isValidate_){
                            isValidate_ = "正常";
                        }else{
                            isValidate_ = "过期";
                        }
                        var publicKeyString_="";
                        if(data.publicKey){
                            publicKeyString_ = data.publicKey.substring(0,25)+'....';
                        }
                        self.resourceDetailVo.fromJSON({
                            name:instanceName,
                            vdcName:data.vdcName,
                            azName:data.azName,
                            fingerprint:data.fingerprint,
                            publicKey:data.publicKey,
                            publicKeyString:publicKeyString_,
                            serviceState:isValidate_,
                            expiryDate:data.expiryDate
                        });
                   });
                }
            }
        }
    	ko.applyBindings(new ViewModel(), $('#orderDetailContent_')[0]);  
        
    });
</script>