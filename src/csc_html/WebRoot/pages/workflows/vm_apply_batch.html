
  <div class="panel panel-info" id="applyContent">
    <div class="panel-heading">申请信息</div>
    <div id="orderDetailedList" class="wrapper">
      <h5 class="text-info">云主机数：2</h5>
      <div class="table-responsive no-height">
          <table class="table">
              <thead>
                  <tr>
                      <th>云主机名称</th>
                      <th>操作系统版本</th>
                      <th>CPU(个)</th>
                      <th>内存(GB)</th>
                      <th>存储(GB)</th>
                      <th>所属VDC</th>
                      <th>VPC/IP池</th>
                      <th>挂载云硬盘个数</th>
                      <th>云软件数</th>
                      <th>申请时长</th>
                      <th>操作</th>
                  </tr>
              </thead>
              <tbody data-bind="foreach: vms">
                  <tr>
                      <td data-bind="text: instanceName"></td>
                      <td data-bind="text: operationSystem"></td>
                      <td data-bind="text: vcpu"></td>
                      <td data-bind="text: memorySize"></td>
                      <td data-bind="text: diskSize"></td>
                      <td data-bind=""></td>
                      <td data-bind=""></td>
                      <td data-bind=""></td>
                      <td data-bind=""></td>
                      <td data-bind="text: expireTime"></td>
                      <td>
                          <a class="expand-btn" onclick="expand(this)">查看 <i class="fa fa-angle-double-right"></i></a>
                      </td>
                  </tr>
                  <tr style="display: none">
                   <td colspan="11" class="no-padder">
                      <div class="b wrapper-sm">
                        <h5><i class="fa fa-minus fa-rotate-90 text-info"></i>基本信息</h5>
                        <div class="bg-light b-t b-b wrapper-sm">
                          <div class="row m-b">
                            <div class="col-xs-1 font-bold">云主机名称：</div>
                            <div class="col-xs-3" data-bind="text: instanceName"></div>
                            <div class="col-xs-1 font-bold">所属VDC：</div>
                            <div class="col-xs-3" data-bind="text: instanceName"></div>
                            <div class="col-xs-1 font-bold">可用分区：</div>
                            <div class="col-xs-3"></div>
                          </div>
                          <div class="row m-b">
                            <div class="col-xs-1 font-bold">操作系统类型：</div>
                            <div class="col-xs-3" data-bind="text: operationSystem"></div>
                            <div class="col-xs-1 font-bold">操作系统版本：</div>
                            <div class="col-xs-3" data-bind="text: osVersion"></div>
                            <div class="col-xs-1 font-bold">CPU(个)：</div>
                            <div class="col-xs-3" data-bind="text: vcpu"></div>
                          </div>
                          <div class="row m-b">
                            <div class="col-xs-1 font-bold">内存(GB)：</div>
                            <div class="col-xs-3" data-bind="text: memorySize"></div>
                            <div class="col-xs-1 font-bold">存储(GB)：</div>
                            <div class="col-xs-3" data-bind="text: diskSize"></div>
                            <div class="col-xs-1 font-bold">VPC/IP池：</div>
                            <div class="col-xs-3"></div>
                          </div>
                          <div class="row m-b">
                            <div class="col-xs-1 font-bold">网络名称：</div>
                            <div class="col-xs-3">208</div>
                            <div class="col-xs-1 font-bold">指定IP：</div>
                            <div class="col-xs-3" data-bind="text: ip"></div>
                            <div class="col-xs-1 font-bold">主机账号：</div>
                            <div class="col-xs-3" data-bind="text: userName"></div>
                          </div>
                          <div class="row m-b">
                            <div class="col-xs-1 font-bold">绑定密钥：</div>
                            <div class="col-xs-3">无</div>
                            <div class="col-xs-1 font-bold">选择密钥：</div>
                            <div class="col-xs-3">密钥1</div>
                            <div class="col-xs-1 font-bold">申请时长：</div>
                            <div class="col-xs-3">1个月</div>
                          </div>
                          <div class="row m-b">
                            <div class="col-xs-1 font-bold">套餐：</div>
                            <div class="col-xs-3">包月</div>
                            <div class="col-xs-1 font-bold">费用：</div>
                            <div class="col-xs-3">100元/月</div>
                          </div>
                        </div>            

                        <h5><i class="fa fa-minus fa-rotate-90 text-info"></i>挂载云硬盘</h5>
                        <div class="table-responsive no-height">
                            <table class="table table-striped table-hover">
                              <thead>
                                <tr>
                                  <th>序号</th>
                                  <th>云硬盘名称</th>
                                  <th>存储大小(GB)</th>
                                  <th>所属服务</th>
                                  <th>申请时长</th>
                                  <th>套餐</th>
                                  <th>收费标准</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <td>1</td>
                                  <td>云硬盘1</td>
                                  <td>200</td>
                                  <td>云服务1</td>
                                  <td>有效期至2017-06-22</td>
                                  <td>包月</td>
                                  <td>0.5元/月</td>
                                </tr>
                              </tbody>
                            </table>
                        </div>    

                        <h5><i class="fa fa-minus fa-rotate-90 text-info"></i>安装软件</h5>
                        <div class="table-responsive no-height">
                          <table class="table table-striped table-hover">
                            <thead>
                              <tr>
                                <th>软件名称</th>
                                <th>软件分类</th>
                                <th>软件类型</th>
                                <th>软件版本</th>
                                <th>静默安装属性</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>oracle</td>
                                <td>数据库</td>
                                <td>oracle</td>
                                <td>10g企业版</td>
                                <td>
                                  <a class="expand-btn-detail">查看 <i class="fa fa-angle-double-right"></i></a>
                                </td>
                              </tr>
                              <tr style="display: none">
                                  <td colspan="7" class="no-padder">
                                    <div class="wrapper-sm sub-detail" style="display: none">
                                      <h5 class="text-info">静默安装属性</h5>
                                      <div class="bg-light b-t b-b wrapper-sm">
                                        <div class="row m-b">
                                          <div class="col-xs-1">参数名称：</div>
                                          <div class="col-xs-3">15137</div>
                                          <div class="col-xs-1">参数代码：</div>
                                          <div class="col-xs-3">abc</div>
                                          <div class="col-xs-1">默认值：</div>
                                          <div class="col-xs-3">000</div>
                                        </div>
                                      </div>                                      
                                    </div>                    
                                  </td>
                              </tr>                
                            </tbody>
                          </table>            
                        </div>          

                        <h5><i class="fa fa-minus fa-rotate-90 text-info"></i>系统盘分区</h5>
                        <table class="table table-striped table-hover">
                          <thead>
                            <tr>
                              <th>分区名称</th>
                              <th>分区大小</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>NFS</td>
                              <td>100G</td>
                            </tr>
                          </tbody>
                        </table> 

                        <h5><i class="fa fa-minus fa-rotate-90 text-info"></i>高级选项</h5>
                        <div class="bg-light b-t b-b wrapper-sm">
                          <div class="row m-b">
                            <div class="col-xs-1">所属业务系统：</div>
                            <div class="col-xs-3">15137</div>
                            <div class="col-xs-1">备注：</div>
                            <div class="col-xs-7">abc</div>
                          </div>
                        </div> 

                      </div>
                    </td>
                  </tr>
              </tbody>
          </table>
      </div>

</div>
    </div>

<script type="text/javascript">
	var scripts = [null, null];
	$('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
		
		function currentVO(){
		  var self = this;
		  
		  this.vms = ko.observable("");
		  csc.rest.get('api/v5.0.0/workflows/tasks/'+args.taskId,function(data){
    	     var processInstanceId = data.taskInfo[0].processInstanceId;
			 //获取订单数据
	      	 csc.rest.get('api/v5.0.0/orders/flow/'+processInstanceId+'/items',function(data){
	      		self.vms(data.vms);
	      	 })
		  })
		}
		ko.applyBindings(new currentVO(), $('#applyContent')[0]); 
		
		
		var showItems = args.items.split('-');
		var orderDetailedList = $("#orderDetailedList");
		$.each($("#orderDetailedList > div"),function(n,v){
			var hasItem = false;
			$.each(showItems,function(a,b){
				if($(v).attr("item").indexOf(b) > -1)
					hasItem = true;
			});
			if(!hasItem)
				$(this).remove();
		});
	});
	
	function expand(obj){
      $(obj).find('i').toggleClass("fa-angle-double-down");
      $(obj).parents('tr').next("tr").toggle();
	}
</script>



