<div class="panel panel-info">
    <div class="panel-heading">申请信息</div>
    <div id="orderDetailedList" class="wrapper">
      <h5 class="text-info">云主机数：<span data-bind="text:currentVO().vmApplyList().length"></span></h5>
      <div class="table-responsive no-height">
          <table class="table" id="vmApplyApproveVmTable">
              <thead>
                  <tr>
                      <th>云主机名称</th>
                      <th>操作系统版本</th>
                      <th>CPU(个)</th>
                      <th>内存(GB)</th>
                      <th>存储(GB)</th>
                      <th>所属VDC</th>
                      <th>VPC/IP池</th>
                      <th>挂载云硬盘个数</th>
                      <!-- <th>云软件数</th> -->
                      <th>申请时长</th>
                      <th>操作</th>
                  </tr>
              </thead>
              <tbody data-bind="foreach:currentVO().vmApplyList">
                  <tr >
                      <td><span data-bind="text:instanceName"></span></td>
                      <td><span data-bind="text:osVersionName"></span></td>
                      <td><span data-bind="text:vcpu"></span></td>
                      <td><span data-bind="text:memory"></span></td>
                      <td><span data-bind="text:storage"></span></td>
                      <td><span data-bind="text:vdcName"></span></td>
                      <td><span data-bind="text:vpcName"></span></td>
                      <td><span data-bind="text:mountDiskList().length"></span></td>
                     <!--  <td><span data-bind="text:softNum"></span></td> -->
                      <td><span data-bind="text:expireText"></span></td>
                      <td>
                          <a class="expand-btn" >查看 <i class="fa fa-angle-double-right"></i></a>
                      </td>
                  </tr>
                  <tr style="display: none">
                    <td colspan="11" class="no-padder">
                      <div class="b wrapper-sm">
									<h5>
										<i class="fa fa-minus fa-rotate-90 text-info"></i>基本信息
									</h5>
									<div class="bg-light b-t b-b wrapper-sm">
										<div class="row m-b">
											<div class="col-xs-1 font-bold">云主机名称：</div>
											<div class="col-xs-3">
												<span data-bind="text:instanceName"></span>
											</div>
											<div class="col-xs-1 font-bold">所属VDC：</div>
											<div class="col-xs-3">
												<span data-bind="text:vdcName"></span>
											</div>
											<div class="col-xs-1 font-bold">可用分区：</div>
											<div class="col-xs-3">
												<span data-bind="text:azName"></span>
											</div>
										</div>
										<div class="row m-b">
											<div class="col-xs-1 font-bold">操作系统类型：</div>
											<div class="col-xs-3">
												<span data-bind="text:osType"></span>
											</div>
											<div class="col-xs-1 font-bold">操作系统版本：</div>
											<div class="col-xs-3">
												<span data-bind="text:osVersionName"></span>
											</div>
											<div class="col-xs-1 font-bold">CPU(个)：</div>
											<div class="col-xs-3">
												<span data-bind="text:vcpu"></span>
											</div>
										</div>
										<div class="row m-b">
											<div class="col-xs-1 font-bold">内存(GB)：</div>
											<div class="col-xs-3">
												 <span data-bind="text:memory"></span>
											</div>
											<div class="col-xs-1 font-bold">存储(GB)：</div>
											<div class="col-xs-3">
												<span data-bind="text:storage"></span>
											</div>
											<div class="col-xs-1 font-bold">VPC/IP池：</div>
											<div class="col-xs-3">
												<span data-bind="text:vpcName"></span>
											</div>
										</div>
										<div class="row m-b">
											<div class="col-xs-1 font-bold">网络名称：</div>
											<div class="col-xs-3">
												<span data-bind="text:networkName"></span>
											</div>
											<div class="col-xs-1 font-bold">指定IP：</div>
											<div class="col-xs-3">
												<span  data-bind="text:ip"></span>
											</div>
											<div class="col-xs-1 font-bold">主机账号：</div>
											<div class="col-xs-3">
												<span data-bind="text:account"></span>
											</div>
										</div>
										<div class="row m-b">
											<div class="col-xs-1 font-bold">选择密钥：</div>
											<div class="col-xs-3">
												<span data-bind="text:sshKeyName"></span>
											</div>
											<div class="col-xs-1 font-bold">申请时长：</div>
											<div class="col-xs-3">
												<span data-bind="text:expireText"></span>
											</div>
										</div>
										<div class="row m-b">
											<div class="col-xs-1 font-bold">套餐：</div>
											<div class="col-xs-3">
												<span data-bind="text:billCycleText"></span>
											</div>
											<div class="col-xs-1 font-bold">费用：</div>
											<div class="col-xs-3">
												<span  data-bind="text:fee"></span>
											</div>
										</div>
									</div>
								     
								    <h5><i class="fa fa-minus fa-rotate-90 text-info"></i>挂载云硬盘</h5>
				                        <div class="table-responsive no-height">
				                            <table class="table table-striped table-hover">
				                              <thead>
				                                <tr>
				                                  <th>序号</th>
				                                  <th>云硬盘名称</th>
				                                  <th>存储大小(GB)</th>
				                                  <th>所属服务</th>
				                                  <th>申请时长</th>
				                                  <th>套餐</th>
				                                  <th>收费标准</th>
				                                </tr>
				                              </thead>
				                              <tbody data-bind="foreach:mountDiskList">
				                                <tr>
				                                  <td><span data-bind="text: ($index()+1)"></span></td>
				                                  <td><span data-bind="text:instanceName"></span></td>
				                                  <td><span data-bind="text:volumeSize"></span></td>
				                                  <td><span data-bind="text:serviceName"></span></td>
				                                  <td><span data-bind="text:expireText"></span></td>
				                                  <td><span data-bind="text:billCycleText"></span></td>
				                                  <td><span data-bind="text:fee"></span></td>
				                                </tr>
				                              </tbody>
				                            </table>
				                        </div>    
								
										<h5><i class="fa fa-minus fa-rotate-90 text-info"></i>安装软件</h5>
				                        <div class="table-responsive no-height">
				                          <table class="table table-striped table-hover">
				                            <thead>
				                              <tr>
				                                <th>软件名称</th>
				                                <th>软件分类</th>
				                                <th>软件类型</th>
				                                <th>软件版本</th>
				                                <th>静默安装属性</th>
				                              </tr>
				                            </thead>
				                            <tbody data-bind="foreach:softwareList">
				                              <tr>
				                                  <td data-bind="text:name"></td>
							                      <td data-bind="text:softType"></td>
							                      <td data-bind="text:softTypeName"></td>
							                      <td data-bind="text:version"></td>
							                      <td><a class="btn btn-xs btn-default" data-bind="click:function(data,event){$root.showAttr_VM(true,data,event)}">查看</a></td>
				                              </tr>
				                            </tbody>
				                          </table>            
				                        </div>          
				
				                     <!--    <h5><i class="fa fa-minus fa-rotate-90 text-info"></i>系统盘分区</h5>
				                        <table class="table table-striped table-hover">
				                          <thead>
				                            <tr>
				                              <th>分区名称</th>
				                              <th>分区大小</th>
				                            </tr>
				                          </thead>
				                          <tbody>
				                            <tr>
				                              <td>NFS</td>
				                              <td>100G</td>
				                            </tr>
				                          </tbody>
				                        </table>  -->
				
				                        <h5><i class="fa fa-minus fa-rotate-90 text-info"></i>高级选项</h5>
				                        <div class="bg-light b-t b-b wrapper-sm">
				                          <div class="row m-b">
				                            <div class="col-xs-1">所属业务系统：</div>
				                            <div class="col-xs-3"><span data-bind="text:busSysName"></span></div>
				                            <div class="col-xs-1">备注：</div>
				                            <div class="col-xs-7"></div>
				                          </div>
				                        </div> 
                      </div>
                    </td>
                  </tr>
              </tbody>
          </table>
      </div>
    </div>
</div>


 <!-- 查看/修改软件参数 --> 
   <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: showSoftwareAttr , backdrop: 'static'}"> 
     <div class='modal-dialog modal-lg' role='document'> 
       <div class='modal-content'> 
         <div class='modal-header'> 
           <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>静默安装属性</h3> 
         </div> 
         <div class='modal-body form-horizontal'> 
           <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px"> 
            <table class="table table-striped"> 
              <thead> 
                <th>参数名称<i style="color:red">*</i></th> 
                <th>参数代码<i style="color:red">*</i></th> 
                <th>默认值<i style="color:red">*</i></th> 
				<th>修改值</th> 
              </thead> 
              <tbody  data-bind="foreach: $root.attrList_VM"> 
                <tr>
                <td data-bind="text:name"></td>
                <td data-bind="text:code"></td>
                <td data-bind="text:defaultValue"></td>
                <td data-bind="text:value"></td>
                </tr> 
              </tbody> 
            </table> 
          </div> 
        </div> 
        <div class='modal-footer' style="text-align:center;"> 
           <a class="btn btn-default btn btn-default" data-dismiss="modal">关闭</a> 
         </div> 
       </div> 
     </div> 
   </div> 
   <!-- 查看/修改软件参数 -->

<script type="text/javascript">
	var scripts = ["api/resourceInstance/sshkey/sshkey.js", null];
	$('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
		 csc.rest.get('api/v5.0.0/workflows/tasks/'+args.taskId,function(data){
	   	     var processInstanceId = data.taskInfo[0].processInstanceId;
	      	 csc.rest.get('api/v5.0.0/orders/byFlowInstanceUuid/'+processInstanceId,function(orderData){   //获取订单数据
	      	  
	      	 console.log("orderData------------------",orderData);
	      	 
	      		 
	      	  function ViewModel(){
	      	      var self = this;
	      	      this.currentVO = ko.validatedObservable({
	      	    	     vmApplyList : ko.observableArray([]),
	      	             diskApplyList : ko.observableArray([])
	      	      });
	      	    
	      	      function getServiceRelationInfo(callback,serviceUuid,vmInParamData,callbackCustParam){//获取服务关联的信息
	      	    	  var uri="serviceUuid="+serviceUuid+"&vdcUuid="+vmInParamData.vdcUuid+"&azUuid="+vmInParamData.azUuid+"&vpcUuid="+vmInParamData.vpcUuid+"&osType="+vmInParamData.osType;
	                    csc.rest.get("api/v5.0.0/cart/getCartSelectList?"+uri, function(result,textStatus,callbackCustParam){
	                     csc.rest.get("api/v5.0.0/bussys?vdcuuid="+vmInParamData.vdcUuid,function(result2,textStatus,callbackCustParam){
	                        	 callback(result,result2,callbackCustParam);
	                     },function(){},callbackCustParam);
	                   },function(){},callbackCustParam);
	      	      }
	      	      
	      	      
	      	      
	      	      
	      	      orderData.orderItems.sort(function(a,b){return a.instanceName > b.instanceName});//排序
	      		  var vmOrderItems = [];
	      		  var diskOrderItems= [];
	      		  for(var i=0;i<orderData.orderItems.length;i++){
	      			  var orderItem = orderData.orderItems[i];
	      			  if(orderItem.resourceType == "VM"){
	      				vmOrderItems.push(orderItem);
	      				var serviceUuid=orderItem.serviceUuid;
	 	      		    var metaData = JSON.parse(orderItem.metaData);
	 	      		    var vmInParamData = JSON.parse(metaData.resBaseInfo);
	 	                var networks = vmInParamData.networkList;
	 	                var selelctNetworkUuid = networks[0]?networks[0].networkId:"";
	 	           	    var vmInfo = new VmInfo();
	 	                var callbackCustParam = vmInfo;
	 	                getServiceRelationInfo(function(result,result2,callbackCustParam){
	 	                	  var vmInfo = callbackCustParam;
	 	                	  vmInfo.bussyList(result2.results); 
	                          var vdcList = result.vdcList;
	                          vmInfo.vdcList(vdcList);
	                        
	                          var vpcList = result.vpcList;
	                          vmInfo.vpcList(vpcList);
	                          
	                          
	                          var networkList = result.networkList;
	                          vmInfo.privateNetworkList(networkList);
	                          
	                          var azList = result.azList;
	                          vmInfo.azList(azList);
	                          vmInfo.osTypeList(result.osTypeList);
	                          vmInfo.cpuList(result.cpuList);
	                          vmInfo.memoryList(result.memoryList);
	                          
	                          var osVersionList = result.osVersionList;
	                          vmInfo.osVersionList(result.osVersionList);
	                          
	 	                },serviceUuid,vmInParamData,callbackCustParam);
	 	                
	      				vmInfo.serviceUuid(orderItem.serviceUuid);
	      				vmInfo.instanceName(orderItem.instanceName);
	      				vmInfo.vdcUuid(vmInParamData.vdcUuid);
	      				vmInfo.azUuid(vmInParamData.azUuid);
	      				vmInfo.vpcUuid(vmInParamData.vpcUuid);
	      				vmInfo.osType(vmInParamData.osType);
	      				vmInfo.osVersion(vmInParamData.osVersion);
	      				vmInfo.vcpu(vmInParamData.vcpu);
	      				vmInfo.memory(vmInParamData.memory);
	      				vmInfo.storage(vmInParamData.storage);
	      				vmInfo.networkUuid(selelctNetworkUuid);
	      				vmInfo.ip(vmInParamData.ip);
	      				vmInfo.account(vmInParamData.account);
	      				vmInfo.password(vmInParamData.password);
	      				vmInfo.repeatPassword(vmInParamData.repeatPassword);
	      				vmInfo.sshKeyUuid(vmInParamData.sshUuid);
	      				if(vmInfo.sshKeyUuid()){
	      					$.SSH_KEY.getSshKeyByUuid(vmInfo.sshKeyUuid(),function(data,textStatus,vmInfo){
	      						vmInfo.sshKeyName(data.name);
	      	        		},function(){},vmInfo);
	      				}
	      				vmInfo.billCycle(orderItem.billCycle);
	      				vmInfo.fee(orderItem.fee);
	      				vmInfo.expireType(orderItem.expireType);
	      				vmInfo.expireValue(orderItem.expireValue);
	      				var expireText = csc.util.getExpireText(orderItem.expireType,orderItem.expireValue);
	      				vmInfo.expireText(expireText);
	      				vmInfo.busSysUuid(vmInParamData.busSysUuid);
	      				vmInfo.relateUuid(orderItem.relateUuid);
	      				var softwareList = vmInParamData.softwareList;
	      				if(softwareList){
	      				  vmInfo.softwareTempList = softwareList;
	      				  csc.rest.get("api/v5.0.0/soft/softwares",function(softList,textStatus,vmInfo) {
	      					    var softwareTempList = vmInfo.softwareTempList;
		      					for(var i=0;i<softwareTempList.length;i++){
		      						var tempSoft = softwareTempList[i];
		      						var software = new Software();
		      						software.uuid(tempSoft.softwareUuid);
		      						software.scriptUuid(tempSoft.scriptUuid);
		      						for(var j=0;j<softList.results.length;j++){
		      							var querySoftVO = softList.results[j];
		      							if(software.uuid() == querySoftVO.uuid){
		      								software.name(querySoftVO.name);
		      								software.softType(querySoftVO.softType);
		      								software.softTypeName(querySoftVO.softTypeName);
		      								software.version(querySoftVO.version);
		      							}
		      						}
		      						software.softwareParamsTemp = tempSoft.softwareParamsList;
		      		                csc.rest.get("api/v5.0.0/script/defaultAttrs?scriptUuid="+software.scriptUuid(), function(attrList,textStatus,software) {
		      		                	var attrArray = attrList.results;
		      		                	var softwareParamsTemp = software.softwareParamsTemp;
		      		                    for(var i=0;i<attrArray.length;i++){
		      		                    	var attrVO = attrArray[i];
			      		                  	var param = new SoftwareParam();
			      		                    param.softwareUuid(software.softwareUuid);
						      		        param.scriptUuid(software.scriptUuid);
						      		        param.uuid(attrVO.uuid);
						      		        param.code(attrVO.code);
						      		        param.defaultValue(attrVO.value);
						      		        param.name(attrVO.name);
		      		                    	 for(var j=0;j<softwareParamsTemp.length;j++){
		      		                    		 var softwareParamsVO = softwareParamsTemp[j];
		      		                    		 if(softwareParamsVO.paramsUuid == attrVO.uuid){
		      		                    			param.value(softwareParamsVO.paramsValue);
		      		                    			break;
		      		                    		 }
		      		                    	 }
		      		               		    software.softwareParams.push(param);
		      		                    } 
		      		                	
		      		                },function(){},software);
		      		               vmInfo.softwareList.push(software);  
		      					}
	      				  },function(){},vmInfo);
	      				}
	      				self.currentVO().vmApplyList.push(vmInfo);
	      			  }else if(orderItem.resourceType == "DISK"){
	      				  diskOrderItems.push(orderItem);
	      				  var serviceUuid=orderItem.serviceUuid;
	 	      		      var metaData = JSON.parse(orderItem.metaData);
	 	      		      var diskInParamData = JSON.parse(metaData.resBaseInfo);
	      				  var diskInfo = new DiskInfo();
	      				  diskInfo.serviceUuid(orderItem.serviceUuid);
	      				  diskInfo.instanceName(orderItem.instanceName);
	      				  diskInfo.vdcUuid(orderItem.vdcUuid);
	      				  diskInfo.azUuid(orderItem.azUuid);
	      				  diskInfo.vpcUuid(orderItem.vpcUuid);
	      				  diskInfo.volumeSize(diskInParamData.volumeSize);
	      				  diskInfo.billCycle(orderItem.billCycle);
	      				  diskInfo.fee(orderItem.fee);
	      				  var callbackCustParam = diskInfo;
	      			 	  csc.rest.get("api/v5.0.0/service/getServiceInfo/"+serviceUuid, function(serviceVO,textStatus,callbackCustParam){
                     	  csc.rest.get("api/v5.0.0/cart/getCartSelectList?serviceUuid="+serviceUuid, function(res,textStatus,callbackCustParam){
                     		      var diskInfo = callbackCustParam;
                     		     diskInfo.serviceName(serviceVO.name);
                     	     },function(){},callbackCustParam);
	      			 	  },function(){},callbackCustParam);
	      				  
	      				  //diskInfo.expireType(diskInParamData.expireType); 从云主机获取
	      				  //diskInfo.expireValue(diskInParamData.expireValue);
	      				  diskInfo.relateUuid(orderItem.relateUuid);
	      				  //var expireText = csc.util.getExpireText(diskInParamData.expireType,diskInParamData.expireValue);
	      				 // diskInfo.expireText(expireText);
	      				  self.currentVO().diskApplyList.push(diskInfo);
	      			  }
	      		  }
	      		   
	      		  /**********关联磁盘和云主机****************/
	      		  var vmList = self.currentVO().vmApplyList();
	      		  var diskList = self.currentVO().diskApplyList();
	      		  for(var j=0;j<vmList.length;j++){
	      			  var vmVO = vmList[j];
	          		  for(var i=0;i<diskList.length;i++){
	          			  var diskVo = diskList[i];
	          			  if(vmVO.relateUuid()  && vmVO.relateUuid() == diskVo.relateUuid()){
	          				  diskVo.expireText(vmVO.expireText())
	          				  vmVO.mountDiskList.push(diskVo);
	          				  break;
	          			  }
	          		  }
	      		  }
	      		  /**********关联磁盘和云主机****************/
	      		  
	      	    self.showSoftwareAttr = ko.observable(false);
	      	    self.disableAttr_VM = ko.observable();
	      	    self.attrList_VM = ko.observableArray([]);
	          	self.showAttr_VM = function(viewOrEdit,data,event){
		        	self.attrList_VM(data.softwareParams());
		        	self.disableAttr_VM(viewOrEdit);
		        	self.showSoftwareAttr(true);
		        }  
	      		  
	      		/******************实体对象定义**********************/  
	      		function Software(){
	      		    this.uuid = ko.observable();
			    	this.scriptUuid = ko.observable();
			    	this.name = ko.observable();
			    	this.softType = ko.observable();
			    	this.softTypeName = ko.observable();
			    	this.version = ko.observable();
			    	this.softwareParams=ko.observableArray([]);
	      		}
	      		
	      		function SoftwareParam(){
	      			this.softwareUuid = ko.observable();
			    	this.scriptUuid = ko.observable();
			    	this.uuid = ko.observable();
			    	this.code = ko.observable();
			    	this.value = ko.observable();
			    	this.name = ko.observable();
			    	this.defaultValue = ko.observable();
	      		}
	      		  
	      		function DiskInfo(){
	      			this.serviceUuid= ko.observable(""),
	      			this.serviceName = ko.observable(""),
 	      	        this.instanceName= ko.observable(""),
 	      	        this.vdcUuid= ko.observable(""),
 	      	        this.vdcName=ko.observable(""),
 	      	        this.azUuid=ko.observable(""),
 	      	        this.azName=ko.observable(""),
 	      	        this.vpcUuid=ko.observable(""),
 	      	        this.vpcName=ko.observable(""),
 	      	        this.volumeSize = ko.observable(""),
 	      	        this.billCycle= ko.observable(""),
	      	        this.billCycleText = ko.pureComputed(function(){
	 	            	 return csc.util.getBillCycleText(this.billCycle);
	 	            }, this);
	      	        this.fee= ko.observable(""),
	      	        this.expireType=ko.observable(""),
	      	        this.expireValue=ko.observable(""),
	      	        this.expireText=ko.observable(""),
	      	        this.isBill=ko.observable(""),
	      	        this.relateUuid=ko.observable("")
	      	   }
	      		
	      		
	      		  
	      	   function VmInfo(){
	      			this.serviceUuid= ko.observable("");
 	      	        this.instanceName= ko.observable("");
 	      	        this.vdcUuid= ko.observable("");
 	      	        this.vdcName=ko.observable("");
	 	      	    this.vdcName = ko.pureComputed(function(){
	 	            	var item = _.findWhere(this.vdcList(), {uuid: this.vdcUuid()});
	 	            	if(item!=null){
	 	            		return item.name;
	 	            	}else{
	 	            		return "";
	 	            	}
	 	            }, this);
 	      	        this.azUuid=ko.observable("");
 	      	        this.azName = ko.pureComputed(function(){
	 	            	var item = _.findWhere(this.azList(), {uuid: this.azUuid()});
	 	            	if(item!=null){
	 	            		return item.name;
	 	            	}else{
	 	            		return "";
	 	            	}
	 	            }, this);
 	      	        this.vpcUuid=ko.observable("");
 	      	        this.vpcName=ko.observable("");
 	      	        this.vpcName = ko.pureComputed(function(){
	 	            	var item = _.findWhere(this.vpcList(), {uuid: this.vpcUuid()});
	 	            	if(item!=null){
	 	            		return item.name;
	 	            	}else{
	 	            		return "";
	 	            	}
	 	            }, this);
 	      	        this.osType= ko.observable("");
 	      	        this.osVersion= ko.observable("");
 	      	        this.osVersionName = ko.pureComputed(function(){
	 	            	var item = _.findWhere(this.osVersionList(), {uuid: this.osVersion()});
	 	            	if(item!=null){
	 	            		return item.opSysVersion;
	 	            	}else{
	 	            		return "";
	 	            	}
	 	            }, this);
 	      	        this.vcpu= ko.observable("");
 	      	        this.memory= ko.observable("");
 	      	        this.storage= ko.observable("");
 	      	        this.networkUuid= ko.observable("");
 	      	        this.networkName= ko.observable("");
 	      	        this.networkName = ko.pureComputed(function(){
	 	            	var item = _.findWhere(this.privateNetworkList(), {uuid: this.networkUuid()});
	 	            	if(item!=null){
	 	            		return item.name;
	 	            	}else{
	 	            		return "";
	 	            	}
	 	            }, this);
 	      	        this.ip= ko.observable("");
 	      	        this.account= ko.observable("");
 	      	        this.password= ko.observable("");
 	      	        this.repeatPassword= ko.observable("");
 	      	        this.sshKeyUuid= ko.observable("");
 	      	        this.sshKeyName= ko.observable("");
 	      	        this.billCycle= ko.observable("");
	 	      	    this.billCycleText = ko.pureComputed(function(){
	 	            	 return csc.util.getBillCycleText(this.billCycle);
	 	            }, this);
 	      	        this.fee= ko.observable("");
 	      	        this.expireType=ko.observable("");
 	      	        this.expireValue=ko.observable("");
 	      	        this.expireText=ko.observable("");
 	      	        this.isBill=ko.observable("");
 	      	        this.busSysUuid=ko.observable("");
 	      	        this.busSysName = ko.pureComputed(function(){
	 	            	var item = _.findWhere(this.bussyList(), {uuid: this.busSysUuid()});
	 	            	if(item!=null){
	 	            		return item.name;
	 	            	}else{
	 	            		return "";
	 	            	}
	 	            }, this);
 	      	        this.relateUuid=ko.observable("");
 	      	        this.softwareList = ko.observableArray([]);
 	      	        this.mountDiskList =  ko.observableArray([]);
 	      	        this.vdcList = ko.observableArray([]);
	 	      	    this.vpcList = ko.observableArray([]);
	 	      	    this.azList = ko.observableArray([]);
	 	      	    this.privateNetworkList = ko.observableArray([]);
	 	      	    this.osTypeList = ko.observableArray([]);
	 	      	    this.cpuList = ko.observableArray([]);
	 	      	    this.memoryList = ko.observableArray([]);
	 	      	    this.osVersionList = ko.observableArray([]);
	 	      	    this.sshList = ko.observableArray([]);
	      			this.bussyList = ko.observableArray([])
	      		  }
	      	      /******************实体对象定义**********************/    
	      	   
	      	   
	      		  this.save = function(){
	           		saveComment(args.taskId,function(){
	           			alert("保存成功！");
	           		});
	    		  }
	    		  
	    		  this.next = function(){
	    			if(isLast){
	    			  saveComment(args.taskId,function(){
	    				var databody = {"userId":"","action":"designated"};
	    				csc.rest.put('api/v5.0.0/workflows/tasks/'+args.taskId,databody,function(data){
	    				  alert("审核成功！");
	    				  location.href = "#pages/workflows/tasks?type=work";
	    				},function(){alert("操作失败！")});
	    			  });
	    		  	}else{		  
	    			  showModal("pages/workflows/next.html");
	    		  	}
	    		  }
	      		  
	      	   }
	      	  ko.applyBindings(new ViewModel(), $('#approveContent')[0]);
		
	      	 });
		 });
		
		
		
		 $("#vmApplyApproveVmTable").on("click",".expand-btn",function(){
			  $(this).find('i').toggleClass("fa-angle-double-down");
		      $(this).parents('tr').next("tr").toggle();
		      $(this).parents('tr').next("tr").find('.sub-detail').toggle();
		  })
		  
		
	});//$('.page-content-area')
		 
</script>



