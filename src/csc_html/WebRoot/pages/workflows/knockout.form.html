<div class="bg-light lter b-b wrapper-sm">
  <ol class="breadcrumb">
    <li>当前位置：</li>
    <li>工作</li>
    <li class="active">动态表单</li>
  </ol>
</div>

<div class="wrapper-md">
    <div id="knockout-form" class="panel panel-default form-horizontal" style="display: none;width:600px;margin:auto;" data-bind="visible: true" >
        <div class="panel-heading">流程任务</div>
        <form id="" action="" data-bind="foreach: Fields" class="panel-body">
            <div class="form-group">
                <label class="col-sm-3 control-label" data-bind="text: Name()+'：', attr: {for:ID}"></label>

                <!--ko if: Element() === "select" -->
                    <div class="col-sm-9">
                        <select class="form-control" data-bind="options: Options, attr: {id:ID}, value:Value"></select>
                    </div>
                <!--/ko-->

                <!--ko if: Element() === "radio" -->
                    <div class="col-sm-9">
                        <div class="form-inline" data-bind="foreach: Options">
                            <div class="checkbox">
                                <label>
                                  <input type="radio" data-bind="checked: $parent.DefaultValue, attr: {id:$data, name:$parent.ID}, value:$data"/> <span data-bind="text: $data, attr: {for:$data}"></span>
                                </label>
                            </div>

                        </div>
                    </div>
                <!--/ko-->

                <!--ko if: Element() === "checkbox" -->
                    <div class="col-sm-9">
                        <div class="form-inline" data-bind="foreach: Options">
                            <div class="checkbox">
                                <label>
                                  <input type="checkbox" data-bind="checked: $parent.DefaultValue, attr: {id:$data, name:$parent.ID}, value:$data"/> <span data-bind="text: $data, attr: {for:$data}"></span>
                                </label>
                            </div>

                        </div>
                    </div>
                <!--/ko-->

                <!--ko if: Element() === "input" -->
                    <div class="col-sm-9">
                        <input class="form-control" data-bind="attr: {id:ID, type: Type, placeholder:Placeholder }, value:Value "></input>
                    </div>
                <!--/ko-->

                <!--ko if: Element() === "textarea" -->
                    <div class="col-sm-9">
                        <textarea class="form-control" data-bind="attr: {id:ID, placeholder:Placeholder, value:Value}, value:Value"></textarea>
                    </div>
                <!--/ko-->
            </div>
        </form>

        <div class="panel-footer text-center">
            <button class="btn btn-primary" data-bind="click: $root.SaveForm">提交</button>
            <button class="btn btn-danger">取消</button>
        </div>
    </div>

</div>
<script type="text/javascript">
    var scripts = ["assets/js/knockout.form.js", null];
    $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
        $.get('pages/workflows/knockout.form.json', function(data){
            if(typeof(data)=="String"){
                data = JSON.parse(data)
            }
            ko.applyBindings(new FormViewModel(data.formElements), $("#knockout-form")[0]);
        });
    });
    
</script>