  <div class="panel panel-info" id="vdcApplyConstruct">
        <div class="panel-heading">VDC变更</div>
        <div id="orderDetailedList" class="wrapper">
            <div class="wrapper-sm">VDC名称：<span data-bind="text: vdc().instanceName"></span></div>
            <div class="wrapper-sm">支持的操作系统：<span>Windows, Linux, Aix</span></div>
            <div class="wrapper-sm">申请时长：<span></span></div>
            <div class="wrapper-sm">套餐：<span>包月 费用：100元/月</span></div>
            <div class="wrapper-sm">描述：<span data-bind="text: order().desc"></span></div>
            <div class="wrapper-sm">配额限制：
	            <span data-bind="visible: limitQuota()=='true'">限制</span>
	            <span data-bind="visible: limitQuota()=='false'">不限制</span>
            </div>
            <h5 class="text-info">配额信息</h5>
            <div class="wrapper-sm">
              <div class="form-group row">
                <div class="form-group clearfix">
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon w">CPU配额(个)：</span>
                        <input type="text" disabled class="form-control" data-bind="value: vdcQuotaList().">
                      </div>
                    </div>
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon w">内存配额(GB)：</span>
                        <input type="text" disabled class="form-control" value="6">
                      </div>
                    </div>
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon w">存储配额(GB)：</span>
                        <input type="text" disabled class="form-control" value="6">
                      </div>
                    </div>
                </div>
                <div class="form-group clearfix">
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon w">云主机最大申请数：</span>
                        <input type="text" disabled class="form-control" value="6">
                      </div>
                    </div>
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon w">云硬盘最大申请数：</span>
                        <input type="text" disabled class="form-control" value="6">
                      </div>
                    </div>
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon w">对象存储最大申请数：</span>
                        <input type="text" disabled class="form-control" value="6">
                      </div>
                    </div>
                </div>
                <div class="form-group clearfix">
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon w">路由器最大可创建数：</span>
                        <input type="text" disabled class="form-control" value="6">
                      </div>
                    </div>
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon w">防火墙最大可创建数：</span>
                        <input type="text" disabled class="form-control" value="6">
                      </div>
                    </div>
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon w">公网IP最大申请数：</span>
                        <input type="text" disabled class="form-control" value="6">
                      </div>
                    </div>
                </div>
                <div class="form-group clearfix">
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon w">负载均衡器最大申请数：</span>
                        <input type="text" disabled class="form-control" value="6">
                      </div>
                    </div>
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon w">SSH密钥最大申请数：</span>
                        <input type="text" disabled class="form-control" value="6">
                      </div>
                    </div>
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon w">VPC最大可创建数：</span>
                        <input type="text" disabled class="form-control" value="6">
                      </div>
                    </div>
                </div>
              </div>
            </div>

            <h5 class="text-info">可用分区 <button class="btn btn-sm btn-info" data-bind="click:addVdcAZ">添加</button></h5>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>可用分区</th>
                        <th>云管理平台</th>
                        <th>虚拟化类型</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>zone1,zone,zone3</td>
                        <td>wincenter1</td>
                        <td>winserver</td>
                        <td><a>移除</a></td>
                    </tr>

                </tbody>
            </table>

            <h5 class="text-info">网络 <button class="btn btn-sm btn-info" data-bind="click:addNet">添加</button></h5>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>网络名称/IP池</th>
                        <th>云管理平台</th>
                        <th>可用分区</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>网络名称1</td>
                        <td></td>
                        <td></td>
                        <td><a>移除</a></td>
                    </tr>
                </tbody>
            </table>

        </div>
    </div>


    <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: addVdcAZModel }">
      <div class='modal-dialog modal-lg' role='document'>
	    <div class='modal-content'>
	      <div class='modal-header'>
	        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>添加分区</h3>
	      </div>
	      <div class='modal-body'>
	        <div>
	          <div class="row" id="net_0">
	            <div class="col-xs-5">
	              <p>待选择：</p>
	              <div class="table-responsive">
	              <table class="table table-striped">
	                <thead>
	                  <th>
	                    <div class="checkbox">
	                      <label class="i-checks">
	                        <input type="checkbox" value="">
	                        <i></i>
	                      </label>
	                    </div> 
	                  </th>
	                  <th>云管理平台</th>
	                  <th>虚拟化类型</th>
	                  <th>可用分区</th>
	                </thead>
	                <tbody  id="availableAzListTableId">
	                  <tr>
	                    <td>
	                      <div class="checkbox">
	                        <label class="i-checks">
	                          <input type="checkbox"  value="">
	                          <i></i>
	                        </label>
	                      </div> 
	                    </td>
	                    <td>wincenter</td>
	                    <td>WinServer</td>
	                    <td>zone1</td>
	                  </tr>
	                </tbody>
	              </table>
	              </div>
	            </div>
	            <div class="col-xs-2">
	              <button class="btn btn-block btn-default" id="addAz2PreAddList" style="margin-top:150px">&gt;&gt;</button>
	              <button class="btn btn-block btn-default" id="removeAz2PreAddList" >&lt;&lt;</button>
	            </div>
	            <div class="col-xs-5">
	              <p>已选择：</p>
	              <div class="table-responsive">               
	              <table class="table table-striped">
	                <thead>
	                  <th>
	                    <div class="checkbox">
	                      <label class="i-checks">
	                        <input type="checkbox" value="">
	                        <i></i>
	                      </label>
	                    </div> 
	                  </th>
	                  <th>云管理平台</th>
	                  <th>虚拟化类型</th>
	                  <th>可用分区</th>
	                </thead>
	                <tbody id="preAddAzListTableId">
	                </tbody>
	              </table>
	              </div>
	            </div>
	          </div>
	          <div id="net_1" style="display:none">
	            <div class="form-group string required">
	              <label class="string required col-xs-2 control-label">
	                <abbr title="必填项">*</abbr>子网名称
	              </label>
	              <div class="col-xs-3">
	                <input class="string required form-control" type="text"/>
	              </div>
	            </div>
	            <div class="form-group string required">
	              <label class="string required col-xs-2 control-label">
	                <abbr title="必填项">*</abbr>生成IP方式
	              </label>
	              <div class="col-xs-3">
	                <select class="form-control" >
	                  <option>网段</option>
	                </select>
	              </div>
	            </div>
	            <div class="form-group string required">
	              <label class="string required col-xs-2 control-label">
	                <abbr title="必填项">*</abbr>开始地址
	              </label>
	              <div class="col-xs-3">
	                <input class="string required form-control" type="text"/>
	              </div>
	            </div>
	            <div class="form-group string required">
	              <label class="string required col-xs-2 control-label">
	                <abbr title="必填项">*</abbr>结束地址
	              </label>
	              <div class="col-xs-3">
	                <input class="string required form-control" type="text"/>
	              </div>
	            </div>
	            <div class="form-group string required">
	              <label class="string required col-xs-2 control-label">
	                <abbr title="必填项">*</abbr>掩码
	              </label>
	              <div class="col-xs-3">
	                <input class="string required form-control" type="text"/>
	              </div>
	            </div>
	            <div class="form-group string required">
	              <label class="string required col-xs-2 control-label">
	                <abbr title="必填项">*</abbr>网关
	              </label>
	              <div class="col-xs-3">
	                <input class="string required form-control" type="text"/>
	              </div>
	            </div>
	            <div class="form-group string required">
	              <label class="string required col-xs-2 control-label">
	                <abbr title="必填项">*</abbr>主DNS
	              </label>
	              <div class="col-xs-3">
	                <input class="string required form-control" type="text"/>
	              </div>
	            </div>
	            <div class="form-group string required">
	              <label class="string required col-xs-2 control-label">
	                <abbr title="必填项">*</abbr>备DNS
	              </label>
	              <div class="col-xs-3">
	                <input class="string required form-control" type="text"/>
	              </div>
	            </div>
	          </div>
	        </div>
	      </div>
	      <div class='modal-footer'>
	        <input type="button" name="commit" value="确定" data-bind="click:confirmAddAz" class="btn btn-default btn-info" />
	        <button name="button" type="submit" class="btn btn-default btn btn-default" data-dismiss="modal">取消</button>
	      </div>
	    </div>
	  </div>
    </div>

    <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAddNet }">
        <div class='modal-dialog modal-lg' role='document'>
            <div class='modal-content'>
                <div class='modal-header'>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>添加网络</h3>
                </div>
                <div class='modal-body'>
                    <div class="row">
                        <div class="col-xs-5" style="width:380px">
                            <p>待选择：</p>
                            <div class="form-inline text-right" style="margin-bottom:10px;">
                                <select class="form-control input-sm">
                                    <option value="">可用分区</option>
                                    <option value="">分区1</option>
                                    <option value="">分区2</option>
                                </select>
                                <div class="form-group input-group">
                                    <input type="text" class="input-sm form-control" style="width:100px;" placeholder="请输入名称">
                                    <span class="input-group-addon">搜索</span>
                                </div>
                            </div>
                            <table class="table table-striped">
                                <thead>
                                    <th>
                                      <div class="checkbox">
                                        <label class="i-checks">
                                          <input type="checkbox" value="">
                                          <i></i>
                                        </label>
                                      </div> 
                                    </th>
                                    <th>可用分区</th>
                                    <th>外部网络/IP池</th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <div class="checkbox">
                                              <label class="i-checks">
                                                <input type="checkbox" value="">
                                                <i></i>
                                              </label>
                                            </div> 
                                        </td>
                                        <td>分区1</td>
                                        <td>网络名称1</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-xs-1">
                            <button class="btn btn-block btn-default" style="margin-top:150px">&gt;&gt;</button>
                            <button class="btn btn-block btn-default">&lt;&lt;</button>
                        </div>
                        <div class="col-xs-5" style="width:380px">
                            <p>已选择：</p>
                            <div class="form-inline text-right" style="margin-bottom:10px;">
                                <select class="form-control input-sm">
                                    <option value="">可用分区</option>
                                    <option value="">分区1</option>
                                    <option value="">分区2</option>
                                </select>
                                <div class="form-group input-group">
                                    <input type="text" class="input-sm form-control" style="width:100px;" placeholder="请输入名称">
                                    <span class="input-group-addon">搜索</span>
                                </div>
                            </div>
                            <table class="table table-striped">
                                <thead>
                                    <th>
                                      <div class="checkbox">
                                        <label class="i-checks">
                                          <input type="checkbox" value="">
                                          <i></i>
                                        </label>
                                      </div> 
                                    </th>
                                    <th>可用分区</th>
                                    <th>外部网络/IP池</th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <div class="checkbox">
                                              <label class="i-checks">
                                                <input type="checkbox" value="">
                                                <i></i>
                                              </label>
                                            </div> 
                                        </td>
                                        <td>分区1</td>
                                        <td>网络名称1</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class='modal-footer'>
                    <input type="button" name="commit" value="确定" class="btn btn-default btn-info" />
                    <button name="button" type="submit" class="btn btn-default btn btn-default" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>




<!-- page specific plugin scripts -->
<script type="text/javascript">
  var scripts = ["api/vdc/vdc.js", "api/resource/network/network.js"]
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
    function vdcModel(){
    	var self = this;
    	
    	this.order = ko.observable("");
    	this.vdc = ko.observable("");
    	this.resBaseInfo = ko.observable("");
    	this.metaData = ko.observable("");
    	this.vdcQuotaList = ko.observable("");
    	
    	this.limitQuota = ko.observable("");
    	this.cpu = ko.observable("");
    	this.memory = ko.observable("");
    	/* this.order = ko.validatedObservable({
    		resourceType: ko.observable(""),
    		desc: ko.observable("")
	      });
	    this.vdc = ko.validatedObservable({
	        instanceName: ko.observable(""),
	        limitQuota: ko.observable("")
	      });
		this.vdc.fromJSON({
			instanceName: "jjjjj",
			limitQuota: 'false'
	    }); */
		csc.rest.get('api/v5.0.0/workflows/tasks/'+args.taskId,function(data){
  	      var processInstanceId = data.taskInfo[0].processInstanceId;
			 //获取订单数据
	      	 csc.rest.get('api/v5.0.0/order/byFlowInstanceUuid/'+processInstanceId,function(data){
	      		console.log(data);
	      		var orderData = data.order;
	      		var itemListData = data.itemList;
	      		var metaData = JSON.parse(itemListData[0].metaData);
	      		var resBaseInfo = metaData.resBaseInfo;
	      		var vdcQuotaList = resBaseInfo.vdcQuotaList;
	      		self.order(orderData);
	      		self.vdc(itemListData[0]);
	      		self.metaData(metaData);
	      		self.limitQuota(resBaseInfo.limitQuota);
	      		for(var i=0;i<vdcQuotaList.length;i++){
	      			if(vdcQuotaList[i].type=='CPU'){
	      				this.cpu(vdcQuotaList[i].value);
	      			}else if(vdcQuotaList[i].type=='MEMORY'){
	      				this.memory(vdcQuotaList[i].value);
	      			}
	      		}
	      		self.vdcQuotaList(vdcQuotaList);
	      	 })
		});
    	
        this.addVdcAZModel = ko.observable(false);
        self.addVdcAZ = function(){
			$("#availableAzListTableId").html("");
			$("#preAddAzListTableId").html("");
			$.VDC.getAvailableToVdc({},function(data){
				  var tableBody = "";
				  if(data && data.results){
					  var azList = data.results;
					  for(var i=0;i<azList.length;i++){
						  var az = azList[i];
						  tableBody = "<tr><td><div class=\"checkbox\"><label class=\"i-checks\"><input type=\"checkbox\" value=\""+ az.uuid +"\" /><i></i></label></div></td>";
						  tableBody +="<td>"+az.cloudPlatform+"</td><td>"+az.virtualHypervisor+"</td><td>"+az.name+"</td></tr>";
					  } 
				  }
				  $("#availableAzListTableId").html(tableBody);
			});
			self.addVdcAZModel(true);
			
			$("#addAz2PreAddList").bind("click",function(data){
			    $("#availableAzListTableId input[type='checkbox']").each(function(){
			    	$("#preAddAzListTableId").append($(this).parents("tr").prop("outerHTML")) 
			    	$(this).parents("tr").remove()
			    })
			})
			
			$("#removeAz2PreAddList").bind("click",function(data){
				$("#preAddAzListTableId input[type='checkbox']").each(function(){
					$("#availableAzListTableId").append($(this).parents("tr").prop("outerHTML")) 
					$(this).parents("tr").remove()
			    })
			})
		}
        
        
        this.isAddNet = ko.observable(false);
        /* this.addVdcAZ = function(){
            this.addVdcAZModel(true);
        }; */
        this.addNet = function(){
            this.isAddNet(true);
        };
        
    };
    ko.applyBindings(new vdcModel(), $("#vdcApplyConstruct")[0]);
  });
</script>
