<div class="bg-light lter b-b wrapper-sm">
	<ol class="breadcrumb">
	  <li>当前位置：</li>
	  <li>报表</li>
	  <li class="active">报表统计</li>
	</ol>
</div>
<div class='wrapper-md'>
	<div class="nav-tabs-alt bg-white-only b b-blue">
		<ul class="nav nav-tabs" role="tablist" id="menuList">
			<li class="active" role="presentation">
				<a aria-controls="VPC" data-toggle="tab" href="#vdc" role="tab">VDC</a>
			</li>
			<li role="presentation">
				<a aria-controls="billing" data-toggle="tab" href="#billing" role="tab">计费</a>
			</li>
			<li role="presentation">
				<a aria-controls="host" data-toggle="tab" href="#host" role="tab">物理机</a>
			</li>
			<li role="presentation">
				<a aria-controls="vm" data-toggle="tab" href="#vm" role="tab">云主机</a>
			</li>
		</ul>

		<div class="tab-content">
			<div class="tab-pane active" id="vdc" role="tabpanel">
				<div class="panel panel-default">
					<div class="row wrapper">
						<div class="col-xs-8">
							<button class="btn btn-sm btn-info" data-bind="click: function(data, event){ $root.configAdd('vdc') }">报表定义</button>
							<a class="btn btn-sm btn-default" data-bind="visible: $root.configVO().checkToShowExport, attr: {href: exportURL}">导出</a>
						</div>
						<div class="col-xs-3" data-bind="visible: configVO().checkConditonsSelected().indexOf('vdcName')>-1">
						  <div class="input-group">
						     <span class="input-group-addon">VDC名称</span>
						     <input type="text" value="" class="form-control input-sm" placeholder="请输入VDC名称" data-bind="value: searchParam().vdcName">
						  </div>        
						</div>
						<div class="col-xs-1" data-bind="visible: configVO().checkConditonsSelected().length>0">
						  <button class="btn btn-default btn-sm" type="submit" data-bind="click: search">搜索</button>       
						</div>					
					</div>				
					<div class="table-responsive">
						<table class="table table-striped">
							<thead>
								<tr data-bind="foreach: $root.fields_selected_ids">
									<th class="sortable" data-bind="click: $root.table.toggleSort(id)"><span data-bind="text: name"></span>&nbsp;&nbsp;<i data-bind="css: $root.table.sortClass(id)"/></th>
								</tr>
							</thead>
							<tbody>
								<tr data-bind="visible: $root.table.showNoData">
		           					<td colspan="19" class="aligncenter">
		              					暂无记录
		           					</td>
		            			</tr>
		            			<!-- ko foreach: {data: $root.table.pagedRows, as: '$row'}  -->
								<tr data-bind="foreach: $root.fields_selected_ids">
									<td data-bind="text:$row[id]"></td>
								</tr>
								<!-- /ko -->
							</tbody>
						</table>
					</div>
					<footer class="panel-footer" data-bind="with: table">
						<div class="pull-left text-muted" style="margin:10px 0px" data-bind="visible: $root.configVO().checkToShowDate">数据时间：
							<span data-bind="text: (pagedRows().length> 0 ? pagedRows()[0].createTime : '')"></span></div>
					    <ul class="pagination" data-bind="visible: pages() > 1">
					       <li data-bind="css: leftPagerClass, click: gotoPage(1)">
					         <a href="#">首页</a>
					       </li>
					       <li data-bind="css: leftPagerClass, click: prevPage">
					         <a href="#">&laquo;</a>
					       </li>
					       <li >
					         <a href="#"  data-bind="text: currentPage"></a>
					       </li>
					       <li data-bind="css: rightPagerClass, click: nextPage">
					         <a href="#">&raquo;</a>
					       </li>
					       <li data-bind="css: rightPagerClass, click: gotoPage(pages())">
					         <a href="#">末页</a>
					       </li>
					       <li class="page-control-li">
					         <div class="input-group form-group-sm">
					           <input type="text" class="form-control" data-bind="value: targetPage"  />
					           <div class="input-group-btn">
					             <a href="#" class="btn btn-sm btn-default" data-bind="click: gotoTargetPage()">跳转</a>
					           </div>
					         </div>
					         <div class="page-info-div" data-bind="text: recordsText"></div>
					       </li>
					    </ul>
				   	</footer>
				</div>
			
				<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAdd }">
				  <div class='modal-dialog modal-lg' style="width:600px;">
				    <div class='modal-content'>
				      <div class='modal-header'>
				        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>报表定义</h3>
				      </div>
				      <div class='modal-body form-horizontal row' data-bind="with: configVO">
				        <div class="form-group">
				          <label class="col-xs-2 control-label">报表名称：</label><span class="col-xs-8" style="top: 7px;position: relative;">VDC报表</span>
				        </div>
				        <div class="form-group">
				          <label class="col-xs-2 control-label">搜索条件：</label>
				          <div class="col-xs-8 form-inline row" style="top:-5px;">
				            <div class="col-xs-12">
				              <div class="checkbox">
				                <label class="i-checks">
				                  <input type="checkbox" data-bind="checked: conditions_all">
				                  <i></i>全选
				                </label>
				              </div>
				            </div>
				            <div data-bind="foreach: conditions">
					            <div class="col-xs-4">
					              <div class="checkbox">
					                <label class="i-checks">
					                  <input type="checkbox" data-bind="checkedValue: $data.id, checked: $parent.conditions_selected_ids">
					                  <i></i><a data-bind="text: name"></a>
					                </label>
					              </div>
					            </div>
					         </div>
				          </div>
				        </div>
				        <div class="form-group">
				          <label class="col-xs-2 control-label">字段列表：</label>
				          <div class="col-xs-10 form-inline row" style="top:-5px;">
				            <div class="col-xs-12">
				              <div class="checkbox">
				                <label class="i-checks">
				                  <input type="checkbox" data-bind="checked: fields_all" >
				                  <i></i>全选
				                </label>
				              </div>
				            </div>
				            <div data-bind="foreach: fields">
					            <div class="col-xs-4">
					              <div class="checkbox">
					                <label class="i-checks">
					                  <input type="checkbox" data-bind="checkedValue: $data.id, checked: $parent.fields_selected_ids">
					                  <i></i><a data-bind="text: name"></a>
					                </label>
					              </div>
					            </div>
				            </div>
				            
				          </div>
				        </div>
				      	<div class="form-group">
				          <div class="col-xs-12 form-inline">
				            <label class="control-label">每页显示数据：</label><input type="text" style="width:40px" class="form-control input-sm" data-bind="value: pageSize"/> <span style="top: 3px;position: Relative;"> 条</span>
				          </div>
				        </div>
				        <div class="form-group">
				          <label class="col-xs-2 control-label">显示内容：</label>
				          <div class="col-xs-8">
				              <label class="checkbox-inline i-checks">
				                <input type="checkbox" data-bind="checked: isShowCollectTime">
				                <i></i>数据时间
				              </label>
				              <label class="checkbox-inline i-checks">
				                <input type="checkbox" data-bind="checked: isShowExport">
				                <i></i>导出Excel文件
				              </label>
				          </div>
				        </div>
				
				      </div>
				      <div class='modal-footer' style="text-align:center;">
				        <a class="btn btn-default btn-info" data-bind="click: function(data, event){ $root.configSave('vdc') }">确定</a>
				         <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
				      </div>
				    </div>
				  </div>
				</div>
			</div>
			
			<div class="tab-pane" id="billing" role="tabpanel">
				<div class="panel panel-default">
					<div class="wrapper">
						<div class="row">
						  <div class="col-xs-2">
						     	<button class="btn btn-sm btn-info" data-bind="click: function(data, event){ $root.configAdd('billing') }">报表定义</button>
								<a class="btn btn-sm btn-default" data-bind="visible: $root.configVO().checkToShowExport, attr: {href: exportURL}">导出</a>  
						  </div>
						  <div class="col-xs-3" style="width: 225px;">
						      <div class="input-group">
						         <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
						         <input type="text" value="" class="form-control input-sm" id="biling_daterange" data-bind="value: searchParam().timestamp">
						      </div>        
						  </div>
						  <div class="col-xs-2">
						    <div class="input-group">
						      <span class="input-group-addon">产品类型</span>
						      <select class="form-control input-sm" data-bind="options:typeList,optionsText:'name',optionsValue:'codeName',optionsCaption:'全部',value:searchParam().resourceType">
						      </select>
						    </div>      
						  </div>
						  <div class="col-xs-3" style="width: 220px;">
						      <div class="input-group">
						         <span class="input-group-addon">所属VDC</span>
						         <input type="text" value="" class="form-control input-sm" placeholder="请输入所属VDC" data-bind="value: searchParam().vdcName">
						      </div>        
						  </div>
						  <div class="col-xs-2" style="width: 150px;">
							  <button class="btn btn-sm" type="button" data-bind="click: reset">重置</button>
							  <button class="btn btn-default btn-sm" type="submit" data-bind="click: search">搜索</button>
						  </div>				
						  <div class="col-xs-2" style="width: 90px;" data-bind="visible: configVO().checkConditonsSelected().length>0">
							  <a class="inline senior-search-btn" onclick="$('#senior_billing').slideToggle()">高级搜索 <i class="fa fa-angle-down"></i></a>
						  </div>
						</div>
						<div class="senior-search m-t" id="senior_billing" style="display:none">
							<div class="row">
							  <div class="col-xs-3" data-bind="visible: configVO().checkConditonsSelected().indexOf('serviceName')>-1">
							      <div class="input-group">
							         <span class="input-group-addon">服务名称</span>
							         <input type="text" value="" class="form-control input-sm" placeholder="请输入服务名称" data-bind="value: searchParam().serviceName">
							      </div>      
							  </div>
							  <div class="col-xs-3" data-bind="visible: configVO().checkConditonsSelected().indexOf('userName')>-1">
							      <div class="input-group">
							         <span class="input-group-addon">服务申请人</span>
							         <input type="text" value="" class="form-control input-sm" placeholder="请输入服务申请人" data-bind="value: searchParam().userName">
							      </div>        
							  </div>
							</div>
						</div>					
						
					</div>
					<div class="table-responsive">
						<table class="table table-striped">
							<thead>
								<tr data-bind="foreach: $root.fields_selected_ids">
									<th class="sortable" data-bind="click: $root.table.toggleSort(id)"><span data-bind="text: name"></span>&nbsp;&nbsp;<i data-bind="css: $root.table.sortClass(id)"/></th>
								</tr>
							</thead>
							<tbody>
								<tr data-bind="visible: $root.table.showNoData">
		           					<td colspan="19" class="aligncenter">
		              					暂无记录
		           					</td>
		            			</tr>
		            			<!-- ko foreach: {data: $root.table.pagedRows, as: '$row'}  -->
								<tr data-bind="foreach: $root.fields_selected_ids">
									<!-- ko if: id=='cycle' -->
									<td>
										<span data-bind="visible:$row[id]=='DAY'">天</span>
						              	<span data-bind="visible:$row[id]=='MONTH'">月</span>
						              	<span data-bind="visible:$row[id]=='QUARTER'">季</span>
						              	<span data-bind="visible:$row[id]=='YEAR'">年</span>
									</td>
									<!-- /ko -->
									<!-- ko if: id=='resourceType' -->
									<td>
										<span data-bind="visible: $row[id]=='VM'">云主机</span>
										<span data-bind="visible: $row[id]=='DISK'">云硬盘</span>
										<span data-bind="visible: $row[id]=='ROUTER'">路由器</span>
										<span data-bind="visible: $row[id]=='PUBLICIP'">公网IP</span>
										<span data-bind="visible: $row[id]=='LOAD_BALANCING'">负载均衡</span>
										<span data-bind="visible: $row[id]=='SECRET_KEY'">SSH密钥对</span>
										<span data-bind="visible: $row[id]=='OBJECT_STORAGE'">对象存储</span>
										<span data-bind="visible: $row[id]=='VDC'">VDC</span>
									</td>
									<!-- /ko -->
									<!-- ko if: id!='cycle' && id!='resourceType' -->
									<td data-bind="text:$row[id]"></td>
									<!-- /ko -->
								</tr>
								<!-- /ko -->
							</tbody>
						</table>
					</div>
					<footer class="panel-footer" data-bind="with: table">
						<div class="pull-left text-muted" style="margin:10px 0px" data-bind="visible: $root.configVO().checkToShowDate">数据时间：
							<span data-bind="text: (pagedRows().length> 0 ? $root.configVO().updateTime() : '')"></span></div>
					    <ul class="pagination" data-bind="visible: pages() > 1">
					       <li data-bind="css: leftPagerClass, click: gotoPage(1)">
					         <a href="#">首页</a>
					       </li>
					       <li data-bind="css: leftPagerClass, click: prevPage">
					         <a href="#">&laquo;</a>
					       </li>
					       <li >
					         <a href="#"  data-bind="text: currentPage"></a>
					       </li>
					       <li data-bind="css: rightPagerClass, click: nextPage">
					         <a href="#">&raquo;</a>
					       </li>
					       <li data-bind="css: rightPagerClass, click: gotoPage(pages())">
					         <a href="#">末页</a>
					       </li>
					       <li class="page-control-li">
					         <div class="input-group form-group-sm">
					           <input type="text" class="form-control" data-bind="value: targetPage"  />
					           <div class="input-group-btn">
					             <a href="#" class="btn btn-sm btn-default" data-bind="click: gotoTargetPage()">跳转</a>
					           </div>
					         </div>
					         <div class="page-info-div" data-bind="text: recordsText"></div>
					       </li>
					    </ul>
				   	</footer>
				</div>
				
				<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAdd }">
				  <div class='modal-dialog modal-lg' style="width:600px;">
				    <div class='modal-content'>
				      <div class='modal-header'>
				        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>报表定义</h3>
				      </div>
				      <div class='modal-body form-horizontal row' data-bind="with: configVO">
				        <div class="form-group">
				          <label class="col-xs-2 control-label">报表名称：</label><span class="col-xs-8" style="top: 7px;position: relative;">计费报表</span>
				        </div>
				        <div class="form-group">
				          <label class="col-xs-2 control-label">搜索条件：</label>
				          <div class="col-xs-8 form-inline row" style="top:-5px;">
				            <div class="col-xs-12">
				              <div class="checkbox">
				                <label class="i-checks">
				                  <input type="checkbox" data-bind="checked: conditions_all">
				                  <i></i>全选
				                </label>
				              </div>
				            </div>
				            <div data-bind="foreach: conditions">
					            <div class="col-xs-4">
					              <div class="checkbox">
					                <label class="i-checks">
					                  <input type="checkbox" data-bind="checkedValue: $data.id, checked: $parent.conditions_selected_ids">
					                  <i></i><a data-bind="text: name"></a>
					                </label>
					              </div>
					            </div>
					         </div>
				          </div>
				        </div>
				        <div class="form-group">
				          <label class="col-xs-2 control-label">字段列表：</label>
				          <div class="col-xs-10 form-inline row" style="top:-5px;">
				            <div class="col-xs-12">
				              <div class="checkbox">
				                <label class="i-checks">
				                  <input type="checkbox" data-bind="checked: fields_all" >
				                  <i></i>全选
				                </label>
				              </div>
				            </div>
				            <div data-bind="foreach: fields">
					            <div class="col-xs-4">
					              <div class="checkbox">
					                <label class="i-checks">
					                  <input type="checkbox" data-bind="checkedValue: $data.id, checked: $parent.fields_selected_ids">
					                  <i></i><a data-bind="text: name"></a>
					                </label>
					              </div>
					            </div>
				            </div>
				            
				          </div>
				        </div>
				      	<div class="form-group">
				          <div class="col-xs-12 form-inline">
				            <label class="control-label">每页显示数据：</label><input type="text" style="width:40px" class="form-control input-sm" data-bind="value: pageSize"/> <span style="top: 3px;position: Relative;"> 条</span>
				          </div>
				        </div>
				        <div class="form-group">
				          <label class="col-xs-2 control-label">显示内容：</label>
				          <div class="col-xs-8">
				              <label class="checkbox-inline i-checks">
				                <input type="checkbox" data-bind="checked: isShowCollectTime">
				                <i></i>数据时间
				              </label>
				              <label class="checkbox-inline i-checks">
				                <input type="checkbox" data-bind="checked: isShowExport">
				                <i></i>导出Excel文件
				              </label>
				          </div>
				        </div>
				
				      </div>
				      <div class='modal-footer' style="text-align:center;">
				        <a class="btn btn-default btn-info" data-bind="click: function(data, event){ $root.configSave('billing') }">确定</a>
				         <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
				      </div>
				    </div>
				  </div>
				</div>
			</div>
			
			<div class="tab-pane" id="host" role="tabpanel">
				<div class="panel panel-default">
					<div class="wrapper">
						<div class="row">
						  <div class="col-xs-3">
						  	  <button class="btn btn-sm btn-info" data-bind="click: function(data, event){ $root.configAdd('host') }">报表定义</button>
							  <a class="btn btn-sm btn-default" data-bind="visible: $root.configVO().checkToShowExport, attr: {href: exportURL}">导出</a>
						  </div>
						  <div class="col-xs-3">
						    <div class="input-group">
						      <span class="input-group-addon">所属数据中心</span>
						      <select class="form-control input-sm" data-bind="options:dcList,optionsText:'name',optionsValue:'uuid',optionsCaption:'全部',value:searchParam().dcUuid">
						      </select>
						    </div>      
						  </div>
						  <div class="col-xs-2">
						    <div class="input-group">
						      <span class="input-group-addon">虚拟化类型</span>
						      <select class="form-control input-sm" data-bind="options:virtualTypeList,optionsText:'text',optionsValue:'value',value:searchParam().virtualType">
						      </select>
						    </div>      
						  </div>
						  <div class="col-xs-2">
							  <button class="btn btn-sm" type="button" data-bind="click: reset">重置</button>
							  <button class="btn btn-default btn-sm" type="submit" data-bind="click: search">搜索</button>
						  </div>				
						  <div class="col-xs-2" data-bind="visible: configVO().checkConditonsSelected().length>0">
							  <a class="inline senior-search-btn" onclick="$('#senior_host').slideToggle()">高级搜索 <i class="fa fa-angle-down"></i></a>
						  </div>

						</div>
						<div class="senior-search m-t" id="senior_host" style="display:none">
							<div class="row">
							  <div class="col-xs-3" data-bind="visible: configVO().checkConditonsSelected().indexOf('partitionName')>-1">
							      <div class="input-group">
							         <span class="input-group-addon">所属可用分区</span>
						         	 <input type="text" value="" class="form-control input-sm" placeholder="请输入所属可用分区" data-bind="value: searchParam().partitionName">
							      </div>      
							  </div>
							  <div class="col-xs-3" data-bind="visible: configVO().checkConditonsSelected().indexOf('name')>-1">
							      <div class="input-group">
							         <span class="input-group-addon">物理机名称</span>
							         <input type="text" value="" class="form-control input-sm" placeholder="请输入物理机名称" data-bind="value: searchParam().name">
							      </div>        
							  </div>
							  <div class="col-xs-4" data-bind="visible: configVO().checkConditonsSelected().indexOf('ip')>-1">
							      <div class="input-group">
							         <span class="input-group-addon">物理机IP</span>
							         <input type="text" value="" class="form-control input-sm" placeholder="请输入物理机IP" data-bind="value: searchParam().ip">
							      </div>        
							  </div>
							</div>
						</div>	
					</div>				
					<div class="table-responsive">
						<table class="table table-striped">
							<thead>
								<tr data-bind="foreach: $root.fields_selected_ids">
									<th class="sortable" data-bind="click: $root.table.toggleSort(id)"><span data-bind="text: name"></span>&nbsp;&nbsp;<i data-bind="css: $root.table.sortClass(id)"/></th>
								</tr>
							</thead>
							<tbody>
								<tr data-bind="visible: $root.table.showNoData">
		           					<td colspan="19" class="aligncenter">
		              					暂无记录
		           					</td>
		            			</tr>
		            			<!-- ko foreach: {data: $root.table.pagedRows, as: '$row'}  -->
								<tr data-bind="foreach: $root.fields_selected_ids">
									<td data-bind="text:$row[id]"></td>
								</tr>
								<!-- /ko -->
							</tbody>
						</table>
					</div>
					<footer class="panel-footer" data-bind="with: table">
						<div class="pull-left text-muted" style="margin:10px 0px" data-bind="visible: $root.configVO().checkToShowDate">数据时间：
							<span data-bind="text: (pagedRows().length> 0 ? pagedRows()[0].createTime : '')"></span></div>
					    <ul class="pagination" data-bind="visible: pages() > 1">
					       <li data-bind="css: leftPagerClass, click: gotoPage(1)">
					         <a href="#">首页</a>
					       </li>
					       <li data-bind="css: leftPagerClass, click: prevPage">
					         <a href="#">&laquo;</a>
					       </li>
					       <li >
					         <a href="#"  data-bind="text: currentPage"></a>
					       </li>
					       <li data-bind="css: rightPagerClass, click: nextPage">
					         <a href="#">&raquo;</a>
					       </li>
					       <li data-bind="css: rightPagerClass, click: gotoPage(pages())">
					         <a href="#">末页</a>
					       </li>
					       <li class="page-control-li">
					         <div class="input-group form-group-sm">
					           <input type="text" class="form-control" data-bind="value: targetPage"  />
					           <div class="input-group-btn">
					             <a href="#" class="btn btn-sm btn-default" data-bind="click: gotoTargetPage()">跳转</a>
					           </div>
					         </div>
					         <div class="page-info-div" data-bind="text: recordsText"></div>
					       </li>
					    </ul>
				   	</footer>
				</div>
				
				<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAdd }">
				  <div class='modal-dialog modal-lg' style="width:600px;">
				    <div class='modal-content'>
				      <div class='modal-header'>
				        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>报表定义</h3>
				      </div>
				      <div class='modal-body form-horizontal row' data-bind="with: configVO">
				        <div class="form-group">
				          <label class="col-xs-2 control-label">报表名称：</label><span class="col-xs-8" style="top: 7px;position: relative;">物理机报表</span>
				        </div>
				        <div class="form-group">
				          <label class="col-xs-2 control-label">搜索条件：</label>
				          <div class="col-xs-8 form-inline row" style="top:-5px;">
				            <div class="col-xs-12">
				              <div class="checkbox">
				                <label class="i-checks">
				                  <input type="checkbox" data-bind="checked: conditions_all">
				                  <i></i>全选
				                </label>
				              </div>
				            </div>
				            <div data-bind="foreach: conditions">
					            <div class="col-xs-4">
					              <div class="checkbox">
					                <label class="i-checks">
					                  <input type="checkbox" data-bind="checkedValue: $data.id, checked: $parent.conditions_selected_ids">
					                  <i></i><a data-bind="text: name"></a>
					                </label>
					              </div>
					            </div>
					         </div>
				          </div>
				        </div>
				        <div class="form-group">
				          <label class="col-xs-2 control-label">字段列表：</label>
				          <div class="col-xs-10 form-inline row" style="top:-5px;">
				            <div class="col-xs-12">
				              <div class="checkbox">
				                <label class="i-checks">
				                  <input type="checkbox" data-bind="checked: fields_all" >
				                  <i></i>全选
				                </label>
				              </div>
				            </div>
				            <div data-bind="foreach: fields">
					            <div class="col-xs-4">
					              <div class="checkbox">
					                <label class="i-checks">
					                  <input type="checkbox" data-bind="checkedValue: $data.id, checked: $parent.fields_selected_ids">
					                  <i></i><a data-bind="text: name"></a>
					                </label>
					              </div>
					            </div>
				            </div>
				            
				          </div>
				        </div>
				      	<div class="form-group">
				          <div class="col-xs-12 form-inline">
				            <label class="control-label">每页显示数据：</label><input type="text" style="width:40px" class="form-control input-sm" data-bind="value: pageSize"/> <span style="top: 3px;position: Relative;"> 条</span>
				          </div>
				        </div>
				        <div class="form-group">
				          <label class="col-xs-2 control-label">显示内容：</label>
				          <div class="col-xs-8">
				              <label class="checkbox-inline i-checks">
				                <input type="checkbox" data-bind="checked: isShowCollectTime">
				                <i></i>数据时间
				              </label>
				              <label class="checkbox-inline i-checks">
				                <input type="checkbox" data-bind="checked: isShowExport">
				                <i></i>导出Excel文件
				              </label>
				          </div>
				        </div>
				
				      </div>
				      <div class='modal-footer' style="text-align:center;">
				        <a class="btn btn-default btn-info" data-bind="click: function(data, event){ $root.configSave('host') }">确定</a>
				         <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
				      </div>
				    </div>
				  </div>
				</div>						
			</div>
			
			<div class="tab-pane" id="vm" role="tabpanel">
				<div class="panel panel-default">
					<div class="row wrapper">
					  <div class="col-xs-2">
					     	<button class="btn btn-sm btn-info" data-bind="click: function(data, event){ $root.configAdd('vm') }">报表定义</button>
							<a class="btn btn-sm btn-default" data-bind="visible: $root.configVO().checkToShowExport, attr: {href: exportURL}">导出</a>
					  </div>
					  <div class="col-xs-2" data-bind="visible: configVO().checkConditonsSelected().indexOf('status')>-1">
					    <div class="input-group">
					      <span class="input-group-addon">服务状态</span>
					      <select class="form-control input-sm" data-bind="options:statusList,optionsText:'text',optionsValue:'value',value:searchParam().status">
					      </select>
					    </div>      
					  </div>
					  <div class="col-xs-3" data-bind="visible: configVO().checkConditonsSelected().indexOf('name')>-1">
					      <div class="input-group">
					         <span class="input-group-addon">云主机名称</span>
					         <input type="text" value="" class="form-control input-sm" placeholder="请输入云主机名称" data-bind="value: searchParam().name">
					      </div>      
					  </div>
					  <div class="col-xs-3" data-bind="visible: configVO().checkConditonsSelected().indexOf('ip')>-1">
					      <div class="input-group">
					         <span class="input-group-addon">IP地址</span>
					         <input type="text" value="" class="form-control input-sm" placeholder="请输入IP地址" data-bind="value: searchParam().ip">
					      </div>        
					  </div>
					  <div class="col-xs-2" data-bind="visible: configVO().checkConditonsSelected().length>0">
					  	  <button class="btn btn-sm" type="button" data-bind="click: reset">重置</button>
					      <button class="btn btn-default btn-sm" type="submit" data-bind="click: search">搜索</button>       
					  </div>

					</div>					
					<div class="table-responsive">
						<table class="table table-striped">
							<thead>
								<tr data-bind="foreach: $root.fields_selected_ids">
									<th class="sortable" data-bind="click: $root.table.toggleSort(id)"><span data-bind="text: name"></span>&nbsp;&nbsp;<i data-bind="css: $root.table.sortClass(id)"/></th>
								</tr>
							</thead>
							<tbody>
								<tr data-bind="visible: $root.table.showNoData">
		           					<td colspan="14" class="aligncenter">
		              					暂无记录
		           					</td>
		            			</tr>
		            			<!-- ko foreach: {data: $root.table.pagedRows, as: '$row'}  -->
								<tr data-bind="foreach: $root.fields_selected_ids">
									<td data-bind="text:$row[id]"></td>
								</tr>
								<!-- /ko -->
							</tbody>
						</table>
					</div>
					<footer class="panel-footer" data-bind="with: table">
						<div class="pull-left text-muted" style="margin:10px 0px" data-bind="visible: $root.configVO().checkToShowDate">数据时间：
							<span data-bind="text: (pagedRows().length> 0 ? pagedRows()[0].createTime : '')"></span></div>
					    <ul class="pagination" data-bind="visible: pages() > 1">
					       <li data-bind="css: leftPagerClass, click: gotoPage(1)">
					         <a href="#">首页</a>
					       </li>
					       <li data-bind="css: leftPagerClass, click: prevPage">
					         <a href="#">&laquo;</a>
					       </li>
					       <li >
					         <a href="#"  data-bind="text: currentPage"></a>
					       </li>
					       <li data-bind="css: rightPagerClass, click: nextPage">
					         <a href="#">&raquo;</a>
					       </li>
					       <li data-bind="css: rightPagerClass, click: gotoPage(pages())">
					         <a href="#">末页</a>
					       </li>
					       <li class="page-control-li">
					         <div class="input-group form-group-sm">
					           <input type="text" class="form-control" data-bind="value: targetPage"  />
					           <div class="input-group-btn">
					             <a href="#" class="btn btn-sm btn-default" data-bind="click: gotoTargetPage()">跳转</a>
					           </div>
					         </div>
					         <div class="page-info-div" data-bind="text: recordsText"></div>
					       </li>
					    </ul>
				   	</footer>
				</div>
				
				<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAdd }">
				  <div class='modal-dialog modal-lg' style="width:600px;">
				    <div class='modal-content'>
				      <div class='modal-header'>
				        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>报表定义</h3>
				      </div>
				      <div class='modal-body form-horizontal row' data-bind="with: configVO">
				        <div class="form-group">
				          <label class="col-xs-2 control-label">报表名称：</label><span class="col-xs-8" style="top: 7px;position: relative;">云主机报表</span>
				        </div>
				        <div class="form-group">
				          <label class="col-xs-2 control-label">搜索条件：</label>
				          <div class="col-xs-8 form-inline row" style="top:-5px;">
				            <div class="col-xs-12">
				              <div class="checkbox">
				                <label class="i-checks">
				                  <input type="checkbox" data-bind="checked: conditions_all">
				                  <i></i>全选
				                </label>
				              </div>
				            </div>
				            <div data-bind="foreach: conditions">
					            <div class="col-xs-4">
					              <div class="checkbox">
					                <label class="i-checks">
					                  <input type="checkbox" data-bind="checkedValue: $data.id, checked: $parent.conditions_selected_ids">
					                  <i></i><a data-bind="text: name"></a>
					                </label>
					              </div>
					            </div>
					         </div>
				          </div>
				        </div>
				        <div class="form-group">
				          <label class="col-xs-2 control-label">字段列表：</label>
				          <div class="col-xs-10 form-inline row" style="top:-5px;">
				            <div class="col-xs-12">
				              <div class="checkbox">
				                <label class="i-checks">
				                  <input type="checkbox" data-bind="checked: fields_all" >
				                  <i></i>全选
				                </label>
				              </div>
				            </div>
				            <div data-bind="foreach: fields">
					            <div class="col-xs-4">
					              <div class="checkbox">
					                <label class="i-checks">
					                  <input type="checkbox" data-bind="checkedValue: $data.id, checked: $parent.fields_selected_ids">
					                  <i></i><a data-bind="text: name"></a>
					                </label>
					              </div>
					            </div>
				            </div>
				            
				          </div>
				        </div>
				      	<div class="form-group">
				          <div class="col-xs-12 form-inline">
				            <label class="control-label">每页显示数据：</label><input type="text" style="width:40px" class="form-control input-sm" data-bind="value: pageSize"/> <span style="top: 3px;position: Relative;"> 条</span>
				          </div>
				        </div>
				        <div class="form-group">
				          <label class="col-xs-2 control-label">显示内容：</label>
				          <div class="col-xs-8">
				              <label class="checkbox-inline i-checks">
				                <input type="checkbox" data-bind="checked: isShowCollectTime">
				                <i></i>数据时间
				              </label>
				              <label class="checkbox-inline i-checks">
				                <input type="checkbox" data-bind="checked: isShowExport">
				                <i></i>导出Excel文件
				              </label>
				          </div>
				        </div>
				
				      </div>
				      <div class='modal-footer' style="text-align:center;">
				        <a class="btn btn-default btn-info" data-bind="click: function(data, event){ $root.configSave('vm') }">确定</a>
				         <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
				      </div>
				    </div>
				  </div>
				</div>					
			</div>
			
			<div class="tab-pane" id="preview_body" role="tabpanel">
			</div>

		</div>

	</div>
</div>


<!-- page specific plugin scripts -->
<script type="text/javascript">
  var scripts = ["assets/lib/moment/moment.js","assets/lib/bootstrap-daterangepicker/daterangepicker.js"]
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
	
    function ViewModel(path, conditions, fields, name){
    	var self = this;
    	var perPage = 5;
    	if(name == 'billing'){
    		//产品类型下拉列表
            self.typeList = ko.observableArray();
            csc.rest.get("api/v5.0.0/reports/fee/products", function(data){
            	self.typeList(data);
            });
    	}
      	if(name == 'host'){
      		//数据中心
      		self.dcList = ko.observableArray();
            csc.rest.get("api/v5.0.0/reports/macReport/dataCenters", function(data){
            	self.dcList(data);
            });
      		//虚拟化类型下拉列表
            var virtualTypeCountries = [{text:'全部', value:''},
          	                 			{text:'WinServer', value:'WinServer'},
          	                 			{text:'VMWare', value:'VMWare'},
          	               	 			{text:'PowerVM', value:'PowerVM'},
          	               	 			{text:'KVM', value:'KVM'}];   
            self.virtualTypeList = ko.observableArray(virtualTypeCountries);
      	}
        
        if(name == 'vm'){
        	//服务状态下拉列表
        	var statusCountries = [{text:'全部', value:''},
          	                 	   {text:'正常', value:'正常'},
          	                 	   {text:'过期', value:'过期'},];   
        	self.statusList = ko.observableArray(statusCountries);
        }
        
      	this.searchParam = ko.observable({
      		vdcName: "",
      		resourceType: "",
      		serviceName: "",
      		user: "",
      		dcUuid: "",
      		virtualType: "",
      		partitionName: "",
      		timestamp: "",
      		name: "",
      		userName: "",
      		ip: "",
      		status: ""
      	});
      	this.search = function(){
          	this.table.params(this.searchParam());
          
          	var data = this.searchParam();
            var url = ((function() {
                var results1;
                results1 = [];
                for (key in data) {
                  val = data[key];
                  if(val){
                  	results1.push((encodeURIComponent(key)) + "=" + (encodeURIComponent(val)));
                  }
                }
                return results1;
              })()).join('&')
              console.log(url);
          	this.exportURL("api/v5.0.0/reports/export?code="+name+"&"+url);
        };
		this.reset = function(){
			this.searchParam({
				vdcName: "",
	      		resourceType: "",
	      		serviceName: "",
	      		user: "",
	      		dcUuid: "",
	      		virtualType: "",
	      		partitionName: "",
	      		name: "",
	      		userName: "",
	      		ip: "",
	      		status: ""
			})
        }
        this.exportURL = ko.observable("api/v5.0.0/reports/export?code="+name);
        
      	this.table = new DataTable([], {path: path})
      	
      	//报表自定义界面操作
      	this.configVO = ko.observable({
      		conditions: conditions,
      		conditions_selected_ids: ko.observableArray([]),
      		conditions_all: ko.pureComputed({
		        read: function () {
		            return this.configVO().conditions_selected_ids().length === this.configVO().conditions.length;
		        },
		        write: function (value) {
		            this.configVO().conditions_selected_ids(value ? _.pluck(this.configVO().conditions, 'id') : []);
		        },
		        owner: this
		    }),
		    
      		fields: fields,
      	  	fields_selected_ids: ko.observableArray([]),
      	  	fields_all: ko.pureComputed({
		        read: function () {
		            return this.configVO().fields_selected_ids().length === this.configVO().fields.length;
		        },
		        write: function (value) {
		            this.configVO().fields_selected_ids(value ? _.pluck(this.configVO().fields, 'id') : []);
		        },
		        owner: this
		    }),
		    pageSize : ko.observable(),
		    isShowCollectTime: ko.observable(),
		    isShowExport: ko.observable(),
		    updateTime: ko.observable(), 
		    checkConditonsSelected: ko.observableArray([]), 
		    checkToShowExport: ko.observable(),
		    checkToShowDate: ko.observable(),
		    afterSave: function(){
		    	self.configVO().checkConditonsSelected(self.configVO().conditions_selected_ids());
		    	self.configVO().checkToShowDate(self.configVO().isShowCollectTime());
		    	self.configVO().checkToShowExport(self.configVO().isShowExport());
		    }
      	});
      	
      	this.conditions_selected_ids = ko.observableArray([]);
      	this.fields_selected_ids = ko.observableArray([]);
      	//整合选中的查询字段
      	this.makeup_conditions_selected_ids = function(){
      		self.conditions_selected_ids([]);
      		
      		var fields = _.filter(self.configVO().conditions, function(condition){
          		return _.contains(self.configVO().conditions_selected_ids(), condition.id)
          	}, self);
      		_.each(conditions, function(condition){
      			self.conditions_selected_ids.push(condition);
      		}, self)
      	}
      	//整合选中的展示字段
      	this.makeup_fields_selected_ids = function(){
      		self.fields_selected_ids([]);
      		
      		var fields = _.filter(self.configVO().fields, function(field){
          		return _.contains(self.configVO().fields_selected_ids(), field.id)
          	}, self);
      		_.each(fields, function(field){
      			self.fields_selected_ids.push(field);
      		}, self)
      	}
      	if(name == 'billing'){
            self.getNowDate = function(){
            	var date = new Date();
            	var year = date.getFullYear();
            	var month = self.add_zero(date.getMonth()+1);
            	var day = self.add_zero(date.getDate());
            	var hour = self.add_zero(date.getHours());
            	var minute = self.add_zero(date.getMinutes());
            	var second = self.add_zero(date.getSeconds());
          		self.configVO().updateTime(year+"-"+month+"-"+day+" "+hour+":"+minute+":"+second)
          	}
            self.add_zero = function(temp){
            	if(temp<10) return "0"+temp;
            	else return temp;
            }
            self.getNowDate();
    	}

      	//vdc报表定义页面操作
    	this.isAdd = ko.observable(false);
      	this.configAdd = function(report){
        	this.isAdd(true);
        	this.addOpen(report);  
      	}
      	this.configSave = function(report){
      		var putBody = {
      			conditions: ""+self.configVO().conditions_selected_ids()+"",
      			fields: ""+self.configVO().fields_selected_ids()+"",
      			pageSize: self.configVO().pageSize(),
      			isShowCollectTime: self.configVO().isShowCollectTime(),
      			isShowExport: self.configVO().isShowExport()
      		}
      		csc.rest.get('api/v5.0.0/reports/define/'+report,function(data){
      			if(data == 0){
      				csc.rest.post('api/v5.0.0/reports/define/'+report, putBody,function(data){
      			 		systemMsg.alert('报表定义创建成功！');
      			 		self.makeup_conditions_selected_ids();
      			 		self.makeup_fields_selected_ids();
      			 		self.configVO().afterSave();
      			 		self.isAdd(false);
      			    }); 
      			}else{
      				csc.rest.put('api/v5.0.0/reports/define/'+report, putBody,function(data){
      			 		systemMsg.alert('报表定义修改成功！');
      			 		self.makeup_conditions_selected_ids();
      			 		self.makeup_fields_selected_ids();
      			 		self.configVO().afterSave();
      			 		self.isAdd(false);
      			    });
      			}
      			self.table.perPage(self.configVO().pageSize());
      		});
      		
  		}
      	
      	//加载页面报表定义配置信息
      	this.loadData = function(){
      		csc.rest.get('api/v5.0.0/reports/define',function(data){
      			var count = 0;
      			for(var num=0;num<data.length;num++){
      				if(data[num].code == name){
      					var db_conditions = data[num].conditions ? data[num].conditions.split(",") : [];
      					self.configVO().conditions_selected_ids(db_conditions);
      					self.configVO().checkConditonsSelected(db_conditions);
      					var db_fields = data[num].fields.split(",");
      					self.configVO().fields_selected_ids(db_fields);
      					self.configVO().pageSize(data[num].pageSize);
      					self.table.perPage(data[num].pageSize);
      				    self.configVO().isShowCollectTime(data[num].isShowCollectTime=="true");
      				  	self.configVO().checkToShowDate(data[num].isShowCollectTime=="true");
      				  	self.configVO().isShowExport(data[num].isShowExport=="true");
      				  	self.configVO().checkToShowExport(data[num].isShowExport=="true");
      				  	self.makeup_conditions_selected_ids();
      				  	self.makeup_fields_selected_ids();
      				  	count = 1;
      				}
      			}
      			if(count == 0){
      				if(name == 'vdc'){
      					self.configVO().conditions_selected_ids(['vdcName']);
      					self.configVO().checkConditonsSelected(['vdcName']);
          				self.configVO().fields_selected_ids(['vdcName','busdomainNum','vpcNum','vmNum','volumeNum','routerNum',
          				                                     'securityGroupNum','ipNum','loadBalanceNum','firewallNum','sshNum',
          				                                     'objStorageNum','userNum','cpuQuotaNum','cpuUsedNum','totalMemQuota',
          				                                     'totalUsedMem','totalStorageQuota','totalUsedStorage']);
      				}else if(name == 'billing'){
      					self.configVO().conditions_selected_ids(['serviceName','userName']);
      					self.configVO().checkConditonsSelected(['serviceName','userName']);
          				self.configVO().fields_selected_ids(['uuid','serviceName','resourceType','vdcName','userName',
          				                                     'finishedTime','timestamp','cycle','fee','totalFee']);
      				}else if(name == 'host'){
      					self.configVO().conditions_selected_ids(['partitionName','name','ip']);
      					self.configVO().checkConditonsSelected(['partitionName','name','ip']);
          				self.configVO().fields_selected_ids(['name','ip','partitionName','virtualType','vmNum','status',
          				                                     'totalCpu','usedCpu','cpuUsage','totalMemory','usedMemory',
          				                                     'memoryUsage','totalStorage','usedStorage','storageUsage']);
      				}else if(name == 'vm'){
      					self.configVO().conditions_selected_ids(['status','name','ip']);
      					self.configVO().checkConditonsSelected(['status','name','ip']);
          				self.configVO().fields_selected_ids(['name','status','ip','cpu','memory','storage',
          				                                     'operateSystem','applicant','effectDate','failureDate','ownerHost',
          				                                     'ownerBusdomain','ownerVdc','busdomainHead']);
      				}
      				self.configVO().pageSize(15);
  				    self.configVO().isShowCollectTime(true);
  				  	self.configVO().checkToShowDate(true);
  				  	self.configVO().isShowExport(true);
  				  	self.configVO().checkToShowExport(true)
      				self.makeup_conditions_selected_ids();
      				self.makeup_fields_selected_ids();
      			}
    		});
      	}
      	this.loadData();
      	
      	this.addOpen = function(report){
      		csc.rest.get('api/v5.0.0/reports/define',function(data){
      			var count = 0;
      			for(var num=0;num<data.length;num++){
      				if(data[num].code == report){
      					var db_conditions = data[num].conditions ? data[num].conditions.split(",") : [];
      					self.configVO().conditions_selected_ids(db_conditions);
      					var db_fields = data[num].fields.split(",");
      					self.configVO().fields_selected_ids(db_fields);
      					self.configVO().pageSize(data[num].pageSize);
      				    self.configVO().isShowCollectTime(data[num].isShowCollectTime=="true");
      				  	self.configVO().isShowExport(data[num].isShowExport=="true");
      					count = 1;
      				}
      			}
      			if(count == 0){
      				if(report == 'vdc'){
      					self.configVO().conditions_selected_ids(['vdcName']);
          				self.configVO().fields_selected_ids(['vdcName','busdomainNum','vpcNum','vmNum','volumeNum','routerNum',
          				                                     'securityGroupNum','ipNum','loadBalanceNum','firewallNum','sshNum',
          				                                     'objStorageNum','userNum','cpuQuotaNum','cpuUsedNum','totalMemQuota',
          				                                     'totalUsedMem','totalStorageQuota','totalUsedStorage']);
      				}else if(report == 'billing'){
      					self.configVO().conditions_selected_ids(['serviceName','userName']);
          				self.configVO().fields_selected_ids(['uuid','serviceName','resourceType','vdcName','userName',
          				                                     'finishedTime','timestamp','cycle','fee','totalFee']);
      				}else if(report == 'host'){
      					self.configVO().conditions_selected_ids(['partitionName','name','ip']);
          				self.configVO().fields_selected_ids(['name','ip','partitionName','virtualType','vmNum','status',
          				                                     'totalCpu','usedCpu','cpuUsage','totalMemory','usedMemory',
          				                                     'memoryUsage','totalStorage','usedStorage','storageUsage']);
      				}else if(report == 'vm'){
      					self.configVO().conditions_selected_ids(['status','name','ip']);
          				self.configVO().fields_selected_ids(['name','status','ip','cpu','memory','storage',
          				                                     'operateSystem','applicant','effectDate','failureDate','ownerHost',
          				                                     'ownerBusdomain','ownerVdc','busdomainHead']);
      				}
      			}
    		});
      	}
    };
    
    var vdcViewModel = new ViewModel(
    		'api/v5.0.0/reports/vdc',
    		[
   		    	{id: 'vdcName', name: 'VDC名称'}
   			],
   			[
				{id: 'vdcName', name: 'VDC名称'},
				{id: 'busdomainNum', name: '业务系统(个)'},
				{id: 'vpcNum', name: 'VPC(个)'},
				{id: 'vmNum', name: '云主机(个)'},
				{id: 'volumeNum', name: '云硬盘(个)'},
				{id: 'routerNum', name: '路由器(个)'},
				{id: 'securityGroupNum', name: '安全组(个)'},
				{id: 'ipNum', name: '公网IP(个)'},
				{id: 'loadBalanceNum', name: '负载均衡器(个)'},
				{id: 'firewallNum', name: '防火墙(个)'},
				{id: 'sshNum', name: 'SSH密钥(对)'},
				{id: 'objStorageNum', name: '对象存储(个)'},
				{id: 'userNum', name: '用户(个)'},
				{id: 'cpuQuotaNum', name: 'CPU配额(个)'},
				{id: 'cpuUsedNum', name: 'CPU已使用(个)'},
				{id: 'totalMemQuota', name: '内存配额(GB)'},
				{id: 'totalUsedMem', name: '内存已使用(GB)'},
				{id: 'totalStorageQuota', name: '存储配额(GB)'},
				{id: 'totalUsedStorage', name: '存储已使用(GB)'}
	  		],
	  		'vdc');
    ko.applyBindings(vdcViewModel, $('#page-content .tab-pane')[0]); 
    
    var feeViewModel = new ViewModel(
    		'api/v5.0.0/reports/fee',
    		[
		    	{id: 'serviceName', name: '服务名称'},
		    	{id: 'userName', name: '服务申请人'}
			],
			[
				{id: 'uuid', name: '计费清单ID'},
				{id: 'serviceName', name: '服务名称'},
				{id: 'resourceType', name: '产品类型'},
				{id: 'vdcName', name: '所属VDC'},
				{id: 'userName', name: '服务申请人'},
				{id: 'finishedTime', name: '服务开通时间'},
				{id: 'timestamp', name: '计费结算日期'},
				{id: 'cycle', name: '计费周期'},
				{id: 'fee', name: '当前计费金额(元)'},
				{id: 'totalFee', name: '计费总金额(元)'}
	  		],
	  		'billing');
    ko.applyBindings(feeViewModel, $('#page-content .tab-pane')[1]); 
    
    var hostViewModel = new ViewModel(
    		'api/v5.0.0/reports/macReport',
    		[
		    	{id: 'partitionName', name: '所属可用分区'},
		    	{id: 'name', name: '物理机名称'},
		    	{id: 'ip', name: '物理机IP'}
			],
			[
				{id: 'name', name: '物理机名称'},
				{id: 'ip', name: '物理机IP'},
				{id: 'partitionName', name: '所属可用分区'},
				{id: 'virtualType', name: '虚拟化类型'},
				{id: 'vmNum', name: '虚拟机总数'},
				{id: 'status', name: '状态'},
				{id: 'totalCpu', name: 'CPU'},
				{id: 'usedCpu', name: 'CPU已用'},
				{id: 'cpuUsage', name: 'CPU使用率'},
				{id: 'totalMemory', name: '内存总量(GB)'},
				{id: 'usedMemory', name: '内存已用(GB)'},
				{id: 'memoryUsage', name: '内存使用率'},
				{id: 'totalStorage', name: '存储总量(GB)'},
				{id: 'usedStorage', name: '存储已用(GB)'},
				{id: 'storageUsage', name: '存储使用率'}
	  		],
	  		'host');
    ko.applyBindings(hostViewModel, $('#page-content .tab-pane')[2]); 
    
    var vmViewModel = new ViewModel(
    		'api/v5.0.0/reports/vmReport',
    		[
		    	{id: 'status', name: '服务状态'},
		    	{id: 'name', name: '云主机名称'},
		    	{id: 'ip', name: 'IP地址'}
			],
			[
				{id: 'name', name: '云主机名称'},
				{id: 'status', name: '服务状态'},
				{id: 'ip', name: 'IP地址'},
				{id: 'cpu', name: 'CPU(个)'},
				{id: 'memory', name: '内存(GB)'},
				{id: 'storage', name: '存储(GB)'},
				{id: 'operateSystem', name: '操作系统'},
				{id: 'applicant', name: '申请人'},
				{id: 'effectDate', name: '生效日期'},
				{id: 'failureDate', name: '失效日期'},
				{id: 'ownerHost', name: '所属物理机'},
				{id: 'ownerBusdomain', name: '所属业务系统'},
				{id: 'ownerVdc', name: '所属VDC'},
				{id: 'busdomainHead', name: '业务系统负责人'}
	  		],
	  		'vm');
    ko.applyBindings(vmViewModel, $('#page-content .tab-pane')[3]); 
    
      	

    // 计费报表时间控件加载             
    $('#biling_daterange').val(moment().subtract('days', 29).format('YYYY/MM/DD') + ' 至 ' + moment().format('YYYY/MM/DD')).daterangepicker(
      {
        format:'YYYY/MM/DD',
        startDate: moment().subtract('days', 29),
        endDate: moment(),
        separator:'至',
        locale:{
          applyLabel: '确认',
          cancelLabel: '取消',
          fromLabel: '开始日期',
          toLabel: '结束日期',
          weekLabel: '周',
          customRangeLabel: '自定义范围',                            
          daysOfWeek:["日","一","二","三","四","五","六"],
          monthNames:['01月','02月','03月','04月','05月','06月','07月','08月','09月','10月','11月','12月',]
        },
        ranges: {
         '当天': [moment(), moment()],
         '昨天': [moment().subtract('days', 1), moment().subtract('days', 1)],
         '近7天': [moment().subtract('days', 6), moment()],
         '近30天': [moment().subtract('days', 29), moment()],
         '当月': [moment().startOf('month'), moment().endOf('month')],
         '上月': [moment().subtract('month', 1).startOf('month'), moment().subtract('month', 1).endOf('month')]
        }
      }

    ); 
  });
  
	// 初始化自定义报表菜单
	$(function(){
		$.ajax({
			url: 'api/v5.0.0/reports/customReports?maxResult=10000&firstResult=0',
			type: 'GET',
			dataType: 'JSON',
			success: function(result){
				var results = result.results;
				for(var i=0;i<results.length;i++){
					var report = results[i];
					var clickStr= 'viewReport(\"'+report.reportSaveFile+'\",\"'+report.paramSaveFile+'\",\"'+report.previewUrl+'\")' ;
					$('#page-content #menuList').append($('<li role="presentation"><a aria-controls="preview_body" data-toggle="tab" onClick='+clickStr+' href="#preview_body" role="tab">'+report.name+'</a></li>'));
				}
			},
			error: function(result){
				systemMsg.alert('网络连接失败');
		 	}
		});
	});
  
	//报表预览
	function viewReport(dfSaveName, pfSaveName ,previewUrl){
		csc.rest.get('api/v5.0.0/reports/customReports/fileCheck?filename='+dfSaveName,function(result){
			if(result.code == '0'){
				if(pfSaveName!=null && pfSaveName!='' && pfSaveName!='null'){
					csc.rest.get('api/v5.0.0/reports/customReports/fileCheck?filename='+pfSaveName,function(result){
						if(result.code == '0'){
							//报表预览
							previewUrl = previewUrl+'&reportfilename='+dfSaveName+'&paramfilename='+pfSaveName;
							$('#preview_body').html('').html('<iframe id="frame_content" name="frame_content" src='+previewUrl+' frameborder="0" height="570px" width="100%"></iframe>');
						}else{
							systemMsg.alert('报表定义文件检查失败：'+result.msg);
						}
					});
				}else{
					//报表预览
					previewUrl = previewUrl+'&reportfilename='+dfSaveName+'&paramfilename=';
					$('#preview_body').html('').html('<iframe id="frame_content" name="frame_content" src='+previewUrl+' frameborder="0" height="570px" width="100%"></iframe>');
				}
			}else{
				systemMsg.alert('报表定义文件检查失败：'+result.msg);
			}
		});
	}
</script>