<div class="bg-light lter b-b wrapper-sm">
  <ol class="breadcrumb">
    <li>当前位置：</li>
    <li class="active">VPC管理</li>
  </ol>
</div>

<div class='wrapper-md'>
	<div class="nav-tabs-alt bg-white-only">
		<ul class="nav nav-tabs" role="tablist" id="vpcTabs">
			<li class="active" role="presentation">
				<a aria-controls="VPC" data-toggle="tab" href="#VPC" role="tab">VPC</a>
			</li>
			<li role="presentation">
				<a aria-controls="router" data-toggle="tab" href="#router" role="tab">路由器</a>
			</li>
			<li role="presentation">
				<a aria-controls="firewall" data-toggle="tab" href="#firewall" role="tab">防火墙</a>
			</li>
			<li role="presentation">
				<a aria-controls="safegroup" data-toggle="tab" href="#safegroup" role="tab">安全组</a>
			</li>
			<li role="presentation">
				<a aria-controls="VPN" data-toggle="tab" href="#VPN" role="tab">VPN</a>
			</li>
		</ul>
		<div class="tab-content">
		
		
			<div class="tab-pane active" id="VPC" role="tabpanel">
			
				<div class="panel panel-default">
					<div class="row wrapper">
						<div class="col-xs-8">
							<a class="btn btn-sm btn-primary" data-bind="click: createVpc">创建VPC</a>
						</div>
						<div class="col-xs-3">          
	                        <div class="input-group">
	                          <span class="input-group-addon">名称</span>
	                          <input type="text" class="input-sm form-control" placeholder="请输入名称"  data-bind="value: searchParam().name">
	                        </div>
	                    </div>
	                    <div class="col-xs-1">
	                        <button class="btn btn-sm btn-default" type="button" data-bind="click:search">搜索</button>
	                    </div>
					</div>				
					<div class="table-responsive" data-bind="with: vpcListTable">
						<table class="table table-striped">
							<thead>
								<tr>
									<th>VPC名称</th>
									<th>所属VDC</th>
									<th>可用分区</th>
									<th>创建人</th>
									<th>创建时间</th>
									<th>操作</th>
								</tr>
							</thead>
							<tbody>
								<tr data-bind="visible: showNoData">
						            <td colspan=11 class="aligncenter">
						              This table has no data.
						            </td>
						          </tr>
						        <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
								<tr>
									<td><a data-url=""   data-bind="text: $row.name,attr:{href:'#pages/vdcs/vpcs/show?vpcUuid='+$row.uuid}"></a></td>
									<td data-bind="text: $row.vdcName"></td>
									<td data-bind="text: $row.azName"></td>
									<td></td>
									<td data-bind="text: $row.createTime"></td>
									<td>
										<a  data-bind="click:$root.modifyVpc">修改</a> | <a   data-bind="click:$root.delVpc">删除</a>
									</td>
								</tr>
								<!--  /ko  -->
							</tbody>
						</table>
					</div>
					<footer class="panel-footer" data-bind="with: vpcListTable, visible: vpcListTable.pages() > 1">
				      <ul class="pagination">
				        <li data-bind="css: leftPagerClass, click: prevPage">
				          <a href="#">&laquo;</a>
				        </li>
				        <!-- ko foreach: {data: (new Array(pages()))} -->
				        <li data-bind="css: $parent.pageClass($index() + 1)">
				          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
				        </li>
				        <!-- /ko -->
				        <li data-bind="css: rightPagerClass, click: nextPage">
				          <a href="#">&raquo;</a>
				        </li>
				      </ul>
				    </footer>
				</div>
				
				<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: createVpcModal }">
				  <div class='modal-dialog' role='document'>
				    <div class='modal-content'>
				      <div class='modal-header'>
				        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
				        <h3 class='modal-title' data-bind="ifnot: vpcVO().uuid">新增VPC</h3>
				        <h3 class='modal-title' data-bind="if: vpcVO().uuid">修改VPC</h3>
				      </div>
				      <div class='modal-body form-horizontal'>
				        <div class="form-group">
				          <label class="col-sm-3 control-label">
				            VPC名称
				          </label>
				          <div class="col-sm-8">
				            <input class="form-control" type="text"  data-bind="value: vpcVO().name"/>
				          </div>
				          <div class="col-sm-1">
				            <span class="text-danger inline m-l-n m-t-sm">*</span>
				          </div>          
				        </div>
				        <div class="form-group">
				          <label class="col-sm-3 control-label">
				            所属VDC
				          </label>
				          <div class="col-sm-8">
				            <select class="form-control" data-bind="options:vdcList,optionsText:'name',optionsValue:'uuid',value: vpcVO().vdcUuid, enable: vpcVO().uuid==null">
				            </select>
				          </div>
				          <div class="col-sm-1">
				            <span class="text-danger inline m-l-n m-t-sm">*</span>
				          </div>          
				        </div>
				        <div class="form-group">
				          <label class="col-sm-3 control-label">
				            可用分区
				          </label>
				          <div class="col-sm-8">
				            <select class="form-control"  data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value: vpcVO().azUuid, enable: vpcVO().uuid==null" >
				            </select>
				          </div>
				          <div class="col-sm-1">
				            <span class="text-danger inline m-l-n m-t-sm">*</span>
				          </div>          
				        </div>
				      </div>
				      <div class='modal-footer'>
				        <input type="button" name="commit" value="确定" data-bind="click: vpcSubmit" class="btn btn-default btn-info" />
				        <button name="button" type="submit" class="btn btn-default btn btn-default" data-dismiss="modal">取消</button>
				      </div>
				    </div>
				  </div>
				</div>
				
			</div>
			
			
			
			
			<div class="tab-pane" id="router" role="tabpanel">
				<div class="panel panel-default">
					<div class="row wrapper">
						<div class="col-xs-8">
							<a class="btn btn-sm btn-primary" data-bind="click: createRouter">创建路由器</a>
						</div>
						<div class="col-xs-3">          
	                        <div class="input-group">
	                          <span class="input-group-addon">名称</span>
	                          <input type="text" class="input-sm form-control" placeholder="请输入名称" data-bind="value: searchRouterParam().name">
	                        </div>
	                    </div>
	                    <div class="col-xs-1">
	                        <button class="btn btn-sm btn-default" type="button" data-bind="click:searchRouter">搜索</button>
	                    </div>
					</div>				
					<div class="table-responsive" data-bind="with: routerListTable">
						<table class="table table-striped">
							<thead>
								<tr>
									<th>路由器名称</th>
									<th>所属VDC</th>
									<th>所属VPC</th>
									<th>IP地址</th>
									<th>操作</th>
								</tr>
							</thead>
							<tbody>
							   <tr data-bind="visible: showNoData">
						            <td colspan=11 class="aligncenter">
						              This table has no data.
						            </td>
						          </tr>
						        <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
								<tr>
									<td><a  data-bind="text: $row.name,attr:{href:'#pages/vdcs/routers/show?routerUuid='+$row.uuid}"></a></td>
									<td data-bind="text: $row.vdcName"></td>
									<td data-bind="text: $row.vpcName"></td>
									<td data-bind="text: $row.routerIp"></td>
									<td>
										<a  data-bind="click:$root.modifyRouter">修改</a> | <a   data-bind="click:$root.delRouter">删除</a>
									</td>
								</tr>
								<!--  /ko  -->
							</tbody>
						</table>
					</div>
					<footer class="panel-footer" data-bind="with: routerListTable, visible: routerListTable.pages() > 1">
				      <ul class="pagination">
				        <li data-bind="css: leftPagerClass, click: prevPage">
				          <a href="#">&laquo;</a>
				        </li>
				        <!-- ko foreach: {data: (new Array(pages()))} -->
				        <li data-bind="css: $parent.pageClass($index() + 1)">
				          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
				        </li>
				        <!-- /ko -->
				        <li data-bind="css: rightPagerClass, click: nextPage">
				          <a href="#">&raquo;</a>
				        </li>
				      </ul>
				    </footer>
				</div>
			
			
			
			  <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: createRouterModal }">
				<div class='modal-dialog' role='document'>
					    <div class='modal-content'>
					      <div class='modal-header'>
					        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
					        <h3 class='modal-title' data-bind="ifnot: routerVO().uuid">创建路由器</h3>
					        <h3 class='modal-title' data-bind="if: routerVO().uuid">修改路由器</h3>
					      </div>
					      <div class='modal-body form-horizontal'>
					        <div class="form-group">
					          <label class="col-xs-3 control-label">
					            路由器名称
					          </label>
					          <div class="col-xs-8">
					            <input class="form-control" type="text"  data-bind="value: routerVO().name"/>
					          </div>
					          <div class="col-xs-1">
					            <span class="text-danger inline m-l-n m-t-sm">*</span>
					          </div>          
					        </div>
					        <div class="form-group">
					          <label class="col-xs-3 control-label">
					            所属VDC
					          </label>
					          <div class="col-xs-8">
					            <select class="form-control" data-bind="options:vdcList,optionsText:'name',optionsValue:'uuid',value: routerVO().vdcUuid, enable: routerVO().uuid==null">
					            </select>
					          </div>
					          <div class="col-xs-1">
					            <span class="text-danger inline m-l-n m-t-sm">*</span>
					          </div>          
					        </div>
					        <div class="form-group">
					          <label class="col-xs-3 control-label">
					            所属VPC
					          </label>
					          <div class="col-xs-8">
					            <select class="form-control" data-bind="options:vpcList,optionsText:'name',optionsValue:'uuid',value: routerVO().vpcUuid, enable: routerVO().uuid==null">
					            </select>
					          </div>
					          <div class="col-xs-1">
					            <span class="text-danger inline m-l-n m-t-sm">*</span>
					          </div>          
					        </div>
					        <div class="form-group">
					          <label class="col-xs-3 control-label">
					            网络名称
					          </label>
					          <div class="col-xs-8">
					            <select class="form-control"  data-bind="options:extNetList,optionsText:'name',optionsValue:'originalId',value: routerVO().originalExtnetId">
					            </select>
					          </div>
					        </div>
					      </div>
					      <div class='modal-footer'>
					        <input type="button" name="commit" value="确定"  data-bind="click: routerSubmit" class="btn btn-default btn-info" />
					        <button name="button" type="submit" class="btn btn-default btn btn-default" data-dismiss="modal">取消</button>
					      </div>
					    </div>
					  </div>
				</div>
			</div>
			
			
			
			<div class="tab-pane" id="firewall" role="tabpanel">

				<div class="panel panel-default">
					<div class="row wrapper">
						<div class="col-xs-8">
							<a class="btn btn-sm btn-primary" data-bind="click:createFirewall">创建防火墙</a>
						</div>
						<div class="col-xs-3">          
	                        <div class="input-group">
	                          <span class="input-group-addon">名称</span>
	                          <input type="text" class="input-sm form-control" placeholder="请输入名称" data-bind="value: searchFirewallParam().name">
	                        </div>
	                    </div>
	                    <div class="col-xs-1">
	                        <button class="btn btn-sm btn-default" type="button" data-bind="click:searchFirewall">搜索</button>
	                    </div>
					</div>				
					<div class="table-responsive" data-bind="with: firewallListTable">
						<table class="table table-striped">
							<thead>
								<tr>
									<th>防火墙名称</th>
									<th>所属VDC</th>
									<th>所属VPC</th>
									<th>路由器</th>
									<th>操作</th>
								</tr>
							</thead>
							<tbody>
							     <tr data-bind="visible: showNoData">
						            <td colspan=11 class="aligncenter">
						              This table has no data.
						            </td>
						         </tr>
						        <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
								<tr>
									<td><a  data-bind="text: $row.name,attr:{href:'#pages/vdcs/firewalls/show?fwUuid='+$row.uuid}"></a></td>
									<td  data-bind="text: $row.vdcName"></td>
									<td  data-bind="text: $row.vpcName"></td>
									<td  data-bind="text: $row.routerName"></td>
									<td>
										<a  data-bind="click:$root.modifyFirewall">修改</a> | <a   data-bind="click:$root.delFirewall">删除</a>
									</td>
								</tr>
								<!--  /ko  -->
							</tbody>
						</table>
					</div>
		            <footer class="panel-footer" data-bind="with: firewallListTable, visible: firewallListTable.pages() > 1">
				      <ul class="pagination">
				        <li data-bind="css: leftPagerClass, click: prevPage">
				          <a href="#">&laquo;</a>
				        </li>
				        <!-- ko foreach: {data: (new Array(pages()))} -->
				        <li data-bind="css: $parent.pageClass($index() + 1)">
				          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
				        </li>
				        <!-- /ko -->
				        <li data-bind="css: rightPagerClass, click: nextPage">
				          <a href="#">&raquo;</a>
				        </li>
				      </ul>
				    </footer>
				</div>
				
				<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: createFirewallModal }">
				  <div class='modal-dialog' role='document'>
					    <div class='modal-content'>
					      <div class='modal-header'>
					        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                            <h3 class='modal-title' data-bind="ifnot: firewallVO().uuid">创建防火墙</h3>
					        <h3 class='modal-title' data-bind="if: firewallVO().uuid">修改防火墙</h3>
					      </div>
					      <div class='modal-body form-horizontal'>
					        <div class="form-group">
					          <label class="col-xs-3 control-label">
					            防火墙名称
					          </label>
					          <div class="col-xs-8">
					            <input class="form-control" type="text" data-bind="value:firewallVO().name"/>
					          </div>
					          <div class="col-xs-1">
					            <span class="text-danger inline m-l-n m-t-sm">*</span>
					          </div>          
					        </div>
					        <div class="form-group">
					          <label class="col-xs-3 control-label">
					            所属VDC
					          </label>
					          <div class="col-xs-8">
					            <select class="form-control" data-bind="options:vdcList,optionsText:'name',optionsValue:'uuid',value: firewallVO().vdcUuid, enable: firewallVO().uuid==null">
					            </select>
					          </div>
					          <div class="col-xs-1">
					            <span class="text-danger inline m-l-n m-t-sm">*</span>
					          </div>          
					        </div>
					        <div class="form-group">
					          <label class="col-xs-3 control-label">
					            所属VPC
					          </label>
					          <div class="col-xs-8">
					            <select class="form-control" data-bind="options:vpcList,optionsText:'name',optionsValue:'uuid',value: firewallVO().vpcUuid, enable: firewallVO().uuid==null">
					            </select>
					          </div>
					          <div class="col-xs-1">
					            <span class="text-danger inline m-l-n m-t-sm">*</span>
					          </div>          
					        </div>
					        <div class="form-group">
					          <label class="col-xs-3 control-label">
					            路由器
					          </label>
					          <div class="col-xs-8">
					            <select class="form-control"  data-bind="options:routerList,optionsText:'name',optionsValue:'uuid',value: firewallVO().routerUuid, enable: firewallVO().uuid==null">
					            </select>
					          </div>
					          <div class="col-xs-1">
					            <span class="text-danger inline m-l-n m-t-sm">*</span>
					          </div>          
					        </div>        
					      </div>
					      <div class='modal-footer' style="text-align: center">
					        <input type="button" name="commit" value="确定" data-bind="click: firewallSubmit" class="btn btn-default btn-info" />
					        <button name="button" type="submit" class="btn btn-default btn btn-default" data-dismiss="modal">取消</button>
					      </div>
					    </div>
					  </div>
					 </div>
			</div>
			
			
			
			<div class="tab-pane" id="safegroup" role="tabpanel">
				<div class="panel panel-default">
					<div class="row wrapper">
						<div class="col-xs-8">
							<a class="btn btn-sm btn-primary" data-bind="click:createSecretGroup">创建安全组</a>
						</div>
						<div class="col-xs-3">          
	                        <div class="input-group">
	                          <span class="input-group-addon">名称</span>
	                          <input type="text" class="input-sm form-control" placeholder="请输入名称" data-bind="value: searchSecretGroupParam().name">
	                        </div>
	                    </div>
	                    <div class="col-xs-1">
	                        <button class="btn btn-sm btn-default" type="button"  data-bind="click:searchSecretGroup">搜索</button>
	                    </div>
					</div>				
					<div class="table-responsive" data-bind="with: secretGroupListTable">
						<table class="table table-striped">
							<thead>
								<tr>
									<th>安全组名称</th>
									<th>所属VDC</th>
									<th>所属VPC</th>
									<th>操作</th>
								</tr>
							</thead>
							<tbody>
							    <tr data-bind="visible: showNoData">
						            <td colspan=11 class="aligncenter">
						              This table has no data.
						            </td>
						        </tr>
						        <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
								<tr>
									<td><a data-bind="text: $row.name,attr:{href:'#pages/vdcs/safegroups/show?sgUuid='+$row.uuid}" ></a></td>
									<td data-bind="text: $row.vdcName"></td>
									<td data-bind="text: $row.vpcName"></td>
									<td>
										   <a data-bind="click:$root.delSecretGroup">删除</a>
									</td>
								</tr>
								<!--  /ko  -->
							</tbody>
						</table>
					</div>
		            <footer class="panel-footer" data-bind="with: secretGroupListTable, visible: secretGroupListTable.pages() > 1">
				      <ul class="pagination">
				        <li data-bind="css: leftPagerClass, click: prevPage">
				          <a href="#">&laquo;</a>
				        </li>
				        <!-- ko foreach: {data: (new Array(pages()))} -->
				        <li data-bind="css: $parent.pageClass($index() + 1)">
				          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
				        </li>
				        <!-- /ko -->
				        <li data-bind="css: rightPagerClass, click: nextPage">
				          <a href="#">&raquo;</a>
				        </li>
				      </ul>
				    </footer>				
				</div>
				
			  <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: createSecretGroupModel }">
				 <div class='modal-dialog' role='document'>
				    <div class='modal-content'>
				      <div class='modal-header'>
				        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
				           <h3 class='modal-title' data-bind="ifnot: secretGroupVO().uuid">创建安全组</h3>
					       <h3 class='modal-title' data-bind="if: secretGroupVO().uuid">修改安全组</h3>
				      </div>
				      <div class='modal-body form-horizontal'>
				        <div class="form-group">
				          <label class="col-xs-3 control-label">
				            安全组名称
				          </label>
				          <div class="col-xs-8">
				            <input class="form-control" type="text" data-bind="value:secretGroupVO().name"/>
				          </div>
				          <div class="col-xs-1">
				            <span class="text-danger inline m-l-n m-t-sm">*</span>
				          </div> 
				        </div>
				        <div class="form-group">
				          <label class="col-xs-3 control-label">
				            所属VDC
				          </label>
				          <div class="col-xs-8">
				            <select class="form-control" data-bind="options:vdcList,optionsText:'name',optionsValue:'uuid',value: secretGroupVO().vdcUuid, enable: secretGroupVO().uuid==null">
				            </select>
				          </div>
				          <div class="col-xs-1">
				            <span class="text-danger inline m-l-n m-t-sm">*</span>
				          </div> 
				        </div>
				        <div class="form-group">
				          <label class="col-xs-3 control-label">
				            所属VPC
				          </label>
				          <div class="col-xs-8">
				            <select class="form-control" data-bind="options:vpcList,optionsText:'name',optionsValue:'uuid',value: secretGroupVO().vpcUuid, enable: secretGroupVO().uuid==null">
				            </select>
				          </div>
				          <div class="col-xs-1">
				            <span class="text-danger inline m-l-n m-t-sm">*</span>
				          </div> 
				        </div>
				        <div class="form-group charge_factor_properties">
				          <label class="col-xs-3 control-label" for="charge_factor_properties">描述</label>
				          <div class="col-xs-8">
				            <textarea class="form-control" name="charge_factor[properties]" id="charge_factor_properties"   data-bind="value:secretGroupVO().desc"></textarea>
				          </div>
				        </div>        
				      </div>
				      <div class='modal-footer'>
				        <input type="button" name="commit" value="确定"  data-bind="click: secretGroupSubmit" class="btn btn-default btn-info" />
				        <button name="button" type="submit" class="btn btn-default btn btn-default" data-dismiss="modal">取消</button>
				      </div>
				    </div>
				  </div>
			</div>	
		</div>

		<div class="tab-pane" id="VPN" role="tabpanel">
			<div class="panel panel-default">
				<div class="row wrapper">
					<div class="col-xs-8">
						<a class="btn btn-sm btn-primary" data-bind="click:addVPN">创建VPN</a>
					</div>
					<div class="col-xs-3">          
            <div class="input-group">
              <span class="input-group-addon">名称</span>
              <input type="text" class="input-sm form-control" placeholder="请输入名称" >
            </div>
          </div>
          <div class="col-xs-1">
            <button class="btn btn-sm btn-default" type="button" >搜索</button>
          </div>
				</div>	
				<table class="table table-striped">
					<thead>
						<tr>
							<th>VPN名称</th>
							<th>所属VDC</th>
							<th>所属VPC</th>
							<th>路由器</th>
							<th>网络名称</th>
							<th>操作</th>
						</tr>
					</thead>
					<tbody>
					  <tr>
				      <td><a href="#pages/vdcs/vpns/index">VPN01</a></td>
				      <td>研发部</td>
				      <td>1</td>
				      <td>1</td>
				      <td>1</td>
				      <td><a>删除</a></td>
				    </tr>
				    <tr>
				      <td><a href="#pages/vdcs/vpns/index">VPN01</a></td>
				      <td>研发部</td>
				      <td>1</td>
				      <td>1</td>
				      <td>1</td>
				      <td><a>删除</a></td>
				    </tr>
					</tbody>
				</table>
			</div>
			<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAddVPN }">
			  <div class='modal-dialog' role='document'>
			    <div class='modal-content'>
			      <div class='modal-header'>
			        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
			        <h3 class='modal-title'>创建VPN</h3>
			      </div>
			      <div class='modal-body form-horizontal'>
			        <div class="form-group">
			          <label class="col-xs-3 control-label">
			            VPN名称
			          </label>
			          <div class="col-xs-8">
			            <input class="form-control" type="text" />
			          </div>
			          <div class="col-xs-1">
			            <span class="text-danger inline m-l-n m-t-sm">*</span>
			          </div> 
			        </div>
			        <div class="form-group">
			          <label class="col-xs-3 control-label">
			            所属VDC
			          </label>
			          <div class="col-xs-8">
			            <select class="form-control">
			            	<option>研发部</option>
			            </select>
			          </div>
			          <div class="col-xs-1">
			            <span class="text-danger inline m-l-n m-t-sm">*</span>
			          </div> 
			        </div>
			        <div class="form-group">
			          <label class="col-xs-3 control-label">
			            所属VPC
			          </label>
			          <div class="col-xs-8">
			            <select class="form-control">
			            	<option>VPC01</option>
			            </select>
			          </div>
			          <div class="col-xs-1">
			            <span class="text-danger inline m-l-n m-t-sm">*</span>
			          </div> 
			        </div>
			        <div class="form-group">
			          <label class="col-xs-3 control-label">
			            路由器
			          </label>
			          <div class="col-xs-8">
			            <select class="form-control">
			            	<option>路由器01</option>
			            </select>
			          </div>
			          <div class="col-xs-1">
			            <span class="text-danger inline m-l-n m-t-sm">*</span>
			          </div> 
			        </div>
			        <div class="form-group">
			          <label class="col-xs-3 control-label">
			            网络名称
			          </label>
			          <div class="col-xs-8">
			            <select class="form-control">
			            	<option>net1</option>
			            </select>
			          </div>
			          <div class="col-xs-1">
			            <span class="text-danger inline m-l-n m-t-sm">*</span>
			          </div> 
			        </div>
			        <div class="form-group">
			          <label class="col-xs-3 control-label">
			            描述
			          </label>
			          <div class="col-xs-8">
			            <textarea class="form-control"></textarea>
			          </div>
			        </div>
			      </div>
			      <div class='modal-footer'>
			        <input type="button" name="commit" value="确定"  class="btn btn-default btn-info" />
			        <button name="button" type="submit" class="btn btn-default" data-dismiss="modal">取消</button>
			      </div>
			    </div>
			  </div>
			</div>
		</div>
	</div>
</div>

<!-- page specific plugin scripts -->
<script type="text/javascript">
	var scripts = ["api/vpc/vpc.js","api/vpc/router.js","api/vpc/firewall.js",
	               "api/vpc/secretGroup.js","api/vdc/vdc.js"]
	$('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {

		var pageType = args.type;
		$("#vpcTabs li").eq(pageType).find("a").tab("show");
		
		/******************************vpc*************************************/
    	function vpcViewModel(){
    		var self = this;
    		self.vdcList = ko.observableArray();
    		self.azList = ko.observableArray();
    		this.vpcVO = ko.validatedObservable({
    			     "name":ko.observable("").extend({required: true,cscNameRule:true,maxLength:32}),
					 "vdcUuid":ko.observable("").extend({required: true}),
					 "azUuid":ko.observable("").extend({required: true})
					});
    		
    		this.createVpcModal = ko.observable(false);
    		var subscriptionVdc;
    		this.createVpc = function(){
    			self.vdcList([]);
    			self.azList([]);
    			self.vpcVO.fromJSON({"name":"",
   				 "vdcUuid":"",
   				 "azUuid": "",
   				 "uuid":null
   				});
    			subscriptionVdc = self.vpcVO().vdcUuid.subscribe(function(val){
    				self.azList([]);
	    	    	$.VDC.getVdcAzs(val,{},function(data){
		   				 if(data && data.results){
		   					 self.azList(data.results);
		   				 }
		   			});
	    	    })
	    	    
	    	    $.VDC.getVDCs({},function(data){
    				 if(data && data.results){
    					 self.vdcList(data.results);
    				 }
    			});
    			
    			self.createVpcModal(true)	
    		}
    		
    		
    		this.modifyVpc = function(rowObj, event){
    			subscriptionVdc && subscriptionVdc.dispose();
                self.vdcList([{"uuid": rowObj.vdcUuid,"name": rowObj.vdcName}]);
    			self.azList([{"uuid": rowObj.azUuid,"name": rowObj.azName}]);
    			self.vpcVO.fromJSON(rowObj);
    			self.createVpcModal(true)	
    		}
    		
    		
    		this.vpcSubmit = function(){
    		    var vpcUuid = self.vpcVO.toJSON().uuid;
    			if(!vpcUuid){
    				  ko.validation.group(self.vpcVO).showAllMessages();
    	    	        if(self.vpcVO.isValid()){
    	    	        	$.VPC.createVpc(self.vpcVO.toJSON(),function(data){
    	        			 	self.createVpcModal(false);
    	        		    	self.vpcListTable.refreshData();
    	        			});
    	    	        }
    			}else{
    				ko.validation.group(self.vpcVO).showAllMessages();
          	        if(self.vpcVO.isValid()){
          	        	 var uuid = self.vpcVO.toJSON().uuid;
            			 var putBody = {
            					 "name":self.vpcVO.toJSON().name
            			 }
           				$.VPC.modifyVpc(uuid,putBody,function(data){
           					self.createVpcModal(false);
            		    	self.vpcListTable.refreshData();
               			});
          	        }
    			}
    		}
    		
    		
    		this.delVpc = function(rowObj){
    			var vpcName = rowObj.name;
    			confirm("确定删除VPC["+vpcName+"]？",function(arg){
    				$.VPC.delVpc(rowObj.uuid,function(data){
    					  self.vpcListTable.refreshData();
    					  alert("删除VPC["+vpcName+"]成功！")
           			});
    			 });
    		}
    		
    	    this.searchParam = ko.observable({
    	      name: ""
    	    })
    	    
    	    this.search = function(){
    	      self.vpcListTable.params(this.searchParam());
    	    }
    		
    		this.vpcListTable = new DataTable([], {path: 'api/v5.0.0/vpcs'});
	 	};
	    
	    ko.applyBindings(new vpcViewModel(), $("#page-content .tab-pane")[0]);
		/******************************vpc*************************************/
		
	    /******************************router*************************************/
	    function routerViewModel(){
    		var self = this;
    		self.vdcList = ko.observableArray();
    		self.vpcList = ko.observableArray();
    		self.extNetList = ko.observableArray();
    		self.routerVO = ko.validatedObservable({
    			     "name":ko.observable("").extend({required: true}),
					 "vdcUuid":ko.observable("").extend({required: true}),
					 "vpcUuid":ko.observable("").extend({required: true}),
					 "originalExtnetId":ko.observable()
					});
    		
    		self.createRouterModal = ko.observable(false);
       		var subscriptionVdc;//subscription.dispose();
       		var subscriptionVpc;
    		self.createRouter = function(){
    			self.vdcList([]);
    			self.vpcList([]);
    			self.extNetList([]);
    			//TODO 查询其他模块的接口
    			//self.vdcList([{"vdcUuid": "550E8400-E29B-11D4-A716-4466554400043","vdcName": "信息技术部"},{"vdcUuid": "e6d5c0c0-9a61-4911-a058-62b59cfe68fd","vdcName": "财务部"}])
    			//self.vpcList([{"vpcUuid": "3ade0808-ef77-4a10-b75a-a35704041722","vpcName": "华南区"},{"vpcUuid": "550E8400-E29B-11D4-A716-4466554400043 ","vpcName": "华北区"}])
    			self.routerVO.fromJSON({"name":"",
					 "vdcUuid":"",
					 "vpcUuid": "",
					 "originalExtnetId":"",
					 "uuid":null
					});
    			
    			subscriptionVdc = self.routerVO().vdcUuid.subscribe(function(val){
    				   self.vpcList([]);
    	    	    	$.VPC.getVpcs({vdcUuid:val},function(data){
    		   				 if(data && data.results){
    		   					 self.vpcList(data.results);
    		   				 }
    		   			});
    	    	    })
    	    	    
    	    	subscriptionVpc =  self.routerVO().vpcUuid.subscribe(function(val){
    	    		    self.extNetList([]);
    	    			$.VPC.getVpcNet({vpcUuid:val,type:"EXTERNAL"},function(data){
			    			  if(data && data.results){
			    				  var extNet = [{"name":"请选择","originalId":""}];
			    				  extNet =  extNet.concat(data.results);
			    				  self.extNetList(extNet);
			    			  }
			    		});
    	    	  });
    	    	    
    			$.VDC.getVDCs({},function(data){
    				 if(data && data.results){
    					 self.vdcList(data.results);
    				 }
    			});
    			
    			
   			    self.createRouterModal(true)	
    		}
    		
    		
    		self.modifyRouter = function(rowObj, event){
    			subscriptionVdc && subscriptionVdc.dispose();
    			subscriptionVpc && subscriptionVpc.dispose();
                self.vdcList([{"uuid": rowObj.vdcUuid,"name": rowObj.vdcName}]);
    			self.vpcList([{"uuid": rowObj.vpcUuid,"name": rowObj.vpcName}]);
    			$.VPC.getVpcNet({vpcUuid:rowObj.vpcUuid,type:"EXTERNAL"},function(data){
	    			  if(data && data.results){
	    				  var extNet = [{"name":"请选择","uuid":""}];
	    				  extNet =  extNet.concat(data.results);
	    				  self.extNetList(extNet);
	    			  }
	    			  self.routerVO.fromJSON(rowObj);
	    		});
    			self.createRouterModal(true)	
    		}
      		
    		self.routerSubmit = function(){
    		    var routerUuid = self.routerVO.toJSON().uuid;
    			if(!routerUuid){
    				  ko.validation.group(self.routerVO).showAllMessages();
    	    	        if(self.routerVO.isValid()){
    	    	        	$.ROUTER.createRouter(self.routerVO.toJSON(),function(data){
    	        			 	self.createRouterModal(false);
    	        		    	self.routerListTable.refreshData();
    	        			});
    	    	        }
    			}else{
    				ko.validation.group(self.routerVO).showAllMessages();
          	        if(self.routerVO.isValid()){
          	        	 var uuid = self.routerVO.toJSON().uuid;
            			 var putBody = {
            					 "name":self.routerVO.toJSON().name,
            					 "originalExtnetId":self.routerVO.toJSON().originalExtnetId
            			 }
           				$.ROUTER.modifyRouter(uuid,putBody,function(data){
           					self.createRouterModal(false);
            		    	self.routerListTable.refreshData();
               			});
          	        }
    			}
    		}
    		
    		
    		self.delRouter = function(rowObj){
    			var routerName = rowObj.name;
    			confirm("确定删除路由器["+routerName+"]？",function(arg){
    				$.ROUTER.delRouter(rowObj.uuid,function(data){
    					  self.routerListTable.refreshData();
    					  alert("删除路由器["+routerName+"]成功！")
           			});
    			 });
    		}
    		
    		self.searchRouterParam = ko.observable({
        	      name: ""
        	    })
        	    
       	    self.searchRouter = function(){
       	      self.routerListTable.params(this.searchRouterParam());
       	    }
    		
    		self.routerListTable = new DataTable([], {path: 'api/v5.0.0/routers'});
	 	};
	    
	    ko.applyBindings(new routerViewModel(), $("#page-content .tab-pane")[1]);
	    /******************************router*************************************/
	    
	    
	    /******************************firewall*************************************/
	    function firewallViewModel(){
    		var self = this;
    		self.vdcList = ko.observableArray();
    		self.vpcList = ko.observableArray();
    		self.routerList = ko.observableArray();
    		
    		self.firewallVO = ko.validatedObservable({
    			     "name":ko.observable("").extend({required: true,cscNameRule:true,maxLength:32}),
					 "vdcUuid":ko.observable("").extend({required: true}),
					 "vpcUuid":ko.observable("").extend({required: true}),
					 "routerUuid":ko.observable("").extend({required: true})
					});
    	
    		var subscriptionVdc;//subscription.dispose();
    		var subscriptionVpc;
    		self.createFirewallModal = ko.observable(false);
    		self.createFirewall = function(){
    			self.vdcList([]);
    			self.vpcList([]);
    			self.routerList([]);
    			self.firewallVO.fromJSON({"name":"",
					 "vdcUuid":"",
					 "vpcUuid": "",
					 "routerUuid":"",
					 "uuid":null
					});
    			subscriptionVdc = self.firewallVO().vdcUuid.subscribe(function(val){
    				    self.vpcList([]);
    	    	    	$.VPC.getVpcs({vdcUuid:val},function(data){
    		   				 if(data && data.results){
    		   					 self.vpcList(data.results);
    		   				 }
    		   			});
    	    	    })
    	    	    
    	    	subscriptionVpc =  self.firewallVO().vpcUuid.subscribe(function(val){
    	    		    self.routerList([]);
    	    	    	$.ROUTER.getRouters({vpcUuid:val},function(data){
    		   				 if(data && data.results){
    		   					 self.routerList(data.results);
    		   				 }
    		   			});
    	    	    })
    			
    			$.VDC.getVDCs({},function(data){
    				 if(data && data.results){
    					 self.vdcList(data.results);
    				 }
    			});
    			
   			    self.createFirewallModal(true)	
    		}
    		
    		self.modifyFirewall = function(rowObj, event){
    			subscriptionVdc && subscriptionVdc.dispose();
        		subscriptionVpc  && subscriptionVpc.dispose();
                self.vdcList([{"uuid": rowObj.vdcUuid,"name": rowObj.vdcName}]);
    			self.vpcList([{"uuid": rowObj.vpcUuid,"name": rowObj.vpcName}]);
    			self.routerList([{"uuid": rowObj.routerUuid,"name": rowObj.routerName}]);
    			self.firewallVO.fromJSON(rowObj);
    			self.createFirewallModal(true)	
    		}
    		
      		
    		self.firewallSubmit = function(){
    		    var firewallUuid = self.firewallVO.toJSON().uuid;
    			if(!firewallUuid){
    				  ko.validation.group(self.firewallVO).showAllMessages();
    	    	        if(self.firewallVO.isValid()){
    	    	        	$.FIREWALL.createFirewall(self.firewallVO.toJSON(),function(data){
    	        			 	self.createFirewallModal(false);
    	        		    	self.firewallListTable.refreshData();
    	        			});
    	    	        }
    			}else{
    				ko.validation.group(self.firewallVO).showAllMessages();
          	        if(self.firewallVO.isValid()){
          	        	 var uuid = self.firewallVO.toJSON().uuid;
            			 var putBody = {
            					 "name":self.firewallVO.toJSON().name
            			 }
           				$.FIREWALL.modifyFirewall(uuid,putBody,function(data){
           					self.createFirewallModal(false);
            		    	self.firewallListTable.refreshData();
               			});
          	        }
    			}
    		}
    		
    		
    		self.delFirewall = function(rowObj){
    			var firewallName = rowObj.name;
    			confirm("确定删除防火墙["+firewallName+"]？",function(arg){
    				$.FIREWALL.delFirewall(rowObj.uuid,function(data){
    					  self.firewallListTable.refreshData();
    					  alert("删除防火墙["+firewallName+"]成功！")
           			});
    			 });
    		}
    		
    		self.searchFirewallParam = ko.observable({
        	      name: ""
        	    })
        	    
       	    self.searchFirewall = function(){
       	      self.firewallListTable.params(this.searchFirewallParam());
       	    }
    		
    		self.firewallListTable = new DataTable([], {path: 'api/v5.0.0/firewalls'});
	 	};
	    
	    ko.applyBindings(new firewallViewModel(), $("#page-content .tab-pane")[2]);
	    /******************************firewall*************************************/
	    
        /******************************secretGroup*************************************/
	    function secretGroupViewModel(){
    		var self = this;
    		self.vdcList = ko.observableArray();
    		self.vpcList = ko.observableArray();
    		
    		self.secretGroupVO = ko.validatedObservable({
    			     "name":ko.observable("").extend({required: true}),
					 "vdcUuid":ko.observable("").extend({required: true}),
					 "vpcUuid":ko.observable("").extend({required: true}),
					 "desc":""
					});
    		     
    		self.createSecretGroupModel = ko.observable(false);
      		var subscriptionVdc;//subscription.dispose();
    		self.createSecretGroup = function(){
    			self.vdcList([]);
    			self.vpcList([]);
    			subscriptionVdc = self.secretGroupVO().vdcUuid.subscribe(function(val){
				    self.vpcList([]);
	    	    	$.VPC.getVpcs({vdcUuid:val},function(data){
		   				 if(data && data.results){
		   					 self.vpcList(data.results);
		   				 }
		   			});
	    	    })
	    	    
	    	    $.VDC.getVDCs({},function(data){
    				 if(data && data.results){
    					 self.vdcList(data.results);
    				 }
    			});
	    	    
    			self.secretGroupVO.fromJSON({"name":"",
					 "vdcUuid":"",
					 "vpcUuid": "",
					 "desc":"",
					 "uuid":null
					});
   			    self.createSecretGroupModel(true)	
    		}
    		
    		self.modifySecretGroup = function(rowObj, event){
    			subscriptionVpc  && subscriptionVpc.dispose();
    			
                self.vdcList([{"vdcUuid": "550E8400-E29B-11D4-A716-4466554400043","vdcName": "信息技术部"},{"vdcUuid": "e6d5c0c0-9a61-4911-a058-62b59cfe68fd","vdcName": "财务部"}])
    			self.vpcList([{"vpcUuid": "3ade0808-ef77-4a10-b75a-a35704041722","vpcName": "华南区"},{"vpcUuid": "550E8400-E29B-11D4-A716-4466554400043 ","vpcName": "华北区"}])
    			self.secretGroupVO.fromJSON(rowObj);
    			self.createSecretGroupModel(true)	
    		}
    		
      		
    		self.secretGroupSubmit = function(){
    		    var secretGroupUuid = self.secretGroupVO.toJSON().uuid;
    		    
    			if(!secretGroupUuid){
    				  ko.validation.group(self.secretGroupVO).showAllMessages();
    	    	        if(self.secretGroupVO.isValid()){
    	    	        	$.SECRETGROUP.createSecretGroup(self.secretGroupVO.toJSON(),function(data){
    	    	        	 	self.secretGroupListTable.refreshData();
    	        			 	self.createSecretGroupModel(false);
    	        			});
    	    	        }
    			}else{
    				ko.validation.group(self.secretGroupVO).showAllMessages();
          	        if(self.secretGroupVO.isValid()){
          	        	 var uuid = self.secretGroupVO.toJSON().uuid;
            			 var putBody = {
            					 "name":self.secretGroupVO.toJSON().name
            			 }
           				$.SECRETGROUP.modifySecretGroup(uuid,putBody,function(data){
           					self.secretGroupListTable.refreshData();
           					self.createSecretGroupModel(false);
               			});
          	        }
    			}
    		}
    		
    		
    		self.delSecretGroup = function(rowObj){
    			var secretGroupName = rowObj.name;
    			confirm("确定删除安全组["+secretGroupName+"]？",function(arg){
    				$.SECRETGROUP.delSecretGroup(rowObj.uuid,function(data){
    					  self.secretGroupListTable.refreshData();
    					  alert("删除安全组["+secretGroupName+"]成功！")
           			});
    			 });
    		}
    		
    		self.searchSecretGroupParam = ko.observable({
        	        name: ""
        	    })
        	    
       	    self.searchSecretGroup = function(){
       	      self.secretGroupListTable.params(this.searchSecretGroupParam());
       	    }
    		
    		self.secretGroupListTable = new DataTable([], {path: 'api/v5.0.0/secretGroups'});
	 	};
	    
	    ko.applyBindings(new secretGroupViewModel(), $("#page-content .tab-pane")[3]);
	    /******************************secretGroup*************************************/

	  var VPNViewModel = function(){
	  	this.isAddVPN = ko.observable(false);
	  	var self = this;
	  	this.addVPN = function(){
	  		self.isAddVPN(true);
	  	};
	  };

	  ko.applyBindings(new VPNViewModel(), $("#page-content .tab-pane")[4]);

	});
</script>