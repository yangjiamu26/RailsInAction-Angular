<div class="bg-light lter b-b wrapper-sm">
  <ol class="breadcrumb">
    <li>当前位置：</li>
    <li><a href="#pages/vdcs/vpcs/index">VPC管理</a></li>
    <li class="active">防火墙详情</li>
  </ol>
</div>


<div class='wrapper-md'>
	<div class="nav-tabs-alt bg-white-only">
		<ul class="nav nav-tabs" role="tablist">
			<li class="active" role="presentation">
				<a aria-controls="VPC" data-toggle="tab" href="#baseInfo" role="tab">基本信息</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane active" id="baseInfo" role="tabpanel">
				<div class="wrapper-md">
					<p><strong>防火墙名称：</strong>防火墙01</p>
					<p><strong>所属VDC：</strong>VDC01</p>
					<p><strong>所属VPC：</strong>VPC01</p>
					<p><strong>路由器：</strong>路由器01</p>
				</div>
				<div class="panel panel-default">
					<div class="panel-heading">规则</div>
					<div class="row wrapper">
						<div class="col-xs-9">
							<a class="btn btn-sm btn-primary" data-bind="click:addRule">添加规则</a>
						</div>
						<div class="col-xs-3">

						</div>
					</div>				  
					<div class="table-responsive">
						<table class="table table-striped">
							<thead>
								<tr>
									<th>名称</th>
									<th>协议</th>
									<th>动作</th>
									<th>源IP</th>
									<th>源端口</th>
									<th>目的IP</th>
									<th>目的端口</th>
									<th>规则</th>
									<th>描述</th>
									<th>操作</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>规则1</td>
									<td>TCP</td>
									<td><span class="label label-success">允许</span></td>
									<td>192.168.0.0/23</td>
									<td>20</td>
									<td>192.168.0.0/23</td>
									<td>30</td>
									<td></td>
									<td></td>
									<td>
										<a>修改</a> |
										<a>删除</a>
									</td>
								</tr>							
							</tbody>
						</table>
					</div>
					<footer class="panel-footer">
						<ul class="pagination">
							<li class="page active">
								<a href="#pages/javascript:void(0)">1</a>
							</li>
							<li class="page">
								<a>2</a>
							</li>
							<li class="page">
								<a>3</a>
							</li>
							<li class="page">
								<a>4</a>
							</li>
							<li class="page">
								<a >5</a>
							</li>
							<li class="page gap disabled">
								<a href="#pages/javascript:void(0)">…</a>
							</li>
							<li class="next">
								<a>下页 ›</a>
							</li>
							<li class="last">
								<a>末页 »</a>
							</li>
						</ul>
					</footer>
				</div>
			</div>
		</div>
		<div class="tab-pane" id="tuopu" role="tabpanel">

		</div>
	</div>
</div>

<div role="dialog" aria-hidden="true" id="firewall_rule_add" class="modal fade" data-bind="modal: { show: isAddRule }">
	<div class='modal-dialog modal-md'>
		<div class='modal-content'>
			<div class='modal-header'>
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>添加规则</h3>
			</div>
			<div class='modal-body form-horizontal wrapper'>
		        <div class="form-group">
		          <label class="col-xs-3 control-label">名称</label>
		          <div class="col-xs-8">
		            <input type="text" class="form-control">
		          </div>
		          <div class="col-xs-1">
		            <span class="text-danger inline m-l-n m-t-sm">*</span>
		          </div>          
		        </div>			
		        <div class="form-group">
		          <label class="col-xs-3 control-label">
		            协议
		          </label>
		          <div class="col-xs-8">
		            <select class="form-control" id="s-protocol">
		              <option value="">请选择</option>
		              <option value="v-port">TCP</option>
		              <option value="v-port">UDP</option>
		              <option value="v-noPort">ICMP</option>
		              <option value="v-noPort">任何</option>
		            </select>
		          </div>
		          <div class="col-xs-1">
		            <span class="text-danger inline m-l-n m-t-sm">*</span>
		          </div>          
		        </div>
		        <div class="form-group">
		          <label class="col-xs-3 control-label">
		            动作
		          </label>
		          <div class="col-xs-8">
		            <select class="form-control">
		              <option value="">允许</option>
		              <option value="">拒绝</option>
		            </select>
		          </div>
		          <div class="col-xs-1">
		            <span class="text-danger inline m-l-n m-t-sm">*</span>
		          </div>          
		        </div>
		        <div class="form-group">
		          <label class="col-xs-3 control-label">源IP</label>
		          <div class="col-xs-8">
		            <input type="text" class="form-control">
		          </div>
		          <div class="col-xs-1">
		            <span class="text-danger inline m-l-n m-t-sm">*</span>
		          </div>          
		        </div>
		        <div class="form-group" id="field-sourcePort">
		          <label class="col-xs-3 control-label">
		            源端口/端口范围
		          </label>
		          <div class="col-xs-8">
		            <input class="form-control" type="text"/>
		            <span class="text-info">端口为1~65535的整数，如输入范围，格式为1:65535</span>
		          </div>
		          <div class="col-xs-1">
		            <span class="text-danger inline m-l-n m-t-sm">*</span>
		          </div>          
		        </div>
		        <div class="form-group">
		          <label class="col-xs-3 control-label">目的IP</label>
		          <div class="col-xs-8">
		            <input type="text" class="form-control">
		          </div>
		          <div class="col-xs-1">
		            <span class="text-danger inline m-l-n m-t-sm">*</span>
		          </div>          
		        </div>		        		        		        			
		        <div class="form-group" id="field-destinationPort">
		          <label class="col-xs-3 control-label">
		            目的端口/端口范围
		          </label>
		          <div class="col-xs-8">
		            <input class="form-control" type="text"/>
		            <span class="text-info">端口为1~65535的整数，如输入范围，格式为1:65535</span>
		          </div>
		          <div class="col-xs-1">
		            <span class="text-danger inline m-l-n m-t-sm">*</span>
		          </div>          
		        </div>        
		        <div class="form-group">
		          <label class="col-xs-3 control-label">
		            规则位置
		          </label>
		          <div class="col-xs-8">
		            <select class="form-control inline w-sm v-middle">
		              <option value="">前于</option>
		              <option value="">后于</option>
		            </select>
		            <select class="form-control inline w-sm v-middle">
		              <option value="">规则1</option>
		              <option value="">规则2</option>
		            </select>
		          </div>
		          <div class="col-xs-1">
		            <span class="text-danger inline m-l-n m-t-sm">*</span>
		          </div>          
		        </div>
		        <div class="form-group">
		          <label class="col-xs-3 control-label">
		            描述
		          </label>
		          <div class="col-xs-8">
		            <textarea class="form-control" rows="5"></textarea>
		          </div>         
		        </div>
			</div>
			<div class='modal-footer' style="text-align:center;">
				<a class="btn btn-default btn-info">确定</a>
				<a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
			</div>
		</div>
	</div>
</div>

<!-- page specific plugin scripts -->
<script type="text/javascript">
var scripts = [null, null]
$('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
    function ViewModel(){
      this.isAddRule = ko.observable(false);

      this.addRule = function(){
        this.isAddRule(true);
      };
    };

    ko.applyBindings(new ViewModel(), $('#page-content')[0]);  

    $("#firewall_rule_add").on("shown.bs.modal",function(){
		// 根据协议显示隐藏相关字段
	    $('#s-protocol').bind('change', function(){
	      var val = $(this).val();
	      switch(val){
	      case 'v-port': $('#field-sourcePort,#field-destinationPort').show(); break;
	      case 'v-noPort': $('#field-sourcePort,#field-destinationPort').hide(); break;
	      }
	    }); 
	})
    
});
</script>