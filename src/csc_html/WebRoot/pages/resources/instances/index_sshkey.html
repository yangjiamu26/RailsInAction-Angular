<div class='panel panel-default'>
          <div class="row wrapper">
            <div class="col-xs-1">
              <button class="btn btn-sm btn-primary" data-bind="click: addSecretkey">创建</button>
            </div>
            <div class="col-xs-3">
              <div class="input-group">
                <span class="input-group-addon">所属VDC</span>
                <select class="form-control input-sm" data-bind="value: searchParam().vdcUuid, options: $root.vdcs, optionsText: 'name', optionsValue: 'id'"></select>
              </div>      
            </div>  
            <div class="col-xs-3">
              <div class="input-group">
                <span class="input-group-addon">所属可用分区</span>
               <select class="form-control input-sm" data-bind="value: searchParam().azUuid, options: $root.partitions, optionsText: 'name', optionsValue: 'uuid'"></select>
              </div>      
            </div>                        
            <div class="col-xs-3">
              <div class="input-group">
                      <span class="input-group-addon">名称</span>
                      <input type="text" class="input-sm form-control" placeholder="请输入名称">
                    </div>
            </div>
            <div class="col-xs-2">
              <button class="btn btn-sm" type="button">重置</button>
              <button class="btn btn-sm btn-default" type="button">搜索</button>
            </div>
          </div>                         
          <div id='instance_sshkeys'>
            <div class='table-responsive' data-bind="with: table">
              <table class='table table-striped'>
                <thead>
                  <tr>
                    <th>密钥名称</th>
                    <th>指纹</th>
                    <th>公钥</th>
                    <th>可用分区</th>
                    <th>所属VDC</th>
                    <th>服务状态</th>
                    <th>有效期</th>
                   <!--  <th>创建时间</th> -->
                    <th>创建人</th>
                    <th>操作</th>
                  </tr>
                </thead>
                <tbody>
                   <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
                  <tr>
                    <td data-bind="text:name">测试密钥1</td>
                    <td data-bind="text:fingerprint">8a:c6:9a:8a:c6:9a:8a:c6:9a:8a:c6:9a:8a:c6:9a:8a:c6:9a</td>
                    <td data-bind="text:publicKey">AAAAAAAAAA</td>
                    <td data-bind="text:azName">AZ1</td>
                    <td data-bind="text:vdcName">VDC1</td>
                    <td>
		            	<span class="label label-success" data-bind="if:isValidate">正常</span>
		              	<span class="label label-danger" data-bind="ifnot:isValidate">已过期</span>
		            </td>
		            <td data-bind="text:expiryDate">2016-06-29 11:55</td>
		           <!--  <td data-bind="text:createTime">2016-06-29 13:56</td> -->
		            <td data-bind="text:userName">admin</td>
                    <td><a href="#">下载</a> | <a href="#" data-bind="click: $root.bindvmForSecretkey">查看挂载云主机</a> | <a>有效时间变更</a> | <a>终止</a> | <a href="#">删除</a></td>
                  </tr>
                   <!-- /ko -->
                </tbody>
              </table>
            </div>
             <footer class="panel-footer" data-bind="with: table, visible: table.pages() > 1">
		      <ul class="pagination">
		        <li data-bind="css: leftPagerClass, click: prevPage">
		          <a href="#">&laquo;</a>
		        </li>
		        <!-- ko foreach: {data: (new Array(pages()))} -->
		        <li data-bind="css: $parent.pageClass($index() + 1)">
		          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
		        </li>
		        <!-- /ko -->
		        <li data-bind="css: rightPagerClass, click: nextPage">
		          <a href="#">&raquo;</a>
		        </li>
		      </ul>
		    </footer>
          </div>
          <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isBindvmForSecretkey}">
            <div class='modal-dialog modal-lg' style="width:600px;">
              <div class='modal-content'>
                <div class='modal-header'>
                  <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>绑定云主机</h3>
                </div>
                <div class='modal-body form-horizontal row'>
                  <div class="form-group">
                    <label class="col-sm-3 control-label">密钥名称：</label>
                    <div class="col-sm-8">
                      <span>密钥111</span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-3 control-label">云主机：</label>
                    <div class="col-sm-8">
                      <select class="form-control">
                        <option value="1">1</option>
                      </select>
                    </div>
                  </div>
                  
                </div>
                <div class='modal-footer' style="text-align:center;">
                  <a class="btn btn-default btn-info">确定</a>
                  <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
                </div>
              </div>
            </div>
          </div>

          <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAddSecretkey }">
            <div class='modal-dialog modal-lg' style="width:600px;">
              <div class='modal-content'>
                <div class='modal-header'>
                  <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>创建密钥</h3>
                </div>
                <div class='modal-body form-horizontal row'>
                  <div class="form-group">
                    <label class="col-sm-3 control-label">SSH密钥名称</label>
                    <div class="col-sm-8">
                      <input type="text" class="form-control"  placeholder="SSH密钥名称">
                    </div>
                    <div class="col-sm-1">
                      <span class="text-danger inline m-l-n m-t-sm">*</span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-3 control-label">所属VDC</label>
                    <div class="col-sm-8">
                      <select class="form-control">
                        <option>研发部</option>
                      </select>
                    </div>
                    <div class="col-sm-1">
                      <span class="text-danger inline m-l-n m-t-sm">*</span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-3 control-label">可用分区</label>
                    <div class="col-sm-8">
                      <select class="form-control">
                        <option>可用分区1</option>
                      </select>
                    </div>
                    <div class="col-sm-1">
                      <span class="text-danger inline m-l-n m-t-sm">*</span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-3 control-label">申请时长</label>
                    <div class="col-sm-9">
                      <div>
                        <label class="radio-inline" style="padding-top: 2px">
                          <input type="radio"  name="inlineRadioOptions" id="inlineRadio1" value="option1"> 永久
                        </label>
                      </div>
                      <div>
                        <label class="radio-inline">
                          <input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2" style="margin-top:10px"> 
                          <input type="text" class="form-control input-sm inline w-xxs">
                          <select class="form-control inline w-xs input-sm">
                            <option value="">月</option>
                          </select>  
                        </label>
                      </div>
                      <div>
                        <label class="radio-inline">
                          <input type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3" style="margin-top:10px"> 有效期至
                             <input type="text" value="" class="form-control inline w input-sm" id="vm_duration">
                        </label> 
                      </div>                                   
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-3 control-label">备注</label>
                    <div class="col-sm-8">
                      <textarea class="form-control"></textarea>
                    </div>
                    <div class="col-sm-1">
                      <span class="text-danger inline m-l-n m-t-sm">*</span>
                    </div>
                  </div>
                  
                </div>
                <div class='modal-footer' style="text-align:center;">
                  <a class="btn btn-default btn-info">确定</a>
                  <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
                </div>
              </div>
            </div>
          </div>
        </div>

<script type="text/javascript">
  var scripts = [null, "assets/lib/moment/moment.js","assets/lib/bootstrap-daterangepicker/daterangepicker.js","api/resourceInstance/sshkey/sshkey.js"]
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
    function ViewModel_SSHKey(){
      var self = this;
      this.isBindvmForSecretkey = ko.observable(false);
      this.isAddSecretkey = ko.observable(false);

      this.bindvmForSecretkey = function(){
        self.isBindvmForSecretkey(true);
      };
      this.addSecretkey = function(){
        self.isAddSecretkey(true);
      };
      
      
      

      //定义搜索下拉选择
      this.vdcs = ko.observableArray([]);
      this.loadVdcs = function(){
        $.ajax("pages/resources/instances/object_storages_vdcs.json").done(function(data){
          self.vdcs(data.results);
        });
      }
      this.partitions = ko.observableArray([]);
      this.loadPartitions = function(){
        $.ajax("pages/resources/instances/object_storages_azs.json").done(function(data){
          self.partitions(data.results);
        });
      }
      //加载搜索下拉框数据
      this.loadVdcs();
      this.loadPartitions();
      
      //添加时下拉，可以加载页面时加载，也可以弹窗时加载
      this.vdcsAdd = ko.observableArray([]);
      this.loadVdcsAdd = function(){
        $.ajax("pages/resources/instances/object_storages_vdcs.json").done(function(data){
          self.vdcsAdd(data.results);
        });
      }
      this.partitionsAdd = ko.observableArray([]);
      this.loadPartitionsAdd = function(){
        $.ajax("pages/resources/instances/object_storages_azs.json").done(function(data){
          self.partitionsAdd(data.results);
        });
      }
      //加载创建弹出框中的vdc和az
      this.loadVdcsAdd();
      this.loadPartitionsAdd();
     

      this.searchParam = ko.observable({
        azUuid: '',
        vdcUuid: '',
        name: ''
      })
      this.reset = function(){
        this.searchParam({
          azUuid: '',
          vdcUuid: '',
          name: ''
        });
        
        this.table.params({});
      }
      this.search = function(){
        this.table.params(this.searchParam());
      }
      this.table = new DataTable([], {path: 'api/v5.0.0/sshKeys'});
      
      
      
   
      
      
      
      
    };   
     ko.applyBindings(new ViewModel_SSHKey(), $('#partition_sshkeys')[0]); 
  })
</script>