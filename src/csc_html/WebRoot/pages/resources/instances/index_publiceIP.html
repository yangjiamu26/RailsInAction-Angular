<div class='panel panel-default'>
  <div class="row wrapper">
    <div class="col-xs-1">
      <div class="input-group">
        <button class="btn btn-primary btn-sm" data-bind="click:createPubliceIP">创建</button>
      </div>      
    </div>
    <div class="col-xs-3">
      <div class="input-group">
        <span class="input-group-addon">所属可用分区</span>
        <select class="form-control input-sm" data-bind="value: searchParam().partition, options: $root.partitions, optionsText: 'name', optionsValue: 'id'"></select>
      </div>      
    </div> 
    <div class="col-xs-3">
      <div class="input-group">
        <span class="input-group-addon">所属VDC</span>
        <select class="form-control">
          <option>VDC1</option>
        </select>
      </div>      
    </div>            
    <div class="col-xs-3">
      <div class="input-group">
        <span class="input-group-addon">名称</span>
        <input type="text" class="input-sm form-control" placeholder="请输入名称" data-bind="value: searchParam().name">
      </div>
    </div>
    <div class="col-xs-2">
      <button class="btn btn-sm" type="button" data-bind="click: reset">重置</button>
      <button class="btn btn-sm btn-default" type="button" data-bind="click: search">搜索</button>
    </div>
  </div>                        
  <div id='instance_publicips'>
    <div class='table-responsive'>
      <table class='table table-striped'>
        <thead>
          <tr>
            <th>公网IP名称</th>
            <th>IP地址</th>
            <th>子网掩码</th>
            <th>可用分区</th>
            <th>所属VDC</th>
            <th>所属VPC</th>
            <th>路由器</th>
            <th>云主机</th>
            <th>服务状态</th>
            <th>创建时间</th>
            <th>有效期</th>
            <th>创建人</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>电信IP</td>
            <td>192.168.1.1</td>
            <td>255.255.255.0</td>
            <td>可用分区名</td>
            <td>xxx</td>
            <td>xxx</td>
            <td>xxx</td>
            <td>xxx</td>
            <td><label class="label label-success">正常</label></td>
            <td>20160501</td>
            <td>20160501-20160520</td>
            <td>admin</td>
            <td><a href="#" data-bind="click: bindvmForIP">绑定云主机</a> | <a href="#">解绑</a>  | <a href="#">有效时间变更</a>  | <a href="#">终止</a>  | <a href="#">删除</a></td>
          </tr>
        </tbody>
      </table>
    </div>
    <footer class='panel-footer'>
      <ul class="pagination">
        <li class="page active">
          <a href="#pages/javascript:void(0)">1</a></li>
          <li class="page">
            <a rel="next" href="#pages/http://localhost/resource_instances?locale=zh-CN&amp;page_instance_publicips=2">2</a></li>
            <li class="page">
              <a href="#pages/http://localhost/resource_instances?locale=zh-CN&amp;page_instance_publicips=3">3</a></li>
              <li class="page">
                <a href="#pages/http://localhost/resource_instances?locale=zh-CN&amp;page_instance_publicips=4">4</a></li>
                <li class="page">
                  <a href="#pages/http://localhost/resource_instances?locale=zh-CN&amp;page_instance_publicips=5">5</a></li>
                  <li class="page gap disabled">
                    <a href="#pages/javascript:void(0)">&hellip;</a></li>
                    <li class="next">
                      <a rel="next" href="#pages/http://localhost/resource_instances?locale=zh-CN&amp;page_instance_publicips=2">下页 &rsaquo;</a></li>
                      <li class="last">
                        <a href="#pages/http://localhost/resource_instances?locale=zh-CN&amp;page_instance_publicips=63">末页 &raquo;</a></li>
                      </ul>
                    </footer>
                  </div>

                  <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isBindvmForIP }">
                    <div class='modal-dialog modal-lg' style="width:600px;">
                      <div class='modal-content'>
                        <div class='modal-header'>
                          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>绑定云主机</h3>
                        </div>
                        <div class='modal-body form-horizontal row'>
                          <div class="form-group">
                            <label class="col-sm-3 control-label">公网IP：</label>
                            <div class="col-sm-8">
                              <span>150.152.11.25</span>
                            </div>
                          </div>
                          <div class="form-group">
                            <label class="col-sm-3 control-label">云主机：</label>
                            <div class="col-sm-8">
                              <select class="form-control">
                                <option value="1">1</option>
                              </select>
                            </div>
                          </div>

                        </div>
                        <div class='modal-footer' style="text-align:center;">
                          <a class="btn btn-default btn-info">确定</a>
                          <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal:{show:isCreatePubliceIP}">
                    <div class='modal-dialog' role='document'>
                      <div class='modal-content'>
                        <div class='modal-header'>
                          <button type="button" class="close" data-dismiss="modal">
                            <span aria-hidden="true">&times;</span>
                          </button>
                          <h3 class='modal-title'>创建公网IP</h3>
                        </div>
                        <div class='modal-body form-horizontal'>

                          <div class="form-group">
                            <label class="col-sm-3 control-label">公网IP名称</label>
                            <div class="col-sm-8">
                              <input type="text" class="form-control"  placeholder="公网IP名称">
                            </div>
                            <div class="col-sm-1">
                              <span class="text-danger inline m-l-n m-t-sm">*</span>
                            </div>
                          </div>

                          <div class="form-group">
                            <label class="col-sm-3 control-label">所属VDC</label>
                            <div class="col-sm-8">
                              <select class="form-control">
                                <option>研发部1</option>
                                <option>研发部2</option>
                              </select>
                            </div>
                            <div class="col-sm-1">
                              <span class="text-danger inline m-l-n m-t-sm">*</span>
                            </div>
                          </div>

                          <div class="form-group">
                            <label class="col-sm-3 control-label">所属VPC</label>
                            <div class="col-sm-8">
                              <select class="form-control">
                                <option>208</option>
                                <option>206</option>
                              </select>
                            </div>
                            <div class="col-sm-1">
                              <span class="text-danger inline m-l-n m-t-sm">*</span>
                            </div>
                          </div>

                          <div class="form-group">
                            <label class="col-sm-3 control-label">可用分区</label>
                            <div class="col-sm-8">
                              <select class="form-control">
                                <option>可用分区1</option>
                                <option>可用分区2</option>
                              </select>
                            </div>
                            <div class="col-sm-1">
                              <span class="text-danger inline m-l-n m-t-sm">*</span>
                            </div>
                          </div>

                          <div class="form-group">
                            <label class="col-sm-3 control-label">网络名称</label>
                            <div class="col-sm-8">
                              <select class="form-control">
                                <option>网络1</option>
                                <option>网络2</option>
                              </select>
                            </div>
                            <div class="col-sm-1">
                              <span class="text-danger inline m-l-n m-t-sm">*</span>
                            </div>
                          </div>

                          <div class="form-group">
                            <label class="col-sm-3 control-label">申请时长</label>
                            <div class="col-sm-9">
                              <div>
                                <label class="radio-inline" style="padding-top: 2px">
                                  <input type="radio"  name="inlineRadioOptions" id="inlineRadio1" value="option1"> 永久
                                </label>
                              </div>
                              <div>
                                <label class="radio-inline">
                                  <input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2" style="margin-top:10px"> 
                                  <input type="text" class="form-control input-sm inline w-xxs">
                                  <select class="form-control inline w-xs input-sm">
                                    <option value="">月</option>
                                  </select>  
                                </label>
                              </div>
                              <div>
                                <label class="radio-inline">
                                  <input type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3" style="margin-top:10px"> 有效期至
                                  <input type="text" value="" class="form-control inline w input-sm" id="vm_duration">
                                </label> 
                              </div>                                   
                            </div>
                          </div>

                          <div class="form-group">
                            <label class="col-sm-3 control-label">备注</label>
                            <div class="col-sm-8">
                              <textarea class="form-control"></textarea>
                            </div>
                            <div class="col-sm-1">
                              <span class="text-danger inline m-l-n m-t-sm">*</span>
                            </div>
                          </div>
                        </div>
                        <div class='modal-footer'>
                          <button name="button" type="submit" class="btn btn-primary " data-dismiss="modal">确定</button>
                          <button name="button" type="submit" class="btn btn-default " data-dismiss="modal">取消</button>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
<script type="text/javascript">
  var scripts = [null, "assets/lib/moment/moment.js","assets/lib/bootstrap-daterangepicker/daterangepicker.js"]
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
    function ViewModel_PublicIP(){
      var self = this;
      this.isBindvmForIP = ko.observable(false);
      this.isCreatePubliceIP = ko.observable(false);
      this.createPubliceIP = function(){
        self.isCreatePubliceIP(true);
      };
      this.bindvmForIP = function(){
        self.isBindvmForIP(true);
      };

      this.unbind = function(object, event){

      }

      this.searchParam = ko.observable({
        partition: '',
        name: ''
      })
      this.reset = function(){
        this.searchParam({
          partition: '',
          name: ''
        });
        this.table.params({})
      }
      this.search = function(){
        this.table.params(this.searchParam());
      }
      this.table = new DataTable([], {path: 'pages/resources/instances/publicips.json'})

      //下拉选择
      this.partitions = ko.observableArray([]);
      this.loadPartitions = function(){
        $.ajax("pages/resources/partitions/index.json").done(function(data){
          self.partitions(data.results);
        });
      }
      this.loadPartitions();
    }
     ko.applyBindings(new ViewModel_PublicIP(), $('#partition_publicips')[0]);
  })
</script>