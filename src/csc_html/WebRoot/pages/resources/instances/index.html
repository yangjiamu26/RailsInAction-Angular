<div class="bg-light lter b-b wrapper-sm">
  <ol class="breadcrumb">
    <li>当前位置：</li>
    <li>资源</li>
    <li class="active">资源实例</li>
  </ol>
</div>

<div class="wrapper-md">
  <div class='nav-tabs-alt bg-white-only b b-blue'>
    <ul class='nav nav-tabs' role='tablist' id="instancesListBox">
      <li class='active' role='presentation'>
        <a id='vmsTab' aria-controls='partition_vms' data-toggle='tab' href='#partition_vms' role='tab'>云主机</a></li>
      <li role='presentation'>
        <a id='storagesTab' aria-controls='partition_storages' data-toggle='tab' href='#partition_storages' role='tab'>云硬盘</a></li>
      <li role='presentation'>
        <a id='publicipsTab' aria-controls='partition_publicips' data-toggle='tab' href='#partition_publicips' role='tab'>公网IP</a></li>
      <li role='presentation'>
        <a id='balancerTab' aria-controls='partition_balancer' data-toggle='tab' href='#partition_balancer' role='tab'>负载均衡器</a></li>
      <li role='presentation'>
        <a id='sshkeysTab' aria-controls='partition_sshkeys' data-toggle='tab' href='#partition_sshkeys' role='tab'>SSH密钥</a></li>
      <li role='presentation'>
        <a id='objectStoragesTab' aria-controls='partition_object_storages' data-toggle='tab' href='#partition_object_storages' role='tab'>对象存储</a></li>
      <li role='presentation'>
        <a aria-controls='partition_tasks' data-toggle='tab' href='#partition_tasks' role='tab'>调度任务</a></li>
    </ul>
    <div class='tab-content'>
      <div class='tab-pane active' id='partition_vms' role='tabpanel'></div>
      <div class='tab-pane' id='partition_storages' role='tabpanel'></div>
      <div class='tab-pane' id='partition_publicips' role='tabpanel'></div>   
      <div class='tab-pane' id="partition_balancer" role='tabpanel'></div>                                     
      <div class='tab-pane' id='partition_sshkeys' role='tabpanel'></div>
      <div class='tab-pane' id='partition_object_storages' role='tabpanel'></div>
      <div class='tab-pane' id='partition_tasks' role='tabpanel'></div>
    </div>
  </div>
</div>

<!-- page specific plugin scripts -->
<!-- 解决接口跨域的问题 -->
<script src="api/v5.0.0/uap/register"></script>
<!-- 解决js跨域的问题 -->
<script src="api/register.js"></script>  
<!-- 解决调用servlet跨域问题 -->
<script src="api/file/uploadServlet"></script>
<script type="text/javascript">
  var scripts = [null, "assets/lib/moment/moment.js","assets/lib/bootstrap-daterangepicker/daterangepicker.js"]
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
    //如果是普通用户就隐藏tab按钮
    if(args.type){
      console.log($("#instancesListBox").hide().find("li").eq(args.type).find("a").attr("href"));
      $("#instancesListBox").hide().find("li").eq(args.type).find("a").tab('show');
    };
    
    //异步加载各个tab的页面    
    $("#partition_vms").load("pages/resources/instances/index_vm.html");
    $("#partition_storages").load("pages/resources/instances/index_storage.html");
    $("#partition_publicips").load("pages/resources/instances/index_publiceIP.html");
    $("#partition_balancer").load("pages/resources/instances/index_balancer.html");
    $("#partition_sshkeys").load("pages/resources/instances/index_sshkey.html");
    $("#partition_object_storages").load("pages/resources/instances/index_objectstorage.html");
    $("#partition_tasks").load("pages/resources/instances/index_task.html");
   
  	//获取URL参数对象
	function UrlSearch() {
		var name,value; 
		var str=location.href; //取得整个地址栏
		var num=str.indexOf("?") 
		str=str.substr(num+1); //取得所有参数   stringvar.substr(start [, length ]
	
		var arr=str.split("&"); //各个参数放到数组里
		for(var i=0;i < arr.length;i++){ 
			num=arr[i].indexOf("="); 
			if(num>0){ 
				name=arr[i].substring(0,num);
				value=arr[i].substr(num+1);
				this[name]=value;
			}
		}
	}
  	
	var requestParam = new UrlSearch();
	
	//显示不同的tab，待办/已办
	if(requestParam.showTab == 'vmsTab' || requestParam.showTab == 'storagesTab'
		 || requestParam.showTab == 'publicipsTab' || requestParam.showTab == 'balancerTab'
			 || requestParam.showTab == 'sshkeysTab' || requestParam.showTab == 'objectStoragesTab'){
		$("#"+requestParam.showTab).tab("show");
	}
  });
</script>