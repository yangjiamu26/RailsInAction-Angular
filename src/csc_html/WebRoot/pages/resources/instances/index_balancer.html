<div>
<!-- 负载均衡器列表 -->
<div data-bind="visible: !isShowDetail()">
  <!-- 负载均衡器搜索栏 -->
  <div class="row wrapper">
    <div class="col-xs-1">
      <button class="btn btn-sm btn-info" data-bind="click:showCreatePageFun">创建</button>     
    </div>
    <div class="col-xs-3">
      <div class="input-group">
        <span class="input-group-addon">所属VDC</span>
        <select class="form-control input-sm" data-bind="value: searchParam().vdcUuid, options: searchVdcList, optionsText: 'name', optionsValue: 'uuid'">
          <option>VDC1</option>
        </select>
      </div>     
    </div>   
    <div class="col-xs-3">
      <div class="input-group">
        <span class="input-group-addon">所属可用分区</span>
        <select class="form-control input-sm" data-bind="value: searchParam().azUuid, options: searchAzList, optionsText: 'name', optionsValue: 'uuid'">
          <option>可用分区1</option>
        </select>
      </div>     
    </div>            
    <div class="col-xs-3">
      <div class="input-group">
        <span class="input-group-addon">名称</span>
        <input type="text" class="input-sm form-control" placeholder="请输入名称" data-bind="value: searchParam().name">
      </div>
    </div>
    <div class="col-xs-2">
      <button class="btn btn-sm" type="button" data-bind="click:reset">重置</button>
      <button class="btn btn-sm btn-default" type="button" data-bind="click: searchLb">搜索</button>
    </div>
  </div> 
  <!-- 负载均衡器列表 -->                       
  <div id='instance_balancers'>
    <div class='table-responsive' data-bind="with: loadBalancerTable">
      <table class='table table-striped'>
        <thead>
          <tr>
            <th>负载均衡器名称</th>
            <th>所属VDC</th>
            <th>可用分区</th>
            <th>所属VPC</th>
            <th>网络</th>
            <th>协议</th>
            <th>负载方式</th>
            <th>状态</th>
            <th>VIP</th>
            <th>VIP地址</th>
            <th>服务状态</th>
            <th>有效期</th>
            <th>创建人</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          <tr data-bind="visible: showNoData">
            <td colspan=13 class="aligncenter">
             	 暂无数据
            </td>
          </tr>
          <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
          <tr>
            <td><a data-bind="click: $root.showDetailFun"><span data-bind="text: $row.name"></span></a></td><!-- 负载均衡器名称 -->
            <td data-bind="text: $row.vdcName">VDC1</td> <!-- 所属VDC -->
            <td data-bind="text: $row.azName">AZ1</td>  <!-- 可用分区 -->
            <td data-bind="text: $row.vpcName">VPC1</td><!-- 所属VPC -->
            <td data-bind="text: $row.cidr">192.168.208.0/24</td><!-- 网络 -->
            <td data-bind="text: $row.protocol">TCP</td><!-- 协议 -->
            <td data-bind="text: $row.lbMethod">ROUNB_ROBIN</td><!-- 负载方式 -->
            <td data-bind="text: $row.state">运行中</td><!-- 状态 -->
            <td data-bind="text: $row.vipName">VIP1</td><!-- VIP名称 -->
            <td data-bind="text: $row.vipAddress">1</td><!-- VIP地址 -->
            <td data-bind="text: $row.serviceState">正常</td><!-- 服务状态 -->
            <td data-bind="text: $row.createTime">20160605</td><!-- 有效期 -->
            <td data-bind="text: $row.account">admin</td><!-- 创建人 -->
            <td><a data-bind="click: $root.addVipPageFun">添加VIP</a> |<a data-bind="click:$root.addVipPageFun">编辑VIP</a> | <a href="#">有效时间变更</a> | <a>终止</a> | <a>删除</a></td>
          </tr>
          <!-- /ko -->
        </tbody>
      </table>
    </div>
     <!-- 负载均衡器分页 -->
    <footer class="panel-footer" data-bind="with: loadBalancerTable, visible: loadBalancerTable.pages() > 1">
      <ul class="pagination">
        <li data-bind="css: leftPagerClass, click: prevPage">
          <a href="#">&laquo;</a>
        </li>
        <!-- ko foreach: {data: (new Array(pages()))} -->
        <li data-bind="css: $parent.pageClass($index() + 1)">
          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
        </li>
        <!-- /ko -->
        <li data-bind="css: rightPagerClass, click: nextPage">
          <a href="#">&raquo;</a>
        </li>
      </ul>
    </footer>
  </div>
</div>
<!-- 创建负载均衡器页面 -->
  <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal:{show:showCreatePage}">
    <div class='modal-dialog modal-lg' role='document'>
      <div class='modal-content'>
        <div class='modal-header'>
          <button type="button" class="close" data-dismiss="modal">
            <span aria-hidden="true">&times;</span>
          </button>
          <h3 class='modal-title'>创建负载均衡器</h3>
        </div>
        <div class='modal-body form-horizontal' data-bind="with: createBlVo">
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label class="col-sm-4 control-label">负载均衡器名称</label>
                <div class="col-sm-7">
                  <input type="text" class="form-control"  placeholder="负载均衡器名称" data-bind="value: name">
                </div>
                <div class="col-sm-1">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <div class="form-group">
                <label class="col-sm-3 control-label">所属VDC</label>
                <div class="col-sm-8">
                  <select class="form-control" data-bind="options:$root.vdcList,optionsText:'name', optionsValue:'uuid',value: vdcUuid">
                  	<option>可用分区1</option>
                  </select>
                </div>
                <div class="col-sm-1">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label class="col-sm-3 control-label">可用分区</label>
                <div class="col-sm-8">
                  <select class="form-control" data-bind="options:$root.azList,optionsText:'name',optionsValue:'uuid',value: azUuid, disable: vdcUuid==null">
                    <option>可用分区1</option>
                  </select>
                </div>
                <div class="col-sm-1">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label class="col-sm-3 control-label">VPC</label>
                <div class="col-sm-8">
                  <select class="form-control" data-bind="options:$root.vpcList,optionsText:'name',optionsValue:'uuid',value: vpcUuid, disable: csc.util.isNull(azUuid)">
                    <option>208</option>
                  </select>
                </div>
                <div class="col-sm-1">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label class="col-sm-3 control-label">网络</label>
                <div class="col-sm-8">
                  <select class="form-control" data-bind="options:$root.subnetList,optionsText:'cidr',optionsValue:'originalSubId',value: subnetId, disable: vpcUuid==null">
                    <option>192.168.0.0/24</option>
                  </select>
                </div>
                <div class="col-sm-1">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label class="col-sm-3 control-label">协议</label>
                <div class="col-sm-8">
                  <select class="form-control" data-bind="options:$root.protocolList, value: protocol">
                    <option>TCP</option>
                  </select>
                </div>
                <div class="col-sm-1">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label class="col-sm-3 control-label">负载均衡方式</label>
                <div class="col-sm-8">
                  <select class="form-control" data-bind="options:$root.lbMethodList, value: lbMethod">
                    <option>RoUND_ROBIN</option>
                  </select>
                </div>
                <div class="col-sm-1">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label class="col-sm-3 control-label">备注</label>
                <div class="col-sm-8">
                  <textarea class="form-control" data-bind="text: desc"></textarea>
                </div>
                <div class="col-sm-1">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group">
                <label class="col-xs-1 control-label no-padder-h">申请时长</label>
                <div class="col-xs-10">
                  <label class="radio-inline" style="padding-top: 2px">
                    <input type="radio" name="inlineRadioOptions" value="option1" checked="checked"> 永久
                  </label>
                  <label class="radio-inline">
                    <input type="radio" name="inlineRadioOptions"  value="option2" style="margin-top:10px"> 
                    <input type="text" class="form-control inline w-xxs" >
                    <select class="form-control inline w-xs">
                      <option value="DAY">日</option>
                      <option value="MONTH">月</option>
                    </select>  
                  </label>
                  <label class="radio-inline">
                    <input type="radio" name="inlineRadioOptions"  value="option3" style="margin-top:10px"> 有效期至
                    <input type="text" value="" class="form-control inline w">
                  </label>                                    
                </div>
                <div class="col-xs-1">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class='modal-footer'>
          <button name="button" class="btn btn-primary " data-bind="click: createLoadBalancer">确定</button>
          <button name="button" class="btn btn-default " data-dismiss="modal">取消</button>
        </div>
      </div>
    </div>
  </div>
<!-- 创建负载均衡器页面 END -->

<!-- 添加VIP页面 -->
  <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal:{show:showAddVipPage}">
    <div class='modal-dialog' role='document'>
      <div class='modal-content'>
        <div class='modal-header'>
          <button type="button" class="close" data-dismiss="modal">
            <span aria-hidden="true">&times;</span>
          </button>
          <h3 class='modal-title'>添加VIP</h3>
        </div>
        <div class='modal-body form-horizontal' >
          <div class="form-group">
            <label class="col-xs-3 control-label">VIP名称</label>
            <div class="col-xs-8">
              <input type="text" class="form-control" >
            </div>
            <div class="col-xs-1">
              <span class="text-danger inline m-l-n m-t-sm">*</span>
            </div>
          </div>
          <div class="form-group">
            <label class="col-xs-3 control-label">网络</label>
            <div class="col-xs-8">
              <select class="form-control">
                <option>192.168.0.0/24</option>
              </select>
            </div>
            <div class="col-xs-1">
              <span class="text-danger inline m-l-n m-t-sm">*</span>
            </div>
          </div>
          <div class="form-group">
            <label class="col-xs-3 control-label">指定IP</label>
            <div class="col-xs-8">
              <select class="form-control">
                <option>192.168.0.7</option>
              </select>
            </div>
            <div class="col-xs-1">
              <span class="text-danger inline m-l-n m-t-sm">*</span>
            </div>
          </div>
          <div class="form-group">
            <label class="col-xs-3 control-label">协议</label>
            <div class="col-xs-8">
              <select class="form-control">
                <option>TCP</option>
              </select>
            </div>
            <div class="col-xs-1">
              <span class="text-danger inline m-l-n m-t-sm">*</span>
            </div>
          </div>
          <div class="form-group">
            <label class="col-xs-3 control-label">协议端口</label>
            <div class="col-xs-8">
              <select class="form-control">
                <option>TCP</option>
              </select>
            </div>
            <div class="col-xs-1">
              <span class="text-danger inline m-l-n m-t-sm">*</span>
            </div>
          </div>
          <div class="form-group">
            <label class="col-xs-3 control-label">会话持久性</label>
            <div class="col-xs-8">
              <select class="form-control">
                <option>SOURCE_IP</option>
              </select>
            </div>
            <div class="col-xs-1">
              <span class="text-danger inline m-l-n m-t-sm">*</span>
            </div>
          </div>
          <div class="form-group">
            <label class="col-xs-3 control-label">连接限制</label>
            <div class="col-xs-8">
              <input type="text" class="form-control" >
            </div>
            <div class="col-xs-1">
              <span class="text-danger inline m-l-n m-t-sm">*</span>
            </div>
          </div>
          <div class="form-group">
            <label class="col-xs-3 control-label">备注</label>
            <div class="col-xs-8">
              <textarea class="form-control"></textarea>
            </div>
            <div class="col-xs-1">
              <span class="text-danger inline m-l-n m-t-sm">*</span>
            </div>
          </div>
        </div>
        <div class='modal-footer'>
          <button name="button" class="btn btn-primary " >确定</button>
          <button name="button" class="btn btn-default " data-dismiss="modal">取消</button>
        </div>
      </div>
    </div>
  </div>
<!-- 添加VIP页面 END -->

  <!-- 负载均衡器详情 -->
  <div id="instance_balancer_details" data-bind="visible: isShowDetail()">
		<!-- 负载均衡器基本信息 -->
        <div class="wrapper">
          <a class="btn btn-sm btn-default" data-bind="click: $root.showDetailFun"><i class="fa fa-arrow-left"></i> 返回</a>
          <a class="btn btn-sm btn-info">编辑VIP</a>
          <a class="btn btn-sm btn-info">有效时间变更</a>
          <a class="btn btn-sm btn-info">终止</a>
          <a class="btn btn-sm btn-info">删除</a>
        </div>

        <div class="wrapper">
          <h5 class="text-black"><i class="fa fa-minus fa-rotate-90 text-info"></i>基本信息</h5>
          <div class="bg-light b-t b-b wrapper-sm text-nowarp" data-bind="with: $root.currentLbVo">
            <div class="row m-b">
              <div class="col-xs-1 font-bold">负载均衡器名称：</div>
              <div class="col-xs-3" data-bind="text: name">负载均衡器</div>
              <div class="col-xs-1 font-bold">所属VDC：</div>
              <div class="col-xs-3" data-bind="text: vdcName">VDC1</div>
              <div class="col-xs-1 font-bold">可用分区：</div>
              <div class="col-xs-3" data-bind="text: azName">可用分区1</div>
            </div>
            <div class="row m-b">
              <div class="col-xs-1 font-bold">所属VPC：</div>
              <div class="col-xs-3" data-bind="text: vpcName">VPC1</div>
              <div class="col-xs-1 font-bold">网络：</div>
              <div class="col-xs-3" data-bind="text: cidr">208</div>
              <div class="col-xs-1 font-bold">协议：</div>
              <div class="col-xs-3" data-bind="text: protocol">TCP</div>
            </div>
            <div class="row m-b">
              <div class="col-xs-1 font-bold">负载方式：</div>
              <div class="col-xs-3" data-bind="text: lbMethod">SOURCE_IP</div>
              <div class="col-xs-1 font-bold">状态：</div>
              <div class="col-xs-3"><span class="label label-success" data-bind="text: state">运行中</span></div>
              <div class="col-xs-1 font-bold">创建人：</div>
              <div class="col-xs-3" data-bind="text: userName">admin</div>
            </div>
            <div class="row m-b">
              <div class="col-xs-1 font-bold">备注：</div>
              <div class="col-xs-11" data-bind="text: desc"></div>
            </div>
          </div>
        </div>

        
        <div class="row wrapper detail-others">
          <div class="col-xs-4">
            <div class="clear bg-success wrapper">
              <div class="detail-others-img img-serverinfo">服务信息</div>
              <div class="detail-others-text h-xs" data-bind="with: $root.currentLbVo">
                <p>服务状态：
                    <span class="label label-info" data-bind="text: serviceState">正常</span>
                </p>
                <p>创建时间：<span data-bind="text: createTime">2016-08-04 14:28:50</span></p>
                <p>生效时间：<span data-bind="text: expiredDate">2016-08-04 14:28:54</span></p>
                <p>失效时间：<span data-bind="text: expiredDate">2016-08-04 14:28:54</span></p>
              </div> 
            </div>             
          </div>
          <div class="col-xs-8">
            <div class="clear bg-primary wrapper">
              <div class="detail-others-img img-settings">VIP信息</div>
              <div class="detail-others-text h-xs" style="width:85%">
                <div class="row">
                  <div class="col-xs-6">
                    <p>VIP名称：<span>负载均衡器1</span></p>
                  </div>
                  <div class="col-xs-6">
                    <p>网络：<span>208</span></p>
                  </div>
                  <div class="col-xs-6">
                    <p>IP地址：<span>192.1.1.1</span></p>
                  </div>
                  <div class="col-xs-6">
                    <p>协议：<span>TCP</span></p>
                  </div>
                  <div class="col-xs-6">
                    <p>协议端口：<span>8080</span></p>
                  </div>
                  <div class="col-xs-6">
                    <p>会话持久性：<span>是</span></p>
                  </div>
                  <div class="col-xs-6">
                    <p>连接限制：<span>5000</span></p>
                  </div>
                  <div class="col-xs-6">
                    <p>备注：<span>XXXX</span></p>
                  </div>
                </div>
              </div>                
            </div>
          </div>
        </div>
        <!-- 负载均衡器基本信息  END -->
        
        <!-- 负载均衡器成员列表 -->  
        <div class="wrapper">
          <h5 class="text-black"><i class="fa fa-minus fa-rotate-90 text-info"></i>成员列表</h5>
          <p class="form-inline">
            <a class="btn btn-sm btn-info" data-bind="click: showAddMember">添加成员</a>
            <a class="text-info pull-right m-t-sm">刷新</a>
          </p>
          <div class='table-responsive no-height'>
            <table class="table table-striped" data-bind="with: lbMemberTable">
              <thead>
                <tr>
                  <th>云主机名称</th>
                  <th>IP地址</th>
                  <th>状态</th>
                  <th>协议端口</th>
                  <th>权重</th>
                  <th>所属负载均衡器</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                <tr data-bind="visible: showNoData">
	              <td colspan=13 class="aligncenter">
	             	 暂无数据
	              </td>
	            </tr>
	            <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
                <tr>
                  <td data-bind="text: $row.name">VM1</td>
                  <td data-bind="text: $row.address">192.169.22.56</td>
                  <td><span class="label label-success" data-bind="text: $row.state">运行中</span></td>
                  <td data-bind="text: $row.protocolPort">8080</td>
                  <td data-bind="text: $row.weight">20</td>
                  <td data-bind="text: $row.lbName">负载均衡器1</td>
                  <td><a data-bind="click: $root.showAddMember">修改</a> | <a>删除</a></td>
                </tr>
                <!-- /ko -->
              </tbody>
            </table>
          </div>
        </div>
		<!-- 负载均衡器成员列表  END-->  
		
		<!-- 负载均衡器监控列表 -->  
        <div class="wrapper">
          <h5 class="text-black"><i class="fa fa-minus fa-rotate-90 text-info"></i>监控列表</h5>
          <p class="form-inline">
            <a class="btn btn-sm btn-info" data-bind="click: addMonitor">添加监控</a>
            <a class="text-info pull-right m-t-sm">刷新</a>
          </p>
          <div class='table-responsive no-height'>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>监控类型</th>
                  <th>延迟</th>
                  <th>超时</th>
                  <th>最大重试次数</th>
                  <th>详情</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>TCP</td>
                  <td>7</td>
                  <td>10</td>
                  <td>5</td>
                  <td>GET/192.168.1.1:8090=>200</td>
                  <td><a data-bind="click: addMonitor">修改</a> | <a>删除</a></td>
                </tr>
                <tr>
                  <td>TCP</td>
                  <td>7</td>
                  <td>10</td>
                  <td>5</td>
                  <td>GET/192.168.1.1:8090=>200</td>
                  <td><a data-bind="click: addMonitor">修改</a> | <a>删除</a></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
		<!-- 负载均衡器成员列表 -->  
  </div> 
  <!-- 负载均衡器详情 END -->

    <!-- 添加成员页面 -->
    <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isShowAddMember }">
      <div class='modal-dialog' role='document'>
        <div class='modal-content'>
          <div class='modal-header'>
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
            <h3 class='modal-title'>添加成员</h3>
          </div>
          <div class='modal-body form-horizontal' data-bind="with: currentMemberVo">
        	<div class="tab-pane active">
          	  <div class="form-group">
                <label class="col-xs-4 control-label">负载均衡器名称：</label>
                <div class="col-xs-5">
                  <input class="form-control" type="text" value="负载均衡器1" data-bind="value: lbName" disabled/>
                </div>
                <div class="col-xs-3">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>          
              </div>
              <div class="form-group">
                <label class="col-xs-4 control-label">云主机：</label>
                <div class="col-xs-5">
                  <select class="form-control" data-bind="options: $root.memberVmList, optionsText:'vmName',value: vm">
                    <option value="">VM1</option>
                  </select>
                </div>
                <div class="col-xs-3">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>          
              </div>
              <div class="form-group">
                <label class="col-xs-4 control-label">协议端口：</label>
                <div class="col-xs-5">
                  <input class="form-control" type="text" data-bind="value: port"/>
                </div>
                <div class="col-xs-3">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>          
              </div>
              <div class="form-group">
                <label class="col-xs-4 control-label">权重：</label>
                <div class="col-xs-5">
                  <input class="form-control" type="text" data-bind="value: weight"/>
                </div>
                <div class="col-xs-3">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>          
              </div>
            </div>  
          </div>

          <div class='modal-footer'>
            <input type="button" name="commit" value="确定" class="btn btn-default btn-info" data-bind="click: $root.addMember"/>
            <button name="button" type="submit" class="btn btn-default btn btn-default" data-dismiss="modal">取消</button>
          </div>
        </div>
      </div>
    </div>
    <!-- 添加成员 END -->

    <!-- 添加监控页面 -->
    <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAddMonitor }">
      <div class='modal-dialog' role='document'>
        <div class='modal-content'>
          <div class='modal-header'>
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
            <h3 class='modal-title'>添加监控</h3>
          </div>
          <div class='modal-body form-horizontal'>
            <div class="tab-pane active">
              <div class="form-group">
                <label class="col-xs-4 control-label">监控类型：</label>
                <div class="col-xs-5">
                  <select class="form-control">
                    <option value="TCP">TCP</option>
                    <option value="http">http</option>
                    <option value="https">https</option>
                  </select>
                </div>
                <div class="col-xs-3">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>          
              </div>
              <div class="form-group">
                <label class="col-xs-4 control-label">延迟：</label>
                <div class="col-xs-5">
                  <input class="form-control" type="text" />
                </div>
                <div class="col-xs-3">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>          
              </div>
              <div class="form-group">
                <label class="col-xs-4 control-label">超时：</label>
                <div class="col-xs-5">
                  <input class="form-control" type="text" />
                </div>
                <div class="col-xs-3">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>          
              </div>
              <div class="form-group">
                <label class="col-xs-4 control-label">最大重试次数：</label>
                <div class="col-xs-5">
                  <input class="form-control" type="text" />
                </div>
                <div class="col-xs-3">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                  <span>(1~10)</span>
                </div>          
              </div>
              <div class="form-group">
                <label class="col-xs-4 control-label">http方式：</label>
                <div class="col-xs-5">
                  <select class="form-control">
                    <option value="">GET</option>
                  </select>
                </div>
                <div class="col-xs-3">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>          
              </div>
              <div class="form-group">
                <label class="col-xs-4 control-label">URL：</label>
                <div class="col-xs-5">
                  <input class="form-control" type="text" value="/" />
                </div>
                <div class="col-xs-3">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>          
              </div>
              <div class="form-group">
                <label class="col-xs-4 control-label">期待http状态代码：</label>
                <div class="col-xs-5">
                  <input class="form-control" type="text" value="200" />
                </div>
                <div class="col-xs-3">
                  <span class="text-danger inline m-l-n m-t-sm">*</span>
                </div>          
              </div>
            </div>  
          </div>

          <div class='modal-footer'>
            <input type="button" name="commit" value="确定" class="btn btn-default btn-info" />
            <button name="button" type="submit" class="btn btn-default btn btn-default" data-dismiss="modal">取消</button>
          </div>
        </div>
      </div>
    </div>
    <!-- 添加监控END -->

  </div>
<!--   <script type="text/javascript">
    var scripts = [null,null]
    $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
      function ViewModel(){
        var self = this;

        this.isShowAddMember = ko.observable(false);
        this.showAddMember = function(){
          this.isShowAddMember(true);
        }
        this.isAddMonitor = ko.observable(false);
        this.addMonitor = function(){
          this.isAddMonitor(true);
        }
      }
      var viewModel = new ViewModel();
      ko.applyBindings(viewModel, $("#instance_balancer_details")[0]);
    });
  </script> -->

  <!-- 负载均衡器详情 end -->

<script type="text/javascript">
  var scripts = ["api/resource/az/az.js", 
                 "api/vdc/vdc.js", 
                 "api/vpc/vpc.js", 
                 "api/resourceInstance/loadBalancer/loadBalancer.js", 
                 "assets/lib/moment/moment.js",
                 "assets/lib/bootstrap-daterangepicker/daterangepicker.js"]
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
    function ViewModel_Balancer(){
    	var self = this;
    	
    	/**********************  搜索栏   **********************/
    	//搜索栏
        this.searchVdcList = ko.observableArray();
        this.searchAzList = ko.observableArray();
        
        this.searchParam = ko.observable({
       	  	vdcUuid: ko.observable(""),
            azUuid: ko.observable(""),
            name: ko.observable("")
        });
          
        this.init = function(){
      	  self.searchVdcList([{"name": "全部", "uuid": ""}]);
      	  $.VDC.getVDCs({},function(data){
      			if(data && data.results){
      				data.results.unshift({"name": "全部", "uuid": ""});
      				self.searchVdcList(data.results);
      			}
      	  });
      	  
      	  self.searchAzList([{"name": "全部", "uuid": ""}]);
      	  $.AZ.getAzs({}, function(data){
   			if(data && data.results){
   				data.results.unshift({"name": "全部", "uuid": ""});
   				self.searchAzList(data.results);
   			}
   		  });
      	  
        }();
        
        
      	//搜索
      //重置
        this.reset = function(){
            this.searchParam({
            	vdcUuid: '',
            	azUuid: '',
            	name: ''
            });
            this.loadBalancerTable.params({})
        }
      	
        this.searchLb = function(){
        	var p = {
        		 "vdcUuid": self.searchParam().vdcUuid(),
        		 "azUuid": self.searchParam().azUuid(),
        		 "name": self.searchParam().name()
        	};
        	self.loadBalancerTable.params(p);
        }
        
        /**********************  搜索栏 END   **********************/
    	
    	/**********************  负载均衡器列表   **********************/
    	
        this.loadBalancerTable = new DataTable({
      		  perPage: 10,
                path: 'api/v5.0.0/loadBalancers',
                loader: function(result){
                    //result.userName_ = "超级管理员"; 
                    return result;
                }
        });
    	
    	
    	/********  负载均衡器列表  END *********/
    	
    	
    	/********  创建负载均衡器   *********/
    	
      	this.showCreatePage = ko.observable(false);
    	//创建的负载均衡器对象
    	this.createBlVo = ko.validatedObservable({
    		name: 		ko.observable("").extend({required: true}),
    		vdcUuid: 	ko.observable("").extend({required: true}),
    		azUuid:		ko.observable("").extend({required: true}),
    		vpcUuid: 	ko.observable("").extend({required: true}),
    		subnetId: ko.observable("").extend({required: true}),
    		protocol: 	ko.observable("").extend({required: true}),
    		lbMethod: 	ko.observable("").extend({required: true}),
    		timeType: 	ko.observable("").extend({required: true}),
    		timeValue: 	ko.observable(""),
    		desc: 		ko.observable("")
    	});
    	
    	this.vdcList = ko.observableArray();
        this.azList = ko.observableArray();
        this.vpcList = ko.observableArray();
        this.subnetList = ko.observableArray();
        this.protocolList = ko.observableArray();
        this.lbMethodList = ko.observableArray();
      	
      	this.showCreatePageFun = function(){
        	this.showCreatePage(true);
        	//置空所有选项
        	self.createBlVo.fromJSON({
        		name: 		"",
        		vdcUuid:	"",
        		azUuid:		"",
        		vpcUuid: 	"",
        		subnetId:	"",
        		protocol: 	"",
        		lbMethod: 	"",
        		timeType: 	"",
        		timeValue: 	"",
        		desc: 		""
        	});
        	
        	self.lbMethodList($.LOAD_BALANCER.lbMethods);
    		self.protocolList($.LOAD_BALANCER.lbProtocols);
        	
        	var subscriptionVdc;//subscription.dispose();
            var subscriptionAz;
            var subscriptionVpc;
            self.vdcList([]);
            $.VDC.getVDCs({},function(data){
				 if(data && data.results){
					 self.vdcList(data.results);
					 self.vdcList.unshift({"name": "", "uuid": ""});
				 }
			});
            
          //vdc获取AZ
			subscriptionVdc = self.createBlVo().vdcUuid.subscribe(function(val){
			    self.azList([]);
			    if(csc.util.isNotNull(val)){
			    	$.VDC.getVdcAzs(val,{},function(data){
		   				 if(data && data.results){
		   					 self.azList(data.results);
		   					 self.azList.unshift({"name": "", "uuid": ""});
		   				 }
		   			});
			    }
    	    	
    	    });
          
			//AZ获取VPC
			subscriptionAz = self.createBlVo().azUuid.subscribe(function(val){
			    self.vpcList([]);
			    if(csc.util.isNotNull(val)){
			    	$.VPC.getVpcs({azUuid:val},function(data){
		   				 if(data && data.results){
		   					 self.vpcList(data.results);
		   					 self.vpcList.unshift({"name": "", "uuid": ""});
		   				 }
		   			});
			    }
    	    	
    	    });
			
			//VPC获取subnetList
			subscriptionVpc = self.createBlVo().vpcUuid.subscribe(function(val){
			    self.subnetList([{"name": "", "uuid": ""}]);
			    if(csc.util.isNotNull(val)){
			    	$.VPC.getVpcNet({vpcUuid:val,type:"INNER"},function(data){
		   				 if(data && data.results){
		   					 self.subnetList(data.results);
		   					 self.subnetList.unshift({"name": "", "uuid": ""});
		   				 }
		   			});
			    }
    	    });
			
        	
      	};
      	
      	this.createLoadBalancer = function(){
      		//console.log(self.createBlVo.toJSON());
      		var p = self.createBlVo.toJSON();
      		p.timeType = "0";
      		p.timeValue = "0";
      		p.expiryTime = "2020-12-30 23:59:59";
      		$.LOAD_BALANCER.createLoadBalancer(p, function(data){
      			self.showCreatePage(false);
 	    		self.loadBalancerTable.refreshData();
 				alert("创建负载均衡器成功！");
      		})
      		
      	}
      	/********  创建负载均衡器 END   *********/
      	
      	/********  创建负载均衡器基本信息   *********/
      	
      	this.currentLbVo = ko.observable();
      	this.isShowDetail = ko.observable(false);
      	
      	this.showDetailFun = function(row,event){
    		self.isShowDetail(!self.isShowDetail());
    		if(self.isShowDetail()){
    			self.currentLbVo(row);
    			var p = {
    				"lbUuid": 	row.uuid
    			};
    			self.lbMemberTable.params(p);
    		}
    		
    	}
      	
      	
      	/********  创建负载均衡器基本信息 END   *********/
      	
      	
      	
      	
      	/********  添加VIP   *********/
      	this.showAddVipPage = ko.observable(false);
      	
      	this.addVipPageFun = function(row, event){
        	this.showAddVipPage(true);
        	
      	};
      	/********  添加VIP END  *********/
      	
      	/********************  添加成员   ************************/
      	this.isShowAddMember = ko.observable(false);
      	this.currentMemberVo = ko.observable();
      	this.memberVmList = ko.observableArray();
      	
        this.showAddMember = function(){
          	self.isShowAddMember(true);
          	
          	self.currentMemberVo({
          		"azUuid": self.currentLbVo().azUuid,
          		"lbId": self.currentLbVo().originalId,
          		"lbUuid": self.currentLbVo().uuid,
          		"lbName": self.currentLbVo().name,
          		"vm":"",
          		"port":80,
          		"weight":1
          	});
          	var vmList = $.LOAD_BALANCER.getMemberVms;
          	self.memberVmList(vmList);
        }
        this.addMember = function(){
        	var p = {
        		"azUuid": self.currentMemberVo().azUuid,
        		"lbId": 	self.currentMemberVo().lbId,
        		"lbUuid": 	self.currentMemberVo().lbUuid,
        		"address":	self.currentMemberVo().vm.address,
          		"protocolPort":self.currentMemberVo().port,
          		"weight":   self.currentMemberVo().weight,
          		"vmName":	self.currentMemberVo().vm.vmName
        	};
        	var memName = self.currentMemberVo().lbName;
        	$.LOAD_BALANCER.createLoadBalancerMember(p, function(data){
        		self.isShowAddMember(false);
        		self.lbMemberTable.refreshData();
				alert("创建成员[" + memName + "]成功！")
        	});
        }
        
        
        /********************  添加成员  END ************************/
        /********************  成员列表   ************************/
        
        this.lbMemberTable = new DataTable({
  		  perPage: 10,
            path: 'api/v5.0.0/loadBalancerMembers',
            loader: function(result){
                //result.userName_ = "超级管理员"; 
                return result;
            }
    	});
        
        /********************  成员列表  END ************************/
        
        
        
        /********************  添加监控   ************************/
        this.isAddMonitor = ko.observable(false);
        this.addMonitor = function(){
          this.isAddMonitor(true);
        }
        
        /********************  添加监控   ************************/
    };
    ko.applyBindings(new ViewModel_Balancer(), $('#partition_balancer')[0]);
  })

</script>