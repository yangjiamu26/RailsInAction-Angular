<style>
  .service-img-box{position:relative;width:60px;height:60px;}
  .service-img-box a{font-size:12px;text-align:center;position:absolute;bottom:0;width:100%;color:#fff;height:16px;line-height:16px;background:rgba(0,0,0,.2)}
  .ztree.release li a.curSelectedNode{background:none;color: #82939E;}
  .ztree.release li a:hover{border-color:#fff;background-color:#fff;}
  .jifei-heading{overflow:hidden;height:60px;}
  .jifei-btn{position:relative;right:0;top:-34px;float:right;}
  .jifei-panel{margin:0;margin-top:20px;}

</style>
<div class="simple_form form-horizontal">
  <div class='modal-dialog modal-lg' style="width:800px;">
    <div class='modal-content'>
      <div class='modal-header'>

        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>创建服务</h3>
      </div>
      <div class='modal-body no-padder'>
        <ul class="nav nav-tabs service-step-select">
          <li class="active">
            <a >1基本信息</a>
          </li>
          <li class="">
            <a >2服务资源</a>
          </li>
          <li class="">
            <a >3服务计费</a>
          </li>
          <li class="">
            <a >4发布范围</a>
          </li>
        </ul>
        <div class="tab-content service-step-box m-t">
          <div class="tab-pane active">
            <div class='form-horizontal row'>
              <div class="form-group">
                <label class="col-xs-3 control-label">服务名称：</label>
                <div class="col-xs-7">
                  <input type="email" class="form-control" placeholder="请输入名称">
                </div>
              </div>
              <div class="form-group">
                <label class="col-xs-3 control-label">服务目录：</label>
                <div class="col-xs-7">
                  <input type="email" class="form-control" placeholder="请选择目录">
                </div>
              </div>
              <div class="form-group">
                <label class="col-xs-3 control-label">产品：</label>
                <div class="col-xs-7">
                  <select class="form-control">
                    <option value="">VDC</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="col-xs-3 control-label">服务图标：</label>
                <div class="col-xs-7">
                  <div class="service-img-box">
                    <img src="" alt="" width="60" height="60">
                    <a onclick="showModal('pages/service/product_definitions_uploadimg.html')">更改图标</a>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-xs-3 control-label">服务介绍：</label>
                <div class="col-xs-7">
                  <textarea class="form-control" cols="30" rows="3"></textarea>
                </div>
              </div>
              <div class="form-group">
                <label class="col-xs-3 control-label">有效期：</label>
                <div class="col-xs-7">
                  <div class="radio">
                    <label class="form-inline">
                      <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked> 永久
                    </label>
                  </div>
                  <div class="radio">
                    <label class="form-inline">
                      <input type="radio" class="form-control" style="top:2px;" name="optionsRadios" id="optionsRadios2" value="option2"> 
                      <select class="form-control"><option value="1">1</option><option value="1">2</option></select> 个月
                    </label>
                  </div>
                  <div class="radio disabled">
                    <label class="form-inline">
                      <input type="radio" class="form-control" style="top:2px;" name="optionsRadios" id="optionsRadios3" value="option3">
                      <input type="text" style="width:206px" class="form-control" id="addServer_daterange">
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="tab-pane">
            <div class='form-horizontal row'>
              <div class="form-group">
                <label class="col-xs-2 control-label">虚拟化：</label>
                <div class="col-xs-9">
                  <select class="form-control">
                    <option value="">KVM</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="col-xs-2 control-label">操作系统类型：</label>
                <div class="col-xs-9 form-inline">
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 全选
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> windows
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> linux
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> aix
                    </label>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-xs-2 control-label">操作系统版本：</label>
                <div class="col-xs-9">
                  <div class="panel panel-default" style="margin:0;padding-bottom:10px">
                    <table class="table table-striped">
                      <thead>
                        <th>虚拟化</th>
                        <th>操作系统类型</th>
                        <th>操作系统版本</th>
                        <th>关联镜象</th>
                        <th>操作</th>
                      </thead>
                      <tbody>
                        <tr>
                          <td>KVM</td>
                          <td>windows</td>
                          <td>windows server 2008 64bit</td>
                          <td>windows2008</td>
                          <td><a class="btn btn-xs btn-default" onclick="confirm('确定删除吗？')">删除</a></td>
                        </tr>
                      </tbody>
                    </table>
                    <a class="btn btn-sm btn-success" style="margin-left: 10px;">添加</a>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-xs-2 control-label">CPU(核)：</label>
                <div class="col-xs-9 form-inline">
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 全选
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 1
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 2
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 4
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 8
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 16
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 32
                    </label>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-xs-2 control-label">内存：</label>
                <div class="col-xs-9 form-inline">
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 全选
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 1
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 2
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 4
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 8
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 16
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 32
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value=""> 64
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="tab-pane">
            <div class='form-horizontal row'>
              <div class="form-group">
                <label class="col-xs-2 control-label">是否计费：</label>
                <div class="col-xs-9 form-inline">
                  <div class="radio">
                    <label>
                      <input type="radio" name="optionsRadios2" id="optionsRadios21" value="option1" checked> 是
                    </label>
                  </div>
                  <div class="radio">
                    <label>
                      <input type="radio" name="optionsRadios2" id="optionsRadios22" value="option2" checked> 否
                    </label>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-xs-2 control-label">包含套餐：</label>
                <div class="col-xs-9">
                  <div class="form-inline">
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" value=""> 按天
                      </label>
                    </div>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" value=""> 按月
                      </label>
                    </div>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" value=""> 按季度
                      </label>
                    </div>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" value=""> 按年
                      </label>
                    </div>
                  </div>
                  <div class="panel panel-default jifei-panel">
                    <div class="panel-heading jifei-heading"><h4>按天</h4><a class="btn btn-sm btn-info jifei-btn">添加计费规则</a></div>
                    <table class="table table-striped">
                      <thead>
                        <th>计费因子</th>
                        <th>计费规则</th>
                        <th>操作</th>
                      </thead>
                      <tbody>
                        <tr>
                          <td>CPU</td>
                          <td>JF-CPU-001</td>
                          <td><a class="btn btn-xs btn-default" onclick="confirm('确定删除吗？')">删除</a></td>
                        </tr>
                        <tr>
                          <td>内存</td>
                          <td>JF-Memory-001</td>
                          <td><a class="btn btn-xs btn-default" onclick="confirm('确定删除吗？')">删除</a></td>
                        </tr>
                        <tr>
                          <td>存储</td>
                          <td>JF-Stroge-001</td>
                          <td><a class="btn btn-xs btn-default" onclick="confirm('确定删除吗？')">删除</a></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="panel panel-default jifei-panel">
                    <div class="panel-heading jifei-heading"><h4>按月</h4><a class="btn btn-sm btn-info jifei-btn">添加计费规则</a></div>
                    <table class="table table-striped">
                      <thead>
                        <th>计费因子</th>
                        <th>计费规则</th>
                        <th>操作</th>
                      </thead>
                      <tbody>
                        <tr>
                          <td>CPU</td>
                          <td>JF-CPU-001</td>
                          <td><a class="btn btn-xs btn-default" onclick="confirm('确定删除吗？')">删除</a></td>
                        </tr>
                        <tr>
                          <td>内存</td>
                          <td>JF-Memory-001</td>
                          <td><a class="btn btn-xs btn-default" onclick="confirm('确定删除吗？')">删除</a></td>
                        </tr>
                        <tr>
                          <td>存储</td>
                          <td>JF-Stroge-001</td>
                          <td><a class="btn btn-xs btn-default" onclick="confirm('确定删除吗？')">删除</a></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="panel panel-default jifei-panel">
                    <div class="panel-heading jifei-heading"><h4>按年</h4><a class="btn btn-sm btn-info jifei-btn">添加计费规则</a></div>
                    <table class="table table-striped">
                      <thead>
                        <th>计费因子</th>
                        <th>计费规则</th>
                        <th>操作</th>
                      </thead>
                      <tbody>
                        <tr>
                          <td>CPU</td>
                          <td>JF-CPU-001</td>
                          <td><a class="btn btn-xs btn-default" onclick="confirm('确定删除吗？')">删除</a></td>
                        </tr>
                        <tr>
                          <td>内存</td>
                          <td>JF-Memory-001</td>
                          <td><a class="btn btn-xs btn-default" onclick="confirm('确定删除吗？')">删除</a></td>
                        </tr>
                        <tr>
                          <td>存储</td>
                          <td>JF-Stroge-001</td>
                          <td><a class="btn btn-xs btn-default" onclick="confirm('确定删除吗？')">删除</a></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                </div>
              </div>
            </div>
          </div>

          <div class="tab-pane">
            <div class='form-horizontal row'>
              <div class="form-group">
                <label class="col-xs-2 control-label">发布范围：</label>
                <div class="col-xs-9">
                  <div class="panel panel-default" style="margin:0;padding-bottom:10px">
                    <div id="serviceModalTree" class="ztree release"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info service-step-btn-pre" style="display:none;">上一步</a>
        <a class="btn btn-default btn-info service-step-btn-next">下一步</a>
        <a class="btn btn-default btn-info service-step-btn-save" style="display:none;">保存</a>
        <a class="btn btn-default btn-success service-step-btn-saveAndRelease" style="display:none;">保存并发布</a>
        <!-- <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a> -->
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  var scripts = [null, 'assets/lib/zTree/js/jquery.ztree.core.js', 'assets/lib/zTree/js/jquery.ztree.excheck.js', "assets/lib/moment/moment.js","assets/lib/bootstrap-daterangepicker/daterangepicker.js", null];
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
    var step = 0;
    var activeSteps = [true,false,false,false]
    $('.service-step-select li').click(function(){
      if($(this).hasClass('active')) return;
      if(!activeSteps[$(this).index()]) return;
      step = $(this).index();
      $(this).addClass('active').siblings().removeClass('active');
      $('.service-step-box>div').eq(step).addClass('active').siblings().removeClass('active');
      buildBtns(step);
    })

    function buildBtns(step){
      $('.service-step-btn-pre,.service-step-btn-next').show();
      $('.service-step-btn-save,.service-step-btn-saveAndRelease').hide();
      if(step==0){
        $('.service-step-btn-pre').hide();
      }
      if(step==$('.service-step-select li').length-1){
        $('.service-step-btn-next').hide();
        $('.service-step-btn-save,.service-step-btn-saveAndRelease').show();
      }
    }
    $('.service-step-btn-pre').click(function(){
      step = step - 1;
      $('.service-step-select li').eq(step).trigger('click');
      buildBtns(step);
    })
    $('.service-step-btn-next').click(function(){
      step = step + 1;
      activeSteps[step] = true;
      $('.service-step-select li').eq(step).trigger('click');
      buildBtns(step);
    })

    $('#addServer_daterange').val(moment().subtract('days', 29).format('YYYY/MM/DD') + ' 至 ' + moment().format('YYYY/MM/DD')).daterangepicker(
      {
        format:'YYYY/MM/DD',
        startDate: moment().subtract('days', 29),
        endDate: moment(),
        separator:'至',
        locale:{
          applyLabel: '确认',
          cancelLabel: '取消',
          fromLabel: '开始日期',
          toLabel: '结束日期',
          weekLabel: '周',
          customRangeLabel: '自定义范围',                            
          daysOfWeek:["日","一","二","三","四","五","六"],
          monthNames:['01月','02月','03月','04月','05月','06月','07月','08月','09月','10月','11月','12月',]
        }
      }
    );

    <!--
    var setting = {
      check: {
        enable: true
      },
      view:{
        showIcon:false,
        showLine:false
      }
    };

    var zNodes =[
      { name:"全选", open:true,
        children: [
          {
            name:"Openstack",
            open:true,
            children: [
              { name:"分区1"},
              { name:"分区2"},
              { name:"分区3"}
            ]
          },
          {
            name:"CNware",
            open:true,
            children: [
              { name:"分区4"},
              { name:"分区5"},
              { name:"分区6"}
            ]
          }
        ]
      }
    ];
    
    $(document).ready(function(){
      $.fn.zTree.init($("#serviceModalTree"), setting, zNodes);
    });
    //-->
  });
</script>