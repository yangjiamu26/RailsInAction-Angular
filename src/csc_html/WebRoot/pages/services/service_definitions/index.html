<link href="assets/lib/zTree/css/ibos/ibos.css" rel="stylesheet" type="text/css" />

<div class="app-content-full">
  <div class="bg-light lter b-b wrapper-sm">
    <ol class="breadcrumb">
      <li>当前位置：</li>
      <li>服务</li>
      <li class="active">服务管理</li>
    </ol>
  </div>
  <!-- hbox layout -->
  <div class="hbox hbox-auto-xs bg-light ">
    <!-- column -->
    <div class="col w lter b-r">
      <div class="vbox">
        <div class="wrapper b-b">
          <div class="left-title clearfix"><span style="font-size:16px;">服务目录</span><span data-bind="click: add" class="glyphicon glyphicon-pencil pull-right service-edit-btn" style="color:#9c9c9c;top:3px;"></span><span class="glyphicon glyphicon-minus pull-right service-delete-btn" style="color:#9c9c9c;top:3px;"></span><span data-bind="click: add" class="glyphicon glyphicon-plus pull-right service-add-btn" style="color:#2aabd2;top:3px;margin-right:10px;"></span></div>
        </div>
        <div class="row-row">
          <div class="cell scrollable hover">
            <div class="cell-inner">
              <div id="serverDefinitionsTree" class="ztree" style="margin-left:8px;">
                
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /column -->
  
  <!-- column -->
    <div class="col">
      <div class="vbox">
        <div class="row-row">
          <div class="cell">
            <div class="cell-inner">
              <div class="wrapper-md">

                <div class="panel panel-default">
                  <div class="row wrapper">
                    <div class="col-xs-1">
                      <a class="btn btn-sm btn-primary" onclick="showModal('pages/services/service_definitions/addService.html')">创建服务</a>
                    </div>
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon">服务状态</span>
                        <select class="form-control input-sm">
                          <option value="">全部</option>
                          <option value="">未发布</option>
                        </select>
                      </div>      
                    </div>                    
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon">所属产品</span>
                        <select class="form-control input-sm">
                          <option value="">全部</option>
                          <option value="">云主机</option>
                        </select>
                      </div>      
                    </div>                    
                    <div class="col-xs-3">
                      <div class="input-group">
                        <span class="input-group-addon">服务名称</span>
                        <input type="text" class="input-sm form-control" placeholder="请输入服务名称">
                      </div>
                    </div>
                    <div class="col-xs-2">
                      <button class="btn btn-sm" type="button">重置</button>
                      <button class="btn btn-sm btn-default" type="button">搜索</button>
                    </div>
                  </div>   
      
                  <div class="table-responsive">
                    <table class="table table-striped">
                      <thead>
                        <th>服务名称</th>
                        <th>所属产品</th>
                        <th>服务状态</th>
                        <th>服务目录</th>
                        <th>创建人</th>
                        <th>生效时间</th>
                        <th>操作</th>
                      </thead>
                      <tbody>
                        <tr class="b-l b-l-3x b-l-info">
                          <td>windows服务</td>
                          <td>云主机</td>
                          <td><span class="label label-danger">未发布</span></td>
                          <td>金牌服务</td>
                          <td>张三</td>
                          <td>2016-4-15至2016-6-15</td>
                          <td><a onclick="systemMsg.alert('发布成功！')">发布</a> | <a onclick="showModal('pages/services/service_definitions/addService.html')">修改</a> | <a onclick="systemMsg.alert('确定删除吗？')">删除</a></td>
                        </tr>
                        <tr class="b-l b-l-3x b-l-info">
                          <td>windows服务</td>
                          <td>云主机</td>
                          <td><span class="label label-success">已发布</span></td>
                          <td>金牌服务</td>
                          <td>张三</td>
                          <td>2016-4-15至2016-6-15</td>
                          <td><a onclick="systemMsg.alert('发布成功！')">发布</a> | <a onclick="showModal('pages/services/service_definitions/addService.html')">修改</a> | <a onclick="systemMsg.alert('确定删除吗？')">删除</a></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <footer class='panel-footer'>
                    <ul class="pagination">
                      <li class="page active">
                        <a href="#pages/javascript:void(0)">1</a></li>
                      <li class="page">
                        <a rel="next" href="#pages/http://localhost/resource_partitions?locale=zh-CN&amp;page_partitions=2">2</a></li>
                      <li class="page">
                        <a href="#pages/http://localhost/resource_partitions?locale=zh-CN&amp;page_partitions=3">3</a></li>
                      <li class="next">
                        <a rel="next" href="#pages/http://localhost/resource_partitions?locale=zh-CN&amp;page_partitions=2">下页 &rsaquo;</a></li>
                      <li class="last">
                        <a href="#pages/http://localhost/resource_partitions?locale=zh-CN&amp;page_partitions=3">末页 &raquo;</a></li>
                    </ul>
                  </footer>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAdd }">
  <div class='modal-dialog modal-lg' style="width:600px;">
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>创建服务目录</h3>
      </div>
      <div class='modal-body form-horizontal row'>
        <div class="form-group">
          <label class="col-xs-3 control-label">服务目录名称</label>
          <div class="col-xs-8">
            <input type="email" class="form-control" placeholder="请输入名称">
          </div>
          <div class="col-xs-1">
            <span class="text-danger inline m-l-n m-t-sm">*</span>
          </div>          
        </div>
        <div class="form-group">
          <label class="col-xs-3 control-label">上级服务目录</label>
          <div class="col-xs-8">
            <input type="email" class="form-control" placeholder="请输入名称">
          </div>
          <div class="col-xs-1">
            <span class="text-danger inline m-l-n m-t-sm">*</span>
          </div>          
        </div>
        
      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info">确定</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>

<!-- page specific plugin scripts -->
<script type="text/javascript">
  var scripts = [null, 'assets/lib/zTree/js/jquery.ztree.core.js', null]
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
    //inline scripts related to this page

    <!--
    var setting = {
      view:{
        showIcon:false,
        showLine:false
      }
    };

    var zNodes =[
      { name:"服务目录", open:true,
        children: [
          { name:"服务目录1", isParent:true},
          { name:"负载均衡", isParent:true},
          { name:"金牌服务目录", open:true,
            children: [
              { name:"云主机"},
              { name:"云硬盘"}
            ]}
        ]
      }
    ];

    $(document).ready(function(){
      $.fn.zTree.init($("#serverDefinitionsTree"), setting, zNodes);
    });
    //-->

    $('.service-delete-btn').click(function(){
      if(confirm('确定删除吗？')){
        console.log('执行删除！')
      }
    })

    function ViewModel(){
      this.isAdd = ko.observable(false);

      this.add = function(){
        this.isAdd(true);
      }
    }

    ko.applyBindings(new ViewModel(), $('#page-content')[0]);

  });
</script>