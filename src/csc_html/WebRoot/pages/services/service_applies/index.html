<style>
  .ztree.release li a.curSelectedNode{background:none;color: #82939E;}
  .ztree.release li a:hover{border-color:#fff;background-color:#fff;}
  .col-xs-1, .col-xs-10, .col-xs-11, .col-xs-12, .col-xs-2, .col-xs-3, .col-xs-4, .col-xs-5, .col-xs-6, .col-xs-7, .col-xs-8, .col-xs-9{padding-left:5px;padding-right:5px;}
</style>
<div class="app-content-full">
	<div class="bg-light lter b-b wrapper-sm">
		<ol class="breadcrumb">
			<li>当前位置：</li>
			<li>服务</li>
			<li class="active">服务申请</li>
		</ol>
	</div>
	<!-- hbox layout -->
	<div class="hbox hbox-auto-xs bg-light ">
		<!-- column -->
		<div class="col w lter b-r" id="productListBox">
			<div class="vbox">
				<div class="wrapper b-b">
					<div class="left-title">
						<span style="font-size: 16px;">产品列表</span>
					</div>
				</div>
				<div class="row-row">
					<div class="cell scrollable hover">
						<div class="cell-inner">
							<div class='table-responsive'>
								<table class='table table-striped table-hover left-list'>
									<tbody>
										<tr class="active">
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(0)">VDC</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(1)">云主机</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(2)">云硬盘</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(3)">对象存储</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(4)">公网IP</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(5)">负载均衡器</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(6)">SSH密钥</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(7)">自定义产品</a></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- /column -->

		<!-- column -->
		<div class="col">
			<div class="vbox">
				<div class="row-row">
					<div class="cell">
						<div class="cell-inner">
							<div class="wrapper-md">

								<div class="service-right-content">
									<div class="service-list-box row" data-bind="with: table_VDC">
										<!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														<tr>
															<th><img src="" alt="" width="60" height="60"></th>
															<td class="v-middle text-lg" ><span data-bind="text:serviceName"></span></td>
														</tr>
														<tr>
															<th>支持操作系统：</th>
															<td data-bind="text:osType"></td>
														</tr>
														<tr>
															<th>配额限制：</th>
															<td data-bind="text:isLimitDesc"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="text:serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click:$root.showDetail">查看服务详情</a>
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_VDC">申请服务</a>
												</div>
											</div>
										</div>
										<!-- /ko -->
									</div>
									
								  <footer class="panel-footer" data-bind="with: table_VDC, visible: table_VM.pages() > 1">
								     <ul class="pagination">
								       <li data-bind="css: leftPagerClass, click: gotoPage(1)">
								         <a href="#">首页</a>
								       </li>
								       <li data-bind="css: leftPagerClass, click: prevPage">
								         <a href="#">&laquo;</a>
								       </li>
								       <li >
								         <a href="#"  data-bind="text: currentPage"></a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: nextPage">
								         <a href="#">&raquo;</a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: gotoPage(pages())">
								         <a href="#">末页</a>
								       </li>
								       <li class="page-control-li">
								         <div class="input-group form-group-sm">
								           <input type="text" class="form-control" data-bind="value: targetPage"  />
								           <div class="input-group-btn">
								             <a href="#" class="btn btn-sm btn-default" data-bind="click: gotoTargetPage()">跳转</a>
								           </div>
								         </div>
								         <div class="page-info-div" data-bind="text: recordsText"></div>
								       </li>
								     </ul>
								   </footer>
								</div>

								<div class="service-right-content" style="display: none;">
									<div class="form-inline" style="margin-bottom: 10px;">
										<div class="input-group">
											<span class="input-group-addon">操作系统类型</span> <select name=""
												id="" class="form-control input-sm" data-bind="options:$root.AllOsTypeList,optionsText:'value',optionsValue:'value',value:searchParam().osType"></select>
										</div>
										<div class="input-group">
											<span class="input-group-addon">CPU(个)</span> <select name=""
												id="" class="form-control input-sm" data-bind="options:$root.AllCpuList,optionsText:'value',optionsValue:'value',value:searchParam().cpu"></select>
										</div>
										<div class="input-group">
											<span class="input-group-addon">内存(G)</span> <select name=""
												id="" class="form-control input-sm" data-bind="options:$root.AllMemoryList,optionsText:'value',optionsValue:'value',value:searchParam().memory"></select>
										</div>
										<a class="btn btn-default btn-sm" data-bind="click: search">搜索</a>
									</div>

									<div class="service-list-box row" data-bind="with: table_VM">
										<!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														 <tr>
															<th><img src="assets/img/winhost.png" alt=""
																width="60" height="60"></th>
															<td class="v-middle text-lg" data-bind="text:serviceName"></td>
														</tr>
														<tr>
															<th>可用分区：</th>
															<td data-bind="text:azName"></td>
														</tr> 
														<tr>
															<th>操作系统类型：</th>
															<td data-bind="text:osType"></td>
														</tr>
														<tr>
															<th>CPU(个)：</th>
															<td data-bind="text:cpu"></td>
														</tr>
														<tr>
															<th>内存(G)：</th>
															<td data-bind="text:memory"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="text:serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click:$root.showDetail">查看服务详情</a>
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_VMSingle">申请服务</a>
												</div>
											</div>
										</div>
									    <!-- /ko -->
									</div>
								  <footer class="panel-footer" data-bind="with: table_VM, visible: table_VM.pages() > 1">
								     <ul class="pagination">
								       <li data-bind="css: leftPagerClass, click: gotoPage(1)">
								         <a href="#">首页</a>
								       </li>
								       <li data-bind="css: leftPagerClass, click: prevPage">
								         <a href="#">&laquo;</a>
								       </li>
								       <li >
								         <a href="#"  data-bind="text: currentPage"></a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: nextPage">
								         <a href="#">&raquo;</a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: gotoPage(pages())">
								         <a href="#">末页</a>
								       </li>
								       <li class="page-control-li">
								         <div class="input-group form-group-sm">
								           <input type="text" class="form-control" data-bind="value: targetPage"  />
								           <div class="input-group-btn">
								             <a href="#" class="btn btn-sm btn-default" data-bind="click: gotoTargetPage()">跳转</a>
								           </div>
								         </div>
								         <div class="page-info-div" data-bind="text: recordsText"></div>
								       </li>
								     </ul>
								   </footer>									
								</div>

								<div class="service-right-content" style="display: none;">

									<div class="service-list-box row" data-bind="with: table_Vdisk">
									    <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														<tr>
															<th><img src="assets/img/windisc.png" alt=""
																width="60" height="60"></th>
															<td class="v-middle text-lg"><span data-bind="text:serviceName"></span></td>
														</tr>
														<tr>
															<th>可用分区：</th>
															<td data-bind="text:azName"></td>
														</tr>
														<tr>
															<th>硬盘类型：</th>
															<td data-bind="text:diskType"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="text:serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click:$root.showDetail">查看服务详情</a>													
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_Vdisk">申请服务</a>
												</div>
											</div>
										</div>
										<!-- /ko -->
									</div>
								  <footer class="panel-footer" data-bind="with: table_Vdisk, visible: table_Vdisk.pages() > 1">
								     <ul class="pagination">
								       <li data-bind="css: leftPagerClass, click: gotoPage(1)">
								         <a href="#">首页</a>
								       </li>
								       <li data-bind="css: leftPagerClass, click: prevPage">
								         <a href="#">&laquo;</a>
								       </li>
								       <li >
								         <a href="#"  data-bind="text: currentPage"></a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: nextPage">
								         <a href="#">&raquo;</a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: gotoPage(pages())">
								         <a href="#">末页</a>
								       </li>
								       <li class="page-control-li">
								         <div class="input-group form-group-sm">
								           <input type="text" class="form-control" data-bind="value: targetPage"  />
								           <div class="input-group-btn">
								             <a href="#" class="btn btn-sm btn-default" data-bind="click: gotoTargetPage()">跳转</a>
								           </div>
								         </div>
								         <div class="page-info-div" data-bind="text: recordsText"></div>
								       </li>
								     </ul>
								   </footer>
								</div>
								

								<div class="service-right-content" style="display: none;">

									<div class="service-list-box row" data-bind="with: table_ObjectStorage">
										<!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														<tr>
															<th><img src="" alt="" width="60" height="60"></th>
															<td class="v-middle text-lg" data-bind="text:serviceName"><span></span></td>
														</tr>
														<tr>
															<th>可用分区：</th>
															<td data-bind="text:azName"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click:$root.showDetail">查看服务详情</a>
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_ObjectStorage">申请服务</a>
												</div>
											</div>
										</div>
										<!-- /ko -->
									</div>
								  <footer class="panel-footer" data-bind="with: table_ObjectStorage, visible: table_ObjectStorage.pages() > 1">
								     <ul class="pagination">
								       <li data-bind="css: leftPagerClass, click: gotoPage(1)">
								         <a href="#">首页</a>
								       </li>
								       <li data-bind="css: leftPagerClass, click: prevPage">
								         <a href="#">&laquo;</a>
								       </li>
								       <li >
								         <a href="#"  data-bind="text: currentPage"></a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: nextPage">
								         <a href="#">&raquo;</a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: gotoPage(pages())">
								         <a href="#">末页</a>
								       </li>
								       <li class="page-control-li">
								         <div class="input-group form-group-sm">
								           <input type="text" class="form-control" data-bind="value: targetPage"  />
								           <div class="input-group-btn">
								             <a href="#" class="btn btn-sm btn-default" data-bind="click: gotoTargetPage()">跳转</a>
								           </div>
								         </div>
								         <div class="page-info-div" data-bind="text: recordsText"></div>
								       </li>
								     </ul>
								   </footer>									
								</div>

								<div class="service-right-content" style="display: none;">

									<div class="service-list-box row" data-bind="with: table_PublicNetwork">
										<!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														<tr>
															<th><img src="" alt="" width="60" height="60"></th>
															<td class="v-middle text-lg"><span data-bind="text:serviceName"></span></td>
														</tr>
														<tr>
															<th>可用分区：</th>
															<td data-bind="text:azName"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click:$root.showDetail">查看服务详情</a>
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_PublicNetwork">申请服务</a>
												</div>
											</div>
										</div>
										<!-- /ko -->
									</div>
								  <footer class="panel-footer" data-bind="with: table_PublicNetwork, visible: table_PublicNetwork.pages() > 1">
								     <ul class="pagination">
								       <li data-bind="css: leftPagerClass, click: gotoPage(1)">
								         <a href="#">首页</a>
								       </li>
								       <li data-bind="css: leftPagerClass, click: prevPage">
								         <a href="#">&laquo;</a>
								       </li>
								       <li >
								         <a href="#"  data-bind="text: currentPage"></a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: nextPage">
								         <a href="#">&raquo;</a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: gotoPage(pages())">
								         <a href="#">末页</a>
								       </li>
								       <li class="page-control-li">
								         <div class="input-group form-group-sm">
								           <input type="text" class="form-control" data-bind="value: targetPage"  />
								           <div class="input-group-btn">
								             <a href="#" class="btn btn-sm btn-default" data-bind="click: gotoTargetPage()">跳转</a>
								           </div>
								         </div>
								         <div class="page-info-div" data-bind="text: recordsText"></div>
								       </li>
								     </ul>
								   </footer>																	
								</div>

								<div class="service-right-content" style="display: none;">
                                   	
									<div class="service-list-box row" data-bind="with: table_LB">
										<!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														<tr>
															<th><img src="" alt="" width="60" height="60"></th>
															<td class="v-middle text-lg"><span data-bind="text:serviceName"></span></td>
														</tr>
														<tr>
															<th>可用分区：</th>
															<td data-bind="text:azName"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="text:serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click:$root.showDetail">查看服务详情</a>
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_LBSingle">申请服务</a>
												</div>
											</div>
										</div>
										<!-- /ko -->
									</div>
								  <footer class="panel-footer" data-bind="with: table_LB, visible: table_LB.pages() > 1">
								     <ul class="pagination">
								       <li data-bind="css: leftPagerClass, click: gotoPage(1)">
								         <a href="#">首页</a>
								       </li>
								       <li data-bind="css: leftPagerClass, click: prevPage">
								         <a href="#">&laquo;</a>
								       </li>
								       <li >
								         <a href="#"  data-bind="text: currentPage"></a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: nextPage">
								         <a href="#">&raquo;</a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: gotoPage(pages())">
								         <a href="#">末页</a>
								       </li>
								       <li class="page-control-li">
								         <div class="input-group form-group-sm">
								           <input type="text" class="form-control" data-bind="value: targetPage"  />
								           <div class="input-group-btn">
								             <a href="#" class="btn btn-sm btn-default" data-bind="click: gotoTargetPage()">跳转</a>
								           </div>
								         </div>
								         <div class="page-info-div" data-bind="text: recordsText"></div>
								       </li>
								     </ul>
								   </footer>									
								</div>
								
								

								<div class="service-right-content" style="display: none;">

									<div class="service-list-box row" data-bind="with: table_SSH">
									    <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														<tr>
															<th><img src="" alt="" width="60" height="60"></th>
															<td class="v-middle text-lg"><span data-bind="text:serviceName"></span></td>
														</tr>
														<tr>
															<th>可用分区：</th>
															<td data-bind="text:azName"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="text:serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click:$root.showDetail">查看服务详情</a>
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_SSHSingle">申请服务</a>
												</div>
											</div>
										</div>
										<!-- /ko -->
									</div>
								  <footer class="panel-footer" data-bind="with: table_SSH, visible: table_SSH.pages() > 1">
								     <ul class="pagination">
								       <li data-bind="css: leftPagerClass, click: gotoPage(1)">
								         <a href="#">首页</a>
								       </li>
								       <li data-bind="css: leftPagerClass, click: prevPage">
								         <a href="#">&laquo;</a>
								       </li>
								       <li >
								         <a href="#"  data-bind="text: currentPage"></a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: nextPage">
								         <a href="#">&raquo;</a>
								       </li>
								       <li data-bind="css: rightPagerClass, click: gotoPage(pages())">
								         <a href="#">末页</a>
								       </li>
								       <li class="page-control-li">
								         <div class="input-group form-group-sm">
								           <input type="text" class="form-control" data-bind="value: targetPage"  />
								           <div class="input-group-btn">
								             <a href="#" class="btn btn-sm btn-default" data-bind="click: gotoTargetPage()">跳转</a>
								           </div>
								         </div>
								         <div class="page-info-div" data-bind="text: recordsText"></div>
								       </li>
								     </ul>
								   </footer>									
								</div>
								<div class="service-right-content" style="display: none;">
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- page specific plugin scripts -->
<script type="text/javascript">
    var scripts = [null, 'assets/lib/zTree/js/jquery.ztree.core.js',
               'assets/lib/zTree/js/jquery.ztree.excheck.js',
               "assets/lib/moment/moment.js",
               "assets/lib/bootstrap-daterangepicker/daterangepicker.js", null];
    $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
        function changeDateFormat(){
    	    $('.applyDateFormat').val(moment().format('YYYY/MM/DD')).daterangepicker({
   	   	        format:'YYYY/MM/DD',
   	   	        startDate: moment(),
   	   	        singleDatePicker:true,
   	   	        endDate: moment(),
   	   	        separator:'至'
			});		  
		}
	  
	    $(".applyModeShow").on("shown.bs.modal",function(){
	    	changeDateFormat();
	    })
	  
	    if(args.type){
	    	//如果是普通用户清除产品列表
	    	$("#productListBox").remove();
	    	$(".service-right-content").eq(args.type).show().siblings().hide();
	    }else{
	    	$('.left-list tr td a').click(function(){
		    	var _tr = $(this).parent().parent();
		    	if(_tr.hasClass('active')) return;
		    	_tr.addClass('active').siblings().removeClass('active');
		    	$(".service-right-content").eq(_tr.index()).show().siblings().hide();
		    })
	    };
	    $(".form-edit").click(function(){
	    	$(this).hide();
	    	$(this).siblings('.form-save').show();
	    	$(this).siblings('.row').find(".value-span").hide().next('.input-span').show();
	    })
	    $(".form-save").click(function(){
	    	$(this).hide();
	    	$(this).siblings('.form-edit').show();
	    	$(this).siblings('.row').find('.value-span').show().html($(this).siblings('.row').find('input').val());
	    	$(this).siblings('.row').find(".input-span").hide();
	    })
	
	    $(".product-add-btn").click(function(){
	    	$(".add-praoduct").show().siblings().hide();
	    })
	    $(".product-delete-btn").click(function(){
	    	if(confirm('确认删除吗？')){
	    		console.log('执行删除！')
	    	}
	    })
  
	    function ViewModel(){
		    var self = this;
		    this.productType = ko.observable(args.type);
		    this.productTypeChecked = function(obj){
		    	self.productType(obj);
		    } 
		    //vdc下拉列表
		    this.vdcList = ko.observableArray();
	        csc.rest.get("api/v5.0.0/cart/getselect", function(data){
	        	self.vdcList(data);
	        });
	        //展示服务详情
	        this.showDetail = function(object,event){
	        	  showModal("pages/services/service_definitions/showDetail.html?serviceUuid="+object.serviceUuid);
	          }
	        
		   //可用分区下拉列表
		    this.azList = ko.observableArray();
		   
		    this.vdcChange = function(obj){//根据变化的vdc及服务ID查找其下的可用分区
		    	var _self = this;
		    	_self.azList("");
		        csc.rest.get("api/v5.0.0/cart/getAzList/"+obj.serviceUuid()+"/"+obj.vdcUuid(), function(data){
		        	_self.azList(data);
		        });	        
		    };
		    
		    this.azChangeGetVm = function(obj){	
		    	var _self = this;
		        csc.rest.get("api/v5.0.0/vms?vdcUuid="+obj.vdcUuid()+"&azUuid="+obj.azUuid(), function(data){
		        	_self.vmList(data.results);
		        });	    	
		    }
		    
		    this.azChangeGetVpc = function(obj){
		    	var _self = this;
		        csc.rest.get("api/v5.0.0/cart/getVpcList/"+obj.vdcUuid()+"/"+obj.azUuid(), function(data){
		        	_self.vpcList(data);
		        });
		    }
		    
		    this.vpcChange = function(obj){
		    	var _self = this;
		        csc.rest.get("api/v5.0.0/cart/getNetworkList/1/"+obj.vpcUuid(), function(data){//需修改为服务UUID作为参数传递
		        	_self.networkList(data);
		        });
		    }
		    
		    this.vpcChangeByPublic = function(obj){
		    	var _self = this;
		        csc.rest.get("api/v5.0.0/cart/getNetworkListByPublic/"+obj.serviceUuid()+"/"+obj.vpcUuid(), function(data){
		        	_self.networkList(data);
		        });
		    }
		    
		    this.vmChangeGetDate = function(obj){
		    	var _self = this;
	  			var vmItem = _.findWhere(_self.vmList(), {uuid: _self.mountVmUuid()});
				if (typeof(vmItem) == "undefined") { 
					_self.applyTime("");
				}else{
					_self.applyTime(vmItem.expiryTime);
				}
		    	
		    }
	        this.LBMothedList = ko.observableArray(csc.util.getLBMothedList());
	        this.ProtocolList = ko.observableArray(csc.util.getProtocolList());
	        this.MonthsList = ko.observableArray(csc.util.getMonthsList());
	        
	        /************************************ 云主机列表查询  ************************************/
	        this.AllOsTypeList = ko.observableArray();
		    this.AllCpuList = ko.observableArray();
		    this.AllMemoryList = ko.observableArray();
	        csc.rest.get("api/v5.0.0/products/configs/values?productCodeName=VM&configCodeName=osType&urlType=getSource", function(data){
	        	self.AllOsTypeList(data);
	        });
	        csc.rest.get("api/v5.0.0/products/configs/values?productCodeName=VM&configCodeName=cpu&urlType=getSource", function(data){
	        	self.AllCpuList(data);
	        });
	        csc.rest.get("api/v5.0.0/products/configs/values?productCodeName=VM&configCodeName=memory&urlType=getSource", function(data){
	        	self.AllMemoryList(data);
	        });
	        /************************************ 云主机列表查询  ************************************/
		    
		    
		    /************************************ 添加到购物车 ************************************/
		    this.addToCart = function(){
		    	var productKey;
		    	var productData;
		    	var productJsonArray;
				if(self.productType()==1){
					if(self.model_VM.isValid()){
						productJsonArray = self.model_VM.toJSON().vmCartInfo;
						productData = self.model_VM.toJSON();
						productKey = 'VM';
					}
				}else if(self.productType()==2){
 	        	    for(var i=0; i<self.model_Vdisk().vdiskCartInfo().length; i++){
	 	        		 ko.validation.group(self.model_Vdisk().vdiskCartInfo()[i]).showAllMessages();  
		        		 if(!self.model_Vdisk().vdiskCartInfo()[i].isValid()){
		        			   return;
		        		 }
	        	    }
					productJsonArray = self.model_Vdisk.toJSON().vdiskCartInfo;
					productData = self.model_Vdisk.toJSON();
					productKey = 'DISK';
				}else if(self.productType()==3){
 	        	    for(var i=0; i<self.model_ObjectStorage().objectStorageCartInfo().length; i++){
	 	        		 ko.validation.group(self.model_ObjectStorage().objectStorageCartInfo()[i]).showAllMessages();  
		        		 if(!self.model_ObjectStorage().objectStorageCartInfo()[i].isValid()){
		        			   return;
		        		 }
	        	    }
					productJsonArray = self.model_ObjectStorage.toJSON().objectStorageCartInfo;
					productData = self.model_ObjectStorage.toJSON();
					productKey= 'OBJECT_STORAGE';
				}else if(self.productType()==4){
 	        	    for(var i=0; i<self.model_PublicNetwork().publicNetworkCartInfo().length; i++){
	 	        		 ko.validation.group(self.model_PublicNetwork().publicNetworkCartInfo()[i]).showAllMessages();  
		        		 if(!self.model_PublicNetwork().publicNetworkCartInfo()[i].isValid()){
		        			   return;
		        		 }
	        	    }
					productJsonArray = self.model_PublicNetwork.toJSON().publicNetworkCartInfo;
					productData = self.model_PublicNetwork.toJSON();
					productKey = 'PUBLICIP';
				}else if(self.productType()==5){
 	        	    for(var i=0; i<self.model_LB().loadbalancerCartInfo().length; i++){
	 	        		 ko.validation.group(self.model_LB().loadbalancerCartInfo()[i]).showAllMessages();  
		        		 if(!self.model_LB().loadbalancerCartInfo()[i].isValid()){
		        			   return;
		        		 }
	        	    }
					productJsonArray = self.model_LB.toJSON().loadbalancerCartInfo;
					productData = self.model_LB.toJSON();
					productKey = 'LOAD_BALANCING';
				}else if(self.productType()==6){
 	        	    for(var i=0; i<self.model_SSH().sshKeytCartInfo().length; i++){
	 	        		 ko.validation.group(self.model_SSH().sshKeytCartInfo()[i]).showAllMessages();  
		        		 if(!self.model_SSH().sshKeytCartInfo()[i].isValid()){
		        			   return;
		        		 }
	        	    }
					productJsonArray = self.model_SSH.toJSON().sshKeytCartInfo;
					productData = self.model_SSH.toJSON();
					productKey = 'SECRET_KEY';
				}
				nameCheck(productJsonArray,productKey,function(pass){
					if(pass){
						csc.rest.post('api/v5.0.0/cart',productData,function(data){
							systemMsg.alert('添加到购物车成功！');
							self.isAdd_VMSingle(false);
							self.isAdd_VMMore(false);
							self.isAdd_VdiskSingle(false);
					 		self.isAdd_VdiskMore(false);
					 		self.isAdd_ObjectStorageSingle(false);
					 		self.isAdd_ObjectStorageMore(false);
					 		self.isAdd_PublicNetworkSingle(false);
					 		self.isAdd_PublicNetworkMore(false);
					 		self.isAdd_LBSingle(false);
					 		self.isAdd_LBMore(false);
					 		self.isAdd_SSHSingle(false);
					 		self.isAdd_SSHMore(false);
						}); 
					}
				});
			}
		    /************************************ 添加到购物车  ************************************/
		    
		    /************************************ 名称验证  ************************************/
		    function nameCheck(jsonArray,type,callback){
		    	var orderCount = 0;
		    	var instanceCount = 0;
				for(var i=0;i<jsonArray.length;i++){
					var name_i;
					if(type == "VM"){
						name_i=jsonArray[i].vmName;
					}else{
						name_i=jsonArray[i].name;
					}
					for(var j=i+1;j<jsonArray.length;j++){
						var name_j;
						if(type == "VM"){
							name_j=jsonArray[j].vmName;
						}else{
							name_j=jsonArray[j].name;
						}
						if(name_i==name_j){
							systemMsg.alert("序号"+(i+1)+"与序号"+(j+1)+"名称重复，请修改后再提交");
							callback(false);
						}
					}
				 	csc.rest.get('api/v5.0.0/cart/nameCheck?type='+type+'&name='+name_i,function(result){
				 		 if(result.isExist==true){
				 			  systemMsg.alert("已存在名称为"+result.name+"的购物车申请");
							  callback(false);
						  }else{
							 	csc.rest.get('api/v5.0.0/orders/items/checkName?resourceType='+type+'&instanceName='+result.name,function(result1){	
							 		if(result1.isExist==true){
										  systemMsg.alert("已存在名称为"+result1.name+"的订单申请");
										  callback(false);
									  }else{
										   orderCount = orderCount+1;
										 	csc.rest.get('api/v5.0.0/resourceInstances/hasSameName?type='+type+'&name='+result1.name,function(result2){	
										 		if(result2.isExist=="true"){
													  systemMsg.alert("已存在名称为"+result2.name+"的资源实例");
													  callback(false);
												  }else{
													  instanceCount = instanceCount+1;
													  if((instanceCount==jsonArray.length)&&(orderCount==jsonArray.length)){
														  callback(true);
													  }
												  }
										    });
									  }
							    });
						  }
				    });	
				}
		    }
		    /************************************ 名称验证  ************************************/
		    
			/************************************ 提交到订单  ************************************/
			this.addToOrder = function(){
				var productKey;
		    	var productJsonArray;
				if(self.productType()==0){
					if(self.model_VDC.isValid()){
						var value = {};
						value.name=self.model_VDC().name();
					 	csc.rest.put('api/v5.0.0/vdcs/verifyNameExist',value,function(result){	
						 		 if(result.isExist==true){
									  systemMsg.alert("VDC名称已存在");
								  }else{
									csc.rest.get('api/v5.0.0/orders/items/checkName?resourceType=VDC&instanceName='+value.name,function(result1){	
								 		if(result1.isExist==true){
											  systemMsg.alert("已存在名称为"+result1.name+"的订单申请");
										  }else{
											     var orderJson={};
												 var orderItems = [];
												 var metaData={};
												 var resBaseInfo = {};
												 var vdcQuotaList = [];
												 if(self.model_VDC().quota()=="-1"){
													 resBaseInfo.limitQuota="false";
												 }else{
													 resBaseInfo.limitQuota="true";
													 vdcQuotaList.push({type:"CPU",value:self.model_VDC().cpu()});
													 vdcQuotaList.push({type:"MEMORY",value:self.model_VDC().memory()});
													 vdcQuotaList.push({type:"STORAGE",value:self.model_VDC().storage()});
													 vdcQuotaList.push({type:"VPC",value:self.model_VDC().vpcNum()});
													 vdcQuotaList.push({type:"VM",value:self.model_VDC().vm()});
													 vdcQuotaList.push({type:"DISK",value:self.model_VDC().disk()});
													 vdcQuotaList.push({type:"PUBLICIP",value:self.model_VDC().publicIp()});
													 vdcQuotaList.push({type:"ROUTER",value:self.model_VDC().router()});
													 vdcQuotaList.push({type:"FIREWALL",value:self.model_VDC().fireWall()});
													 vdcQuotaList.push({type:"SECRET_KEY",value:self.model_VDC().secretKey()});
													 vdcQuotaList.push({type:"OBJECT_STORAGE",value:self.model_VDC().objectStorage()});
													 vdcQuotaList.push({type:"LOAD_BALANCING",value:self.model_VDC().loadBalancer()});
												 }
												 resBaseInfo.vdcQuotaList=vdcQuotaList;
												 var expireValue;
												 if(self.model_VDC().applyType()=="1"){
													 expireValue = "";
												 }else if(self.model_VDC().applyType()=="2"){
													 expireValue = applyNum;
												 }else{
													 expireValue = applyTime;
												 }
												 metaData.resBaseInfo=resBaseInfo;
												 metaData.osType=self.model_VDC().osTypesSelelct();
												 orderItems.push({
													 resourceType:"VDC",
													 instanceName:self.model_VDC().name(),
													 serviceUuid:self.model_VDC().serviceUuid(),
													 isBill:self.model_VDC().charge(),
													 billCycle:self.model_VDC().billRuleUuid(),
													 fee:self.model_VDC().price(),
													 expireType:self.model_VDC().applyType(),
													 expireValue:expireValue,
													 metaData:JSON.stringify(metaData),
													 desc:self.model_VDC().remark()
												 })
												 
												 orderJson.resourceType = "VDC";
												 orderJson.orderItems = orderItems;
				
											 	 csc.rest.post('api/v5.0.0/orders',orderJson,function(data){
												 		systemMsg.alert('成功提交订单！');
												 		self.isAdd_VDC(false);
												    }); 
										  }
								    });
								  }
						    });
					}
				}else if(self.productType()==1){
					if(this.model_VM.isValid()){
						productKey = 'VM';
				    	productJsonArray = self.model_VM.toJSON().vmCartInfo;
				    	
					}
				}else if(self.productType()==2){
 	        	    for(var i=0; i<self.model_Vdisk().vdiskCartInfo().length; i++){
	 	        		 ko.validation.group(self.model_Vdisk().vdiskCartInfo()[i]).showAllMessages();  
		        		 if(!self.model_Vdisk().vdiskCartInfo()[i].isValid()){
		        			   return;
		        		 }
	        	    }
					productKey = 'DISK';
				    productJsonArray = self.model_Vdisk.toJSON().vdiskCartInfo;
				}else if(self.productType()==3){
 	        	    for(var i=0; i<self.model_ObjectStorage().objectStorageCartInfo().length; i++){
	 	        		 ko.validation.group(self.model_ObjectStorage().objectStorageCartInfo()[i]).showAllMessages();  
		        		 if(!self.model_ObjectStorage().objectStorageCartInfo()[i].isValid()){
		        			   return;
		        		 }
	        	    }
					productKey = 'OBJECT_STORAGE';
			    	productJsonArray = self.model_ObjectStorage.toJSON().objectStorageCartInfo;
				}else if(self.productType()==4){
 	        	    for(var i=0; i<self.model_PublicNetwork().publicNetworkCartInfo().length; i++){
	 	        		 ko.validation.group(self.model_PublicNetwork().publicNetworkCartInfo()[i]).showAllMessages();  
		        		 if(!self.model_PublicNetwork().publicNetworkCartInfo()[i].isValid()){
		        			   return;
		        		 }
	        	    }
					productKey = 'PUBLICIP';
			    	productJsonArray = self.model_PublicNetwork.toJSON().publicNetworkCartInfo;
				}else if(self.productType()==5){
 	        	    for(var i=0; i<self.model_LB().loadbalancerCartInfo().length; i++){
	 	        		 ko.validation.group(self.model_LB().loadbalancerCartInfo()[i]).showAllMessages();  
		        		 if(!self.model_LB().loadbalancerCartInfo()[i].isValid()){
		        			   return;
		        		 }
	        	    }
					productKey = 'LOAD_BALANCING';
			    	productJsonArray = self.model_LB.toJSON().loadbalancerCartInfo;
				}else if(self.productType()==6){
 	        	    for(var i=0; i<self.model_SSH().sshKeytCartInfo().length; i++){
	 	        		 ko.validation.group(self.model_SSH().sshKeytCartInfo()[i]).showAllMessages();  
		        		 if(!self.model_SSH().sshKeytCartInfo()[i].isValid()){
		        			   return;
		        		 }
	        	    }
					productKey = 'SECRET_KEY';
			    	productJsonArray = self.model_SSH.toJSON().sshKeytCartInfo;
				}
				if(productJsonArray!=null){
					self.formatOrders(productKey,productJsonArray);
					nameCheck(productJsonArray,productKey,function(pass){
						if(pass){
						 	 csc.rest.post('api/v5.0.0/orders',self.ordersVO.toJSON(),function(data){
							 		systemMsg.alert('成功提交订单！');
							 		self.isAdd_VMSingle(false);
									self.isAdd_VMMore(false);
									self.isAdd_VdiskSingle(false);
							 		self.isAdd_VdiskMore(false);
							 		self.isAdd_ObjectStorageSingle(false);
							 		self.isAdd_ObjectStorageMore(false);
							 		self.isAdd_PublicNetworkSingle(false);
							 		self.isAdd_PublicNetworkMore(false);
							 		self.isAdd_LBSingle(false);
							 		self.isAdd_LBMore(false);
							 		self.isAdd_SSHSingle(false);
							 		self.isAdd_SSHMore(false);
							    }); 
						}
					});
				}
			}
			/************************************ 提交到订单  ************************************/
			
			/************************************ 封装订单数据格式  ************************************/
			this.ordersVO=ko.validatedObservable({
				resourceType : ko.observable(),
				orderItems : ko.observableArray([])
			})
			function itmesVO(e){
		    	if(e!=null){
		    		this.instanceName = ko.observable(e.name != null? e.name: e.vmName);
					this.serviceUuid = ko.observable(e.serviceUuid);
					this.isBill = ko.observable(e.charge);
					this.expireType =  ko.observable(e.applyType);
					var expireValue="";
		    	    if(e.applyType == "2"){
		    		   expireValue = e.applyNum;
		    	    }else if(e.applyType == "3"){
		    		   expireValue = e.applyTime;
		    	    }
		    		this.expireValue = ko.observable(expireValue);
					this.billCycle = ko.observable(e.billRuleUuid);
					this.fee = ko.observable(e.price);
					this.desc = ko.observable(e.remark);
		    		this.azUuid = ko.observable(e.azUuid);
		    		this.vdcUuid = ko.observable(e.vdcUuid);
					
					this.metaData = ko.observable();
					this.resourceType = ko.observable();
		    		this.relateUuid = ko.observable();
		    	}
			}
			function metaDataVO(){
				this.resBaseInfo = ko.observable();
			}
		   function baseInfoVO (e){
		       //azuuid，vdcuuid 暂时留着，vm有用到 ，后面可以去掉，
			   this.azUuid = ko.observable(e.azUuid);
			   this.name = ko.observable(e.vmName);
			   this.expiryTime = ko.observable();
			   this.imageUuid = ko.observable();
			   this.vdcUuid = ko.observable(e.vdcUuid);
			   
			   this.osType = ko.observable(e.osType);
			   this.osVersion = ko.observable(e.osVersion);
			   this.memory = ko.observable(e.memory);
			   this.storage = ko.observable(e.storage);
			   this.vcpu = ko.observable(e.cpu);
			   
			   this.vpcUuid = ko.observable(e.vpcUuid);
			   this.ip = ko.observable(e.ip);
			   this.account = ko.observable(e.account);
			   this.password = ko.observable(e.password);
			   this.repeatPassword = ko.observable(e.repeatPassword);
			   this.sshUuid = ko.observable(e.sshUuid);
			   this.busSysUuid = ko.observable(e.projectUuid);//业务系统uuid
			   this.partitionList = ko.observableArray();//分区
			   this.networkList = ko.observableArray();//多网卡
			   this.networkUuid = ko.observable(e.vpcNetworkUuid!=null?e.vpcNetworkUuid:e.netWorkId);
			   this.lbMethod = ko.observable(e.loadBalanceWay);
			   this.protocol = ko.observable(e.agreement);
			   
			   this.softwareList = ko.observableArray();
			   
			   this.volumeSize = ko.observable(e.size);//云硬盘大小
			   this.vmUuid = ko.observable(e.mountVmUuid);//云主机uuid
			   
			   this.applySize = ko.observable(e.size);//存储大小
		   }
		   function networkVO (e){
			   this.networkId = ko.observable(e.vpcNetworkUuid);
			   this.ip = ko.observable(e.ip);
		   }
		   
		   function softwareVo(e){
			   this.softwareUuid = ko.observable(e.softwareUuid);
			   this.scriptUuid = ko.observable(e.scriptUuid);
			   this.softwareParamsList = ko.observableArray();
		   }
		   
		   function softwareParamsVO(e){
			    this.paramsUuid = ko.observable(e.paramsUuid);
		    	this.paramsValue = ko.observable(e.paramsValue!=null?e.paramsValue:"");
		   }
		   
			 this.formatOrders = function(productKey,productJsonArray){
		    	self.ordersVO().orderItems([]);
		    	self.ordersVO().resourceType(productKey);
		    	productJsonArray.forEach(function (e){
		    	   var item =new itmesVO(e);
		    	   item.resourceType(productKey);
		    	   var relateUuid;
		    	   var meta=new metaDataVO();
		    	   var baseInfo=new baseInfoVO(e);
		    	   if(e.partitions!=null && e.partitions.length>0){
		    		   e.partitions.forEach(function(p){
			    		   var pVo=new partitionVO();
			    		   pVo.name(p.name);
			    		   pVo.size(p.size);
			    		   baseInfo.partitionList.push(pVo)
			    	   });
		    	   }
		    	   if("VM" == productKey){
		    		   relateUuid=csc.util.getUuid();
		    		   baseInfo.networkList.push(new networkVO(e));
		    		   e.softwares.forEach(function (soft){
		    			   var software = new softwareVo(soft);
		    		   	   soft.softwareParams.forEach(function (params){
			    			   var softwareParam = new softwareParamsVO(params);
			    			   software.softwareParamsList.push(softwareParam);
			    		   })
			    		   baseInfo.softwareList.push(software);
		    		   });
		    	   }
		    	   if(e.mountDisks!=null && e.mountDisks.length>0){
		    		   item.relateUuid(relateUuid);
		    		   e.mountDisks.forEach(function(m){
			    		   var i =new itmesVO(m);
				    	   i.resourceType("DISK");
				    	   i.relateUuid(relateUuid);
				    	   var md=new metaDataVO();
				    	   var bi =new baseInfoVO(m);
				    	   if(baseInfo.softwareList && baseInfo.softwareList().length==0){
				    		   delete baseInfo.softwareList;
				    	   }
				    	   if(bi.partitionList && bi.partitionList().length==0){
				    		   delete bi.partitionList;
				    	   }
				    	   if(bi.networkList && bi.networkList().length==0){
				    		   delete bi.networkList;
				    	   }
				    	   md.resBaseInfo(bi);
				    	   i.metaData(ko.toJSON(md));
				    	   self.ordersVO().orderItems.push(i);
			    	   });
		    	   }
		    	   if(baseInfo.softwareList && baseInfo.softwareList().length==0){
		    		   delete baseInfo.softwareList;
		    	   }
		    	   if(baseInfo.partitionList && baseInfo.partitionList().length==0){
		    		   delete baseInfo.partitionList;
		    	   }
		    	   if(baseInfo.networkList && baseInfo.networkList().length==0){
		    		   delete baseInfo.networkList;
		    	   }
		    	   meta.resBaseInfo(baseInfo);
		    	   item.metaData(ko.toJSON(meta));
		    	   self.ordersVO().orderItems.push(item);
			    });
		    }
		
			/************************************ 封装订单数据格式  ************************************/
			 
			/************************************ 提交到订单  ************************************/
			
//################################################# 负载均衡申请 start ##################################################
		    
		    /************************************ 负载均衡  vo 定义  ************************************/
		    this.model_LB = ko.validatedObservable({
		        loadbalancerCartInfo: ko.observableArray([])
		    });
		    function lbVO(){
		    	
		    	this.name = ko.observable("").extend({required:true,cscNameRule:true});
				this.vdcUuid = ko.observable().extend({required:true});
				this.applyType = ko.observable("1");
				this.applyNum = ko.observable();
				this.applyTime = ko.observable();
				this.billRuleUuid = ko.observable();
				this.remark = ko.observable();
				this.price = ko.observable();
				this.azUuid = ko.observable().extend({required:true});
				this.serviceUuid = ko.observable();
				this.charge = ko.observable();//是否计费
				this.loadBalanceWay = ko.observable().extend({required:true});
				this.agreement = ko.observable().extend({required:true});
				this.vpcNetworkUuid = ko.observable().extend({required:true});
				this.vpcUuid = ko.observable().extend({required:true});
				
				this.azList = ko.observableArray([]);
				this.billRuleList = ko.observableArray([]);
				this.vdcList = ko.observableArray([]);
				this.networkList = ko.observableArray([]);
				this.vpcList = ko.observableArray([]); 
				
				ko.computed(function(){
		            var serviceUuid=this.serviceUuid();
		            var cycle=this.billRuleUuid();
	 	    		var cpu=this.cpu!=null?parseInt(this.cpu()||0):0;
	 	    		var memory=this.memory!=null?parseInt(this.memory()||0):0;
	 	    		var storage=this.storage!=null?parseInt(this.storage()||0):0;
	 	    		var size=this.size!=null?parseInt(this.size()||0):0;
	 	    		var type=this.billRuleUuid();
	 	    		if(typeof(type)=="undefined" ){
	 	    			this.price("");
		   	    			return;
		            }
		            var _self = this;
		 	    	csc.rest.get("api/v5.0.0/billing/rules/calculate?serviceUuid="+serviceUuid+"&cycle="+cycle, function(result){
		 	    		var price = 0;
		 	    		result.ruleList.forEach(function(e){
		 	    			if(e.attrType=='CPU'){
		 	    				price += cpu * e.unitPrice;
		 	    			}else if(e.attrType=='MEMORY'){
		 	    				price += memory * e.unitPrice;
		 	    			}else if(e.attrType=='STORAGE'){
		 	    				price += storage * e.unitPrice;
		 	    			}else if(e.attrType=='DISK'){
		 	    				price += size * e.unitPrice;
		 	    			}else if(e.attrType=='LOAD_BALANCING'){
		 	    				price +=e.unitPrice;
		 	    			}else if(e.attrType=='SECRET_KEY'){
		 	    				price +=e.unitPrice;
		 	    			}
		 	    		});
		 	    		if(type=="DAY"){
		 	    			price+="元/天";
		 	    		}else if(type=="MONTH"){
		 	    			price+="元/月";
		 	    		}else if(type=="QUARTER"){
		 	    			price+="元/季度";
		 	    		}else{
		 	    			price+="元/年";
		 	    		}
		 	    		_self.price(price);
		 	    	});	
				}, this).extend({ deferred: true });
				
				var item = this;
	            this.charge.subscribe(function(value){
	            	if(value=='true'){
	            		item.billRuleUuid.extend({required: {params: true, onlyIf:function(){return true}}})
	            	}else{
	            		item.billRuleUuid.extend({required: {params: false, onlyIf:function(){return true}}})
	            	}
	            });
		    }
		    
		    function LB_baseInfo(){
				   this.vpcUuid = ko.observable();
				   this.networkUuid = ko.observable();
				   this.lbMethod = ko.observable();//负载均衡方式
				   this.protocol = ko.observable();//协议
			}
		    /************************************ 负载均衡  vo 定义  ************************************/
		    
		    /************************************ 负载均衡  服务列表  ************************************/
		    this.table_LB = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/BALANCE',perPage:6});
		    /************************************ 负载均衡  服务列表  ************************************/
		    
		    /************************************ 负载均衡  单个申请  ************************************/
		    this.isAdd_LBSingle = ko.observable(false);
		    this.add_LBSingle = function(obj){
		        var serviceUuid = obj.serviceUuid;
	            var uri="serviceUuid="+serviceUuid;
	            csc.rest.get("api/v5.0.0/cart/getCartSelectList?"+uri, function(result){
	                      self.model_LB().loadbalancerCartInfo([]);
	  		 	    	  var vo = new lbVO();
		  		 	      vo.vdcList(result.vdcList);
		  		 	      vo.billRuleList(formatCharge(result.chargeList));
		  		 	      vo.serviceUuid(serviceUuid);
			    		  vo.charge(obj.isFee=="否"?"false":"true");
	                      self.model_LB().loadbalancerCartInfo.push(new ko.validatedObservable(vo));
	                      self.isAdd_LBSingle(true);
	            });
		    }
		    /************************************ 负载均衡  单个申请  ************************************/
		    
		    /************************************ 负载均衡  批量申请  ************************************/
		    var vdcList_more;
	    	var billRuleList_more;
	    	var osTypeList_more;
	    	var cpuList_more;
	    	var memoryList_more;
	    	var serviceUuid_more;
	    	var charge_more;
	    	
	    	this.charge_more_view = ko.observable();
	    	this.isAdd_LBMore = ko.observable(false);
		    this.changeList_LB = function(data){
		    	vdcList_more = data.vdcList();
		    	billRuleList_more = data.billRuleList();
		    	serviceUuid_more = data.serviceUuid();
		    	charge_more = data.charge();
		    	self.charge_more_view(data.charge());
		    	self.model_LB().loadbalancerCartInfo([]);
		    	self.num_SSH("");
		    	self.isAdd_LBSingle(false);
		    	self.isAdd_LBMore(true);
		    }
		    this.num_LB = ko.observable().extend({max:20});
		    this.num_LB.subscribe(function(){
		    	if(!self.num_SSH.isValid()){return;}
		    	self.model_LB().loadbalancerCartInfo([]);
		    	var num = self.num_LB();
		    	for(var i=0; i<num; i++){
		    		var vo = new lbVO();
		    		vo.vdcList(vdcList_more);
		    		vo.billRuleList(billRuleList_more);
		    		vo.serviceUuid(serviceUuid_more);
		    		vo.charge(charge_more);
		    		self.model_LB().loadbalancerCartInfo.push(new ko.validatedObservable(vo));
		    	}
		    	changeDateFormat();
		    }); 
		    /************************************ 负载均衡  批量申请  ************************************/
			
			/************************************ 负载均衡  封装订单数据格式  ************************************/
		    /* this.formatOrders_LB = function(){
		    	self.orders().orderItems([]);
		    	self.orders().resourceType("LOAD_BALANCING");
		        self.model_LB().loadbalancerCartInfo().forEach(function (e){
		    	   var item =new itmes();
		    	   item.resourceType("LOAD_BALANCING");
		    	   item.desc(e.remark());
		    	   item.vdcUuid(e.vdcUuid);
		    	   item.azUuid(e.azUuid());
		    	   item.instanceName(e.name());
		    	   item.serviceUuid(e.serviceUuid());
		    	   item.isBill(e.charge());
		    	   item.expireType(e.applyType());
		    	   var expireValue="";
		    	   if(e.applyType() == "2"){
		    		   expireValue = e.applyNum();
		    	   }else if(e.applyType() == "3"){
		    		   expireValue = e.applyTime();
		    	   }
		    	   item.expireValue(expireValue);
		    	   item.billCycle(e.billRuleUuid());
		    	   item.fee(e.price());
		    	   
		    	   var meta=new metaData();
		    	   var baseInfo=new LB_baseInfo();
		    	   baseInfo.vpcUuid(e.vpcUuid());
		    	   baseInfo.networkUuid(e.vpcNetworkUuid());
		    	   baseInfo.lbMethod(e.loadBalanceWay());
		    	   baseInfo.protocol(e.agreement());
		    	   
		    	   meta.resBaseInfo(baseInfo);
		    	   item.metaData(ko.toJSON(meta));
		    	   
		    	   self.orders().orderItems.push(item);
		       });
		    } */
		    /************************************ 负载均衡  封装订单数据格式  ************************************/
		    
//################################################# 负载均衡申请 end ##################################################
			
//################################################# SSH密钥申请 start ##################################################			 
			
			/************************************ SSH密钥  vo定义  ************************************/
			this.isAdd_SSH = ko.observable(false);
		    this.model_SSH = ko.validatedObservable({
		    	sshKeytCartInfo: ko.observableArray([])
		    });
		    
		    function sshVO(){
		    	this.name = ko.observable().extend({required:true,cscNameRule:true});
				this.vdcUuid = ko.observable().extend({required:true});
				this.applyType = ko.observable("1");
				this.applyNum = ko.observable();
				this.applyTime = ko.observable();
				this.billRuleUuid = ko.observable();
				this.remark = ko.observable();
				this.price = ko.observable();
				this.azUuid = ko.observable().extend({required:true});
				this.serviceUuid = ko.observable();
				this.charge = ko.observable();//是否计费
				this.azList = ko.observableArray([]);
				this.billRuleList = ko.observableArray([]);
				this.vdcList = ko.observableArray([]);
				
				ko.computed(function(){
		            var serviceUuid=this.serviceUuid();
		            var cycle=this.billRuleUuid();
	 	    		var cpu=this.cpu!=null?parseInt(this.cpu()||0):0;
	 	    		var memory=this.memory!=null?parseInt(this.memory()||0):0;
	 	    		var storage=this.storage!=null?parseInt(this.storage()||0):0;
	 	    		var size=this.size!=null?parseInt(this.size()||0):0;
	 	    		var type=this.billRuleUuid();
	 	    		if(typeof(type)=="undefined" ){
	 	    			this.price("");
		   	    			return;
		            }
		            var _self = this;
		 	    	csc.rest.get("api/v5.0.0/billing/rules/calculate?serviceUuid="+serviceUuid+"&cycle="+cycle, function(result){
		 	    		var price = 0;
		 	    		result.ruleList.forEach(function(e){
		 	    			if(e.attrType=='CPU'){
		 	    				price += cpu * e.unitPrice;
		 	    			}else if(e.attrType=='MEMORY'){
		 	    				price += memory * e.unitPrice;
		 	    			}else if(e.attrType=='STORAGE'){
		 	    				price += storage * e.unitPrice;
		 	    			}else if(e.attrType=='DISK'){
		 	    				price += size * e.unitPrice;
		 	    			}else if(e.attrType=='LOAD_BALANCING'){
		 	    				price +=e.unitPrice;
		 	    			}else if(e.attrType=='SECRET_KEY'){
		 	    				price +=e.unitPrice;
		 	    			}
		 	    		});
		 	    		if(type=="DAY"){
		 	    			price+="元/天";
		 	    		}else if(type=="MONTH"){
		 	    			price+="元/月";
		 	    		}else if(type=="QUARTER"){
		 	    			price+="元/季度";
		 	    		}else{
		 	    			price+="元/年";
		 	    		}
		 	    		_self.price(price);
		 	    	});	
				}, this).extend({ deferred: true });
				var item = this;
				
	            this.charge.subscribe(function(value){
	            	if(value=='true'){
	            		item.billRuleUuid.extend({required: {params: true, onlyIf:function(){return true}}})
	            	}else{
	            		item.billRuleUuid.extend({required: {params: false, onlyIf:function(){return true}}})
	            	}
	            });
		    }
		    /************************************ SSH密钥  vo定义  ************************************/
		    
		    /************************************ SSH密钥  单个申请  ************************************/
		    this.isAdd_SSHSingle = ko.observable(false);
		    this.add_SSHSingle = function(obj){
		        var serviceUuid = obj.serviceUuid;
	            var uri="serviceUuid="+serviceUuid;
	            csc.rest.get("api/v5.0.0/cart/getCartSelectList?"+uri, function(result){
	                      self.model_SSH().sshKeytCartInfo([]);
	  		 	    	  var vo = new sshVO();
		  		 	      vo.vdcList(result.vdcList);
		  		 	      vo.billRuleList(formatCharge(result.chargeList));
		  		 	      vo.serviceUuid(serviceUuid);
		  		 	      vo.charge(obj.isFee=="否"?"false":"true");
	                      self.model_SSH().sshKeytCartInfo.push(new ko.validatedObservable(vo));
	                      self.isAdd_SSHSingle(true);
	            });
		    }
		    /************************************ SSH密钥  单个申请  ************************************/
		    
		    /************************************ SSH密钥  批量申请  ************************************/
		    this.isAdd_SSHMore = ko.observable(false);
		    this.changeList_SSH = function(data){
		    	vdcList_more = data.vdcList();
		    	billRuleList_more = data.billRuleList();
		    	serviceUuid_more = data.serviceUuid();
		    	charge_more = data.charge();
		    	self.charge_more_view(data.charge());
		    	self.model_SSH().sshKeytCartInfo([]);
		    	self.num_SSH("");
		    	self.isAdd_SSHSingle(false);
		    	self.isAdd_SSHMore(true);
		    }
		    this.num_SSH = ko.observable().extend({max:20});
		    this.num_SSH.subscribe(function(){
		    	if(!self.num_SSH.isValid()){return;}
		    	self.model_SSH().sshKeytCartInfo([]);
		    	var num = self.num_SSH();
		    	for(var i=0; i<num; i++){
		    		var vo = new sshVO();
		    		vo.vdcList(vdcList_more);
		    		vo.billRuleList(billRuleList_more);
		    		vo.serviceUuid(serviceUuid_more);
		    		vo.charge(charge_more);
		    		self.model_SSH().sshKeytCartInfo.push(new ko.validatedObservable(vo));
		    	}
		    	changeDateFormat();
		    }); 
		    /************************************ SSH密钥  批量申请  ************************************/
		    
		    /************************************ SSH密钥  服务列表  ************************************/
		    this.table_SSH = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/SSH',perPage:6});
		    /************************************ SSH密钥  服务列表  ************************************/
		    
		    /************************************ SSH密钥  封装订单数据格式  ************************************/
		   /*  this.formatOrders_SSH = function(){
		    	self.orders().orderItems([]);
		    	self.orders().resourceType("SECRET_KEY");
		        self.model_SSH().sshKeytCartInfo().forEach(function (e){
		    	   var item =new itmes();
		    	   item.resourceType("SECRET_KEY");
		    	   item.desc(e.remark());
		    	   item.vdcUuid(e.vdcUuid);
		    	   item.azUuid(e.azUuid());
		    	   item.instanceName(e.name());
		    	   item.serviceUuid(e.serviceUuid());
		    	   item.isBill(e.charge());
		    	   item.expireType(e.applyType());
		    	   var expireValue="";
		    	   if(e.applyType() == "2"){
		    		   expireValue = e.applyNum();
		    	   }else if(e.applyType() == "3"){
		    		   expireValue = e.applyTime();
		    	   }
		    	   item.expireValue(expireValue);
		    	   item.billCycle(e.billRuleUuid());
		    	   item.fee(e.price());
		    	   
		    	   var meta=new metaData();
		    	   meta.resBaseInfo("");
		    	   item.metaData(ko.toJSON(meta));
		    	   
		    	   self.orders().orderItems.push(item);
		       });
		    } */
		    /************************************ SSH密钥  封装订单数据格式  ************************************/
		    
//################################################# SSH密钥申请 end ##################################################
		    
//################################################# 云硬盘申请 start ##################################################
		    
		    /************************************ 云硬盘  vo定义 ************************************/
			function vdiskVO (){
				this.name = ko.observable("").extend({required:true,cscNameRule:true});
				this.serviceUuid = ko.observable();
				this.vdcUuid =  ko.observable().extend({required:true});
				this.size =  ko.observable("").extend({required:true,number:true});
				this.azUuid = ko.observable().extend({required:true});
				this.mountVmUuid =  ko.observable().extend({required:true});
				this.remark = ko.observable("");
				this.billRuleUuid =  ko.observable();
				this.applyTime = ko.observable("");
				this.applyType = ko.observable("3");
				this.azList = ko.observableArray([]);
				this.vmList = ko.observableArray([]);
				this.vdcList = ko.observableArray([]);
				this.charge = ko.observable();
				this.billRuleArray = ko.observableArray();
				this.price = ko.observable("");
				this.unitPrice = ko.observable("");
				
				ko.computed(function(){
		            var serviceUuid=this.serviceUuid();
		            var cycle=this.billRuleUuid();
	 	    		var cpu=this.cpu!=null?parseInt(this.cpu()||0):0;
	 	    		var memory=this.memory!=null?parseInt(this.memory()||0):0;
	 	    		var storage=this.storage!=null?parseInt(this.storage()||0):0;
	 	    		var size=this.size!=null?parseInt(this.size()||0):0;
	 	    		var type=this.billRuleUuid();
	 	    		if(typeof(type)=="undefined" ){
	 	    			this.price("");
		   	    			return;
		            }
		            var _self = this;
		 	    	csc.rest.get("api/v5.0.0/billing/rules/calculate?serviceUuid="+serviceUuid+"&cycle="+cycle, function(result){
		 	    		var price = 0;
		 	    		result.ruleList.forEach(function(e){
		 	    			if(e.attrType=='CPU'){
		 	    				price += cpu * e.unitPrice;
		 	    			}else if(e.attrType=='MEMORY'){
		 	    				price += memory * e.unitPrice;
		 	    			}else if(e.attrType=='STORAGE'){
		 	    				price += storage * e.unitPrice;
		 	    			}else if(e.attrType=='DISK'){
		 	    				price += size * e.unitPrice;
		 	    			}else if(e.attrType=='LOAD_BALANCING'){
		 	    				price +=e.unitPrice;
		 	    			}else if(e.attrType=='SECRET_KEY'){
		 	    				price +=e.unitPrice;
		 	    			}
		 	    		});
		 	    		if(type=="DAY"){
		 	    			price+="元/天";
		 	    		}else if(type=="MONTH"){
		 	    			price+="元/月";
		 	    		}else if(type=="QUARTER"){
		 	    			price+="元/季度";
		 	    		}else{
		 	    			price+="元/年";
		 	    		}
		 	    		_self.price(price);
		 	    	});	
				}, this).extend({ deferred: true });
				
				var item = this;
	            this.charge.subscribe(function(value){
	            	if(value=='true'){
	            		item.billRuleUuid.extend({required: {params: true, onlyIf:function(){return true}}})
	            	}else{
	            		item.billRuleUuid.extend({required: {params: false, onlyIf:function(){return true}}})
	            	}
	            });
			}
		    /************************************ 云硬盘  vo定义  ************************************/
		    
		    /************************************ 云硬盘  服务列表  ************************************/
		    this.table_Vdisk = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/DISK',perPage:6});
		    /************************************ 云硬盘  服务列表  ************************************/
		    
		    /************************************ 云硬盘 单个申请  ************************************/
				    this.isAdd_VdiskSingle = ko.observable(false);
				    this.add_Vdisk = function(obj){
				        var serviceUuid = obj.serviceUuid;
			            var uri="serviceUuid="+serviceUuid;
			            csc.rest.get("api/v5.0.0/cart/getCartSelectList?"+uri, function(result){
			            	  self.model_Vdisk().vdiskCartInfo([]);
		  		 	    	  var vo = new vdiskVO();
			  		 	      vo.vdcList(result.vdcList);
			  		 	      vo.billRuleArray(formatCharge(result.chargeList));
			  		 	      vo.serviceUuid(serviceUuid);
			  		 	      vo.charge(obj.isFee=="否"?"false":"true");
			  		 	      self.model_Vdisk().vdiskCartInfo.push(new ko.validatedObservable(vo));
		                      self.isAdd_VdiskSingle(true);
			            });
				    }
				    /************************************ 云硬盘 单个申请  ************************************/
				    
				    /************************************ 云硬盘 批量申请  ************************************/
				    this.isAdd_VdiskMore = ko.observable(false);
				    this.changeList_Vdisk = function(data){
				        vdcList_more = data.vdcList();
				    	billRuleList_more = data.billRuleArray();
				    	serviceUuid_more = data.serviceUuid();
				    	charge_more = data.charge();
				    	self.charge_more_view(data.charge());
				    	self.model_Vdisk().vdiskCartInfo([]);
				    	self.num_vdisk("");
				    	self.isAdd_VdiskSingle(false);
				    	self.isAdd_VdiskMore(true);
				    }
				    
					this.num_vdisk = ko.observable().extend({max:20});
					this.model_Vdisk = ko.validatedObservable({
						vdiskCartInfo: ko.observableArray([])
					});
						
					this.num_vdisk.subscribe(function(){
						if(!self.num_vdisk.isValid()){return;}
						self.model_Vdisk().vdiskCartInfo([]);
						var num = self.num_vdisk();
						for(var i=0; i<num; i++){
							var vo=new vdiskVO();
							vo.vdcList(vdcList_more);
				    		vo.billRuleArray(billRuleList_more);
				    		vo.serviceUuid(serviceUuid_more);
				    		vo.charge(charge_more);
						    self.model_Vdisk().vdiskCartInfo.push(new ko.validatedObservable(vo))
						}
					});
			/************************************ 云硬盘 批量申请  ************************************/
			
//################################################# 云硬盘申请 end ##################################################

		    /* this.isAdd_VdiskSingle = ko.observable(false);
		    this.isAdd_VdiskMore = ko.observable(false);
		    
		    var diskServiceUuid;
		    var diskChargeType;
		    this.diskCharge=ko.observable("");
		    this.add_Vdisk = function(obj){
		    	
		    	diskServiceUuid=obj.serviceUuid;
		    	csc.rest.get("api/v5.0.0/service/getServiceInfo/"+obj.serviceUuid, function(data){
		    		self.isAdd_VdiskSingle(true);
		    		if(data.charge==1){
		    			self.diskCharge("false");
			    	}else{
			    		self.diskCharge("true");
			    		diskChargeType = setArrayCharge(data.chargeType);
			    		console.log(diskChargeType);
			    	}
		    		csc.rest.get("api/v5.0.0/cart/getVdcList/"+obj.serviceUuid, function(result){
		    			self.vdcList(result);
				        self.num_vdisk(0);
				        self.num_vdisk(1);
			        });
	
		    	});
		    } */
		    
		   /* function DISK_baseInfo(){
			   this.volumeSize = ko.observable();
			   this.vmUuid = ko.observable();
		   }
		    
		    this.formatOrders_DISK = function(){
		    	self.orders().orderItems([]);
		    	self.orders().resourceType("DISK");
		        self.model_Vdisk().vdiskCartInfo().forEach(function (e){
		    	   var item =new itmes();
		    	   item.resourceType("DISK");
		    	   item.desc(e.remark());
		    	   item.azUuid(e.azUuid());
		    	   item.vdcUuid(e.vdcUuid());
		    	   item.instanceName(e.name());
		    	   item.serviceUuid(e.serviceUuid());
		    	   item.isBill(e.charge());
		    	   item.expireType(e.applyType());
		    	   var expireValue="";
		    	   if(e.applyType() == "2"){
		    		   expireValue = e.applyNum();
		    	   }else if(e.applyType() == "3"){
		    		   expireValue = e.applyTime();
		    	   }
		    	   item.expireValue(expireValue);
		    	   item.billCycle(e.billRuleUuid());
		    	   item.fee(e.price());
		    	   
		    	   var meta=new metaData();
		    	   var baseInfo =new DISK_baseInfo();
		    	   
		    	   baseInfo.volumeSize(e.size());
		    	   baseInfo.vmUuid(e.mountVmUuid());
		    	   meta.resBaseInfo(baseInfo);
		    	   item.metaData(ko.toJSON(meta));
		    	   self.orders().orderItems.push(item);
		       });
		    } */
		    
		    /* this.changeList_Vdisk = function(){
		    	self.isAdd_VdiskSingle(false);
		    	self.isAdd_VdiskMore(true);
		        self.num_vdisk(0);
		        self.num_vdisk(1);	    	
		    }
		    
		    this.changeSingle_Vdisk = function(){
		    	self.isAdd_VdiskSingle(true);
		    	self.isAdd_VdiskMore(false);
		        self.num_vdisk(0);
		        self.num_vdisk(1);	    	
		    }
		    
		    this.num_vdisk = ko.observable().extend({max:20});
		    
		    this.model_Vdisk = ko.validatedObservable({
		    	vdiskCartInfo: ko.observableArray([])
		    });
		    
		    this.num_vdisk.subscribe(function(){
		    	if(!self.num_vdisk.isValid()){
		    		return;
		    	}
		    	self.model_Vdisk().vdiskCartInfo([]);
		    	var num = self.num_vdisk();
	        	for(var i=0; i<num; i++){
		    		self.model_Vdisk().vdiskCartInfo.push({
		    			name: ko.observable("").extend({required:true}),
		    			serviceUuid:ko.observable(diskServiceUuid),
						vdcUuid: ko.observable(""),
						size: ko.observable(""),
						azUuid:ko.observable(""),
						mountVmUuid: ko.observable(""),
						remark:ko.observable(""),
						billRuleUuid: ko.observable(""),
						applyTime:ko.observable(""),
						applyType:ko.observable("3"),
						azList:ko.observableArray([]),
						vmList:ko.observableArray([]),
						charge:ko.observable(self.diskCharge()),
						billRuleArray:ko.observableArray(diskChargeType),
						price:ko.observable(""),
						unitPrice:ko.observable("")
		    		})
		    	}	
		    }); */
		    
		    //################## 云硬盘 end ##################
		    
		  
		   
//################################################# 对象存储 start ##################################################

            /************************************ 对象存储  vo定义 ************************************/
            function ObjectStorageVO(){
	    			this.name = ko.observable("").extend({required:true,cscNameRule:true});
	    			this.serviceUuid =ko.observable();
	    			this.vdcUuid = ko.observable().extend({required:true});
	    			this.azUuid = ko.observable().extend({required:true});
	    			this.size = ko.observable("").extend({required:true,number:true});
	    			this.billRuleUuid = ko.observable();
	    			this.applyType = ko.observable("1");
	    			this.applyNum = ko.observable("");
	    			this.applyTime = ko.observable("");
	    			this.remark = ko.observable("");
	    			this.azList = ko.observableArray([]);
	    			this.vdcList = ko.observableArray([]);
	    			this.charge = ko.observable();
	    			this.billRuleArray = ko.observableArray([]);
	    			this.price = ko.observable("");
	    			this.unitPrice = ko.observable("");
	    			
	    			ko.computed(function(){
			            var serviceUuid=this.serviceUuid();
			            var cycle=this.billRuleUuid();
		 	    		var cpu=this.cpu!=null?parseInt(this.cpu()||0):0;
		 	    		var memory=this.memory!=null?parseInt(this.memory()||0):0;
		 	    		var storage=this.storage!=null?parseInt(this.storage()||0):0;
		 	    		var size=this.size!=null?parseInt(this.size()||0):0;
		 	    		var type=this.billRuleUuid();
		 	    		if(typeof(type)=="undefined" ){
		 	    			this.price("");
			   	    			return;
			            }
			            var _self = this;
			 	    	csc.rest.get("api/v5.0.0/billing/rules/calculate?serviceUuid="+serviceUuid+"&cycle="+cycle, function(result){
			 	    		var price = 0;
			 	    		result.ruleList.forEach(function(e){
			 	    			if(e.attrType=='CPU'){
			 	    				price += cpu * e.unitPrice;
			 	    			}else if(e.attrType=='MEMORY'){
			 	    				price += memory * e.unitPrice;
			 	    			}else if(e.attrType=='STORAGE'){
			 	    				price += storage * e.unitPrice;
			 	    			}else if(e.attrType=='DISK'){
			 	    				price += size * e.unitPrice;
			 	    			}else if(e.attrType=='LOAD_BALANCING'){
			 	    				price +=e.unitPrice;
			 	    			}else if(e.attrType=='SECRET_KEY'){
			 	    				price +=e.unitPrice;
			 	    			}else if(e.attrType=='OBJECT_STORAGE'){
			 	    				price += size * e.unitPrice;
			 	    			}
			 	    		});
			 	    		if(type=="DAY"){
			 	    			price+="元/天";
			 	    		}else if(type=="MONTH"){
			 	    			price+="元/月";
			 	    		}else if(type=="QUARTER"){
			 	    			price+="元/季度";
			 	    		}else{
			 	    			price+="元/年";
			 	    		}
			 	    		_self.price(price);
			 	    	});	
					}, this).extend({ deferred: true });
	    			
					var item = this;
		            this.charge.subscribe(function(value){
		            	if(value=='true'){
		            		item.billRuleUuid.extend({required: {params: true, onlyIf:function(){return true}}})
		            	}else{
		            		item.billRuleUuid.extend({required: {params: false, onlyIf:function(){return true}}})
		            	}
		            });
		    }
		    /************************************ 对象存储  vo定义 ************************************/
		    
		    /************************************ 对象存储  服务列表  ************************************/
		    this.table_ObjectStorage = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/OBJSTORAGE',perPage:6});
		    /************************************ 对象存储  服务列表  ************************************/
		    
		    /************************************ 对象存储 单个申请  ************************************/
		    this.isAdd_ObjectStorageSingle = ko.observable(false);
		    this.add_ObjectStorage = function(obj){
		        var serviceUuid = obj.serviceUuid;
	            var uri="serviceUuid="+serviceUuid;
	            csc.rest.get("api/v5.0.0/cart/getCartSelectList?"+uri, function(result){
	            	  self.model_ObjectStorage().objectStorageCartInfo([]);
  		 	    	  var vo = new ObjectStorageVO();
	  		 	      vo.vdcList(result.vdcList);
	  		 	      vo.billRuleArray(formatCharge(result.chargeList));
	  		 	      vo.serviceUuid(serviceUuid);
	  		 	      vo.charge(obj.isFee=="否"?"false":"true");
	  		 	      self.model_ObjectStorage().objectStorageCartInfo.push(new ko.validatedObservable(vo));
                      self.isAdd_ObjectStorageSingle(true);
	            });
		    }
		    /************************************ 对象存储 单个申请  ************************************/
		    
		    /************************************ 对象存储 批量申请  ************************************/
		    this.isAdd_ObjectStorageMore = ko.observable(false);
		    this.changeList_ObjectStorage = function(data){
		        vdcList_more = data.vdcList();
		    	billRuleList_more = data.billRuleArray();
		    	serviceUuid_more = data.serviceUuid();
		    	charge_more = data.charge();
		    	self.charge_more_view(data.charge());
		    	self.model_ObjectStorage().objectStorageCartInfo([]);
		    	self.num_ObjectStorage("");
		    	self.isAdd_ObjectStorageSingle(false);
		    	self.isAdd_ObjectStorageMore(true);
		    }
		    
			this.num_ObjectStorage = ko.observable().extend({max:20});
		    this.model_ObjectStorage = ko.validatedObservable({
		    	objectStorageCartInfo: ko.observableArray([])
		    });
				
			this.num_ObjectStorage.subscribe(function(){
				if(!self.num_ObjectStorage.isValid()){return;}
				self.model_ObjectStorage().objectStorageCartInfo([]);
				var num = self.num_ObjectStorage();
				for(var i=0; i<num; i++){
					var vo=new ObjectStorageVO();
					vo.vdcList(vdcList_more);
		    		vo.billRuleArray(billRuleList_more);
		    		vo.serviceUuid(serviceUuid_more);
		    		vo.charge(charge_more);
				    self.model_ObjectStorage().objectStorageCartInfo.push(new ko.validatedObservable(vo))
				}
				changeDateFormat();
			});
			/************************************ 对象存储 批量申请  ************************************/
		    
		    /* this.isAdd_ObjectStorageMore = ko.observable(false);
		    this.isAdd_ObjectStorageSingle = ko.observable(false);
		    
		    var objStorageServiceUuid;
		    var objStorageChargeType;
		    this.objStorageCharge=ko.observable("");
		    
		    this.add_ObjectStorage = function(obj){
		    	self.isAdd_ObjectStorageSingle(true);
		    	objStorageServiceUuid=obj.serviceUuid;
		    	csc.rest.get("api/v5.0.0/service/getServiceInfo/"+obj.serviceUuid, function(data){
		    		console.log(data);
		    		self.isAdd_ObjectStorageSingle(true);
		    		if(data.charge==1){
		    			self.objStorageCharge("false");
			    	}else{
			    		self.objStorageCharge("true");
			    		objStorageChargeType = setArrayCharge(data.chargeType);
			    		console.log(objStorageChargeType);
			    	}
		    		csc.rest.get("api/v5.0.0/cart/getVdcList/"+obj.serviceUuid, function(result){
		    			self.vdcList(result);
				        self.num_ObjectStorage(0);
				        self.num_ObjectStorage(1);
			        });
		    	});
		    }
		    
			   function OBJECT_STORAGE_baseInfo(){
				   this.applySize = ko.observable();
			   }
			    
			    this.formatOrders_OBJECT_STORAGE = function(){
			    	self.orders().orderItems([]);
			    	self.orders().resourceType("OBJECT_STORAGE");
			        self.model_ObjectStorage().objectStorageCartInfo().forEach(function (e){
			    	   var item =new itmes();
			           item.resourceType("OBJECT_STORAGE");
			    	   item.desc(e.remark());
			    	   item.vdcUuid(e.vdcUuid);
			    	   item.azUuid(e.azUuid());
			    	   item.instanceName(e.name());
			    	   item.serviceUuid(e.serviceUuid());
			    	   item.isBill(e.charge());
			    	   item.expireType(e.applyType());
			    	   var expireValue="";
			    	   if(e.applyType() == "2"){
			    		   expireValue = e.applyNum();
			    	   }else if(e.applyType() == "3"){
			    		   expireValue = e.applyTime();
			    	   }
			    	   item.expireValue(expireValue);
			    	   item.billCycle(e.billRuleUuid());
			    	   item.fee(e.price());
			    	   var meta=new metaData();
			    	   var baseInfo =new OBJECT_STORAGE_baseInfo();
			    	   baseInfo.applySize(e.size());
			    	   meta.resBaseInfo(baseInfo);
			    	   item.metaData(ko.toJSON(meta));
			    	   self.orders().orderItems.push(item);
			       });
			    }
		    
		    this.num_ObjectStorage = ko.observable().extend({max:20});
		    
		    this.model_ObjectStorage = ko.validatedObservable({
		    	objectStorageCartInfo: ko.observableArray([])
		    });
		    
		    this.changeList_ObjectStorage = function(){
		    	self.isAdd_ObjectStorageSingle(false);
		    	self.isAdd_ObjectStorageMore(true);
		    	self.num_ObjectStorage(0);
		    	self.num_ObjectStorage(1);	    	
		    }
		    
		    this.changeSingle_ObjectStorage = function(){
		    	self.isAdd_ObjectStorageSingle(true);
		    	self.isAdd_ObjectStorageMore(false);
		    	self.num_ObjectStorage(0);
		    	self.num_ObjectStorage(1);	    	
		    }
		    
		    this.num_ObjectStorage.subscribe(function(){
		    	if(!self.num_ObjectStorage.isValid()){
		    		return;
		    	}
		    	self.model_ObjectStorage().objectStorageCartInfo([]);
		    	var num = self.num_ObjectStorage();
		    	for(var i=0; i<num; i++){
		    		self.model_ObjectStorage().objectStorageCartInfo.push({
		    			name: ko.observable("").extend({required:true}),
		    			serviceUuid:ko.observable(objStorageServiceUuid),
						vdcUuid: ko.observable(""),
						azUuid: ko.observable(""),
						size: ko.observable(""),
						billRuleUuid: ko.observable(""),
						applyType: ko.observable("1"),
						applyNum: ko.observable(""),
						applyTime: ko.observable(""),
						remark:ko.observable(""),
						azList:ko.observableArray([]),
						charge:ko.observable(self.objStorageCharge()),
						billRuleArray:ko.observableArray(objStorageChargeType),
						price:ko.observable(""),
						unitPrice:ko.observable("")
		    		})
		    	}	    
		    	changeDateFormat();
		    });
		    this.table_ObjectStorage = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/OBJSTORAGE',perPage:6}); */
		  //################## 对象存储 end ##################
		  
//################################################# 公网IP start ##################################################

            /************************************ 公网IP  vo定义 ************************************/
            function PublicNetworkVO(){
	    			this.name = ko.observable("").extend({required:true,cscNameRule:true});
	    			this.serviceUuid =ko.observable();
	    			this.vdcUuid = ko.observable().extend({required:true});
	    			this.azUuid = ko.observable().extend({required:true});
	    			this.vpcUuid= ko.observable().extend({required:true});
	    			this.netWorkId = ko.observable().extend({required:true});
	    			this.remark = ko.observable("");
	    			this.billRuleUuid = ko.observable();
	    			this.applyType = ko.observable("1");
	    			this.applyNum = ko.observable("");
	    			this.applyTime = ko.observable("");
	    			this.azList = ko.observableArray([]);
	    			this.vdcList = ko.observableArray([]);
	    			this.vpcList = ko.observableArray([]);
	    			this.networkList = ko.observableArray([]);
	    			this.charge = ko.observable();
	    			this.billRuleArray = ko.observableArray([]);
	    			this.price = ko.observable("");
	    			this.unitPrice = ko.observable("");
	    			
	    			ko.computed(function(){
			            var serviceUuid=this.serviceUuid();
			            var cycle=this.billRuleUuid();
		 	    		var cpu=this.cpu!=null?parseInt(this.cpu()||0):0;
		 	    		var memory=this.memory!=null?parseInt(this.memory()||0):0;
		 	    		var storage=this.storage!=null?parseInt(this.storage()||0):0;
		 	    		var size=this.size!=null?parseInt(this.size()||0):0;
		 	    		var type=this.billRuleUuid();
		 	    		if(typeof(type)=="undefined" ){
		 	    			this.price("");
			   	    			return;
			            }
			            var _self = this;
			 	    	csc.rest.get("api/v5.0.0/billing/rules/calculate?serviceUuid="+serviceUuid+"&cycle="+cycle, function(result){
			 	    		var price = 0;
			 	    		result.ruleList.forEach(function(e){
			 	    			if(e.attrType=='CPU'){
			 	    				price += cpu * e.unitPrice;
			 	    			}else if(e.attrType=='MEMORY'){
			 	    				price += memory * e.unitPrice;
			 	    			}else if(e.attrType=='STORAGE'){
			 	    				price += storage * e.unitPrice;
			 	    			}else if(e.attrType=='DISK'){
			 	    				price += size * e.unitPrice;
			 	    			}else if(e.attrType=='LOAD_BALANCING'){
			 	    				price +=e.unitPrice;
			 	    			}else if(e.attrType=='SECRET_KEY'){
			 	    				price +=e.unitPrice;
			 	    			}
			 	    		});
			 	    		if(type=="DAY"){
			 	    			price+="元/天";
			 	    		}else if(type=="MONTH"){
			 	    			price+="元/月";
			 	    		}else if(type=="QUARTER"){
			 	    			price+="元/季度";
			 	    		}else{
			 	    			price+="元/年";
			 	    		}
			 	    		_self.price(price);
			 	    	});	
					}, this).extend({ deferred: true });
	    			
					var item = this;
		            this.charge.subscribe(function(value){
		            	if(value=='true'){
		            		item.billRuleUuid.extend({required: {params: true, onlyIf:function(){return true}}})
		            	}else{
		            		item.billRuleUuid.extend({required: {params: false, onlyIf:function(){return true}}})
		            	}
		            });
		    }
		    /************************************ 公网IP  vo定义 ************************************/
		    
		    /************************************ 公网IP  服务列表  ************************************/
		    this.table_PublicNetwork = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/IP',perPage:6});
		    /************************************ 公网IP  服务列表  ************************************/
		    
		    /************************************ 公网IP 单个申请  ************************************/
		    this.isAdd_PublicNetworkSingle = ko.observable(false);
		    this.add_PublicNetwork = function(obj){
		        var serviceUuid = obj.serviceUuid;
	            var uri="serviceUuid="+serviceUuid;
	            csc.rest.get("api/v5.0.0/cart/getCartSelectList?"+uri, function(result){
	            	  self.model_PublicNetwork().publicNetworkCartInfo([]);
  		 	    	  var vo = new PublicNetworkVO();
	  		 	      vo.vdcList(result.vdcList);
	  		 	      vo.billRuleArray(formatCharge(result.chargeList));
	  		 	      vo.serviceUuid(serviceUuid);
	  		 	      vo.charge(obj.isFee=="否"?"false":"true");
	  		 	      self.model_PublicNetwork().publicNetworkCartInfo.push(new ko.validatedObservable(vo));
                      self.isAdd_PublicNetworkSingle(true);
	            });
		    }
		    /************************************ 公网IP 单个申请  ************************************/
		    
		    /************************************ 公网IP 批量申请  ************************************/
		    this.isAdd_PublicNetworkMore = ko.observable(false);
		    this.changeList_PublicNetwork = function(data){
		        vdcList_more = data.vdcList();
		    	billRuleList_more = data.billRuleArray();
		    	serviceUuid_more = data.serviceUuid();
		    	charge_more = data.charge();
		    	self.charge_more_view(data.charge());
		    	self.model_PublicNetwork().publicNetworkCartInfo([]);
		    	self.num_PublicNetwork("");
		    	self.isAdd_PublicNetworkSingle(false);
		    	self.isAdd_PublicNetworkMore(true);
		    }
		    
			this.num_PublicNetwork = ko.observable().extend({max:20});
		    this.model_PublicNetwork = ko.validatedObservable({
		    	publicNetworkCartInfo: ko.observableArray([])
		    });
				
			this.num_PublicNetwork.subscribe(function(){
				if(!self.model_PublicNetwork.isValid()){return;}
				self.model_PublicNetwork().publicNetworkCartInfo([]);
				var num = self.num_PublicNetwork();
				for(var i=0; i<num; i++){
					var vo=new PublicNetworkVO();
					vo.vdcList(vdcList_more);
		    		vo.billRuleArray(billRuleList_more);
		    		vo.serviceUuid(serviceUuid_more);
		    		vo.charge(charge_more);
				    self.model_PublicNetwork().publicNetworkCartInfo.push(new ko.validatedObservable(vo))
				}
				changeDateFormat();
			});
			/************************************ 公网IP 批量申请  ************************************/
			
		   /* function PUBLICIP_baseInfo(){
			   this.vpcUuid = ko.observable();
			   this.networkUuid = ko.observable();
		   }
		    
		    this.formatOrders_PUBLICIP = function(){
		    	self.orders().orderItems([]);
		    	self.orders().resourceType("PUBLICIP");
		        self.model_PublicNetwork().publicNetworkCartInfo().forEach(function (e){
		    	   var item =new itmes();
		    	   item.resourceType("PUBLICIP");
		    	   item.desc(e.remark());
		    	   item.azUuid(e.azUuid());
		    	   item.vdcUuid(e.vdcUuid());
		    	   item.instanceName(e.name());
		    	   item.serviceUuid(e.serviceUuid());
		    	   item.isBill(e.charge());
		    	   item.expireType(e.applyType());
		    	   var expireValue="";
		    	   if(e.applyType() == "2"){
		    		   expireValue = e.applyNum();
		    	   }else if(e.applyType() == "3"){
		    		   expireValue = e.applyTime();
		    	   }
		    	   item.expireValue(expireValue);
		    	   item.billCycle(e.billRuleUuid());
		    	   item.fee(e.price());
		    	   
		    	   var meta=new metaData();
		    	   var baseInfo =new PUBLICIP_baseInfo();
		    	   
		    	   baseInfo.vpcUuid(e.vpcUuid());
		    	   baseInfo.networkUuid(e.netWorkId());
		    	   meta.resBaseInfo(baseInfo);
		    	   item.metaData(ko.toJSON(meta));
		    	   self.orders().orderItems.push(item);
		       });
		    }	  
		  
		    this.isAdd_PublicNetworkSingle = ko.observable(false);
		    this.isAdd_PublicNetworkMore = ko.observable(false);
		    
		    var pubNetworkServiceUuid;
		    var pubNetworkChargeType;
		    this.pubNetworkCharge=ko.observable("")
		    this.add_PublicNetwork = function(obj){
		    	pubNetworkServiceUuid=obj.serviceUuid;
		    	csc.rest.get("api/v5.0.0/service/getServiceInfo/"+obj.serviceUuid, function(data){
		    		console.log(data);
		    		self.isAdd_PublicNetworkSingle(true);
		    		if(data.charge==1){
		    			self.pubNetworkCharge("false");
			    	}else{
			    		self.pubNetworkCharge("true");
			    		pubNetworkChargeType = setArrayCharge(data.chargeType);
			    		console.log(pubNetworkChargeType);
			    	}
		    		csc.rest.get("api/v5.0.0/cart/getVdcList/"+obj.serviceUuid, function(result){
		    			self.vdcList(result);
		    	    	self.num_PublicNetwork(0);
		    	    	self.num_PublicNetwork(1);
			        });
		    	});
		    }
		    this.num_PublicNetwork = ko.observable().extend({max:20});
		    
		    this.model_PublicNetwork = ko.validatedObservable({
		    	publicNetworkCartInfo: ko.observableArray([])
		    });
		    
		    this.changeList_PublicNetwork = function(){
		    	self.isAdd_PublicNetworkSingle(false);
		    	self.isAdd_PublicNetworkMore(true);
		    	self.num_PublicNetwork(0);
		    	self.num_PublicNetwork(1);	    	
		    }
		    
		    this.changeSingle_PublicNetwork = function(){
		    	self.isAdd_PublicNetworkSingle(true);
		    	self.isAdd_PublicNetworkMore(false);
		    	self.num_PublicNetwork(0);
		    	self.num_PublicNetwork(1);	    	
		    }
		    
		    this.num_PublicNetwork.subscribe(function(){
		    	if(!self.num_PublicNetwork.isValid()){
		    		return;
		    	}
		    	self.model_PublicNetwork().publicNetworkCartInfo([]);
		    	var num = self.num_PublicNetwork();
		    	for(var i=0; i<num; i++){
		    		self.model_PublicNetwork().publicNetworkCartInfo.push({
		    			name: ko.observable("").extend({required:true}),
		    			serviceUuid:ko.observable(pubNetworkServiceUuid),
						vdcUuid: ko.observable(""),
						azUuid:ko.observable(""),
						vpcUuid: ko.observable(""),
						netWorkId: ko.observable(""),
						remark:ko.observable(""),
						billRuleUuid: ko.observable(""),
						applyType: ko.observable("1"),
						applyNum: ko.observable(""),
						applyTime: ko.observable(""),
						azList:ko.observableArray([]),
						vpcList:ko.observableArray([]),
						networkList:ko.observableArray([]),
						charge:ko.observable(self.pubNetworkCharge()),
						billRuleArray:ko.observableArray(pubNetworkChargeType),
						price:ko.observable(""),
						unitPrice:ko.observable("")
		    		})
		    	}	    
		    	changeDateFormat();	
		    });
		    this.table_PublicNetwork = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/IP',perPage:6}); */
		  //################## 公网IP end ##################
		  
		    this.osTypeArray = ko.observableArray([]);
		    
		    function setArrayCharge(value){
		    	var attr = getArrayByString(value);
		    	var arrayCharge = [];
		    	for(var i=0;i<attr.length;i++){
		    		if(attr[i]=="DAY"){
		    			arrayCharge.push({name:"按天",value:"DAY"});
		    		}else if(attr[i]=="MONTH"){
		    			arrayCharge.push({name:"按月",value:"MONTH"});
		    		}else if(attr[i]=="QUARTER"){
		    			arrayCharge.push({name:"按季度",value:"QUARTER"});
		    		}else{
		    			arrayCharge.push({name:"按年",value:"YEAR"});
		    		}
		    	}
		    	return arrayCharge;
		    }
		    
		  //################## VDC start ##################
		    this.isAdd_VDC = ko.observable(false);
		    this.add_VDC = function(obj){
		    	initVdc();
		    	var serviceUuid = obj.serviceUuid;
		    	self.model_VDC().serviceUuid(serviceUuid);
		        csc.rest.get("api/v5.0.0/service/getServiceInfo/"+obj.serviceUuid, function(data){
			    	self.isAdd_VDC(true);
			    	var osType = data.serviceVDC.osType;
			    	var isLimit = data.serviceVDC.isLimit;
			    	self.osTypeArray(getArrayByString(osType));
			    	self.model_VDC().billRuleArray(setArrayCharge(data.chargeType));
			    	if(data.charge==1){
			    		self.model_VDC().charge("false");
			    	}else{
			    		self.model_VDC().charge("true");
			    		getArrayByString(data.chargeType);
			    		//self.model_VDC().vdcCartInfo().billRuleArray(getArrayByString(data.chargeType));
			    	}
			    	if(isLimit=="no"){
			    		self.model_VDC().quota("-1");
			    	}else{
			    		self.model_VDC().quota("1");
			 	    	self.model_VDC().cpu(data.serviceVDC.maxCpu);
			 	    	self.model_VDC().memory(data.serviceVDC.maxMemory);
			 	    	self.model_VDC().storage(data.serviceVDC.maxStorager);
			 	    	self.model_VDC().vpcNum(data.serviceVDC.maxVPC);
			 	    	self.model_VDC().vm(data.serviceVDC.maxVmNum);
			 	    	self.model_VDC().disk(data.serviceVDC.maxDiskNum);
			 	    	self.model_VDC().publicIp(data.serviceVDC.maxIpNum);
			 	    	self.model_VDC().router(data.serviceVDC.maxRouterNum);
			 	    	self.model_VDC().fireWall(data.serviceVDC.maxFireWallNum);
			 	    	self.model_VDC().secretKey(data.serviceVDC.maxSSHNum);
			 	    	self.model_VDC().objectStorage(data.serviceVDC.maxObjStorageNum);
			 	    	self.model_VDC().loadBalancer(data.serviceVDC.maxLoadBalanceNum);
			    	}
		        });	    	
		    }
		    
		    this.sizeChange = function(data,event){
		    	var type = data.billRuleUuid();
		    	if(typeof(type)=="undefined"){
		    		return;
		    	}
		    	var price = "费用:"+data.unitPrice()*data.size();
	    		if(type=="DAY"){
	    			price+="元/天";
	    		}else if(type=="MONTH"){
	    			price+="元/月";
	    		}else if(type=="QUARTER"){
	    			price+="元/季度";
	    		}else{
	    			price+="元/年";
	    		}
	    		data.price(price);
		    }
		    
		    this.chargeTypeChange= function(arg,data,event){//vdc使用
		    	var serviceType = self.model_VDC();
		    	var type = serviceType.billRuleUuid();
		    	var price;
	    		if(typeof(type)=="undefined"){
	    			serviceType.price("");
	    			return;
	    		}
		    	csc.rest.get("api/v5.0.0/billing/rules/calculate?serviceUuid="+serviceType.serviceUuid()+"&cycle="+serviceType.billRuleUuid(), function(result){
		    		
		    		price = "费用:"+result.ruleList[0].unitPrice;
		    		if(type=="DAY"){
		    			price+="元/天";
		    		}else if(type=="MONTH"){
		    			price+="元/月";
		    		}else if(type=="QUARTER"){
		    			price+="元/季度";
		    		}else{
		    			price+="元/年";
		    		}
		    		serviceType.price(price);
		    	});
		    }
		    
		    this.chargeChange = function(arg,data,event){//除了VDC其他申请用这个方法
		    	csc.rest.get("api/v5.0.0/billing/rules/calculate?serviceUuid="+data.serviceUuid()+"&cycle="+data.billRuleUuid(), function(result){
		    		var type = data.billRuleUuid();
		    		var price;
		    		if(typeof(type)=="undefined"){
		    			data.price("");
		    			return;
		    		}
		    		if(arg=="size"){
		    			var num = data.size();
		    			data.unitPrice(result.ruleList[0].unitPrice);
		    			price = num*(result.ruleList[0].unitPrice);
		    			price = "费用:"+price;
		    		}else{
		    			price= "费用:"+result.ruleList[0].unitPrice;
		    		}
		    		 
		    		if(type=="DAY"){
		    			price+="元/天";
		    		}else if(type=="MONTH"){
		    			price+="元/月";
		    		}else if(type=="QUARTER"){
		    			price+="元/季度";
		    		}else{
		    			price+="元/年";
		    		}
		    		data.price(price);
		    	});	    	
		    }
		  	
		  	function getArrayByString(type){
		  		var a = type.split(',');
		  		return a;
		  	}
		  	
		  	this.model_VDC = ko.validatedObservable();
		  	function initVdc(){
		  		self.model_VDC = ko.validatedObservable({
			    		serviceUuid:ko.observable(""),
						name: ko.observable("").extend({required:true}),
						charge:ko.observable(""),
						osTypes : ko.observable(""),
						osTypesSelelct:ko.observableArray([]).extend({required:true}),
						quota:ko.observable("-1"),
						cpu: ko.observable(""),
						memory:ko.observable(""),
						storage: ko.observable(""),
						vm: ko.observable(""),
						disk: ko.observable(""),
						objectStorage: ko.observable(""),
						vpcNum:ko.observable(""),
						router: ko.observable(""),
						fireWall: ko.observable(""),
						publicIp: ko.observable(""),
						loadBalancer: ko.observable(""),
						secretKey: ko.observable(""),
						remark:ko.observable(""),
						billRuleUuid: ko.observable(),
						applyType: ko.observable("1"),
						applyNum: ko.observable(""),
						applyTime: ko.observable(""),
						price:ko.observable(""),
						billRuleArray:ko.observableArray([])
			    });
		  		
	            self.model_VDC().charge.subscribe(function(value){
	            	if(value=='true'){
	            		self.model_VDC().billRuleUuid.extend({required: {params: true, onlyIf:function(){return true}}})
	            	}else{
	            		self.model_VDC().billRuleUuid.extend({required: {params: false, onlyIf:function(){return true}}})
	            	}
	            });
		  	}
		  	

		    
		    this.table_VDC = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/VDC',perPage:6});
		  //################## VDC end ##################
		  
		  
		  
		  
		  //################## 云主机start ##################
		  
		  
		  /* function getUuid() {
			var s = [];
			var hexDigits = "0123456789abcdef";
			for (var i = 0; i < 36; i++) {
			s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
			}
			s[14] = "4"; // bits 12-15 of the time_hi_and_version field to 0010
			s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01
			s[8] = s[13] = s[18] = s[23] = "-";
			
			var uuid = s.join("");
			return uuid;
		  }
		  
		   this.orders=ko.validatedObservable({
			   resourceType : ko.observable(),
			   orderItems : ko.observableArray([])
		   })
		  
		   function itmes(){
			   this.instanceName = ko.observable();
			   this.serviceUuid = ko.observable();
			   this.isBill = ko.observable();
			   this.expireType =  ko.observable();
			   this.expireValue = ko.observable();
			   this.billCycle = ko.observable();
			   this.fee = ko.observable();
			   this.metaData = ko.observable();
			   this.desc = ko.observable();
			   this.azUuid = ko.observable();
			   this.resourceType = ko.observable();
			   this.relateUuid = ko.observable();
			   this.vdcUuid = ko.observable();
		   }
		   
		   function metaData(){
			   this.resBaseInfo = ko.observable();
		   }
		   
		   function VM_baseInfo (){
			   this.azUuid = ko.observable();
			   this.osType = ko.observable();
			   this.osVersion = ko.observable();
			   this.expiryTime = ko.observable();
			   this.imageUuid = ko.observable();
			   this.memory = ko.observable();
			   this.name = ko.observable();
			   this.storage = ko.observable();
			   this.vcpu = ko.observable();
			   this.vdcUuid = ko.observable();
			   this.vpcUuid = ko.observable();
			   this.partitionList = ko.observableArray([]);
			   this.networkList = ko.observableArray([]);
			   
			   this.ip = ko.observable();
			   this.account = ko.observable();
			   this.password = ko.observable();
			   this.repeatPassword = ko.observable();
			   this.sshIsMount = ko.observable();
			   this.sshUuid = ko.observable();
			   this.busSysUuid = ko.observable();
		   }
		   	   
		   function VM_network (){
			   this.networkId = ko.observable();
		   }
		   function VM_partition (){
			   this.name = ko.observable();
			   this.size = ko.observable();
		   }
		   
		  
		   this.formatOrders_VM = function(){
			   self.orders().orderItems([]);
			   
	           self.orders().resourceType("VM");
		       self.model_VM().vmCartInfo().forEach(function (e){
		    	   var relateUuid=getUuid();
		    	   var item =new itmes();
		    	   item.desc(e.remark());
		    	   item.azUuid(e.azUuid());
		    	   item.instanceName(e.vmName());
		    	   item.serviceUuid(e.serviceUuid());
		    	   item.resourceType("VM");
		    	   item.relateUuid(relateUuid);
		    	   item.isBill(e.charge());
		    	   item.expireType(e.applyType());
		    	   var expireValue="";
		    	   if(e.applyType() == "2"){
		    		   expireValue = e.applyNum();
		    	   }else if(e.applyType() == "3"){
		    		   expireValue = e.applyTime();
		    	   }
		    	   item.expireValue(expireValue);
		    	   item.billCycle(e.billRuleUuid());
		    	   item.fee(e.price());
		    	   
		    	   
		    	   var meta=new metaData();
		    	   var baseInfo =new VM_baseInfo();
		    	   
		    	   baseInfo.azUuid(e.azUuid());
		    	   baseInfo.osType(e.osType());
		    	   baseInfo.osVersion(e.osVersion());
		    	   baseInfo.memory(e.memory);
		    	   baseInfo.name(e.vmName);
		    	   baseInfo.storage(e.storage);
		    	   baseInfo.vcpu(e.cpu);
		    	   baseInfo.vdcUuid(e.vdcUuid);
		    	   baseInfo.vpcUuid(e.vpcUuid);
		    	   
		    	   baseInfo.ip(e.ip);
		    	   baseInfo.account(e.account);
		    	   baseInfo.password(e.password);
		    	   baseInfo.repeatPassword(e.repeatPassword);
		    	   baseInfo.sshIsMount(e.sshIsMount);
		    	   baseInfo.sshUuid(e.sshUuid);
		    	   baseInfo.busSysUuid(e.projectUuid);
		    	   
		    	   e.partitions().forEach(function(p){
		    		   var p=new VM_partition()
		    		   p.name(p.name());
		    		   p.size(p.size());
		    		   baseInfo.partitionList.push(p)
		    	   });
		    	   var n = new VM_network
		    	   n.networkId(e.vpcNetworkUuid());
		    	   baseInfo.networkList.push(n);
		    	   
		    	   meta.resBaseInfo(baseInfo);
		    	   //云硬盘服务
		    	   e.mountDisks().forEach(function(m){
		    		   var i =new itmes();
			    	   i.instanceName(m.name());
			    	   i.serviceUuid(m.serviceUuid());
			    	   i.resourceType("DISK");
			    	   i.relateUuid(relateUuid);
			    	   i.isBill(m.charge());
			    	   i.expireType(e.applyType());
			    	   var ev="";
			    	   if(e.applyType() == "2"){
			    		   ev = e.applyNum();
			    	   }else if(e.applyType() == "3"){
			    		   ev = e.applyTime();
			    	   }
			    	   i.expireValue(ev);
			    	   i.billCycle(m.billRuleUuid());
			    	   i.fee(m.price());
			    	   
			    	   var md=new metaData();
			    	   var bi =new DISK_baseInfo();
			    	   
			    	   bi.volumeSize(m.size());
			    	   md.resBaseInfo(bi);
			    	   i.metaData(ko.toJSON(md));
			    	   self.orders().orderItems.push(i);
		    	   }); 
		    	   item.metaData(ko.toJSON(meta));
		    	   self.orders().orderItems.push(item);
		       });
		   } */
		   
		  
//################################################# 云主机 start ################################################## 
            
            /************************************ 云主机 vo定义  ************************************/
            this.model_VM = ko.validatedObservable({
		    	vmCartInfo: ko.observableArray([])
		    });
		    function Info(){
	            this.vmName =  ko.observable("").extend({required:true,cscNameRule:true});
	            this.computerName = ko.observable("");
	            this.projectUuid = ko.observable("");
	            this.vdcUuid = ko.observable("").extend({required:true});
	            this.vdcText = ko.pureComputed(function(){
	            	var item = _.findWhere(this.vdcList(), {uuid: this.vdcUuid()});
	            	if(item!=null){
	            		return item.name;
	            	}else{
	            		return "";
	            	}
	            	
	            }, this);
	            this.applyTimeText = ko.pureComputed(function(){
	            	if(this.applyType()=="1"){
	            		return "永久";
	            	}else if(this.applyType()=="2"){
	            		return this.applyNum()+"个月";
	            	}else{
	            		return this.applyTime();
	            	}
	            }, this);
	            this.billRuleUuid = ko.observable();
	            this.applyTime = ko.observable("");
	            this.networkType = ko.observable("");
	            
	            this.ipPoolUuid = ko.pureComputed(function(){
	            	var item = _.findWhere(this.vpcList(), {uuid: this.vpcOrIpPoolList()});
	            	if(item!=null){
	            		return item.uuid;//item.type!="vpc" ? item.value : "";
	            	}else{
	            		return "";
	            	}
	            	
	            }, this);
	            this.vpcUuid = ko.pureComputed(function(){
	            	var item = _.findWhere(this.vpcList(), {uuid: this.vpcOrIpPoolList()});
	            	if(item!=null){
	            		return item.uuid;//item.type=="vpc" ? item.value : "";
	            	}else{
	            		return "";
	            	}
	            }, this);
				
	            this.vpcOrIpPoolList = ko.observable("");
	            
	            this.vpcNetworkUuid = ko.observable("");
	            this.ip = ko.observable("");
	            this.account = ko.observable("");
	            this.password = ko.observable("");
	            this.osType = ko.observable("");
	            this.osVersion = ko.observable();
	            this.cpu = ko.observable();
	            this.memory = ko.observable();
	            this.storage = ko.observable();
	            this.applyType = ko.observable("");
	            this.applyNum = ko.observable("");
	            this.azUuid = ko.observable("");
	            this.userName = ko.observable("");
	            this.password = ko.observable("");
	            this.repeatPassword = ko.observable("");
	            this.sshIsMount = ko.observable("NO");
	            this.sshUuid = ko.observable("");
	            this.serviceUuid = ko.observable("");
	            this.remark =ko.observable();
	            this.price =ko.observable();
	            this.charge =ko.observable();
	                            
	            //分区
	            this.partitions = ko.observableArray([]);
	            //硬盘
	            this.mountDisks = ko.observableArray([]);
	            
	            this.softwares = ko.observableArray([]);
	            
	            this.id = ko.observable();
	            this.vdcUuid =ko.observable("");
	            this.azUuid=ko.observable(""),
	            this.remark=ko.observable(""),
	            this.account=ko.observable("");
	            this.password=ko.observable("");
	            this.repeatPassword=ko.observable("");
	            this.sshIsMount=ko.observable("");
				
	            this.vdcList=ko.observableArray([]);
	            this.azList=ko.observableArray([]);
	            this.osTypeList=ko.observableArray([]);
	            this.osVersionList=ko.observableArray([]);
	            this.cpuList=ko.observableArray([]);
	            this.memoryList=ko.observableArray([]);
	            this.vpcList=ko.observableArray([]);
	            this.networkList=ko.observableArray([]);
	            this.bussyList=ko.observableArray([]);
	            this.sshList=ko.observableArray([]);
	            this.billRuleList=ko.observableArray([]);
	            this.ipList = ko.observableArray([]);
	            
	            ko.computed(function(){
		            var serviceUuid=this.serviceUuid();
		            var cycle=this.billRuleUuid();
	 	    		var cpu=this.cpu!=null?parseInt(this.cpu()||0):0;
	 	    		var memory=this.memory!=null?parseInt(this.memory()||0):0;
	 	    		var storage=this.storage!=null?parseInt(this.storage()||0):0;
	 	    		var size=this.size!=null?parseInt(this.size()||0):0;
	 	    		if(typeof(cycle)=="undefined" ){
	 	    			this.price("");
		   	    			return;
		            }
		            var _self = this;
		 	    	csc.rest.get("api/v5.0.0/billing/rules/calculate?serviceUuid="+serviceUuid+"&cycle="+cycle, function(result){
		 	    		var price = 0;
		 	    		result.ruleList.forEach(function(e){
		 	    			if(e.attrType=='CPU'){
		 	    				price += cpu * e.unitPrice;
		 	    			}else if(e.attrType=='MEMORY'){
		 	    				price += memory * e.unitPrice;
		 	    			}else if(e.attrType=='STORAGE'){
		 	    				price += storage * e.unitPrice;
		 	    			}else if(e.attrType=='DISK'){
		 	    				price += size * e.unitPrice;
		 	    			}else if(e.attrType=='LOAD_BALANCING'){
		 	    				price +=e.unitPrice;
		 	    			}else if(e.attrType=='SECRET_KEY'){
		 	    				price +=e.unitPrice;
		 	    			}
		 	    		});
		 	    		if(cycle=="DAY"){
		 	    			price+="元/天";
		 	    		}else if(cycle=="MONTH"){
		 	    			price+="元/月";
		 	    		}else if(cycle=="QUARTER"){
		 	    			price+="元/季度";
		 	    		}else{
		 	    			price+="元/年";
		 	    		}
		 	    		_self.price(price);
		 	    	});	
				}, this).extend({ deferred: true });
	            
	   		}
		   
		    function MountDiskVO(){
		    	this.name = ko.observable();
			  	this.size = ko.observable();
			  	this.type = ko.observable();
			  	this.serviceUuid = ko.observable();
			  	this.serviceName = ko.observable();
			  	this.billRuleUuid = ko.observable();
			  	this.applyType = ko.observable();
			  	this.applyNum = ko.observable();
			  	this.applyTime = ko.observable();
			  	this.applyText = ko.observable();
	            this.billRuleList=ko.observableArray([]);
	            this.price = ko.observable();
	            this.charge = ko.observable();
		    }
		    
		    function SoftwareVO(){
                this.softwareUuid = ko.observable();
		    	this.scriptUuid = ko.observable();
		    	this.softwareName = ko.observable();
		    	this.softwareType = ko.observable();
		    	this.softwareSorts = ko.observable();
		    	this.softwareVersion = ko.observable();
		    	
		    	this.softwareParams=ko.observableArray([]);
		    }
		    
		    function partitionVO(){
		    	this.name = ko.observable();
			  	this.size = ko.observable();
		    }
		    
		    function SoftwareAttrVO(){
		    	this.softwareUuid = ko.observable();
		    	this.scriptUuid = ko.observable();
		    	this.paramsUuid = ko.observable();
		    	this.paramsKey = ko.observable();
		    	this.paramsValue = ko.observable();
		    	this.paramsName = ko.observable();
		    	this.defaultValue = ko.observable();
		    }
            /************************************ 云主机 vo定义  ************************************/
            
            /************************************ 云主机 服务列表  ************************************/
            this.table_VM = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/VM',perPage:6});
            /************************************ 云主机 服务列表  ************************************/

            /************************************ 云主机 单个申请  ************************************/
		    this.isAdd_VMSingle = ko.observable(false);
		    this.isAdd_VM = ko.observable(false);
		    var editObject;
		    this.add_VMSingle = function(obj){
		    	    var serviceUuid = obj.serviceUuid;
		            var uri="serviceUuid="+serviceUuid;
		            csc.rest.get("api/v5.0.0/cart/getCartSelectList?"+uri, function(result){
		                      self.model_VM().vmCartInfo([]);
		  		 	    	  var info = new Info();
		  		 	    	  info.vdcList(result.vdcList);
		                      info.osTypeList(result.osTypeList);
		                      info.cpuList(result.cpuList);
		                      info.memoryList(result.memoryList);
		                      info.billRuleList(formatCharge(result.chargeList));
		                      info.serviceUuid(serviceUuid);
		                      info.charge(obj.isFee=="否"?"false":"true");
		                      self.model_VM().vmCartInfo.push(info);
		  		 		      self.isAdd_VMSingle(true);
		            });
		        }
		    /************************************ 云主机 单个申请  ************************************/	
		    
		    /************************************ 云主机 批量申请  ************************************/
		    this.isAdd_VMMore = ko.observable(false);
		    this.changeList_VM = function(){
		    	vdcList_more = self.model_VM().vmCartInfo()[0].vdcList();
		    	billRuleList_more = self.model_VM().vmCartInfo()[0].billRuleList();
		    	osTypeList_more = self.model_VM().vmCartInfo()[0].osTypeList();
		    	cpuList_more = self.model_VM().vmCartInfo()[0].cpuList();
		    	memoryList_more = self.model_VM().vmCartInfo()[0].memoryList();
		    	serviceUuid_more = self.model_VM().vmCartInfo()[0].serviceUuid();
		    	charge_more = self.model_VM().vmCartInfo()[0].charge();
		    	
		    	self.model_VM().vmCartInfo([]);
		    	self.isAdd_VMSingle(false);
		    	self.isAdd_VMMore(true);
		    	self.myStep(1);
		    }
		    this.num_VM = ko.observable().extend({max:20});
		    this.num_VM.subscribe(function(){
		    	if(!self.num_VM.isValid()){return;}
		    	self.model_VM().vmCartInfo([]);
		    	var num = self.num_VM();
		    	for(var i=0; i<num; i++){
		    		var vo = new Info();
		    		vo.vdcList(vdcList_more);
		    		vo.billRuleList(billRuleList_more);
		    		vo.osTypeList(osTypeList_more)
		    		vo.cpuList(cpuList_more);
		    		vo.memoryList(memoryList_more);
		    		vo.serviceUuid(serviceUuid_more);
		    		vo.charge(charge_more);
		    		self.model_VM().vmCartInfo.push(vo);
		    	}
		    	changeDateFormat();
		    }); 
		    /************************************ 云主机 批量申请  ************************************/
		    
		    /************************************ 云主机 挂载云硬盘  ************************************/ 
		    this.addVdisk_VM = function(data){
		    	var vo=new MountDiskVO();
		    	data.mountDisks.push(vo);
		    }
		    this.delVdisk_VM = function(obj,data,event){
		    	obj.mountDisks.remove(data);
		    }
		    //选择云硬盘服务
		    this.selectVdiskService = ko.observable(false);
		    this.table_Vdisk_VM = null;
		    this.selectVdiskService_VM = function(object){
		    	self.table_Vdisk_VM = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/DISK',perPage:6});
		    	self.selectVdiskService(true);
		    	editObject = object;
		    }
		    this.submitVdiskService = function(){
	        	editObject.serviceName(self.table_Vdisk_VM.chosenItems().serviceName);
	            editObject.serviceUuid(self.table_Vdisk_VM.chosenItems().serviceUuid);
	            editObject.charge( self.table_Vdisk_VM.chosenItems().isFee=="否"?"false":"true")
	            
	            var attr;
	            if(self.table_Vdisk_VM.chosenItems().feeType !=null && self.table_Vdisk_VM.chosenItems().feeType!=""){
	            	attr=self.table_Vdisk_VM.chosenItems().feeType.split(",")
	            }
	            editObject.billRuleList(formatCharge(attr));
	            self.selectVdiskService(false);
		    }
		    /************************************ 云主机 挂载云硬盘  ************************************/
		    
		    /************************************ 云主机 分区  ************************************/
		    this.addPartition_VM = function(data){
		    	var vo=new partitionVO();
		    	data.partitions.push(vo);
		    }
		    this.delPartition_VM = function(obj,data,event){
		        obj.partitions.remove(data);
			}
		    /************************************ 云主机 分区  ************************************/
		    
		    /************************************ 云主机 下拉级联  ************************************/
		    this.getAzForVdcChange = function(data){
		        csc.rest.get("api/v5.0.0/cart/getAzList/"+data.serviceUuid()+"/"+data.vdcUuid(), function(result){
		        	data.azList(result);
		        });
		        if(data.bussyList!=null){
		        	csc.rest.get("api/v5.0.0/bussys?vdcuuid="+data.vdcUuid(),function(result2){
			        	data.bussyList(result2.results);
			        }); 
	        	}
		    };
		    this.getVpcForAzChange = function(data){
		        csc.rest.get("api/v5.0.0/cart/getVpcList/"+data.vdcUuid()+"/"+data.azUuid(), function(result){
		        	data.vpcList(result);
		        });
		        if(data.sshList!=null){
		        	csc.rest.get("api/v5.0.0/sshKeys?getList=true&azUuid="+data.azUuid()+"&vcdUuid="+data.vdcUuid(),function(result){
		            	data.sshList(result);
		            });
		        }
		    }
		    this.getOsVersionForOsTypeChange = function(data){
		    	csc.rest.get("api/v5.0.0/cart/getOsVersionList/"+data.azUuid()+"/"+data.osType(), function(result){
		        	data.osVersionList(result);
		        });
		    }
		    this.getIpForNetWorkChange = function(data){
		    	if(data.vpcNetworkUuid()!=null){
		    		csc.rest.get("api/v5.0.0/vpcNetworks/" + data.vpcNetworkUuid() + "/availableIp", function(result) {
			    		data.ipList(result);
	                });
		    	}
		    	
		    } 
		    /************************************ 云主机 下拉级联  ************************************/
		    
		   
		    /************************************ 云主机 套餐价格  ************************************/
		    
		    function formatCharge(attr){
		    	var arrayCharge = [];
		    	if(attr !=null){
		    		for(var i=0;i<attr.length;i++){
			    		if(attr[i]=="DAY"){
			    			arrayCharge.push({name:"按天",value:"DAY"});
			    		}else if(attr[i]=="MONTH"){
			    			arrayCharge.push({name:"按月",value:"MONTH"});
			    		}else if(attr[i]=="QUARTER"){
			    			arrayCharge.push({name:"按季度",value:"QUARTER"});
			    		}else{
			    			arrayCharge.push({name:"按年",value:"YEAR"});
			    		}
			    	}
		    	}
		    	return arrayCharge;
		    }
		    
		    /************************************ 云主机 查询  ************************************/
	      	this.searchParam = ko.observable({
	    	  	osType: "",
	    	  	cpu:"",
	    	  	memory:""
	      	})
	      	this.search = function(){
	        	self.table_VM.params(this.searchParam());
	      	}
	      	/************************************ 云主机 查询  ************************************/
	      	
	      	/************************************ 云主机 批量 上一下一步  ************************************/
	        this.myStep = ko.observable(1);         
	      	this.next = function(){
	        	this.myStep(this.myStep()+1)
	        }
	      	this.pre = function(){
	      		this.myStep(this.myStep()-1)
	      	}
	      	/************************************ 云主机 批量 上一下一步  ************************************/
	      	
	      	/************************************ 云主机  单个 显示隐藏  ************************************/
	      	this.step1 = ko.observable(false);
	        this.step2 = ko.observable(true);
	        this.step3 = ko.observable(true);
	        this.step4 = ko.observable(true);
	        this.step5 = ko.observable(true);
	        /************************************ 云主机 单个 显示隐藏  ************************************/
	
	        /************************************ 云主机 软件添加  ************************************/
	        this.selectSoftware = ko.observable(false);
		    this.table_Software_VM = null;
		    this.selectSoftware_VM = function(object){
		    	self.table_Software_VM = new DataTable([], {path: 'api/v5.0.0/soft/softwares?status=1',perPage:6});
		    	self.selectSoftware(true);
		    	editObject = object;
		    }
		    this.submitSoftwareService = function(){
		    	self.table_Software_VM.chosenItems().forEach(function(e){
		    		var vo=new SoftwareVO();
			    	vo.softwareUuid(e.uuid);
			    	vo.scriptUuid(e.scriptUuid);
			    	vo.softwareName(e.name);
			    	vo.softwareType(e.softTypeName);
			    	vo.softwareSorts(e.softType);
			    	vo.softwareVersion(e.version);
			    	
			    	
	                csc.rest.get("api/v5.0.0/script/defaultAttrs?scriptUuid="+e.scriptUuid, function(attrList) {
	                	var attrArray = attrList.results;
	                	console.log(attrArray);
	                	attrArray.forEach(function (f){
	                		var attrVo = new SoftwareAttrVO();
	                		attrVo.softwareUuid(e.softwareUuid);
	                		attrVo.scriptUuid(e.scriptUuid);
	                		attrVo.paramsUuid(f.uuid);
	                		attrVo.paramsKey(f.code);
	                		attrVo.defaultValue(f.value);
	                		attrVo.paramsName(f.name);
	                		vo.softwareParams.push(attrVo);
	                	})
	                });
	                
		    		editObject.softwares.push(vo);
		    		console.log(editObject.softwares());
		    		
		    	});
		    	
		    	
	            self.selectSoftware(false);
		    }
		    
		    this.delSoftwart_VM = function(obj,data,event){
		    	obj.softwares.remove(data);
		    }
	        /************************************ 云主机 软件添加  ************************************/
	        
	        /************************************ 云主机 软件静默安装属性  ************************************/
	        this.showSoftwareAttr = ko.observable(false);
	        this.disableAttr_VM = ko.observable();
	        
	        this.attrList_VM = ko.observableArray([]);
	        this.showAttr_VM = function(viewOrEdit,data,event){
	        	self.attrList_VM(data.softwareParams());
	        	self.disableAttr_VM(viewOrEdit);
	        	self.showSoftwareAttr(true);
	        	editObject = data;
	        }
	        
	        this.saveSoftwareAttr = function(){
	        	var item = this;
	        	console.log(editObject)
	        	editObject.softwareParams(self.attrList_VM());
	        	self.showSoftwareAttr(false);
	        	systemMsg.alert('保存成功');
	        }
	        /************************************ 云主机 软件静默安装属性  ************************************/
	        
//################################################# 云主机 end ##################################################
	    }
	    
	
		ko.applyBindings(new ViewModel, $('#page-content')[0]); 
		
		
	
	  });
  
</script>
    <!-- 负载均衡 单个 start -->
    <div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_LBSingle , backdrop: 'static'}">
        <div class='modal-dialog modal-lg'>
            <div class='modal-content' >
                <div class='modal-header'>
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                    <h3 class='modal-title'>负载均衡器服务</h3>
                </div>
                <div class='modal-body form-horizontal row' data-bind="foreach: model_LB().loadbalancerCartInfo">
                    <div class="form-inline clearfix" style="padding:0 15px 15px 0">
			          <a class="btn btn-default pull-right" data-bind="click:$root.changeList_LB">批量申请</a>
			        </div>
                
                     <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">负载均衡器名称<i style="color:red">*</i></label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" data-bind="value: name">
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">所属VDC<i style="color:red">*</i></label>
                            <div class="col-sm-8">
                                <select class="form-control" data-bind="options: vdcList,optionsText:'name',optionsValue:'uuid',value: vdcUuid,event:{change:$root.getAzForVdcChange},optionsCaption:'请选择'"></select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">可用分区<i style="color:red">*</i></label>
                            <div class="col-sm-8">
                                <select class="form-control" data-bind="options: azList,optionsText:'name',optionsValue:'uuid',value: azUuid,event:{change:$root.getVpcForAzChange},optionsCaption:'请选择'"></select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-md-6">
		              <div class="row">
		                <label class="col-sm-4 control-label">VPC<i style="color:red">*</i></label>
		                <div class="col-sm-8">
		                  <select class="form-control" data-bind="options:  vpcList,optionsText:'name',optionsValue:'uuid',value:  vpcUuid,event:{change:$root.vpcChange},optionsCaption:'请选择'"></select>
		                </div>
		              </div>
		            </div>
		            <div class="form-group col-md-6">
		              <div class="row">
		                <label class="col-sm-4 control-label">网络名称<i style="color:red">*</i></label>
		                <div class="col-sm-8">
		                  <select class="form-control" data-bind="options:  networkList,optionsText:'name',optionsValue:'uuid',value:  vpcNetworkUuid,optionsCaption:'请选择'"></select>
		                </div>
		              </div>
		            </div>
		            <div class="form-group col-md-6">
		              <div class="row">
		                <label class="col-sm-4 control-label">协议<i style="color:red">*</i></label>
		                <div class="col-sm-8">
		                  <select class="form-control" data-bind="options: $root.ProtocolList,optionsText:'name',optionsValue:'value',value: agreement,optionsCaption:'请选择'"></select>
		                </div>
		              </div>
		            </div>
		            <div class="form-group col-md-6">
		              <div class="row">
		                <label class="col-xs-4 control-label">负载均衡方式<i style="color:red">*</i></label>
		                <div class="col-sm-8">
		                  <select class="form-control" data-bind="options: $root.LBMothedList,optionsText:'name',optionsValue:'value',value: loadBalanceWay,optionsCaption:'请选择'"></select>
		                </div>
		              </div>
		            </div>
                    <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">备注</label>
                            <div class="col-sm-8">
                                <textarea class="form-control" cols="30" rows="5" data-bind="value: remark"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div> 
                     <div class="form-group col-md-6">
                        <div class="row">
                                    <label class="col-xs-4 control-label">申请时长<i style="color:red">*</i></label>
                                    <div class="col-sm-8">
                                        <div class="radio">
                                            <label class="form-inline">
                                                <input type="radio" name="optionsRadiosi" value="1" data-bind="checked: applyType"> 永久
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label class="form-inline">
                                                <input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="2" data-bind="checked: applyType">
                                                <select class="form-control" data-bind="options: $root.MonthsList,optionsText:'name',optionsValue:'value',value: applyNum"></select> 个月
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label class="form-inline">
                                                <input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="3" data-bind="checked: applyType">
                                                <span class="">有效期至 </span>
                                                <input type="text" style="width:126px" class="form-control applyDateFormat" data-bind="value: applyTime">
                                            </label>
                                        </div>
                                    </div>
                                </div>
                    </div> 
                     <div class="clearfix"></div>
                    <div class="form-group col-md-6" data-bind="visible:charge()=='true'">
                        <div class="row">
                            <label class="col-sm-4 control-label">套餐<i style="color:red">*</i></label>
                            <div class="col-sm-3">
                                <select class="form-control w-xs" data-bind="options: billRuleList,optionsText:'name',optionsValue:'value',value: billRuleUuid,optionsCaption:'请选择'"></select>
                            </div>
                            <span class="control-label col-sm-5 text-left" style="height:34px;" data-bind="text:price"></span>
                        </div>
                    </div> 
                </div>
                <div class='modal-footer' style="text-align:center;">
                    <a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
			        <a class="btn btn-default btn-success"  data-bind="click: $root.addToOrder">提交订单</a>
			        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
                </div>
            </div>
        </div>
    </div>
<!-- 负载均衡 单个 end -->	
<!-- 负载均衡 多个start -->
<div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_LBMore , backdrop: 'static'}">
	<div class='modal-dialog modal-lg' role='document'>
        <div class='modal-content'>
			<div class='modal-header'>
				<button type="button" class="close" data-dismiss="modal">
					<span aria-hidden="true">&times;</span>
				</button>
				<h3 class='modal-title'>申请负载均衡器</h3>
			</div>
			<div class='modal-body form-horizontal'>
				<div class="form-inline">
					<div class="input-group">
						<span class="input-group-addon">申请数量</span> <input type="text"
							class="form-control" data-bind="value: num_LB, valueUpdate: 'afterkeydown'">
					</div>
				</div>
				<div class="panel panel-default table-responsive no-height"
					style="margin: 0; margin-top: 10px">
					<table class="table table-striped">
						<thead>
							<th>序号</th>
							<th>负载均衡器名称<i style="color: red">*</i></th>
							<th>所属VDC<i style="color: red">*</i></th>
							<th>可用分区<i style="color: red">*</i></th>
							<th>VPC<i style="color:red">*</i></th>
							<th>网络名称<i style="color:red">*</i></th>
							<th>协议<i style="color:red">*</i></th>
							<th>负载均衡方式<i style="color:red">*</i></th>
							<th>申请时长<i style="color: red">*</i></th>
							<th data-bind="visible:$root.charge_more_view()=='true'"><i style="color:red">*</i>套餐</th>
							<th data-bind="visible:$root.charge_more_view()=='true'">收费标准</th>
						</thead>
						<tbody id="applyServiceBalancingBox"
							data-bind="foreach: model_LB().loadbalancerCartInfo">
							<tr>
								<td><span data-bind="text: ($index()+1)"></span></td>
								<td><input type="text" class="form-control input-sm"
									data-bind="value: name"></td>
								<td>
								    <select class="form-control input-sm" data-bind="options: vdcList,optionsText:'name',optionsValue:'uuid',value: vdcUuid,event:{change:$root.getAzForVdcChange},optionsCaption:'请选择'"></select>
								</td>
								<td>
								    <select class="form-control input-sm" data-bind="options: azList,optionsText:'name',optionsValue:'uuid',value: azUuid,event:{change:$root.getVpcForAzChange},optionsCaption:'请选择'"></select>
								</td>
								<td>
								    <select class="form-control input-sm" data-bind="options:  vpcList,optionsText:'name',optionsValue:'uuid',value:  vpcUuid,event:{change:$root.vpcChange},optionsCaption:'请选择'"></select>
								</td>
								<td>
								    <select class="form-control input-sm" data-bind="options:  networkList,optionsText:'name',optionsValue:'uuid',value:  vpcNetworkUuid,optionsCaption:'请选择'"></select>
								</td>
								<td>
								    <select class="form-control input-sm" data-bind="options: $root.ProtocolList,optionsText:'name',optionsValue:'value',value: agreement,optionsCaption:'请选择'"></select>
								</td>
								<td>
								    <select class="form-control input-sm" data-bind="options: $root.LBMothedList,optionsText:'name',optionsValue:'value',value: loadBalanceWay,optionsCaption:'请选择'"></select>
								</td>
								
								<td>
									<div class="radio">
										<label class="form-inline"> <input type="radio" value="1" data-bind="checked: applyType,name: ($index()+1)" > 永久
										</label>
									</div>
									<div class="radio">
										<label class="form-inline"> 
										    <input type="radio" class="form-control" style="top: 2px;" value="2" data-bind="checked: applyType,name: ($index()+1)"> 
										    <select class="form-control" data-bind="options: $root.MonthsList,optionsText:'name',optionsValue:'value',value: applyNum"></select> 个月
										</label>
									</div>
									<div class="radio disabled">
										<label class="form-inline"> 
											<input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="3" data-bind="checked: applyType,name: ($index()+1)">
                                            <span class="">有效期至 </span>
                                            <input type="text" style="width:126px" class="form-control applyDateFormat" data-bind="value: applyTime">
										</label>
									</div>
								</td>
								<td data-bind="visible:$root.charge_more_view()=='true'">
								    <select class="form-control" data-bind="options: billRuleList,optionsText:'name',optionsValue:'value',value: billRuleUuid,optionsCaption:'请选择'"></select>
								</td>
								<td data-bind="visible:$root.charge_more_view()=='true'"><span data-bind="text:price"></span></td>
							</tr>
						</tbody>
					</table>
				</div>
            </div>
			<div class='modal-footer' style="text-align: center;">
				<a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a> <a
					class="btn btn-default btn-success" data-bind="click: $root.addToOrder">提交订单</a> <a
					class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
			</div>
		</div>
	</div>
</div>

<!-- 负载均衡 多个 end -->
<!-- ssh密钥  单个start-->
    <div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_SSHSingle, backdrop: 'static'}">
        <div class='modal-dialog modal-lg'>
            <div class='modal-content'>
                <div class='modal-header'>
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                    <h3 class='modal-title'>SSH密钥服务</h3>
                </div>
                <div class='modal-body form-horizontal row' data-bind="foreach: model_SSH().sshKeytCartInfo">
                    <div class="form-inline clearfix" style="padding:0 15px 15px 0">
			          <a class="btn btn-default pull-right" data-bind="click:$root.changeList_SSH">批量申请</a>
			        </div>
                    
                    <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">SSH密钥名称<i style="color:red">*</i></label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" data-bind="value: name">
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">所属VDC<i style="color:red">*</i></label>
                            <div class="col-sm-8">
                                <select class="form-control" data-bind="options: vdcList,optionsText:'name',optionsValue:'uuid',value: vdcUuid,event:{change:$root.getAzForVdcChange},optionsCaption:'请选择'"></select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">可用分区<i style="color:red">*</i></label>
                            <div class="col-sm-8">
                                <select class="form-control" data-bind="options: azList,optionsText:'name',optionsValue:'uuid',value: azUuid,optionsCaption:'请选择'"></select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">备注</label>
                            <div class="col-sm-8">
                                <textarea class="form-control" cols="30" rows="5" data-bind="value: remark"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div> 
                     <div class="form-group col-md-6">
                        <div class="row">
                                    <label class="col-xs-4 control-label">申请时长<i style="color:red">*</i></label>
                                    <div class="col-sm-8">
                                        <div class="radio">
                                            <label class="form-inline">
                                                <input type="radio" name="optionsRadiosi" value="1" data-bind="checked: applyType"> 永久
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label class="form-inline">
                                                <input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="2" data-bind="checked: applyType">
                                                <select class="form-control" data-bind="options: $root.MonthsList,optionsText:'name',optionsValue:'value',value: applyNum"></select> 个月
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label class="form-inline">
                                                <input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="3" data-bind="checked: applyType">
                                                <span class="">有效期至 </span>
                                                <input type="text" style="width:126px" class="form-control applyDateFormat" data-bind="value: applyTime">
                                            </label>
                                        </div>
                                    </div>
                                </div>
                    </div> 
                     <div class="clearfix"></div>
                    <div class="form-group col-md-6" data-bind="visible:charge()=='true'">
                        <div class="row">
                            <label class="col-sm-4 control-label">套餐<i style="color:red">*</i></label>
                            <div class="col-sm-3">
                                <select class="form-control w-xs" data-bind="options: billRuleList,optionsText:'name',optionsValue:'value',value: billRuleUuid,optionsCaption:'请选择'"></select>
                            </div>
                            <span class="control-label col-sm-5 text-left" style="height:34px;" data-bind="text:price"></span>
                        </div>
                    </div> 
                </div>
                <div class='modal-footer' style="text-align:center;">
                    <a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
			        <a class="btn btn-default btn-success"  data-bind="click: $root.addToOrder">提交订单</a>
			        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
                </div>
            </div>
        </div>
    </div>
    <!-- ssh密钥 单个 end -->	
<!-- SSH密钥  多个start -->
  <div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_SSHMore , backdrop: 'static'}">
	<div class='modal-dialog modal-lg' role='document'>
  
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请SSH密钥服务</h3>
      </div>
      <div class='modal-body form-horizontal'>
        <div class="form-inline">
          <div class="input-group">
             <span class="input-group-addon">申请数量</span>
             <input type="text" class="form-control"  data-bind="value: num_SSH, valueUpdate: 'afterkeydown'">
          </div>
        </div>
        <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
          <table class="table table-striped">
            <thead>
              <th>序号</th>
              <th>SSH密钥名称<i style="color:red">*</i></th>
              <th>所属VDC<i style="color:red">*</i></th>
              <th>可用分区<i style="color:red">*</i></th>
              <th>申请时长<i style="color:red">*</i></th>
              <th data-bind="visible:$root.charge_more_view()=='true'">套餐<i style="color:red">*</i></th>
              <th data-bind="visible:$root.charge_more_view()=='true'">收费标准</th>
            </thead>
            <tbody id="applyServiceSSHBox" data-bind="foreach: model_SSH().sshKeytCartInfo">
                  <tr>
						<td><span data-bind="text: ($index()+1)"></span></td>
						<td><input type="text" class="form-control input-sm" data-bind="value: name"></td>
						<td>
						   <select class="form-control w-xs" data-bind="options: vdcList,optionsText:'name',optionsValue:'uuid',value: vdcUuid,event:{change:$root.getAzForVdcChange},optionsCaption:'请选择'"></select>
						</td>
						<td>
						    <select class="form-control w-xs" data-bind="options: azList,optionsText:'name',optionsValue:'uuid',value: azUuid,optionsCaption:'请选择'"></select>
						</td>
						<td>
							<div class="radio">
								<label class="form-inline"> <input type="radio" value="1" data-bind="checked: applyType,name: ($index()+1)" > 永久
								</label>
							</div>
							<div class="radio">
								<label class="form-inline"> 
								    <input type="radio" class="form-control" style="top: 2px;" value="2" data-bind="checked: applyType,name: ($index()+1)"> 
								    <select class="form-control" data-bind="options: $root.MonthsList,optionsText:'name',optionsValue:'value',value: applyNum"></select> 个月
								</label>
							</div>
							<div class="radio">
								<label class="form-inline"> 
									<input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="3" data-bind="checked: applyType,name: ($index()+1)">
                                          <span class="">有效期至 </span>
                                          <input type="text" style="width:126px" class="form-control applyDateFormat" data-bind="value: applyTime,name: ($index()+1)">
								</label>
							</div>
						</td>
						<td data-bind="visible:$root.charge_more_view()=='true'">
						    <select class="form-control" data-bind="options: billRuleList,optionsText:'name',optionsValue:'value',value: billRuleUuid,optionsCaption:'请选择'"></select>
						</td>
						<td data-bind="visible:$root.charge_more_view()=='true'"><span data-bind="text:price"></span></td>
					</tr>  
            </tbody>
          </table>
        </div>
        
      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info" 
           data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-default btn-success" data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- SSH密钥 多个 end -->
<!-- 云硬盘单个 -->
<div role="dialog" aria-hidden="true" class="simple_form form-horizontal modal fade applyModeShow" data-bind="modal: { show: isAdd_VdiskSingle , backdrop: 'static'}">
  <div class='modal-dialog modal-lg' data-bind="foreach: model_Vdisk().vdiskCartInfo">
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请云硬盘服务</h3>
      </div>
      <div class='modal-body form-horizontal row'>
        <div class="form-inline clearfix" style="padding:0 15px 15px 0">
          <a class="btn btn-default pull-right" data-bind="click:$root.changeList_Vdisk">批量申请</a>
        </div>
        
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">云硬盘名称<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" data-bind="value: name">
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">存储大小(GB)<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" data-bind="value: size">
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">所属VDC<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid,optionsCaption:'请选择',event:{change:$root.vdcChange}"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">可用分区<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value:azUuid,event:{change:$root.azChangeGetVm},optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">挂载云主机<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <select class="form-control input-sm"  data-bind="options:vmList,optionsText:'name',optionsValue:'uuid',value:mountVmUuid,event:{change:$root.vmChangeGetDate},optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">备注</label>
              <div class="col-sm-8">
                <textarea class="form-control" cols="30" rows="5" data-bind="value: remark"></textarea>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">申请时长<i style="color:red">*</i></label>
              <label class="col-xs-2 control-label">有效期至 </label>
              <div class="col-xs-6"><input type="text" style="width:126px" class="form-control" data-bind="value: applyTime,attr:{disabled:true}"></div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="form-group col-md-6" data-bind="visible:charge()=='true'">
            <div class="row">
              <label class="col-sm-4 control-label">套餐<i style="color:red">*</i></label>
              <div class="col-sm-3">
				   <select class="form-control w-xs" data-bind="options:billRuleArray,optionsText:'name',optionsValue:'value',value:billRuleUuid,optionsCaption:'请选择'"></select>
              </div>
              <span class="control-label col-sm-5 text-left" style="height:34px;" data-bind="text:price"></span>
            </div>

          </div>
      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-success" data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 云硬盘单个 -->
<!-- 云硬盘多个 -->
<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAdd_VdiskMore , backdrop: 'static'}">
  <div class='modal-dialog modal-lg' role='document'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请云硬盘服务</h3>
      </div>
      <div class='modal-body form-horizontal'>
        <!-- <a class="btn btn-default pull-right" data-bind="click:$root.changeSingle_Vdisk">单个申请</a> -->
        <div class="form-inline">
          <div class="input-group">
             <span class="input-group-addon">申请数量</span>
             <input type="text" class="form-control" data-bind="value: num_vdisk, valueUpdate: 'afterkeydown'">
          </div>
        </div>
        <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
          <table class="table table-striped">
            <thead>
              <th>序号</th>
              <th>云硬盘名称<i style="color:red">*</i></th>
              <th>存储大小(G)<i style="color:red">*</i></th>
              <th>所属VDC<i style="color:red">*</i></th>
              <th>可用分区<i style="color:red">*</i></th>
              <th>挂载云主机<i style="color:red">*</i></th>
              <th>申请时长</th>
              <th data-bind="visible:$root.charge_more_view()=='true'">套餐</th>
              <th data-bind="visible:$root.charge_more_view()=='true'">收费标准</th>
            </thead>
            <tbody data-bind="foreach: model_Vdisk().vdiskCartInfo">
              <tr>
					<td><span data-bind="text: ($index()+1)"></span></td>
					<td><input type="text" class="form-control input-sm"
						data-bind="value: name"></td>
					<td><input type="text" class="form-control input-sm"
						data-bind="value: size">
					</td>
					<td>
					    <select class="form-control input-sm" id="vdiskVdc" data-bind="options:vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid,optionsCaption:'请选择',event:{change:$root.vdcChange}"></select>
					</td>
					<td>
					    <select class="form-control input-sm" data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value:azUuid,event:{change:$root.azChangeGetVm},optionsCaption:'请选择'"></select>
					</td>
					<td>
					    <select class="form-control input-sm"  data-bind="options:vmList,optionsText:'name',optionsValue:'uuid',value:mountVmUuid,event:{change:$root.vmChangeGetDate},optionsCaption:'请选择'"></select>
					</td>
					<td>
						<input type="text" style="width:126px" class="form-control" data-bind="value: applyTime,attr:{disabled:true}">
					</td>
					<td data-bind="visible:charge()=='true'">
					    <select class="form-control w-xs" data-bind="options:billRuleArray,optionsText:'name',optionsValue:'value',value:billRuleUuid,optionsCaption:'请选择'"></select>
					</td>
					<td data-bind="visible:charge()=='true',text:price"></td>
				</tr>
            </tbody>
          </table>
        </div>
        
      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-default btn-success" data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 云硬盘多个 -->

<!-- 对象存储单个 -->
<div role="dialog" aria-hidden="true" class="simple_form form-horizontal modal fade applyModeShow" data-bind="modal: { show: isAdd_ObjectStorageSingle , backdrop: 'static'}">
  <div class='modal-dialog modal-lg' data-bind="foreach: model_ObjectStorage().objectStorageCartInfo">
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请对象存储服务</h3>
      </div>
      <div class='modal-body form-horizontal row'>
        <div class="form-inline clearfix" style="padding:0 15px 15px 0">
          <a class="btn btn-default pull-right" data-bind="click: $root.changeList_ObjectStorage">批量申请</a>
        </div>
        
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">对象存储名称<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" data-bind="value: name">
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">存储大小(GB)<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" data-bind="value: size" >
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">所属VDC<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid,event:{change:$root.vdcChange},optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">可用分区<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value:azUuid,optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">备注</label>
              <div class="col-sm-8">
                <textarea class="form-control" cols="30" rows="5" data-bind="value: remark"></textarea>
              </div>
            </div>
          </div>
          
          <div class="clearfix"></div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">申请时长<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <div class="radio">
                  <label class="form-inline">
                    <input type="radio" value="1" data-bind="checked: applyType,name:objectSingle" > 永久
                  </label>
                </div>
                <div class="radio">
                  <label class="form-inline">
                  	<input type="radio" class="form-control" style="top:2px;" value="2" data-bind="checked: applyType,name:objectSingle" > 
                    <select class="form-control"  data-bind="options:$parent.MonthsList,optionsText:'name',optionsValue:'value',value:applyNum"></select> 个月
                  </label>
                </div>
                <div class="radio">
                  <label class="form-inline">
                    <input type="radio" class="form-control" style="top: 2px;" value="3" data-bind="checked: applyType,name: objectSingle"> 
                    <span class="">有效期至 </span>
                    <input type="text" style="width:126px" data-bind="value:applyTime" class="form-control applyDateFormat">
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="form-group col-md-6" data-bind="visible:charge()=='true'">
            <div class="row">
              <label class="col-sm-4 control-label">套餐<i style="color:red">*</i></label>
              <div class="col-sm-3">
				 <select class="form-control w-xs" data-bind="options:billRuleArray,optionsText:'name',optionsValue:'value',value:billRuleUuid,optionsCaption:'请选择'"></select>
              </div>
              <span class="control-label col-sm-5 text-left" style="height:34px;" data-bind="text:price"></span>
            </div>

          </div>
          

      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-success" data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 对象存储单个 -->
<!-- 对象存储多个 -->
<div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_ObjectStorageMore , backdrop: 'static'}">
  <div class='modal-dialog modal-lg'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请对象存储</h3>
      </div>
      <div class='modal-body form-horizontal'>
        <!-- <a class="btn btn-default pull-right" data-bind="click:$root.changeSingle_ObjectStorage">单个申请</a> -->
        <div class="form-inline">
          <div class="input-group">
             <span class="input-group-addon">申请数量</span>
             <input type="text" class="form-control" data-bind="value: num_ObjectStorage, valueUpdate: 'afterkeydown'">
          </div>
        </div>
        <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
          <table class="table table-striped">
            <thead>
              <th>序号</th>
              <th>对象存储名称<i style="color:red">*</i></th>
              <th>存储大小(G)<i style="color:red">*</i></th>
              <th>所属VDC<i style="color:red">*</i></th>
              <th>可用分区<i style="color:red">*</i></th>
              <th>申请时长<i style="color:red">*</i></th>
              <th data-bind="visible:$root.charge_more_view()=='true'">套餐<i style="color:red">*</i></th>
              <th data-bind="visible:$root.charge_more_view()=='true'">收费标准</th>
            </thead>
            <tbody data-bind="foreach: model_ObjectStorage().objectStorageCartInfo">
                <tr>
                    <td><span data-bind="text: ($index()+1)"></span></td>
					<td><input type="text" class="form-control input-sm" data-bind="value: name"></td>
					<td><input type="text" class="form-control input-sm" data-bind="value: size"></td>
					<td><select class="form-control input-sm" data-bind="options:vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid,event:{change:$root.vdcChange},optionsCaption:'请选择'"></select></td>
					<td><select class="form-control input-sm" data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value:azUuid,optionsCaption:'请选择'"></select></td>
					<td>
						<div class="radio">
							<label class="form-inline"> <input type="radio"
							
								value="1" data-bind="checked: applyType,name:$index()" > 永久
							</label>
						</div>
						<div class="radio">
							<label class="form-inline"> <input type="radio"
								class="form-control" style="top: 2px;"
								value="2" data-bind="checked: applyType,name:$index()"> <select class="form-control"  data-bind="options:$parent.MonthsList,optionsText:'name',optionsValue:'value',value:applyNum"></select> 个月
							</label>
						</div>
						<div class="radio disabled">
							<label class="form-inline"> <input type="radio"
								class="form-control" style="top: 2px;"
								value="3" data-bind="checked: applyType,name:$index()"> <input type="text"
								style="width: 206px" class="form-control applyDateFormat" data-bind="value: applyTime">
								
							</label>
						</div>
					</td>
					<td data-bind="visible:charge()=='true'">
					<select class="form-control w-xs" data-bind="options:billRuleArray,optionsText:'name',optionsValue:'value',value:billRuleUuid,optionsCaption:'请选择'"></select>
					</td>
					<td data-bind="visible:charge()=='true',text:price"></td>
				</tr>            
            </tbody>
          </table>
        </div>
        
      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-default btn-success"  data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 对象存储多个 -->
<!-- 公网IP单个 -->
<div role="dialog" aria-hidden="true" class="simple_form form-horizontal modal fade applyModeShow" data-bind="modal: { show: isAdd_PublicNetworkSingle , backdrop: 'static'}">
  <div class='modal-dialog modal-lg' data-bind="foreach: model_PublicNetwork().publicNetworkCartInfo">
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请公网IP服务</h3>
      </div>
      <div class='modal-body form-horizontal row'>
        <div class="form-inline clearfix" style="padding:0 15px 15px 0">
          <a class="btn btn-default pull-right" data-bind="click: $root.changeList_PublicNetwork">批量申请</a>
        </div>
        
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">公网IP名称<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" data-bind="value: name">
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">所属VDC<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid,event:{change:$root.vdcChange},optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">可用分区<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value:azUuid,event:{change:$root.azChangeGetVpc},optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">所属VPC<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:vpcList,optionsText:'name',optionsValue:'uuid',value:vpcUuid,event:{change:$root.vpcChangeByPublic},optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">网络名称<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:networkList,optionsText:'name',optionsValue:'uuid',value:netWorkId,optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">备注</label>
              <div class="col-sm-8">
                <textarea class="form-control" cols="30" rows="5" data-bind="value: remark"></textarea>
              </div>
            </div>
          </div>
          
          <div class="clearfix"></div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">申请时长<i style="color:red">*</i></label>
              <div class="col-sm-8">
                <div class="radio">
                  <label class="form-inline">
                    <input type="radio" value="1" data-bind="checked: applyType,name:publicNetworkSingle" > 永久
                  </label>
                </div>
                <div class="radio">
                  <label class="form-inline">
                    <input type="radio" class="form-control" style="top: 2px;" value="2" data-bind="checked: applyType,name:publicNetworkSingle">
                    <select class="form-control"  data-bind="options:$parent.MonthsList,optionsText:'name',optionsValue:'value',value:applyNum"></select> 个月
                  </label>
                </div>
                <div class="radio">
                  <label class="form-inline">
                    <input type="radio" class="form-control" style="top: 2px;" value="3" data-bind="checked: applyType,name:publicNetworkSingle">
                    <span class="">有效期至 </span>
                    <input type="text" style="width:126px" class="form-control applyDateFormat" data-bind="value: applyTime">
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="form-group col-md-6" data-bind="visible:charge()=='true'">
            <div class="row">
              <label class="col-sm-4 control-label" >套餐<i style="color:red">*</i></label>
              <div class="col-sm-3">
				<select class="form-control w-xs" data-bind="options:billRuleArray,optionsText:'name',optionsValue:'value',value:billRuleUuid,event:{change:function(data, event){ $root.chargeChange('single',data,event) }},optionsCaption:'请选择'"></select>
              </div>
              <span class="control-label col-sm-5 text-left" style="height:34px;" data-bind="text:price"></span>
            </div>

          </div>
          

      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-success" data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 公网IP单个 -->
<!-- 公网IP多个 -->
<div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_PublicNetworkMore , backdrop: 'static'}">
  <div class='modal-dialog modal-lg'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请公网IP</h3>
      </div>
      <div class='modal-body form-horizontal'>
        <!-- <a class="btn btn-default pull-right" data-bind="click:$root.changeSingle_PublicNetwork">单个申请</a> -->
        <div class="form-inline">
          <div class="input-group">
             <span class="input-group-addon">申请数量</span>
             <input type="text" class="form-control" data-bind="value: num_PublicNetwork, valueUpdate: 'afterkeydown'">
          </div>
        </div>
        <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
          <table class="table table-striped">
            <thead>
              <th>序号</th>
              <th>公网IP名称<i style="color:red">*</i></th>
              <th>所属VDC<i style="color:red">*</i></th>
              <th>可用分区<i style="color:red">*</i></th>
              <th>VPC<i style="color:red">*</i></th>
              <th>网络名称<i style="color:red">*</i></th>
              <th>申请时长<i style="color:red">*</i></th>
              <th data-bind="visible:$root.charge_more_view()=='true'">套餐<i style="color:red">*</i></th>
              <th data-bind="visible:$root.charge_more_view()=='true'">收费标准</th>
            </thead>
            <tbody  data-bind="foreach: model_PublicNetwork().publicNetworkCartInfo">
                 <tr>
                    <td><span data-bind="text: ($index()+1)"></span></td>
					<td><input type="text" class="form-control input-sm" data-bind="value: name"></td>
					<td><select class="form-control input-sm" data-bind="options:vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid,event:{change:$root.vdcChange},optionsCaption:'请选择'"></select></td>
					<td><select class="form-control input-sm" data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value:azUuid,event:{change:$root.azChangeGetVpc},optionsCaption:'请选择'"></select></td>
					<td><select class="form-control input-sm" data-bind="options:vpcList,optionsText:'name',optionsValue:'uuid',value:vpcUuid,event:{change:$root.vpcChangeByPublic},optionsCaption:'请选择'"></select></td>
					<td><select class="form-control input-sm" data-bind="options:networkList,optionsText:'name',optionsValue:'uuid',value:netWorkId,optionsCaption:'请选择'"></select></td>
					<td>
						<div class="radio">
							<label class="form-inline"> <input type="radio"
							
								value="1" data-bind="checked: applyType,name:$index()" > 永久
							</label>
						</div>
						<div class="radio">
							<label class="form-inline"> <input type="radio"
								class="form-control" style="top: 2px;"
								value="2" data-bind="checked: applyType,name:$index()"> <select class="form-control"  data-bind="options:$parent.MonthsList,optionsText:'name',optionsValue:'value',value:applyNum"></select> 个月
							</label>
						</div>
						<div class="radio disabled">
							<label class="form-inline"> <input type="radio"
								class="form-control" style="top: 2px;"
								value="3" data-bind="checked: applyType,name:$index()"> <input type="text"
								style="width: 206px" class="form-control applyDateFormat" data-bind="value: applyTime">
							</label>
						</div>
					</td>
					<td data-bind="visible:charge()=='true'">
					   <select class="form-control w-xs" data-bind="options:billRuleArray,optionsText:'name',optionsValue:'value',value:billRuleUuid,event:{change:function(data, event){ $root.chargeChange('single',data,event) }},optionsCaption:'请选择'"></select>
					</td>
					<td data-bind="visible:charge()=='true',text:price"></td>
				</tr>               
            </tbody>
          </table>
        </div>
        
      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-default btn-success"  data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 公网IP多个 -->
<!-- VDC -->
<div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_VDC , backdrop: 'static'}">
  <div class='modal-dialog modal-lg'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请VDC</h3>
      </div>
      <div class='modal-body form-horizontal row'>
        <div class="form-group">
          <label class="col-sm-3 control-label">VDC名称<i style="color:red">*</i></label>
          <div class="col-sm-8">
            <input type="text" class="form-control col-sm-5" placeholder="请输入名称" data-bind="value:model_VDC().name">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">支持操作系统<i style="color:red">*</i></label>
            <div class="col-sm-8 form-inline" data-bind="foreach:osTypeArray">
              <div class="checkbox">
                <label>
                  <input type="checkbox" data-bind="checked: $parent.model_VDC().osTypesSelelct,value:$data"><span data-bind="text:$data"></span>
                </label>
              </div>
            </div>
        </div>     
        <div class="form-group">
        	<label class="col-sm-3 control-label">配额限制<i style="color:red">*</i></label>
        	<div class="col-xs-4 form-inline">
        	<div class="form-inline"> 
        	<div class="radio"> 
        		<label class="form-inline"> 
					<input type="radio" class="form-control" style="top: 2px;" value="1" data-bind="checked: model_VDC().quota,name:quota,attr:{disabled:true}">限制
				</label>
			</div> 
        	<div class="radio"> 
        		<label class="form-inline"> 
					<input type="radio" class="form-control" style="top: 2px;" value="-1" data-bind="checked: model_VDC().quota,name:quota,attr:{disabled:true}">不限制
				</label>
			</div>			
			</div>
			</div>
        </div>
        <div data-bind="visible:model_VDC().quota()=='1'">
	        <div class="form-group col-sm-4" >
	          <div >
	            <label class="col-xs-8 control-label">CPU配额(个)：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().cpu,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">内存配额(G)：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().memory,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">存储配额(G)：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().storage,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">云主机最大申请数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vm,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">云硬盘最大申请数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().disk,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">对象存储最大申请数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().objectStorage,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">VPC最大可创建数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vpcNum,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">路由器最大可创建数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().router,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">防火墙最大可创建数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().fireWall,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">公网IP最大申请数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().publicIp,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">负载均衡器最大申请数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().loadBalancer,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">SSH密钥最大申请数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().secretKey,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
        </div>
        <div class="clearfix"></div>
        <div class="form-group">
          <label class="col-sm-3 control-label">备注：</label>
          <div class="col-sm-8">
            <textarea class="form-control" cols="30" rows="5" data-bind="value:model_VDC().remark"></textarea>
          </div>
        </div>
          <div class="clearfix"></div>
        <div class="form-group" data-bind="visible:false">
          <label class="col-sm-3 control-label">申请时长：</label>
			<div class="col-sm-8">
			<div class="radio">
				<label class="form-inline"> 
					<input type="radio" value="1" data-bind="checked: model_VDC().applyType,name:vdcRadio" > 永久
				</label>
			</div>
			<div class="radio">
				<label class="form-inline"> 
					<input type="radio" class="form-control" style="top: 2px;" value="2" data-bind="checked: model_VDC().applyType,name:vdcRadio"> 
					<select class="form-control"  data-bind="options:MonthsList,optionsText:'name',optionsValue:'value',value:model_VDC().applyNum"></select> 个月
				</label>
			</div>
			<div class="radio disabled">
				<label class="form-inline"> 
					<input type="radio" class="form-control" style="top: 2px;" value="3" data-bind="checked: model_VDC().applyType,name:vdcRadio"> 
					<input type="text" style="width: 206px" class="form-control applyDateFormat" data-bind="value:model_VDC().applyTime">
				</label>
			</div>
			</div>
        </div>
        <div class="form-group" data-bind="visible:model_VDC().charge()=='true'">
          <div>
            <label class="col-sm-3 control-label">套餐<i style="color:red">*</i></label>
            <div class="col-sm-2">
                <select class="form-control"  data-bind="options:model_VDC().billRuleArray,optionsText:'name',optionsValue:'value',value:model_VDC().billRuleUuid,optionsCaption:'请选择',event:{change:function(data, event){ $root.chargeTypeChange('vdcCartInfo',data,event) }}"></select>
            </div>
            <span class="col-sm-3 control-label text-left" data-bind="text:model_VDC().price"></span>
          </div>
        </div>

      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info" data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- VDC -->

<!-- 云主机 单个 -->
<div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_VMSingle , backdrop: 'static'}">
  <div class='modal-dialog modal-lg'>
    <div class='modal-content' style="overflow-y:auto;overflow-x:hidden;height:600px">
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>云主机服务</h3>
      </div>
      <div class='modal-body form-horizontal row' data-bind="foreach:model_VM().vmCartInfo">
          <div class="form-inline clearfix" style="padding:0 15px 15px 0">
	          <a class="btn btn-default pull-right" data-bind="click:$root.changeList_VM">批量申请</a>
	        </div>
      
        <div class="panel panel-default no-height" style="margin:0;border:none">
          <div class="panel-heading">基本信息 <span style="cursor:pointer;" class="glyphicon pull-right" data-bind="click: $root.step1(!$root.step1()),css:{'glyphicon-chevron-up': $root.step1(), 'glyphicon-chevron-down': !$root.step1()}"></span></div>
          <div class="panel-body" data-bind="visible: $root.step1">
            <div class="form-group col-md-6">
              <div class="row">
                <label class="col-sm-4 control-label">云主机名称：</label>
                <div class="col-sm-8">
                  <input type="text" class="form-control w" data-bind="value:  vmName">
                </div>
              </div>
            </div>
            <div class="clearfix"></div>
            <div class="form-group col-md-6">
              <div class="row">
                <label class="col-sm-4 control-label">所属VDC：</label>
                <div class="col-sm-8">
                  <select class="form-control w-xs" data-bind="options:  vdcList,optionsText:'name',optionsValue:'uuid',value:  vdcUuid,event:{change:$root.getAzForVdcChange},optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <div class="row">
                <label class="col-sm-4 control-label">可用分区：</label>
                <div class="col-sm-8">
                  <select class="form-control w-xs" data-bind="options:  azList,optionsText:'name',optionsValue:'uuid',value:  azUuid,event:{change:$root.getVpcForAzChange},optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <div class="row">
                <label class="col-sm-4 control-label">操作系统类型：</label>
                <div class="col-sm-8">
                  <select class="form-control w-xs" data-bind="options:  osTypeList,optionsText:$data,optionsValue:$data,value:  osType,event:{change:$root.getOsVersionForOsTypeChange},optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <div class="row">
                <label class="col-sm-4 control-label">操作系统版本：</label>
                <div class="col-sm-8">
                  <select class="form-control w-xs" data-bind="options:  osVersionList,optionsText:'opSysVersion',optionsValue:'uuid',value: osVersion,optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-3">
              <div class="row">
                <label class="col-xs-5 control-label">CPU(个)：</label>
                <div class="col-xs-7">
                  <select class="form-control w-xs" data-bind="options:  cpuList,optionsText:$data,optionsValue:$data,value:  cpu,optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">内存(GB)：</label>
                <div class="col-xs-7">
                  <select class="form-control w-xs" data-bind="options:  memoryList,optionsText:$data,optionsValue:$data,value:  memory,optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">存储(GB)：</label>
                <div class="col-xs-7">
                  <input type="text" class="form-control" data-bind="value:  storage">
                </div>
              </div>
            </div>
            <div class="form-group col-md-3">
              <div class="row">
                <label class="col-xs-5 control-label">VPC/IP池：</label>
                <div class="col-xs-7">
                  <select class="form-control w-xs" data-bind="options:  vpcList,optionsText:'name',optionsValue:'uuid',value:  vpcOrIpPoolList,event:{change:$root.vpcChange},optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">网络名称：</label>
                <div class="col-xs-7">
                  <select class="form-control w-xs" data-bind="options:  networkList,optionsText:'name',optionsValue:'uuid',value:  vpcNetworkUuid,event:{change:$root.getIpForNetWorkChange},optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">指定IP：</label>
                <div class="col-xs-7">
                  <select class="form-control w-x" data-bind="options:ipList,optionsText:'ip',optionsValue:'ip',value:ip,optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-3">
              <div class="row">
                <label class="col-xs-5 control-label">主机账号：</label>
                <div class="col-xs-7">
                  <input type="text" class="form-control"  data-bind="value:  account">
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">密码：</label>
                <div class="col-xs-7">
                  <input type="text" class="form-control"  data-bind="value:  password">
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">重复密码：</label>
                <div class="col-xs-7">
                  <input type="text" class="form-control"  data-bind="value:  repeatPassword">
                </div>
              </div>
            </div>
            <div class="form-group col-md-3">
              <div class="row">
                <label class="col-xs-5 control-label">选择密钥：</label>
                <div class="col-xs-7">
                  <select class="form-control w-xs" data-bind="options:sshList,optionsText:'name',optionsValue:'uuid',value:sshUuid,optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="clearfix"></div>
            <div class="form-group col-md-5">
               <div class="row">
	              <label class="col-xs-5 control-label">申请时长：</label>
	              <div class="col-sm-7">
	                <div class="radio">
	                  <label class="form-inline">
	                    <input type="radio" name="optionsRadiosi"  value="1" data-bind="checked:  applyType"> 永久
	                  </label>
	                </div>
	                <div class="radio">
	                  <label class="form-inline">
	                    <input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="2"  data-bind="checked:  applyType"> 
	                    <select class="form-control" data-bind="options: $root.MonthsList,optionsText:'name',optionsValue:'value',value:  applyNum"></select> 个月
	                  </label>
	                </div>
	                <div class="radio">
	                  <label class="form-inline">
	                    <input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="3"  data-bind="checked:  applyType">
	                    <span class="">有效期至 </span>
	                    <input type="text" style="width:126px" class="form-control applyDateFormat" data-bind="value:  applyTime">
	                  </label>
	                </div>
	              </div>
	            </div>
            </div>
            <div class="clearfix"></div>
             <div class="form-group col-md-3" data-bind="visible:charge()=='true'">
                 <div class="row">
                     <label class="col-xs-5 control-label">套餐：</label>
                     <div class="col-xs-7">
                         <select class="form-control w-xs" data-bind="options: billRuleList,optionsText:'name',optionsValue:'value',value:billRuleUuid,optionsCaption:'请选择'"></select>
                     </div>
                 </div>
             </div>
             <span class="control-label col-md-3 text-left" style="height:34px;" data-bind="text: price"></span>
          </div>
        </div>

        <div class="panel panel-default no-height" style="margin:0;border:none">
          <div class="panel-heading">挂载云硬盘 <span style="cursor:pointer;" class="glyphicon pull-right" data-bind="click: $root.step2(!$root.step2()),css:{'glyphicon-chevron-up': $root.step2(), 'glyphicon-chevron-down': !$root.step2()}"></span></div>
          <div class="panel-body" data-bind="visible: $root.step2">
            <div style="margin:0;">
              <a class="btn btn-info btn-sm pull-right" data-bind="click: $root.addVdisk_VM">添加硬盘</a>
              <div class="clearfix" style="height:10px;clear:both;"></div>
              <div class="panel panel-default table-responsive no-height">
                <table class="table table-striped">
                  <thead>
                    <th>序号</th>
                    <th>云硬盘名称<i style="color:red">*</i></th>
                    <th>存储大小</th>
                    <th>所属服务</th>
                    <th>申请时长</th>
                    <th>套餐</th>
                    <th>收费标准</th>
                    <th>操作</th>
                  </thead>
                  <tbody data-bind="foreach: mountDisks">
                    <tr>
                        <td><span data-bind="text: ($index()+1)"></span></td>
                        <td><input type="text" class="form-control" data-bind="value:name"/></td>
                        <td><input type="text" class="form-control" data-bind="value:size"/></td>
                        <td><input type="text" data-bind="value:serviceName" disabled/> <a class="btn btn-xs btn-default" data-bind="click:$root.selectVdiskService_VM">选择</a></td>
                        <td><span data-bind="text: $parent.applyTimeText"></span></td>
                        <td><select class="form-control w-xs" data-bind="options: billRuleList,optionsText:'name',optionsValue:'value',value:billRuleUuid,optionsCaption:'请选择'"></select></td>
                        <td><span data-bind="text: price"></span></td>
                        <td><a class="btn btn-xs btn-danger" data-bind="event:{click:function(data, event){ $root.delVdisk_VM($parent,data,event) }}">删除</a></td>
                    </tr>
                    
                   
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>



        <div class="panel panel-default no-height" style="margin:0;border:none">
          <div class="panel-heading">安装软件 <span style="cursor:pointer;" class="glyphicon pull-right" data-bind="click: $root.step3(!$root.step3()),css:{'glyphicon-chevron-up': $root.step3(), 'glyphicon-chevron-down': !$root.step3()}"></span></div>
          <div class="panel-body" data-bind="visible: $root.step3">
            <div style="margin:0;">
              <a class="btn btn-info btn-sm pull-right" data-bind="click: $root.selectSoftware_VM">添加软件</a>
              <div class="clearfix" style="height:10px;clear:both;"></div>
              <div class="panel panel-default table-responsive no-height">
                <table class="table table-striped">
                  <thead>
                    <th>软件名称</th>
                    <th>软件分类</th>
                    <th>软件类型</th>
                    <th>软件版本</th>
                    <th>静默安装属性</th>
                    <th>操作</th>
                  </thead>
                  <tbody data-bind="foreach: softwares">
                    <tr>
                      <td data-bind="text:softwareName"></td>
                      <td data-bind="text:softwareSorts"></td>
                      <td data-bind="text:softwareType"></td>
                      <td data-bind="text:softwareVersion"></td>
                      <td><a class="btn btn-xs btn-default" data-bind="click:function(data,event){$root.showAttr_VM(true,data,event)}">查看</a> <a class="btn btn-xs btn-default" data-bind="click:function(data,event){$root.showAttr_VM(false,data,event)}">修改</a></td>
                      <td><a class="btn btn-xs btn-danger" data-bind="event:{click:function(data, event){ $root.delSoftwart_VM($parent,data,event) }}">删除</a></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="panel panel-default no-height" style="margin:0;border:none">
          <div class="panel-heading">系统盘分区 <span style="cursor:pointer;" class="glyphicon pull-right" data-bind="click: $root.step4(!$root.step4()),css:{'glyphicon-chevron-up': $root.step4(), 'glyphicon-chevron-down': !$root.step4()}"></span></div>
          <div class="panel-body" data-bind="visible: $root.step4">
            <div style="margin:0;">
              <a class="btn btn-info btn-sm pull-right" data-bind="click: $root.addPartition_VM">添加分区</a>
              <div class="clearfix" style="height:10px;clear:both;"></div>
              <div class="panel panel-default table-responsive no-height">
                <table class="table table-striped">
                  <thead>
                    <th>分区名称</th>
                    <th>分区大小</th>
                    <th>操作</th>
                  </thead>
                  <tbody data-bind="foreach: partitions">
                    <tr>
                      <td><input type="text" class="form-control" data-bind="value:name"/></td>
                      <td><input type="text" class="form-control" data-bind="value:size"/></td>
                      <td><a class="btn btn-xs btn-danger" data-bind="event:{click:function(data, event){ $root.delPartition_VM($parent,data,event) }}">删除</a></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="panel panel-default no-height" style="margin:0;border:none">
          <div class="panel-heading">高级选项 <span style="cursor:pointer;" class="glyphicon pull-right" data-bind="click: $root.step5(!$root.step5()),css:{'glyphicon-chevron-up': $root.step5(), 'glyphicon-chevron-down': !$root.step5()}"></span></div>
          <div class="panel-body" data-bind="visible: $root.step5">
              <div class="form-group col-md-6">
                  <div class="row">
                      <label class="col-sm-4 control-label">所属业务系统：</label>
                      <div class="col-sm-8">
                          <select class="form-control w-xs" data-bind="options: bussyList,optionsText:'name',optionsValue:'uuid',value:projectUuid,optionsCaption:'请选择'"></select>
                      </div>
                  </div>
              </div>
              <div class="clearfix"></div>
              <div class="form-group col-md-6">
                  <div class="row">
                      <label class="col-sm-4 control-label">备注：</label>
                      <div class="col-sm-8">
                          <textarea class="form-control" cols="30" rows="5" data-bind="value: remark"></textarea>
                      </div>
                  </div>
              </div>
          </div>
        </div>

      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-default btn-success"  data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 云主机 单个 -->

<!-- 云主机 多个 -->
<div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_VMMore , backdrop: 'static'}">
	<div class='modal-dialog modal-lg' role='document'>
	    <div class='modal-content'>
	    	<div class='modal-header'>
	        	<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请云主机服务</h3>
	      	</div>
		    <div class='modal-body'>
		        <ul class="nav nav-tabs service-step-select">
		          <li data-bind="css: {active: myStep()==1}"><a >1基本信息</a></li>
		          <li data-bind="css: {active: myStep()==2}"><a >2规格配置</a></li>
		          <li data-bind="css: {active: myStep()==3}"><a >3网络配置</a></li>
		          <li data-bind="css: {active: myStep()==4}"><a >4系统盘分区</a></li>
		          <li data-bind="css: {active: myStep()==5}"><a >5挂载云硬盘</a></li>
		          <li data-bind="css: {active: myStep()==6}"><a >6软件安装</a></li>
		          <li data-bind="css: {active: myStep()==7}"><a >7信息确认</a></li>
		        </ul>
				<div class="tab-content service-step-box" style="margin-top:20px;">
			    	  <div data-bind="visible: myStep()==1">
			        	<div class="form-inline">
			                <div class="input-group">
			                    <span class="input-group-addon">申请数量</span>
			                    <input type="text" class="form-control" data-bind="value: num_VM, valueUpdate: 'afterkeydown'">
			                </div>
			            </div>
			            <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
			                <table class="table table-striped">
				                <thead>
				                  <th>序号</th>
				                  <th>云主机名称<i style="color:red">*</i></th>
				                  <th>所属VDC<i style="color:red">*</i></th>
				                  <th>可用分区</th>
				                  <th>业务系统</th>
				                  <th>申请时长<i style="color:red">*</i></th>
				                  <th>套餐</th>
				                </thead>
				                <tbody data-bind="foreach: model_VM().vmCartInfo">
				                     <tr>
					                     <td><span data-bind="text: ($index()+1)"></span></td>
					                     <td><input type="text" class="form-control w" data-bind="value:vmName"></td>
					                     <td><select class="form-control w-xs" data-bind="options:  vdcList,optionsText:'name',optionsValue:'uuid',value:  vdcUuid,event:{change:$root.getAzForVdcChange},optionsCaption:'请选择'"></select></td>
					                     <td><select class="form-control w-xs" data-bind="options:  azList,optionsText:'name',optionsValue:'uuid',value:  azUuid,event:{change:$root.getVpcForAzChange},optionsCaption:'请选择'"></select></td>
					                     <td><select class="form-control w-xs" data-bind="options: bussyList,optionsText:'name',optionsValue:'uuid',value:projectUuid,optionsCaption:'请选择'"></select></td>
					                     <td>
											<div class="radio">
												<label class="form-inline"> <input type="radio" value="1" data-bind="checked: applyType,name: ($index()+1)" > 永久
												</label>
											</div>
											<div class="radio">
												<label class="form-inline"> 
												    <input type="radio" class="form-control" style="top: 2px;" value="2" data-bind="checked: applyType,name: ($index()+1)"> 
												    <select class="form-control" data-bind="options: $root.MonthsList,optionsText:'name',optionsValue:'value',value: applyNum"></select> 个月
												</label>
											</div>
											<div class="radio">
												<label class="form-inline"> 
													<input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="3" data-bind="checked: applyType,name: ($index()+1)">
		                                            <span class="">有效期至 </span>
		                                            <input type="text" style="width:126px" class="form-control applyDateFormat" data-bind="value: applyTime,name: ($index()+1)">
												</label>
											</div>
										</td>
										<td  >
										    <select class="form-control" data-bind="options: billRuleList,optionsText:'name',optionsValue:'value',value: billRuleUuid,optionsCaption:'请选择'"></select>
										</td>
					                 </tr>  
				                </tbody>
			                </table>
			            </div>
			          </div>
			
			          <div data-bind="visible: myStep()==2">
			            <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
			              <table class="table table-striped">
			                <thead>
			                  <th>序号</th>
			                  <th>云主机名称</th>
			                  <th>操作系统类型<i style="color:red">*</i></th>
			                  <th>操作系统版本<i style="color:red">*</i></th>
			                  <th>CPU(核)<i style="color:red">*</i></th>
			                  <th>内存(G)<i style="color:red">*</i></th>
			                  <th>存储(G)</th>
			                  <th>主机账号<i style="color:red">*</i></th>
			                  <th>密码<i style="color:red">*</i></th>
			                  <th>重复密码<i style="color:red">*</i></th>
			                </thead>
			                <tbody data-bind="foreach: model_VM().vmCartInfo">
			                  <tr>
                                <td><span data-bind="text: ($index()+1)"></span></td>
		                        <td><span data-bind="text:vmName"></span></td>
		                        <td><select class="form-control w-xs" data-bind="options:  osTypeList,optionsText:$data,optionsValue:$data,value:  osType,event:{change:$root.getOsVersionForOsTypeChange},optionsCaption:'请选择'"></select></td>
		                        <td><select class="form-control w-xs" data-bind="options:  osVersionList,optionsText:'opSysVersion',optionsValue:'uuid',value: osVersion,optionsCaption:'请选择'"></select></td>
		                        <td><select class="form-control w-xs" data-bind="options:  cpuList,optionsText:$data,optionsValue:$data,value:  cpu,optionsCaption:'请选择'"></select></td>
		                        <td><select class="form-control w-xs" data-bind="options:  memoryList,optionsText:$data,optionsValue:$data,value:  memory,optionsCaption:'请选择'"></select></td>
		                        <td><input type="text" class="form-control" data-bind="value:storage"></td>
		                        <td><input type="text" class="form-control" data-bind="value:account"></td>
		                        <td><input type="text" class="form-control" data-bind="value:password"></td>
		                        <td><input type="text" class="form-control" data-bind="value:repeatPassword"></td>
		                      </tr>
			                </tbody>
			              </table>
			            </div>
			          </div> 
			
			          <div data-bind="visible: myStep()==3">
			            <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
			              <table class="table table-striped">
			                <thead>
			                  <th>序号</th>
			                  <th>云主机名称</th>
			                  <th>VPC/IP池<i style="color:red">*</i></th>
			                  <th>网络名称</th>
			                  <th>指定IP</th>
			                  <th>绑定密钥</th>
			                </thead>
			                <tbody data-bind="foreach: model_VM().vmCartInfo">
			                    <tr>
			                       <td><span data-bind="text: ($index()+1)"></span></td>
			                       <td><span data-bind="text:vmName"></span></td>
			                       <td><select class="form-control w-xs" data-bind="options:  vpcList,optionsText:'name',optionsValue:'uuid',value:  vpcOrIpPoolList,event:{change:$root.vpcChange},optionsCaption:'请选择'"></select></td>
			                       <td><select class="form-control w-xs" data-bind="options:  networkList,optionsText:'name',optionsValue:'uuid',value:  vpcNetworkUuid,event:{change:$root.getIpForNetWorkChange},optionsCaption:'请选择'"></select></td>
			                       <td><select class="form-control w-x" data-bind="options:ipList,optionsText:'ip',optionsValue:'ip',value:ip,optionsCaption:'请选择'"></select></td>
			                       <td>
			                           <select class="form-control w-xs" data-bind="options:sshList,optionsText:'name',optionsValue:'uuid',value:sshUuid,optionsCaption:'请选择'"></select>
			                       </td>
			                    </tr>
			                </tbody>
			              </table>
			            </div>
			          </div>
			
			          <div data-bind="visible: myStep()==4">
			              <div data-bind="foreach: model_VM().vmCartInfo">
				              <div style="margin:0;margin-top:10px">
				              <span class="pull-left" style="font-size:16px;position:relative;top:8px;" data-bind="text:vmName"></span><a class="btn btn-info btn-sm pull-right" data-bind="click: $root.addPartition_VM">添加分区</a>
				              <div class="clearfix" style="height:10px;clear:both;"></div>
				              <div class="panel panel-default table-responsive no-height">
				                  <table class="table table-striped">
				                      <thead>
				                          <th>分区名称</th>
				                          <th>分区大小(G)</th>
				                          <th>操作</th>
				                      </thead>
				                      <tbody data-bind="foreach: partitions">
				                          <tr >
						                      <td><input type="text" class="form-control" data-bind="value:name"/></td>
						                      <td><input type="text" class="form-control" data-bind="value:size"/></td>
						                      <td><a class="btn btn-xs btn-danger" data-bind="event:{click:function(data, event){ $root.delPartition_VM($parent,data,event) }}">删除</a></td>
						                    </tr>
				                      </tbody>
				                  </table>
				               </div>
				               </div>
				           </div>    
			          </div>
			
			          <div data-bind="visible: myStep()==5">
			              <div data-bind="foreach: model_VM().vmCartInfo">
				              <div style="margin:0;margin-top:10px">
					              <span class="pull-left" style="font-size:16px;position:relative;top:8px;" data-bind="text:vmName"></span><a class="btn btn-info btn-sm pull-right" data-bind="click: $root.addVdisk_VM">添加云硬盘</a>
					              <div class="clearfix" style="height:10px;clear:both;"></div>
				                  <div class="panel panel-default table-responsive no-height">
				                      <table class="table table-striped">
						                  <thead>
						                    <th>序号</th>
						                    <th>云硬盘名称<i style="color:red">*</i></th>
						                    <th>存储大小</th>
						                    <th>所属服务</th>
						                    <th>申请时长</th>
						                    <th>套餐</th>
						                    <th>收费标准</th>
						                    <th>操作</th>
						                  </thead>
						                  <tbody data-bind="foreach: mountDisks">
						                    <tr>
						                        <td><span data-bind="text: ($index()+1)"></span></td>
						                        <td><input type="text" class="form-control" data-bind="value:name"/></td>
						                        <td><input type="text" class="form-control" data-bind="value:size"/></td>
						                        <td><input type="text" data-bind="value:serviceName" disabled/> <a class="btn btn-xs btn-default" data-bind="click:$root.selectVdiskService_VM">选择</a></td>
						                        <td><span data-bind="text: $parent.applyTimeText"></span></td>
						                        <td><select class="form-control w-xs" data-bind="options: billRuleList,optionsText:'name',optionsValue:'value',value:billRuleUuid,optionsCaption:'请选择'"></select></td>
						                        <td><span data-bind="text: price"></span></td>
						                        <td><a class="btn btn-xs btn-danger" data-bind="event:{click:function(data, event){ $root.delVdisk_VM($parent,data,event) }}">删除</a></td>
						                    </tr>
						                  </tbody>
						                </table>
				                  </div>
				              </div>
				          </div>    
			          </div>

			          <div  data-bind="visible: myStep()==6">
			              <div data-bind="foreach: model_VM().vmCartInfo">
			              <div style="margin:0;margin-top:10px">
				              <span class="pull-left" style="font-size:16px;position:relative;top:8px;" data-bind="text:vmName"></span><a class="btn btn-info btn-sm pull-right">添加软件</a>
				              <div class="clearfix" style="height:10px;clear:both;"></div>
				              <div class="panel panel-default table-responsive no-height">
				                  <table class="table table-striped">
				                      <thead>
				                          <th>软件名称</th>
				                          <th>软件分类</th>
				                          <th>软件类型</th>
				                          <th>软件版本</th>
				                          <th>静默安装属性</th>
				                          <th>操作</th>
				                      </thead>
				                      <tbody data-bind="foreach: softwares">
				                          <tr>
					                          <td>oracle 10g</td>
					                          <td>数据库</td>
					                          <td>oracle</td>
					                          <td>10g企业版</td>
					                          <td><a class="btn btn-xs btn-info">查看</a> <a class="btn btn-xs btn-default">修改</a></td>
					                          <td><a class="btn btn-xs btn-danger" onclick="confirm(\'确定删除吗？\')">删除</a></td>
				                          </tr>
				                      </tbody>
				                  </table>
				              </div>
				          </div> 
				          </div>   
			          </div> 
			
			         <div data-bind="visible: myStep()==7">
			            <div style="margin:0;margin-top:10px">
			              <span class="pull-left" style="font-size:16px;">云主机个数：<span data-bind="text: model_VM().vmCartInfo().length"></span></span>
			              <div class="clearfix" style="height:10px;clear:both;"></div>
			              <div class="panel panel-default table-responsive no-height">
			                <table class="table table-striped">
			                  <thead>
			                    <th>云主机名称</th>
			                    <th>CPU(核)</th>
			                    <th>内存(G)</th>
			                    <th>存储(G)</th>
			                    <th>软件个数</th>
			                    <th>云盘个数</th>
			                    <th>所属VDC</th>
			                    <th>申请时长</th>
			                    <th>收费标准</th>
			                  </thead>
			                  <tbody data-bind="foreach: model_VM().vmCartInfo">
			                    <tr>
			                      <td data-bind="text: vmName"></td>
			                      <td data-bind="text: cpu"></td>
			                      <td data-bind="text: memory"></td>
			                      <td data-bind="text: storage">100</td>
			                      <td data-bind="text: softwares().length"></td>
			                      <td data-bind="text: mountDisks().length"></td>
			                      <td data-bind="text: vdcText"></td>
			                      <td data-bind="text: applyTimeText"></td>
			                      <td data-bind="text: price"></td>
			                    </tr>
			                  </tbody>
			                </table>
			              </div>
			            </div>
			          </div>  
		
		        </div>
		        
		      </div>
		    <div class='modal-footer' style="text-align:center;">
		        <a class="btn btn-default btn-info " data-bind="visible: myStep()>1,click:pre">上一步</a>
		        <a class="btn btn-default btn-info " data-bind="visible: myStep()<7,click:next">下一步</a>
		        <a class="btn btn-default btn-info " data-bind="visible: myStep()==7,click:addToCart">添加到购物车</a>
		        <a class="btn btn-default btn-success " data-bind="visible: myStep()==7,click:addToOrder">提交订单</a>
		        <!-- <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a> -->
		    </div>
	    </div>
	</div>
</div>
<!-- 云主机 多个-->

    <!-- 选择云服务页面 -->
    <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: selectVdiskService , backdrop: 'static'}">
      <div class='modal-dialog modal-lg' role='document'>
        <div class='modal-content'>
          <div class='modal-header'>
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>选择云硬盘服务</h3>
          </div>
          <div class='modal-body form-horizontal'>
            <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px" data-bind="with: $root.table_Vdisk_VM">
             <table class="table table-striped">
               <thead>
                 <th></th>
                 <th>云硬盘服务名称<i style="color:red">*</i></th>
                 <th>类型<i style="color:red">*</i></th>
                 <th>是否收费<i style="color:red">*</i></th>
               </thead>
               <tbody>
               <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
                 <tr>
                   <td><input type="radio" style="top:-2px;" name="optionsRadios0"  data-bind="checkedValue: $data, checked: $parent.chosenItems"></td>
                   <td data-bind="text:serviceName"></td>
                   <td data-bind="text:diskType">类型</td>
                   <td data-bind="text:isFee">是/否</td>
                 </tr>
                 <!-- /ko -->
               </tbody>
             </table>
             <footer class="panel-footer" data-bind="with: $root.table_Vdisk_VM">
		        <ul class="pagination">
		            <li data-bind="css: leftPagerClass, click: prevPage">
		              <a href="#">&laquo;</a>
		            </li>
		            <!-- ko foreach: {data: (new Array(pages()))} -->
		            <li data-bind="css: $parent.pageClass($index() + 1)">
		              <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
		            </li>
		            <!-- /ko -->
		            <li data-bind="css: rightPagerClass, click: nextPage">
		              <a href="#">&raquo;</a>
		            </li>
		        </ul>
        	  </footer>
           </div>
           
         </div>
         <div class='modal-footer' style="text-align:center;">
            <a class="btn btn-default btn-info" data-bind="click: submitVdiskService">确定添加</a>
            <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
          </div>
        </div>
      </div>
    </div>
    <!-- 选择云服务页面 -->
    
    <!-- 添加软件 -->
    <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: selectSoftware , backdrop: 'static'}">
      <div class='modal-dialog modal-lg' role='document'>
        <div class='modal-content'>
          <div class='modal-header'>
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>选择软件</h3>
          </div>
          <div class='modal-body form-horizontal'>
            <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px" data-bind="with: $root.table_Software_VM">
             <table class="table table-striped">
               <thead>
                 <th></th>
                 <th>软件名称</th>
                 <th>软件类型</th>
                 <th>软件版本</th>
               </thead>
               <tbody>
                 <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
                 <tr>
                   <td><input type="checkbox" style="top:-2px;" name="optionsRadios0"  data-bind="checkedValue: $data, checked: $parent.chosenItems"></td>
                   <td data-bind="text:name"></td>
                   <td data-bind="text:softType"></td>
                   <td data-bind="text:version"></td>
                 </tr>
                 <!-- /ko -->
               </tbody>
             </table>
           </div>
           <footer class="panel-footer" data-bind="with: $root.table_Software_VM">
		        <ul class="pagination">
		            <li data-bind="css: leftPagerClass, click: prevPage">
		              <a href="#">&laquo;</a>
		            </li>
		            <!-- ko foreach: {data: (new Array(pages()))} -->
		            <li data-bind="css: $parent.pageClass($index() + 1)">
		              <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
		            </li>
		            <!-- /ko -->
		            <li data-bind="css: rightPagerClass, click: nextPage">
		              <a href="#">&raquo;</a>
		            </li>
		        </ul>
        	  </footer>
         </div>
         <div class='modal-footer' style="text-align:center;">
            <a class="btn btn-default btn-info" data-bind="click: submitSoftwareService">确定选择</a>
            <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
          </div>
        </div>
      </div>
    </div>
    <!-- 添加软件 -->
       <!-- 查看/修改软件参数 --> 
   <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: showSoftwareAttr , backdrop: 'static'}"> 
     <div class='modal-dialog modal-lg' role='document'> 
       <div class='modal-content'> 
         <div class='modal-header'> 
           <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>静默安装属性</h3> 
         </div> 
         <div class='modal-body form-horizontal'> 
           <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px"> 
            <table class="table table-striped"> 
              <thead> 
                <th>参数名称<i style="color:red">*</i></th> 
                <th>参数代码<i style="color:red">*</i></th> 
                <th>默认值<i style="color:red">*</i></th> 
				<th>修改值</th> 
              </thead> 
              <tbody  data-bind="foreach: $root.attrList_VM"> 
                <tr>
                <td data-bind="text:paramsName"></td>
                <td data-bind="text:paramsKey"></td>
                <td data-bind="text:defaultValue"></td>
                <td><input type="text" class="form-control" data-bind="value:paramsValue,disable:$root.disableAttr_VM" /></td>
                </tr> 
              </tbody> 
            </table> 
          </div> 
        </div> 
        <div class='modal-footer' style="text-align:center;"> 
           <a class="btn btn-default btn-info" data-bind="click:saveSoftwareAttr">保存</a> 
           <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a> 
         </div> 
       </div> 
     </div> 
   </div> 
   <!-- 查看/修改软件参数 -->
