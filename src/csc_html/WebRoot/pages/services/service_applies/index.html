<style>
  .ztree.release li a.curSelectedNode{background:none;color: #82939E;}
  .ztree.release li a:hover{border-color:#fff;background-color:#fff;}
  .col-xs-1, .col-xs-10, .col-xs-11, .col-xs-12, .col-xs-2, .col-xs-3, .col-xs-4, .col-xs-5, .col-xs-6, .col-xs-7, .col-xs-8, .col-xs-9{padding-left:5px;padding-right:5px;}
</style>
<div class="app-content-full">
	<div class="bg-light lter b-b wrapper-sm">
		<ol class="breadcrumb">
			<li>当前位置：</li>
			<li>服务</li>
			<li class="active">服务申请</li>
		</ol>
	</div>
	<!-- hbox layout -->
	<div class="hbox hbox-auto-xs bg-light ">
		<!-- column -->
		<div class="col w lter b-r" id="productListBox">
			<div class="vbox">
				<div class="wrapper b-b">
					<div class="left-title">
						<span style="font-size: 16px;">产品列表</span>
					</div>
				</div>
				<div class="row-row">
					<div class="cell scrollable hover">
						<div class="cell-inner">
							<div class='table-responsive'>
								<table class='table table-striped table-hover left-list'>
									<tbody>
										<tr class="active">
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(1)">VDC</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(2)">云主机</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(3)">云硬盘</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(4)">对象存储</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(5)">公网IP</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(6)">负载均衡器</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(7)">SSH密钥</a></td>
										</tr>
										<tr>
											<td><a href="javascript:void(0)" data-bind="click: $root.productTypeChecked(8)">自定义产品</a></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- /column -->

		<!-- column -->
		<div class="col">
			<div class="vbox">
				<div class="row-row">
					<div class="cell">
						<div class="cell-inner">
							<div class="wrapper-md">

								<div class="service-right-content">
									<div class="service-list-box row" data-bind="with: table_VDC">
										<!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														<tr>
															<th><img src="" alt="" width="60" height="60"></th>
															<td class="v-middle text-lg" ><span data-bind="text:serviceName"></span></td>
														</tr>
														<tr>
															<th>支持操作系统：</th>
															<td data-bind="text:osType"></td>
														</tr>
														<tr>
															<th>配额限制：</th>
															<td data-bind="text:isLimitDesc"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="text:serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_VDC">申请服务</a>
												</div>
											</div>
										</div>
										<!-- /ko -->
									</div>
									<footer class="panel-footer" data-bind="with: table_VDC">
										<ul class="pagination">
									        <li data-bind="css: leftPagerClass, click: prevPage">
									          <a href="#">&laquo;</a>
									        </li>
									        <!-- ko foreach: {data: (new Array(pages()))} -->
									        <li data-bind="css: $parent.pageClass($index() + 1)">
									          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
									        </li>
									        <!-- /ko -->
									        <li data-bind="css: rightPagerClass, click: nextPage">
									          <a href="#">&raquo;</a>
									        </li>
									    </ul>
							    	</footer>
								</div>

								<div class="service-right-content" style="display: none;">
									<div class="form-inline" style="margin-bottom: 10px;">
										<div class="input-group">
											<span class="input-group-addon">操作系统类型</span> <select name=""
												id="" class="form-control input-sm" data-bind="options:osTypeList,optionsText:'name',optionsValue:'value',value:searchParam().osType"></select>
										</div>
										<div class="input-group">
											<span class="input-group-addon">CPU(个)</span> <select name=""
												id="" class="form-control input-sm" data-bind="options:cpuList,optionsText:'name',optionsValue:'value',value:searchParam().cpu"></select>
										</div>
										<div class="input-group">
											<span class="input-group-addon">内存(G)</span> <select name=""
												id="" class="form-control input-sm" data-bind="options:memoryList,optionsText:'name',optionsValue:'value',value:searchParam().memory"></select>
										</div>
										<a class="btn btn-default btn-sm" data-bind="click: search">搜索</a>
									</div>

									<div class="service-list-box row" data-bind="with: table_VM">
										<!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														 <tr>
															<th><img src="assets/img/winhost.png" alt=""
																width="60" height="60"></th>
															<td class="v-middle text-lg" data-bind="text:serviceName"></td>
														</tr>
														<tr>
															<th>可用分区：</th>
															<td data-bind="text:azName"></td>
														</tr> 
														<tr>
															<th>操作系统类型：</th>
															<td data-bind="text:osType"></td>
														</tr>
														<tr>
															<th>CPU(个)：</th>
															<td data-bind="text:cpu"></td>
														</tr>
														<tr>
															<th>内存(G)：</th>
															<td data-bind="text:memory"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="text:serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_VMSingle">申请服务</a>
												</div>
											</div>
										</div>
									    <!-- /ko -->
									</div>
								    <footer class="panel-footer" data-bind="with: table_VM">
										<ul class="pagination">
									        <li data-bind="css: leftPagerClass, click: prevPage">
									          <a href="#">&laquo;</a>
									        </li>
									        <!-- ko foreach: {data: (new Array(pages()))} -->
									        <li data-bind="css: $parent.pageClass($index() + 1)">
									          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
									        </li>
									        <!-- /ko -->
									        <li data-bind="css: rightPagerClass, click: nextPage">
									          <a href="#">&raquo;</a>
									        </li>
									    </ul>
							    	</footer>
								</div>

								<div class="service-right-content" style="display: none;">

									<div class="service-list-box row" data-bind="with: table_Vdisk">
									    <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														<tr>
															<th><img src="assets/img/windisc.png" alt=""
																width="60" height="60"></th>
															<td class="v-middle text-lg"><span data-bind="text:serviceName"></span></td>
														</tr>
														<tr>
															<th>可用分区：</th>
															<td data-bind="text:azName"></td>
														</tr>
														<tr>
															<th>硬盘类型：</th>
															<td data-bind="text:diskType"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="text:serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_Vdisk">申请服务</a>
												</div>
											</div>
										</div>
										<!-- /ko -->
									</div>
									<footer class="panel-footer" data-bind="with: table_Vdisk">
										<ul class="pagination">
									        <li data-bind="css: leftPagerClass, click: prevPage">
									          <a href="#">&laquo;</a>
									        </li>
									        <!-- ko foreach: {data: (new Array(pages()))} -->
									        <li data-bind="css: $parent.pageClass($index() + 1)">
									          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
									        </li>
									        <!-- /ko -->
									        <li data-bind="css: rightPagerClass, click: nextPage">
									          <a href="#">&raquo;</a>
									        </li>
									    </ul>
							    	</footer>
								</div>
								

								<div class="service-right-content" style="display: none;">

									<div class="service-list-box row" data-bind="with: table_ObjectStorage">
										<!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														<tr>
															<th><img src="" alt="" width="60" height="60"></th>
															<td class="v-middle text-lg" data-bind="text:serviceName"><span></span></td>
														</tr>
														<tr>
															<th>可用分区：</th>
															<td data-bind="text:azName"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_ObjectStorage">申请服务</a>
												</div>
											</div>
										</div>
										<!-- /ko -->
									</div>
									<footer class="panel-footer" data-bind="with: table_ObjectStorage">
										<ul class="pagination">
									        <li data-bind="css: leftPagerClass, click: prevPage">
									          <a href="#">&laquo;</a>
									        </li>
									        <!-- ko foreach: {data: (new Array(pages()))} -->
									        <li data-bind="css: $parent.pageClass($index() + 1)">
									          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
									        </li>
									        <!-- /ko -->
									        <li data-bind="css: rightPagerClass, click: nextPage">
									          <a href="#">&raquo;</a>
									        </li>
									    </ul>
							    	</footer>
								</div>

								<div class="service-right-content" style="display: none;">

									<div class="service-list-box row" data-bind="with: table_PublicNetwork">
										<!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														<tr>
															<th><img src="" alt="" width="60" height="60"></th>
															<td class="v-middle text-lg"><span data-bind="text:serviceName"></span></td>
														</tr>
														<tr>
															<th>可用分区：</th>
															<td data-bind="text:azName"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_PublicNetwork">申请服务</a>
												</div>
											</div>
										</div>
										<!-- /ko -->
									</div>
									<footer class="panel-footer" data-bind="with: table_PublicNetwork">
										<ul class="pagination">
									        <li data-bind="css: leftPagerClass, click: prevPage">
									          <a href="#">&laquo;</a>
									        </li>
									        <!-- ko foreach: {data: (new Array(pages()))} -->
									        <li data-bind="css: $parent.pageClass($index() + 1)">
									          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
									        </li>
									        <!-- /ko -->
									        <li data-bind="css: rightPagerClass, click: nextPage">
									          <a href="#">&raquo;</a>
									        </li>
									    </ul>
							    	</footer>									
								</div>

								<div class="service-right-content" style="display: none;">
                                   	
									<div class="service-list-box row" data-bind="with: table_LB">
										<!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														<tr>
															<th><img src="" alt="" width="60" height="60"></th>
															<td class="v-middle text-lg"><span data-bind="text:serviceName"></span></td>
														</tr>
														<tr>
															<th>可用分区：</th>
															<td data-bind="text:azName"></td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td data-bind="text:isFee"></td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td data-bind="text:serviceDesc"></td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_LBSingle">申请服务</a>
												</div>
											</div>
										</div>
										<!-- /ko -->
									</div>
									<footer class="panel-footer" data-bind="with: table_LB">
										<ul class="pagination">
									        <li data-bind="css: leftPagerClass, click: prevPage">
									          <a href="#">&laquo;</a>
									        </li>
									        <!-- ko foreach: {data: (new Array(pages()))} -->
									        <li data-bind="css: $parent.pageClass($index() + 1)">
									          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
									        </li>
									        <!-- /ko -->
									        <li data-bind="css: rightPagerClass, click: nextPage">
									          <a href="#">&raquo;</a>
									        </li>
									    </ul>
							    	</footer>
								</div>
								
								

								<div class="service-right-content" style="display: none;">

									<div class="service-list-box row" data-bind="with: table_SSH">
									    <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
										<div class="col-xs-4">
											<div class="panel b-a">
												<div class="panel-heading wrapper-xs bg-primary no-border"></div>
												<table class="table table-properties">
													<tbody>
														<tr>
															<th><img src="" alt="" width="60" height="60"></th>
															<td class="v-middle text-lg"><span>xxxxxxx</span></td>
														</tr>
														<tr>
															<th>可用分区：</th>
															<td>分区1/分区2</td>
														</tr>
														<tr>
															<th>是否收费：</th>
															<td>是</td>
														</tr>
														<tr>
															<th>服务介绍：</th>
															<td>服务介绍文字。。</td>
														</tr>
													</tbody>
												</table>
												<div class="panel-footer text-center">
													<a href="javascript:void(0)"
														class="btn btn-success font-bold m-sm"
														data-bind="click: $root.add_SSH">申请服务</a>
												</div>
											</div>
										</div>
										<!-- /ko -->
									</div>
									
									<footer class="panel-footer" data-bind="with: table_SSH">
										<ul class="pagination">
									        <li data-bind="css: leftPagerClass, click: prevPage">
									          <a href="#">&laquo;</a>
									        </li>
									        <!-- ko foreach: {data: (new Array(pages()))} -->
									        <li data-bind="css: $parent.pageClass($index() + 1)">
									          <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
									        </li>
									        <!-- /ko -->
									        <li data-bind="css: rightPagerClass, click: nextPage">
									          <a href="#">&raquo;</a>
									        </li>
									    </ul>
							    	</footer>
								</div>

								<div class="service-right-content" style="display: none;">

								</div>

							</div>
							
							
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- page specific plugin scripts -->
	<script type="text/javascript">
var scripts = [null, 'assets/lib/zTree/js/jquery.ztree.core.js',
               'assets/lib/zTree/js/jquery.ztree.excheck.js',
               "assets/lib/moment/moment.js",
               "assets/lib/bootstrap-daterangepicker/daterangepicker.js", null];
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
	  function changeDateFormat(){
    	$('.applyDateFormat').val(moment().format('YYYY/MM/DD')).daterangepicker(
    	   	      {
    	   	        format:'YYYY/MM/DD',
    	   	        startDate: moment(),
    	   	        singleDatePicker:true,
    	   	        endDate: moment(),
    	   	        separator:'至'
    	   	      }
    	   	    );		  
	  }
	  
    $(".applyModeShow").on("shown.bs.modal",function(){
    	changeDateFormat();
    })
   
	  
    if(args.type){
    	//如果是普通用户清除产品列表
    	$("#productListBox").remove();
    	$(".service-right-content").eq(args.type).show().siblings().hide();
    }else{
    	$('.left-list tr td a').click(function(){
	    	var _tr = $(this).parent().parent();
	    	if(_tr.hasClass('active')) return;
	    	_tr.addClass('active').siblings().removeClass('active');
	    	$(".service-right-content").eq(_tr.index()).show().siblings().hide();
	    })
    };
    $(".form-edit").click(function(){
    	$(this).hide();
    	$(this).siblings('.form-save').show();
    	$(this).siblings('.row').find(".value-span").hide().next('.input-span').show();
    })
    $(".form-save").click(function(){
    	$(this).hide();
    	$(this).siblings('.form-edit').show();
    	$(this).siblings('.row').find('.value-span').show().html($(this).siblings('.row').find('input').val());
    	$(this).siblings('.row').find(".input-span").hide();
    })

    $(".product-add-btn").click(function(){
    	$(".add-praoduct").show().siblings().hide();
    })
    $(".product-delete-btn").click(function(){
    	if(confirm('确认删除吗？')){
    		console.log('执行删除！')
    	}
    })

  
    function ViewModel(){
	    var self = this;
	    
	    this.productType = ko.observable();
	    this.productTypeChecked = function(obj){
	    	self.productType(obj);
	    }
	    //vdc下拉列表
	    this.vdcList = ko.observableArray();
	   // this.loadCatelogs = function(){
        csc.rest.get("api/v5.0.0/cart/getselect", function(data){
        	self.vdcList(data);
        });
	    //}
	   //可用分区下拉列表
	    this.azList = ko.observableArray();
	   
	    this.vdcChange = function(obj){//根据变化的vdc及服务ID查找其下的可用分区
	    	var _self = this;
	    	_self.azList.removeAll();
	        csc.rest.get("api/v5.0.0/vdcs/"+obj.vdcUuid()+"/azs", function(data){
	        	_self.azList(data.results);
	        });	        
	    };
	    
	    this.azChangeGetVm = function(obj){	
	    	var _self = this;
	        csc.rest.get("api/v5.0.0/vms?vdcUuid="+obj.vdcUuid()+"&azUuid="+obj.azUuid(), function(data){
	        	_self.vmList(data.results);
	        });	    	
	    }
	    
	    this.azChangeGetVpc = function(obj){
	    	var _self = this;
	        csc.rest.get("api/v5.0.0/cart/getVpcList/"+obj.vdcUuid()+"/"+obj.azUuid(), function(data){
	        	console.log(data);
	        	_self.vpcList(data);
	        });
	    }
	    
	    this.vpcChange = function(obj){
	    	var _self = this;
	        csc.rest.get("api/v5.0.0/cart/getNetworkList/1/"+obj.vpcUuid(), function(data){//需修改为服务UUID作为参数传递
	        	_self.networkList(data);
	        });
	    }
	    
	    this.vpcChangeByPublic = function(obj){
	    	var _self = this;
	        csc.rest.get("api/v5.0.0/cart/getNetworkListByPublic/"+obj.serviceUuid()+"/"+obj.vpcUuid(), function(data){
	        	_self.networkList(data);
	        });
	    }
	    
	    this.vmChangeGetDate = function(obj){
	    	var _self = this;
  			var vmItem = _.findWhere(_self.vmList(), {uuid: _self.mountVmUuid()});
			if (typeof(vmItem) == "undefined") { 
				_self.applyTime("");
			}else{
				_self.applyTime(vmItem.expiryTime);
			}
	    	
	    }

	    var billRoles = [{name:'按天',value:'1'},{name:'按月',value:'2'},{name:'按季度',value:'3'},{name:'按年',value:'4'}];
	    var countries = [{name:'1',value:'1'},{name: '2',value:'2'},{name: '3', value:'3'}];
	    var osTypes = [{name:'windows',value:'windows'},{name:'linux',value:'linux'},{name:'vmware',value:'vmware'}];
	    var cups = [{name:'1',value:'1'},{name:'2',value:'2'},{name:'4',value:'4'}];
	    var memorys = [{name:'2',value:'2'},{name:'8',value:'8'},{name:'16',value:'16'}];
	    var projects = [{name:'业务系统1',value:'1'},{name:'业务系统2',value:'2'},{name:'业务系统3',value:'3'}];
	    var osVersions = [{name:'windows2003',value:'windows2003'},{name:'windows2008',value:'windows2008'},{name:'redhat6',value:'redhat6'}];
	    var netTypes = [{name:'外部网络',value:'1'},{name:'内部网络',value:'2'}];
	    var vpcOrIpPools=[{name:'vpc1',value:'1',type:'vpc'},{name:'ippool1',value:'11',type:'ippool'},{name:'ippool2',value:'12',type:'ippool'}];
	    
	    var netNames = [{name:'206',value:'206'},{name:'207',value:'207'},{name:'208',value:'208'}];
	    var ips = [{name:'192.168.206.11',value:'192.168.206.11'},{name:'192.168.206.12',value:'192.168.206.12'},{name:'192.168.206.13',value:'192.168.206.13'},{name:'192.168.206.14',value:'192.168.206.14'}]
	    //申请时长 下拉列表
	    this.applyList = ko.observableArray(countries);
	    this.billRoleList = ko.observableArray(billRoles);
	    this.osTypeList = ko.observableArray(osTypes);
	    this.cpuList = ko.observableArray(cups);
	    this.memoryList = ko.observableArray(memorys);
	    
	    this.projectList = ko.observableArray(projects);
	    this.osVersionList = ko.observableArray(osVersions);
	    this.netTypeList = ko.observableArray(netTypes)
	    this.vpcOrIpPoolList = ko.observableArray(vpcOrIpPools);
	    this.netNameList = ko.observableArray(netNames);
	    this.ipList = ko.observableArray(ips);
	    var sshIsMounts = [{name:'否',value:'NO'},{name: '是',value:'YES'}];
	    this.sshIsMountList = ko.observableArray(sshIsMounts);
	    //添加到购物车操作
		this.addToCart = function(){
			if(self.productType()==2){
				if(self.model_VM.isValid()){
					var jsonArray = self.model_VM.toJSON().vmCartInfo;
					nameCheck(jsonArray,'VM',function(pass){
						if(pass){
						 	 csc.rest.post('api/v5.0.0/cart',self.model_VM.toJSON(),function(data){
							 		systemMsg.alert('添加到购物车成功！');
							 		self.isAdd_VMSingle(false);
							    }); 
						}
					});
				}
			}else if(self.productType()==3){
				if(self.model_Vdisk.isValid()){
					var jsonArray = self.model_Vdisk.toJSON().vdiskCartInfo;
					nameCheck(jsonArray,'DISK',function(pass){
						if(pass){
						 	 csc.rest.post('api/v5.0.0/cart',self.model_Vdisk.toJSON(),function(data){
							 		systemMsg.alert('添加到购物车成功！');
							 		self.isAdd_VdiskSingle(false);
							 		self.isAdd_VdiskMore(false);
							    });
						}
					});
				}
			}else if(self.productType()==4){
				if(self.model_ObjectStorage.isValid()){
					var jsonArray = self.model_ObjectStorage.toJSON().objectStorageCartInfo;
					nameCheck(jsonArray,'OBJECT_STORAGE',function(pass){
						if(pass){
							 csc.rest.post('api/v5.0.0/cart',self.model_ObjectStorage.toJSON(),function(data){
							 		systemMsg.alert('添加到购物车成功！');
							 		self.isAdd_ObjectStorageSingle(false);
							 		self.isAdd_ObjectStorageMore(false);
							    });
						}
					});
				}
			}else if(self.productType()==5){
				if(self.model_PublicNetwork.isValid()){
					var jsonArray = self.model_PublicNetwork.toJSON().publicNetworkCartInfo;
					nameCheck(jsonArray,'PUBLICIP',function(pass){
						if(pass){
						 	 csc.rest.post('api/v5.0.0/cart',self.model_PublicNetwork.toJSON(),function(data){
							 		systemMsg.alert('添加到购物车成功！');
							 		self.isAdd_PublicNetworkSingle(false);
							 		self.isAdd_PublicNetworkMore(false);
							    }); 
						}
					});
				}
			}else if(self.productType()==6){
				if(this.model_LB.isValid()){
				 	var jsonArray = self.model_LB.toJSON().loadbalancerCartInfo;
					nameCheck(jsonArray,'LOAD_BALANCING',function(pass){
						if(pass){
						 	csc.rest.post('api/v5.0.0/cart',this.model_LB.toJSON(),function(data){
						 		systemMsg.alert('添加到购物车成功！');
						 		self.isAdd_LB(false);
						    });
						}
					});
				}
			}else if(self.productType()==7){
				if(this.model_SSH.isValid()){
					var jsonArray = self.model_SSH.toJSON().sshKeytCartInfo;
					nameCheck(jsonArray,'SECRET_KEY',function(pass){
						if(pass){
						 	csc.rest.post('api/v5.0.0/cart',this.model_SSH.toJSON(),function(data){
						 		systemMsg.alert('添加到购物车成功！');
						 		self.isAdd_SSH(false);
						    });
						}
					});
				}
			}
		}
	    
	    function nameCheck(jsonArray,type,callback){
	    	var count = 0;
			for(var i=0;i<jsonArray.length;i++){
				for(var j=i+1;j<jsonArray.length;j++){
					var name_i;
					var name_j;
					if(type == "VM"){
						name_i=jsonArray[i].vmName;
						name_j=jsonArray[j].vmName;
					}else{
						name_i=jsonArray[i].name;
						name_j=jsonArray[j].name;
					}
					if(name_i==name_j){
						systemMsg.alert("序号"+(i+1)+"与序号"+(j+1)+"名称重复，请修改后再提交");
						callback(false);
					}
				}
			 	csc.rest.get('api/v5.0.0/cart/nameCheck?type='+type+'&name='+name_i,function(result){
			 		 if(result.result==true){
						  alert(result.message);
						  callback(false);
					  }else{
						  callback(true);
// 						 	csc.rest.get('api/v5.0.0/orders/item/instance-name?type='+type+'&name='+result.name,function(result1){	
// 						 		 if(result1.result==true){
// 									  systemMsg.alert(result1.message);
// 									  callback(false);
// 								  }else{
// 									  count = count+1;
// 									  if(count==jsonArray.length){
// 										  callback(true);
// 									  }
// 								  }
// 						    });
					  }
			    });	
			}
	    }
	    
		//添加到购物车操作
		this.addToOrder = function(){
			if(self.productType()==1){
				var osTypeVdc="";
				for(var i=0;i<self.model_VDC().vdcCartInfo().osTypesSelelct().length;i++){
					osTypeVdc +=self.model_VDC().vdcCartInfo().osTypesSelelct()[i]+',';
				}
				osTypeVdc=osTypeVdc.substring(0,osTypeVdc.length-1);
				self.model_VDC().vdcCartInfo().osTypes(osTypeVdc);
				
			
				if(self.model_VDC.isValid()){
				 	// csc.rest.get('api/v5.0.0/orders/item/instance-name?type=VDC&name='+self.model_VDC().vdcCartInfo().name,function(result){	
// // 					 		 if(result.result==true){
// // 								  systemMsg.alert(result.message);
// // 							  }else{
								 var orderJson={};
								 var orderItems = [];
								 var metaData={};
								 var resBaseInfo = {};
								 var vdcQuotaList = [];
								 if(self.model_VDC().vdcCartInfo().quota()=="-1"){
									 resBaseInfo.limitQuota="false";
								 }else{
									 resBaseInfo.limitQuota="true";
									 vdcQuotaList.push({type:"CPU",value:self.model_VDC().vdcCartInfo().cpu()});
									 vdcQuotaList.push({type:"MEMORY",value:self.model_VDC().vdcCartInfo().memory()});
									 vdcQuotaList.push({type:"STORAGE",value:self.model_VDC().vdcCartInfo().storage()});
									 vdcQuotaList.push({type:"VPC",value:self.model_VDC().vdcCartInfo().vpcNum()});
									 vdcQuotaList.push({type:"VM",value:self.model_VDC().vdcCartInfo().vm()});
									 vdcQuotaList.push({type:"DISK",value:self.model_VDC().vdcCartInfo().disk()});
									 vdcQuotaList.push({type:"PUBLICIP",value:self.model_VDC().vdcCartInfo().publicIp()});
									 vdcQuotaList.push({type:"ROUTER",value:self.model_VDC().vdcCartInfo().router()});
									 vdcQuotaList.push({type:"FIREWALL",value:self.model_VDC().vdcCartInfo().fireWall()});
									 vdcQuotaList.push({type:"SECRET_KEY",value:self.model_VDC().vdcCartInfo().secretKey()});
									 vdcQuotaList.push({type:"OBJECT_STORAGE",value:self.model_VDC().vdcCartInfo().objectStorage()});
									 vdcQuotaList.push({type:"LOAD_BALANCING",value:self.model_VDC().vdcCartInfo().loadBalancer()});
								 }
								 resBaseInfo.vdcQuotaList=vdcQuotaList;
								 var charge = self.model_VDC().vdcCartInfo().charge();
								 var isBill;
								 if(charge=="YES"){
									 isBill = "true";
								 }else{
									 isBill = "false";
								 }
								 var expireValue;
								 if(self.model_VDC().vdcCartInfo().applyType()=="1"){
									 expireValue = "";
								 }else if(self.model_VDC().vdcCartInfo().applyType()=="2"){
									 expireValue = applyNum;
								 }else{
									 expireValue = applyTime;
								 }
								 metaData.resBaseInfo=resBaseInfo;
								 metaData.osType=self.model_VDC().vdcCartInfo().osTypesSelelct();
								 orderItems.push({
									 instanceName:self.model_VDC().vdcCartInfo().name(),
									 serviceUuid:self.model_VDC().vdcCartInfo().serviceUuid(),
									 isBill:isBill,
									 billcycle:self.model_VDC().vdcCartInfo().billRuleUuid(),
									 fee:self.model_VDC().vdcCartInfo().price(),
									 expireType:self.model_VDC().vdcCartInfo().applyType(),
									 expireValue:expireValue,
									 metaData:JSON.stringify(metaData),
									 desc:self.model_VDC().vdcCartInfo().remark()
								 })
								 
								 orderJson.resourceType = "VDC";
								 orderJson.orderItems = orderItems;

							 	 csc.rest.post('api/v5.0.0/order',orderJson,function(data){
								 		systemMsg.alert('成功提交订单！');
								 		self.isAdd_VDC(false);
								    }); 
// 							  }
					    //});
				}
			}else if(self.productType()==2){
				self.formatOrders_VM();
				if(this.model_VM.isValid()){
					var jsonArray = self.model_VM.toJSON().vmCartInfo;
					nameCheck(jsonArray,'VM',function(pass){
						if(pass){
						 	 csc.rest.post('api/v5.0.0/order-apply/vms',self.orders.toJSON(),function(data){
							 		systemMsg.alert('成功提交订单！');
							 		self.isAdd_VMSingle(false);
							    }); 
						}
					});
				}
			}else if(self.productType()==3){
				if(self.model_Vdisk.isValid()){
					
					nameCheck(jsonArray,'DISK',function(pass){
						if(pass){
							self.formatOrders_DISK();
							csc.rest.post('api/v5.0.0/cart',self.orders.toJSON(),function(data){
						 		systemMsg.alert('成功提交订单！');
						 		self.isAdd_VdiskSingle(false);
						 		self.isAdd_VdiskMore(false);
						    });
						}
					}); 
				}
			}else if(self.productType()==4){
				if(self.model_ObjectStorage.isValid()){
					var jsonArray = self.model_ObjectStorage.toJSON().objectStorageCartInfo;
					nameCheck(jsonArray,'OBJECT_STORAGE',function(pass){
						if(pass){
						 	 csc.rest.post('api/v5.0.0/orders',self.model_ObjectStorage.toJSON(),function(data){
							 		systemMsg.alert('成功提交订单！');
							 		self.isAdd_ObjectStorageSingle(false);
							 		self.isAdd_ObjectStorageMore(false);
							    }); 
						}
					});
				}
			}else if(self.productType()==5){
				if(self.model_PublicNetwork.isValid()){
					var jsonArray = self.model_PublicNetwork.toJSON().publicNetworkCartInfo;
					nameCheck(jsonArray,'PUBLICIP',function(pass){
						if(pass){
						 	 csc.rest.post('api/v5.0.0/orders',self.model_PublicNetwork.toJSON(),function(data){
							 		systemMsg.alert('成功提交订单！');
							 		self.isAdd_PublicNetwork(false);
							    });
						}
					});
				}
			}else if(self.productType()==6){
				if(this.model_LB.isValid()){
				 	var jsonArray = self.model_LB.toJSON().loadbalancerCartInfo;
					nameCheck(jsonArray,'LOAD_BALANCING',function(pass){
						if(pass){
						 	csc.rest.post('api/v5.0.0/orders',this.model_LB.toJSON(),function(data){
						 		systemMsg.alert('成功提交订单！');
						 		self.isAdd_LB(false);
						    });
						}
					});	
				}
			}else if(self.productType()==7){
				if(this.model_SSH.isValid()){
					var jsonArray = self.model_SSH.toJSON().sshKeytCartInfo;
					nameCheck(jsonArray,'SECRET_KEY',function(pass){
						if(pass){
						 	csc.rest.post('api/v5.0.0/orders',this.model_SSH.toJSON(),function(data){
						 		systemMsg.alert('成功提交订单！');
						 		self.isAdd_SSH(false);
						    });
						}
					});
				}
			}
		}
		
	    //################## 负载均衡申请 start ##################
	    this.model_LB = ko.validatedObservable({
	        loadbalancerCartInfo: ko.observableArray([])
	    });
	    
	    function lbVO(){
	    	this.name = ko.observable();
			this.vdcUuid = ko.observable();
			this.applyType = ko.observable();
			this.applyNum = ko.observable();
			this.applyTime = ko.observable();
			this.billRuleUuid = ko.observable();
			this.remark = ko.observable();
			this.price = ko.observable();
			this.azUuid = ko.observable();
			this.serviceUuid = ko.observable();
			
			this.azList = ko.observableArray([]);
			this.billRuleList = ko.observableArray([]);
			this.vdcList = ko.observableArray([]);
	    }
	    
	    this.isAdd_LBSingle = ko.observable(false);
	    this.add_LBSingle = function(obj){
	        var serviceUuid = obj.serviceUuid;
            var uri="serviceUuid="+serviceUuid;
            csc.rest.get("api/v5.0.0/cart/getCartSelectList?"+uri, function(result){
                      self.model_LB().loadbalancerCartInfo([]);
  		 	    	  var vo = new lbVO();
	  		 	      vo.vdcList(result.vdcList);
	  		 	      vo.billRuleList(formatCharge(result.chargeList));
	  		 	      vo.serviceUuid(serviceUuid);
                      
                      self.model_LB().loadbalancerCartInfo.push(vo);
                      self.isAdd_LBSingle(true);
            });
	    }
	    
	    this.num_LB = ko.observable().extend({max:20});
	     this.num_LB.subscribe(function(){
	    	self.model_LB().loadbalancerCartInfo([]);
	    	var num = self.num_LB();
	    	for(var i=0; i<num; i++){
	    		self.model_LB().loadbalancerCartInfo.push({
	    			name: ko.observable("").extend({required:true}),
					vdcUuid: ko.observable(""),
					applyType: ko.observable("1"),
					applyNum: ko.observable(""),
					//applyTime: ko.observable(new Date()),
					billRuleUuid: ko.observable("")
						
	    		})
	    	}
	    }); 
	    
	    //控制 负载均衡服务 申请页面显示
	    this.isAdd_LB = ko.observable(false);
	    this.add = function(){
	        self.isAdd_LB(true);
	        self.num_LB(1);
	        //self.loadCatelogs();
	    }
		//负载均衡列表数据
		this.table_LB = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/BALANCE',perPage:6});
		//################## 负载均衡  end ##################
		
		 
		
		
		
		//################## SSH密钥 start ##################
	    this.isAdd_SSH = ko.observable(false);
	    this.add_SSH = function(){
	    	self.isAdd_SSH(true);
	    	self.num_SSH(1);
	    	//self.loadCatelogs();
	    }
	    this.num_SSH = ko.observable().extend({max:20});
	    
	    this.model_SSH = ko.validatedObservable({
	    	sshKeytCartInfo: ko.observableArray([])
	    });
	    
	    this.num_SSH.subscribe(function(){
	    	self.model_SSH().sshKeytCartInfo([]);
	    	var num = self.num_SSH();
	    	for(var i=0; i<num; i++){
	    		self.model_SSH().sshKeytCartInfo.push({
	    			name: ko.observable("").extend({required:true}),
					vdcUuid: ko.observable(""),
					applyType: ko.observable("1"),
					applyNum: ko.observable(""),
					//applyTime: ko.observable(""),
					billRuleUuid: ko.observable("")
	    		})
	    	}
	    	
	    	
	    });
	    this.table_SSH = new DataTable([], {path: 'api/v5.0.0/cart/findLoadBalancer',perPage:6});
	    //################## SSH密钥 end ##################
	    
	    //################## 云硬盘 start ##################
	    this.isAdd_VdiskSingle = ko.observable(false);
	    this.isAdd_VdiskMore = ko.observable(false);
	    
	    var diskServiceUuid;
	    var diskChargeType;
	    this.diskCharge=ko.observable("");
	    this.add_Vdisk = function(obj){
	    	
	    	diskServiceUuid=obj.serviceUuid;
	    	csc.rest.get("api/v5.0.0/service/getServiceInfo/"+obj.serviceUuid, function(data){
	    		self.isAdd_VdiskSingle(true);
	    		if(data.charge==1){
	    			self.diskCharge("NO");
		    	}else{
		    		self.diskCharge("YES");
		    		diskChargeType = setArrayCharge(data.chargeType);
		    		console.log(diskChargeType);
		    	}
	    		csc.rest.get("api/v5.0.0/cart/getVdcList/"+obj.serviceUuid, function(result){
	    			self.vdcList(result);
			        self.num_vdisk(0);
			        self.num_vdisk(1);
		        });

	    	});
	    }
	    
	   function DISK_baseInfo(){
		   this.volumeSize = ko.observable();
		   this.vmUuid = ko.observable();
	   }
	    
	    this.formatOrders_DISK = function(){
	    	self.orders().orderItems([]);
	    	self.orders().resourceType("DISk");
	        self.model_VM().vdiskCartInfo().forEach(function (e){
	    	   var item =new itmes();
	    	   item.desc(e.remark());
	    	   item.azUuid(e.azUuid());
	    	   item.instanceName(e.name());
	    	   item.serviceUuid(e.serviceUuid());
	    	   if(e.charge()=='YES'){
	    		   item.isBill("true");
	    	   }else{
	    		   item.isBill("false");
	    	   }
	    	   item.expireType(e.applyType);
	    	   var expireValue="";
	    	   if(e.applyType == "2"){
	    		   expireValue = e.applyNum();
	    	   }else if(e.applyType == "3"){
	    		   expireValue = e.applyTime();
	    	   }
	    	   item.expireValue(expireValue);
	    	   item.billcycle(e.billRuleUuid());
	    	   item.fee(e.price());
	    	   
	    	   var meta=new metaData();
	    	   var baseInfo =new DISK_baseInfo();
	    	   
	    	   baseInfo.volumeSize(e.size());
	    	   baseInfo.vmUuid(e.mountVmUuid());
	    	   meta.resBaseInfo(baseInfo);
	    	   item.metaData(ko.toJSON(meta));
	    	   self.orders().orderItems.push(item);
	       });
	    }
	    
	    this.changeList_Vdisk = function(){
	    	self.isAdd_VdiskSingle(false);
	    	self.isAdd_VdiskMore(true);
	        self.num_vdisk(0);
	        self.num_vdisk(1);	    	
	    }
	    
	    this.changeSingle_Vdisk = function(){
	    	self.isAdd_VdiskSingle(true);
	    	self.isAdd_VdiskMore(false);
	        self.num_vdisk(0);
	        self.num_vdisk(1);	    	
	    }
	    
	    this.num_vdisk = ko.observable().extend({max:20});
	    
	    this.model_Vdisk = ko.validatedObservable({
	    	vdiskCartInfo: ko.observableArray([])
	    });
	    
	    this.num_vdisk.subscribe(function(){
	    	if(!self.num_vdisk.isValid()){
	    		return;
	    	}
	    	self.model_Vdisk().vdiskCartInfo([]);
	    	var num = self.num_vdisk();
        	for(var i=0; i<num; i++){
	    		self.model_Vdisk().vdiskCartInfo.push({
	    			name: ko.observable("").extend({required:true}),
	    			serviceUuid:ko.observable(diskServiceUuid),
					vdcUuid: ko.observable(""),
					size: ko.observable(""),
					azUuid:ko.observable(""),
					mountVmUuid: ko.observable(""),
					remark:ko.observable(""),
					billRuleUuid: ko.observable(""),
					applyTime:ko.observable(""),
					applyType:ko.observable("3"),
					azList:ko.observableArray([]),
					vmList:ko.observableArray([]),
					charge:ko.observable(self.diskCharge()),
					billRuleArray:ko.observableArray(diskChargeType),
					price:ko.observable(""),
					unitPrice:ko.observable("")
	    		})
	    	}	
	    });
	    this.table_Vdisk = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/DISK',perPage:6});
	    //################## 云硬盘 end ##################
	    
	  
	   
	    
	    //################## 对象存储 start ##################
	    this.isAdd_ObjectStorageMore = ko.observable(false);
	    this.isAdd_ObjectStorageSingle = ko.observable(false);
	    
	    var objStorageServiceUuid;
	    var objStorageChargeType;
	    this.objStorageCharge=ko.observable("");
	    
	    this.add_ObjectStorage = function(obj){
	    	self.isAdd_ObjectStorageSingle(true);
	    	objStorageServiceUuid=obj.serviceUuid;
	    	csc.rest.get("api/v5.0.0/service/getServiceInfo/"+obj.serviceUuid, function(data){
	    		console.log(data);
	    		self.isAdd_ObjectStorageSingle(true);
	    		if(data.charge==1){
	    			self.objStorageCharge("NO");
		    	}else{
		    		self.objStorageCharge("YES");
		    		objStorageChargeType = setArrayCharge(data.chargeType);
		    		console.log(objStorageChargeType);
		    	}
	    		csc.rest.get("api/v5.0.0/cart/getVdcList/"+obj.serviceUuid, function(result){
	    			self.vdcList(result);
			        self.num_ObjectStorage(0);
			        self.num_ObjectStorage(1);
		        });
	    	});
	    }
	    this.num_ObjectStorage = ko.observable().extend({max:20});
	    
	    this.model_ObjectStorage = ko.validatedObservable({
	    	objectStorageCartInfo: ko.observableArray([])
	    });
	    
	    this.changeList_ObjectStorage = function(){
	    	self.isAdd_ObjectStorageSingle(false);
	    	self.isAdd_ObjectStorageMore(true);
	    	self.num_ObjectStorage(0);
	    	self.num_ObjectStorage(1);	    	
	    }
	    
	    this.changeSingle_ObjectStorage = function(){
	    	self.isAdd_ObjectStorageSingle(true);
	    	self.isAdd_ObjectStorageMore(false);
	    	self.num_ObjectStorage(0);
	    	self.num_ObjectStorage(1);	    	
	    }
	    
	    this.num_ObjectStorage.subscribe(function(){
	    	if(!self.num_ObjectStorage.isValid()){
	    		return;
	    	}
	    	self.model_ObjectStorage().objectStorageCartInfo([]);
	    	var num = self.num_ObjectStorage();
	    	for(var i=0; i<num; i++){
	    		self.model_ObjectStorage().objectStorageCartInfo.push({
	    			name: ko.observable("").extend({required:true}),
	    			serviceUuid:ko.observable(objStorageServiceUuid),
					vdcUuid: ko.observable(""),
					azUuid: ko.observable(""),
					size: ko.observable(""),
					billRuleUuid: ko.observable(""),
					applyType: ko.observable("1"),
					applyNum: ko.observable(""),
					applyTime: ko.observable(""),
					remark:ko.observable(""),
					azList:ko.observableArray([]),
					charge:ko.observable(self.objStorageCharge()),
					billRuleArray:ko.observableArray(objStorageChargeType),
					price:ko.observable(""),
					unitPrice:ko.observable("")
	    		})
	    	}	    
	    	changeDateFormat();
	    });
	    this.table_ObjectStorage = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/OBJSTORAGE',perPage:6});
	  //################## 对象存储 end ##################
	  
	  //################## 公网IP start ##################
	    this.isAdd_PublicNetworkSingle = ko.observable(false);
	    this.isAdd_PublicNetworkMore = ko.observable(false);
	    
	    var pubNetworkServiceUuid;
	    var pubNetworkChargeType;
	    this.pubNetworkCharge=ko.observable("")
	    this.add_PublicNetwork = function(obj){
	    	pubNetworkServiceUuid=obj.serviceUuid;
	    	csc.rest.get("api/v5.0.0/service/getServiceInfo/"+obj.serviceUuid, function(data){
	    		console.log(data);
	    		self.isAdd_PublicNetworkSingle(true);
	    		if(data.charge==1){
	    			self.pubNetworkCharge("NO");
		    	}else{
		    		self.pubNetworkCharge("YES");
		    		pubNetworkChargeType = setArrayCharge(data.chargeType);
		    		console.log(pubNetworkChargeType);
		    	}
	    		csc.rest.get("api/v5.0.0/cart/getVdcList/"+obj.serviceUuid, function(result){
	    			self.vdcList(result);
	    	    	self.num_PublicNetwork(0);
	    	    	self.num_PublicNetwork(1);
		        });
	    	});
	    }
	    this.num_PublicNetwork = ko.observable().extend({max:20});
	    
	    this.model_PublicNetwork = ko.validatedObservable({
	    	publicNetworkCartInfo: ko.observableArray([])
	    });
	    
	    this.changeList_PublicNetwork = function(){
	    	self.isAdd_PublicNetworkSingle(false);
	    	self.isAdd_PublicNetworkMore(true);
	    	self.num_PublicNetwork(0);
	    	self.num_PublicNetwork(1);	    	
	    }
	    
	    this.changeSingle_PublicNetwork = function(){
	    	self.isAdd_PublicNetworkSingle(true);
	    	self.isAdd_PublicNetworkMore(false);
	    	self.num_PublicNetwork(0);
	    	self.num_PublicNetwork(1);	    	
	    }
	    
	    this.num_PublicNetwork.subscribe(function(){
	    	if(!self.num_PublicNetwork.isValid()){
	    		return;
	    	}
	    	self.model_PublicNetwork().publicNetworkCartInfo([]);
	    	var num = self.num_PublicNetwork();
	    	for(var i=0; i<num; i++){
	    		self.model_PublicNetwork().publicNetworkCartInfo.push({
	    			name: ko.observable("").extend({required:true}),
	    			serviceUuid:ko.observable(pubNetworkServiceUuid),
					vdcUuid: ko.observable(""),
					azUuid:ko.observable(""),
					vpcUuid: ko.observable(""),
					netWorkId: ko.observable(""),
					remark:ko.observable(""),
					billRuleUuid: ko.observable(""),
					applyType: ko.observable("1"),
					applyNum: ko.observable(""),
					applyTime: ko.observable(""),
					azList:ko.observableArray([]),
					vpcList:ko.observableArray([]),
					networkList:ko.observableArray([]),
					charge:ko.observable(self.pubNetworkCharge()),
					billRuleArray:ko.observableArray(pubNetworkChargeType),
					price:ko.observable(""),
					unitPrice:ko.observable("")
	    		})
	    	}	    
	    	changeDateFormat();	
	    });
	    this.table_PublicNetwork = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/IP',perPage:6});
	  //################## 公网IP end ##################
	  
	    this.osTypeArray = ko.observableArray([]);
	    
	    function setArrayCharge(value){
	    	var attr = getArrayByString(value);
	    	var arrayCharge = [];
	    	for(var i=0;i<attr.length;i++){
	    		if(attr[i]=="DAY"){
	    			arrayCharge.push({name:"按天",value:"DAY"});
	    		}else if(attr[i]=="MONTH"){
	    			arrayCharge.push({name:"按月",value:"MONTH"});
	    		}else if(attr[i]=="QUARTER"){
	    			arrayCharge.push({name:"按季度",value:"QUARTER"});
	    		}else{
	    			arrayCharge.push({name:"按年",value:"YEAR"});
	    		}
	    	}
	    	return arrayCharge;
	    }
	    
	  //################## VDC start ##################
	    this.isAdd_VDC = ko.observable(false);
	    this.add_VDC = function(obj){
	    	initVdc();
	    	var serviceUuid = obj.serviceUuid;
	    	self.model_VDC().vdcCartInfo().serviceUuid(serviceUuid);
	        csc.rest.get("api/v5.0.0/service/getServiceInfo/"+obj.serviceUuid, function(data){
	        	console.log(data);
		    	self.isAdd_VDC(true);
		    	self.productType(1);
		    	var osType = data.serviceVDC.osType;
		    	var isLimit = data.serviceVDC.isLimit;
		    	self.osTypeArray(getArrayByString(osType));
		    	console.log(setArrayCharge(data.chargeType));
		    	self.model_VDC().vdcCartInfo().billRuleArray(setArrayCharge(data.chargeType));
		    	if(data.charge==1){
		    		self.model_VDC().vdcCartInfo().charge("NO");
		    	}else{
		    		self.model_VDC().vdcCartInfo().charge("YES");
		    		getArrayByString(data.chargeType);
		    		//self.model_VDC().vdcCartInfo().billRuleArray(getArrayByString(data.chargeType));
		    	}
		    	if(isLimit=="no"){
		    		self.model_VDC().vdcCartInfo().quota("-1");
		    	}else{
		    		self.model_VDC().vdcCartInfo().quota("1");
		 	    	self.model_VDC().vdcCartInfo().cpu(data.serviceVDC.maxCpu);
		 	    	self.model_VDC().vdcCartInfo().memory(data.serviceVDC.maxMemory);
		 	    	self.model_VDC().vdcCartInfo().storage(data.serviceVDC.maxStorager);
		 	    	self.model_VDC().vdcCartInfo().vpcNum(data.serviceVDC.maxVPC);
		 	    	self.model_VDC().vdcCartInfo().vm(data.serviceVDC.maxVmNum);
		 	    	self.model_VDC().vdcCartInfo().disk(data.serviceVDC.maxDiskNum);
		 	    	self.model_VDC().vdcCartInfo().publicIp(data.serviceVDC.maxIpNum);
		 	    	self.model_VDC().vdcCartInfo().router(data.serviceVDC.maxRouterNum);
		 	    	self.model_VDC().vdcCartInfo().fireWall(data.serviceVDC.maxFireWallNum);
		 	    	self.model_VDC().vdcCartInfo().secretKey(data.serviceVDC.maxSSHNum);
		 	    	self.model_VDC().vdcCartInfo().objectStorage(data.serviceVDC.maxObjStorageNum);
		 	    	self.model_VDC().vdcCartInfo().loadBalancer(data.serviceVDC.maxLoadBalanceNum);
		    	}
	        });	    	
	    }
	    
	    this.sizeChange = function(data,event){
	    	var type = data.billRuleUuid();
	    	if(typeof(type)=="undefined"){
	    		return;
	    	}
	    	var price = data.unitPrice()*data.size();
    		if(type=="DAY"){
    			price+="元/天";
    		}else if(type=="MONTH"){
    			price+="元/月";
    		}else if(type=="QUARTER"){
    			price+="元/季度";
    		}else{
    			price+="元/年";
    		}
    		data.price(price);
	    }
	    
	    this.chargeTypeChange= function(arg,data,event){//vdc使用
	    	var serviceType;
	    	var type;
	    	var price;
	    	serviceType = self.model_VDC().vdcCartInfo();
	    	csc.rest.get("api/v5.0.0/billing/rules/calculate?serviceUuid="+serviceType.serviceUuid()+"&cycle="+serviceType.billRuleUuid(), function(result){
	    		type = serviceType.billRuleUuid();
	    		price = "费用:"+result.ruleList[0].unitPrice;
	    		if(type=="DAY"){
	    			price+="元/天";
	    		}else if(type=="MONTH"){
	    			price+="元/月";
	    		}else if(type=="QUARTER"){
	    			price+="元/季度";
	    		}else{
	    			price+="元/年";
	    		}
	    		serviceType.price(price);
	    	});
	    }
	    
	    this.chargeChange = function(arg,data,event){//除了VDC其他申请用这个方法
	    	csc.rest.get("api/v5.0.0/billing/rules/calculate?serviceUuid="+data.serviceUuid()+"&cycle="+data.billRuleUuid(), function(result){
	    		var type = data.billRuleUuid();
	    		var price;
	    		if(typeof(type)=="undefined"){
	    			data.price("");
	    			return;
	    		}
	    		if(arg=="size"){
	    			var num = data.size();
	    			data.unitPrice(result.ruleList[0].unitPrice);
	    			price = num*(result.ruleList[0].unitPrice);
	    			price = "费用:"+price;
	    		}else{
	    			price= "费用:"+result.ruleList[0].unitPrice;
	    		}
	    		 
	    		if(type=="DAY"){
	    			price+="元/天";
	    		}else if(type=="MONTH"){
	    			price+="元/月";
	    		}else if(type=="QUARTER"){
	    			price+="元/季度";
	    		}else{
	    			price+="元/年";
	    		}
	    		data.price(price);
	    	});	    	
	    }
	  	
	  	function getArrayByString(type){
	  		var a = type.split(',');
	  		return a;
	  	}
	  	
	  	this.model_VDC = ko.validatedObservable();
	  	function initVdc(){
	  		self.model_VDC = ko.validatedObservable({
		    	vdcCartInfo:ko.observable({
		    		serviceUuid:ko.observable(""),
					name: ko.observable(""),
					charge:ko.observable(""),
					osTypes : ko.observable(""),
					osTypesSelelct:ko.observableArray([]),
					quota:ko.observable("-1"),
					cpu: ko.observable(""),
					memory:ko.observable(""),
					storage: ko.observable(""),
					vm: ko.observable(""),
					disk: ko.observable(""),
					objectStorage: ko.observable(""),
					vpcNum:ko.observable(""),
					router: ko.observable(""),
					fireWall: ko.observable(""),
					publicIp: ko.observable(""),
					loadBalancer: ko.observable(""),
					secretKey: ko.observable(""),
					remark:ko.observable(""),
					billRuleUuid: ko.observable(""),
					applyType: ko.observable("1"),
					applyNum: ko.observable(""),
					applyTime: ko.observable(""),
					price:ko.observable(""),
					billRuleArray:ko.observableArray([])
		    	})
		    });
	  	}
	    
	    this.table_VDC = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/VDC',perPage:6});
	  //################## VDC end ##################
	  
	  
	  
	  
	  //################## 云主机start ##################
	  
	   this.orders=ko.validatedObservable({
		   resourceType : ko.observable(),
		   orderItems : ko.observableArray([])
	   })
	  
	   function itmes(){
		   this.instanceName= ko.observable();
		   this.serviceUuid = ko.observable();
		   this.isBill = ko.observable();
		   this.expireType =  ko.observable();
		   this.expireValue = ko.observable();
		   this.billcycle = ko.observable();
		   this.fee = ko.observable();
		   this.metaData = ko.observable();
		   this.desc = ko.observable();
		   this.azUuid = ko.observable();
	   }
	   
	   function metaData(){
		   this.resBaseInfo = ko.observable();
	   }
	   
	   function VM_baseInfo (){
		   this.azUuid = ko.observable();
		   this.osType = ko.observable();
		   this.osVersion = ko.observable();
		   this.expiryTime = ko.observable();
		   this.imageUuid = ko.observable();
		   this.memory = ko.observable();
		   this.name = ko.observable();
		   this.storage = ko.observable();
		   this.vcpu = ko.observable();
		   this.vdcUuid = ko.observable();
		   this.vpcUuid = ko.observable();
		   this.diskList = ko.observableArray([]);
		   this.networkList = ko.observableArray([]);
	   }
	   
	   function VM_disk (){
		   this.volumeName = ko.observable();
		   this.volumeSize = ko.observable();
	   }
	   function VM_network (){
		   this.networkId = ko.observable();
	   }
	   
	  
	   this.formatOrders_VM = function(){
		   self.orders().orderItems([]);
		   
           self.orders().resourceType("VM");
	       self.model_VM().vmCartInfo().forEach(function (e){debugger;
	    	   var item =new itmes();
	    	   item.desc(e.remark());
	    	   item.azUuid(e.azUuid());
	    	   item.instanceName(e.vmName());
	    	   item.serviceUuid(e.serviceUuid());
	    	   item.isBill(e.charge());
	    	   item.expireType(e.applyType);
	    	   var expireValue="";
	    	   if(e.applyType == "2"){
	    		   expireValue = e.applyNum();
	    	   }else if(e.applyType == "3"){
	    		   expireValue = e.applyTime();
	    	   }
	    	   item.expireValue(expireValue);
	    	   item.billcycle(e.billRuleUuid());
	    	   item.fee(e.price());
	    	   
	    	   
	    	   var meta=new metaData();
	    	   var baseInfo =new VM_baseInfo();
	    	   
	    	   baseInfo.azUuid(e.azUuid());
	    	   baseInfo.osType(e.osType());
	    	   baseInfo.osVersion(e.osVersion());
	    	   baseInfo.memory(e.memory);
	    	   baseInfo.name(e.vmName);
	    	   baseInfo.storage(e.storage);
	    	   baseInfo.vcpu(e.cpu);
	    	   baseInfo.vdcUuid(e.vdcUuid);
	    	   baseInfo.vpcUuid(e.vpcUuid);
	    	   
	    	   e.mountDisks().forEach(function(m){
	    		  var disk=new VM_disk();
	    		  disk.volumeName(m.name());
	    		  disk.volumeSize(m.size());
	    		  baseInfo.diskList.push(disk)
	    	   });
	    	   meta.resBaseInfo(baseInfo);
	    	   item.metaData(ko.toJSON(meta));
	    	   self.orders().orderItems.push(item);
	       });
	   }
	   
	  
	  
	    this.isAdd_VMSingle = ko.observable(false);
	    this.isAdd_VM = ko.observable(false);
	    var editObject;
	    function Info(){
            this.vmName =  ko.observable("").extend({required:true});
            this.computerName = ko.observable("");
            this.projectUuid = ko.observable("");
            this.vdcUuid = ko.observable("");
            this.vdcText = ko.pureComputed(function(){
            	var item = _.findWhere(self.vdcList(), {uuid: this.vdcUuid()});
            	if(item!=null){
            		return item.name;
            	}else{
            		return "";
            	}
            	
            }, this);
            this.applyTimeText = ko.pureComputed(function(){
            	if(this.applyType()=="1"){
            		return "永久";
            	}else if(this.applyType()=="2"){
            		return this.applyNum()+"个月";
            	}else{
            		return this.applyTime();
            	}
            }, this);
            this.desc = ko.observable("");
            this.billRuleUuid = ko.observable("");
            this.applyTime = ko.observable("");
            this.networkType = ko.observable("");
            
            this.ipPoolUuid = ko.pureComputed(function(){
            	var item = _.findWhere(this.vpcList(), {uuid: this.vpcOrIpPoolList()});
            	if(item!=null){
            		return item.uuid;//item.type!="vpc" ? item.value : "";
            	}else{
            		return "";
            	}
            	
            }, this);
            this.vpcUuid = ko.pureComputed(function(){
            	var item = _.findWhere(this.vpcList(), {uuid: this.vpcOrIpPoolList()});
            	if(item!=null){
            		return item.uuid;//item.type=="vpc" ? item.value : "";
            	}else{
            		return "";
            	}
            }, this);
			
            this.vpcOrIpPoolList = ko.observable("");
            
            this.vpcNetworkUuid = ko.observable("");
            this.ip = ko.observable("");
            this.account = ko.observable("");
            this.password = ko.observable("");
            this.osType = ko.observable("");
            this.osVersion = ko.observable();
            this.cpu = ko.observable();
            this.memory = ko.observable();
            this.storage = ko.observable();
            this.applyType = ko.observable("");
            this.applyNum = ko.observable("");
            this.azUuid = ko.observable("");
            this.userName = ko.observable("");
            this.password = ko.observable("");
            this.repeatPassword = ko.observable("");
            this.sshIsMount = ko.observable("NO");
            this.sshUuid = ko.observable("");
            this.serviceUuid = ko.observable("");
            this.remark =ko.observable();
            this.price =ko.observable();
            this.charge =ko.observable();
                            
            //分区
            this.partitions = ko.observableArray([]);
            //硬盘
            this.mountDisks = ko.observableArray([]);
            
            this.softwares = ko.observableArray([]);
            
            this.id = ko.observable();
            this.vdcUuid =ko.observable("");
            this.azUuid=ko.observable(""),
            this.remark=ko.observable(""),
            this.account=ko.observable("");
            this.password=ko.observable("");
            this.repeatPassword=ko.observable("");
            this.sshIsMount=ko.observable("");
			
            this.vdcList=ko.observableArray([]);
            this.azList=ko.observableArray([]);
            this.osTypeList=ko.observableArray([]);
            this.osVersionList=ko.observableArray([]);
            this.cpuList=ko.observableArray([]);
            this.memoryList=ko.observableArray([]);
            this.vpcList=ko.observableArray([]);
            this.networkList=ko.observableArray([]);
            this.bussyList=ko.observableArray([]);
            this.sshList=ko.observableArray([]);
            this.billRuleList=ko.observableArray([]);
   		}
	    //单个
	    this.add_VMSingle = function(obj){
	    	    var serviceUuid = obj.serviceUuid;
	            var uri="serviceUuid="+serviceUuid;
	            csc.rest.get("api/v5.0.0/cart/getCartSelectList?"+uri, function(result){
	                      self.model_VM().vmCartInfo([]);
	  		 	    	  var info = new Info();
	  		 	    	  info.vdcList(result.vdcList);
	                      info.osTypeList(result.osTypeList);
	                      info.cpuList(result.cpuList);
	                      info.memoryList(result.memoryList);
	                      info.billRuleList(formatCharge(result.chargeList));
	                      info.serviceUuid(serviceUuid);
	                      
	                      self.model_VM().vmCartInfo.push(info);
	  		 		      self.isAdd_VMSingle(true);
	            });
	        }
	    	
	    
	    //多个
	    this.add_VM = function(){
	    	self.isAdd_VM(true);
	    	self.num_VM(1); 	
	    	//self.loadCatelogs();
	    	self.myStep(1);
	    	self.isUpdate_partition(false);
	    }
	    this.num_VM = ko.observable().extend({max:20});
	    this.model_VM = ko.validatedObservable({
	    	vmCartInfo: ko.observableArray([])
	    });
	    this.num_VM.subscribe(function(){
	    	self.model_VM().vmCartInfo([]);
	    	var num = self.num_VM();
	    	for(var i=0; i<num; i++){
	    		self.model_VM().vmCartInfo.push(new Info());
	    	}
	    });
	    
	    function MountDiskVO(){
	    	this.name = ko.observable();
		  	this.size = ko.observable();
		  	this.type = ko.observable();
		  	this.serviceUuid = ko.observable();
		  	this.serviceName = ko.observable();
		  	this.billRuleUuid = ko.observable();
		  	this.applyType = ko.observable();
		  	this.applyNum = ko.observable();
		  	this.applyTime = ko.observable();
		  	this.applyText = ko.observable();
            this.billRuleList=ko.observableArray([]);
            this.price = ko.observable();
	    }
	    
	    function formatCharge(attr){
	    	var arrayCharge = [];
	    	if(attr !=null){
	    		for(var i=0;i<attr.length;i++){
		    		if(attr[i]=="DAY"){
		    			arrayCharge.push({name:"按天",value:"DAY"});
		    		}else if(attr[i]=="MONTH"){
		    			arrayCharge.push({name:"按月",value:"MONTH"});
		    		}else if(attr[i]=="QUARTER"){
		    			arrayCharge.push({name:"按季度",value:"QUARTER"});
		    		}else{
		    			arrayCharge.push({name:"按年",value:"YEAR"});
		    		}
		    	}
	    	}
	    	return arrayCharge;
	    }
	     
	    this.addVdisk_VM = function(){
	    	var vo=new MountDiskVO();
	    	self.model_VM().vmCartInfo()[0].mountDisks.push(vo);
	    }
	    this.delVdisk_VM = function(object){
	       self.model_VM().vmCartInfo()[0].mountDisks.remove(object);
	    }
	    //选择云硬盘服务
	    this.selectVdiskService = ko.observable(false);
	    this.table_Vdisk_VM = null;
	    this.selectVdiskService_VM = function(object){
	    	self.table_Vdisk_VM = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/DISK',perPage:6});
	    	self.selectVdiskService(true);
	    	editObject = object;
	    }
	    this.submitVdiskService = function(){
        	editObject.serviceName(self.table_Vdisk_VM.chosenItems().serviceName);
            editObject.serviceUuid(self.table_Vdisk_VM.chosenItems().serviceUuid);
            var attr;
            if(self.table_Vdisk_VM.chosenItems().feeType !=null && self.table_Vdisk_VM.chosenItems().feeType!=""){
            	attr=self.table_Vdisk_VM.chosenItems().feeType.split(",")
            }
            editObject.billRuleList(formatCharge(attr));
            self.selectVdiskService(false);
	    }
	    
	    
	    function PartitionVO(){
	    	this.name = ko.observable();
		  	this.size = ko.observable();
	    }
	    this.addPartition_VM = function(){
	    	var vo=new PartitionVO();
	    	self.model_VM().vmCartInfo()[0].partitions.push(vo);
	    }
	    this.delPartition_VM = function(object){
		    self.model_VM().vmCartInfo()[0].partitions.remove(object);
		}
	    
	    
	    this.chargeChangeCart = function(arg,data,event){//vm
            var serviceUuid=data.serviceUuid();
            var cycle=data.billRuleUuid();
 	    	csc.rest.get("api/v5.0.0/billing/rules/calculate?serviceUuid="+serviceUuid+"&cycle="+cycle, function(result){
 	    		var price = 0;
 	    		var cpu=data.cpu!=null?data.cpu():0;
 	    		var memory=data.memory!=null?data.memory():0;
 	    		var storage=data.storage!=null?data.storage():0;
 	    		var size=data.size!=null?data.size():0;
 	    		var type=data.billRuleUuid();
 	    	   
               if(typeof(type)=="undefined" ){
            	   data.price("");
   	    			return;
               }
	               
 	    		result.ruleList.forEach(function(e){
 	    			if(e.attrType=='CPU'){
 	    				price += cpu * e.unitPrice;
 	    			}else if(e.attrType=='MEMORY'){
 	    				price += memory * e.unitPrice;
 	    			}else if(e.attrType=='STORAGE'){
 	    				price += storage * e.unitPrice;
 	    			}else if(e.attrType=='DISK'){
 	    				price += size * e.unitPrice;
 	    			}
 	    		});
 	    		if(type=="DAY"){
 	    			price+="元/天";
 	    		}else if(type=="MONTH"){
 	    			price+="元/月";
 	    		}else if(type=="QUARTER"){
 	    			price+="元/季度";
 	    		}else{
 	    			price+="元/年";
 	    		}
 	    		data.price(price);
 	    	});	    	
 	    }
	    
	    
	    
	    this.getAzForVdcChange = function(data){
	        csc.rest.get("api/v5.0.0/cart/getAzList/"+data.serviceUuid()+"/"+data.vdcUuid(), function(result){
	        	data.azList(result);
	        });
	        if(data.bussyList!=null){
	        	csc.rest.get("api/v5.0.0/bussys?vdcuuid="+data.vdcUuid(),function(result2){
		        	data.bussyList(result2.results);
		        }); 
        	}
	    };
	    this.getVpcForAzChange = function(data){
	        csc.rest.get("api/v5.0.0/cart/getVpcList/"+data.vdcUuid()+"/"+data.azUuid(), function(result){
	        	data.vpcList(result);
	        });
	    }
	    this.getOsVersionForOsTypeChange = function(data){
	    	csc.rest.get("api/v5.0.0/cart/getOsVersionList/"+data.azUuid()+"/"+data.osType(), function(result){debugger;
	        	data.osVersionList(result);
	        });
	    }
	    
	   //查询
      	this.searchParam = ko.observable({
    	  	osType: "",
    	  	cpu:"",
    	  	memory:""
      	})
      	this.search = function(){
        	self.table_VM.params(this.searchParam());
      	}
	   
      	// this.showMessage= ko.observable();   ///初始化的时候div是visible的
        this.myStep = ko.observable(1);         
        
      	this.next = function(){
        	this.myStep(this.myStep()+1)
        }
	    
      	this.pre = function(){
      		this.myStep(this.myStep()-1)
      	}
        
      	this.step1 = ko.observable(false);
        this.step2 = ko.observable(true);
        this.step3 = ko.observable(true);
        this.step4 = ko.observable(true);
        this.step5 = ko.observable(true);
        

        this.isAdd_Software = ko.observable(false);
        this.addSoftware = function(){
          this.isAdd_Software(true);
        }
        this.addSoftwareToList = function(){
          this.isAdd_Software(false);
        }

      	
	    this.table_VM = new DataTable([], {path: 'api/v5.0.0/service/getServiceList/VM',perPage:6});
	    
	  //################## 云主机end ##################
	  
    }
    

	ko.applyBindings(new ViewModel, $('#page-content')[0]); 
	
	

  });
  
</script>
<!-- 负载均衡 单个 start -->
    <div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_LBSingle }">
        <div class='modal-dialog modal-lg'>
            <div class='modal-content' >
                <div class='modal-header'>
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
                    <h3 class='modal-title'>负载均衡器服务</h3>
                </div>
                <div class='modal-body form-horizontal row' data-bind="foreach: model_LB().loadbalancerCartInfo">
                     <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">负载均衡器名称：</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control w" data-bind="value: name">
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">所属VDC：</label>
                            <div class="col-sm-8">
                                <select class="form-control w-xs" data-bind="options: vdcList,optionsText:'name',optionsValue:'uuid',value: vdcUuid,event:{change:$root.getAzForVdcChange},optionsCaption:'请选择'"></select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">可用分区：</label>
                            <div class="col-sm-8">
                                <select class="form-control w-xs" data-bind="options: azList,optionsText:'name',optionsValue:'uuid',value: azUuid,optionsCaption:'请选择'"></select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">备注：</label>
                            <div class="col-sm-8">
                                <textarea class="form-control" cols="30" rows="5" data-bind="value: remark"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div> 
                     <div class="form-group col-md-6">
                        <div class="row">
                                    <label class="col-xs-4 control-label">申请时长：</label>
                                    <div class="col-sm-8">
                                        <div class="radio">
                                            <label class="form-inline">
                                                <input type="radio" name="optionsRadiosi" value="1" data-bind="checked: applyType"> 永久
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label class="form-inline">
                                                <input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="2" data-bind="checked: applyType">
                                                <select class="form-control" data-bind="options: $root.applyList,optionsText:'name',optionsValue:'value',value: applyNum"></select> 个月
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label class="form-inline">
                                                <input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="3" data-bind="checked: applyType">
                                                <span class="">有效期至 </span>
                                                <input type="text" style="width:126px" class="form-control applyDateFormat" data-bind="value: applyTime">
                                            </label>
                                        </div>
                                    </div>
                                </div>
                    </div> 
                     <div class="clearfix"></div>
                    <div class="form-group col-md-6">
                        <div class="row">
                            <label class="col-sm-4 control-label">套餐：</label>
                            <div class="col-sm-3">
                                <select class="form-control w-xs" data-bind="options: billRuleList,optionsText:'name',optionsValue:'value',value: billRuleUuid,event:{change:$root.chargeChangeCart},optionsCaption:'请选择'"></select>
                            </div>
                            <span class="control-label col-sm-5 text-left" style="height:34px;" data-bind="text:price"></span>
                        </div>
                    </div> 
                </div>
                <div class='modal-footer' style="text-align:center;">
                    <a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
			        <a class="btn btn-default btn-success"  data-bind="click: $root.addToOrder">提交订单</a>
			        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
                </div>
            </div>
        </div>
    </div>
<!-- 负载均衡 单个 end -->	
<!-- 负载均衡 多个start -->
<!-- 
<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAdd_LB }">
	<div class='modal-dialog modal-lg' role='document'>
        <div class='modal-content'>
			<div class='modal-header'>
				<button type="button" class="close" data-dismiss="modal">
					<span aria-hidden="true">&times;</span>
				</button>
				<h3 class='modal-title'>申请负载均衡器</h3>
			</div>
			<div class='modal-body form-horizontal'>
				<div class="form-inline">
					<div class="input-group">
						<span class="input-group-addon">申请数量</span> <input type="text"
							class="form-control" data-bind="value: num_LB, valueUpdate: 'afterkeydown'">
					</div>
				</div>
				<div class="panel panel-default table-responsive no-height"
					style="margin: 0; margin-top: 10px">
					<table class="table table-striped">
						<thead>
							<th>序号</th>
							<th>负载均衡器名称<i style="color: red">*</i></th>
							<th>所属VDC<i style="color: red">*</i></th>
							<th>申请时长<i style="color: red">*</i></th>
							<th>套餐</th>
							<th>收费标准</th>
						</thead>
						<tbody id="applyServiceBalancingBox"
							data-bind="foreach: model_LB().loadbalancerCartInfo">
							<tr>
								<td><span data-bind="text: ($index()+1)"></span></td>
								<td><input type="text" class="form-control input-sm"
									data-bind="value: name"></td>
								<td><select class="form-control input-sm" data-bind="options:$parent.vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid"></select></td>
								<td>
									<div class="radio">
										<label class="form-inline"> <input type="radio" value="1" data-bind="checked: applyType,name: ($index()+1)" > 永久
										</label>
									</div>
									<div class="radio">
										<label class="form-inline"> <input type="radio"
											class="form-control" style="top: 2px;" value="2" data-bind="checked: applyType,name: ($index()+1)"> 
											<select class="form-control"  data-bind="options:$parent.applyList,optionsText:'name',optionsValue:'value',value:applyNum"></select> 个月
										</label>
									</div>
									<div class="radio disabled">
										<label class="form-inline"> <input type="radio"
											class="form-control" style="top: 2px;" value="3" data-bind="checked: applyType,name: ($index()+1)"> 
											<input style="width: 206px" class="form-control" data-bind="datePicker : MyDate" type="date">
										</label>
									</div>
								</td>
								<td><select class="form-control"  data-bind="options:$parent.billRoleList,optionsText:'name',optionsValue:'value',value:billRuleUuid"></select></td>
								<td>0.5元/小时</td>
							</tr>
						</tbody>
					</table>
				</div>
            </div>
			<div class='modal-footer' style="text-align: center;">
				<a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a> <a
					class="btn btn-default btn-success" data-bind="click: $root.addToOrder">提交订单</a> <a
					class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
			</div>
		</div>
	</div>
</div>
 -->
<!-- 负载均衡 多个 end -->	
<!-- SSH密钥 start -->
  <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAdd_SSH }">
	<div class='modal-dialog modal-lg' role='document'>
  
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请SSH密钥服务</h3>
      </div>
      <div class='modal-body form-horizontal'>
        <div class="form-inline">
          <div class="input-group">
             <span class="input-group-addon">申请数量</span>
             <input type="text" class="form-control"  data-bind="value: num_SSH, valueUpdate: 'afterkeydown'">
          </div>
        </div>
        <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
          <table class="table table-striped">
            <thead>
              <th>序号</th>
              <th>SSH密钥名称<i style="color:red">*</i></th>
              <th>所属VDC<i style="color:red">*</i></th>
              <th>申请时长<i style="color:red">*</i></th>
              <th>套餐</th>
              <th>收费标准</th>
            </thead>
            <tbody id="applyServiceSSHBox" data-bind="foreach: model_SSH().sshKeytCartInfo">
                  <tr>
						<td><span data-bind="text: ($index()+1)"></span></td>
						<td><input type="text" class="form-control input-sm"
							data-bind="value: name"></td>
						<td><select class="form-control input-sm" data-bind="options:$parent.vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid"></select></td>
						<td>
							<div class="radio">
								<label class="form-inline"> <input type="radio" value="1" data-bind="checked: applyType,name: ($index()+1)" > 永久
								</label>
							</div>
							<div class="radio">
								<label class="form-inline"> <input type="radio"
									class="form-control" style="top: 2px;" value="2" data-bind="checked: applyType,name: ($index()+1)" > 
									<select class="form-control"  data-bind="options:$parent.applyList,optionsText:'name',optionsValue:'value',value:applyNum"></select> 个月
								</label>
							</div>
							<div class="radio disabled">
								<label class="form-inline"> <input type="radio"
									class="form-control" style="top: 2px;" value="3" data-bind="checked: applyType,name: ($index()+1)"> 
									<input style="width: 206px" class="form-control" data-bind="datePicker : MyDate" type="date">
								</label>
							</div>
						</td>
						<td><select class="form-control"  data-bind="options:$parent.billRoleList,optionsText:'name',optionsValue:'value',value:billRuleUuid">
						</select></td>
						<td>0.5元/小时</td>
					</tr>  
            </tbody>
          </table>
        </div>
        
      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info" 
           data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-default btn-success">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- SSH密钥 end -->
<!-- 云硬盘单个 -->
<div role="dialog" aria-hidden="true" class="simple_form form-horizontal modal fade applyModeShow" data-bind="modal: { show: isAdd_VdiskSingle }">
  <div class='modal-dialog modal-lg' data-bind="foreach: model_Vdisk().vdiskCartInfo">
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请云硬盘服务</h3>
      </div>
      <div class='modal-body form-horizontal row'>
        <div class="form-inline clearfix" style="padding:0 15px 15px 0">
          <a class="btn btn-default pull-right" data-bind="click:$root.changeList_Vdisk">批量申请</a>
        </div>
        
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">云硬盘名称：</label>
              <div class="col-sm-8">
                <input type="text" class="form-control w" data-bind="value: name">
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">存储大小(GB)：</label>
              <div class="col-sm-8">
                <input type="text" class="form-control w" data-bind="value: size,event:{change:$root.sizeChange}">
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">所属VDC：</label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:$parent.vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid,optionsCaption:'请选择',event:{change:$root.vdcChange}"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">可用分区：</label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value:azUuid,event:{change:$root.azChangeGetVm},optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">挂载云主机：</label>
              <div class="col-sm-8">
                <select class="form-control input-sm"  data-bind="options:vmList,optionsText:'name',optionsValue:'uuid',value:mountVmUuid,event:{change:$root.vmChangeGetDate},optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">备注：</label>
              <div class="col-sm-8">
                <textarea class="form-control" cols="30" rows="5" data-bind="value: remark"></textarea>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">申请时长：</label>
              <label class="col-xs-2 control-label">有效期至 </label>
              <div class="col-xs-6"><input type="text" style="width:126px" class="form-control" data-bind="value: applyTime,attr:{disabled:true}"></div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="form-group col-md-6" data-bind="visible:charge()=='YES'">
            <div class="row">
              <label class="col-sm-4 control-label">套餐：</label>
              <div class="col-sm-3">
				   <select class="form-control w-xs" data-bind="options:billRuleArray,optionsText:'name',optionsValue:'value',value:billRuleUuid,event:{change:function(data, event){ $root.chargeChange('size',data,event) }},optionsCaption:'请选择'"></select>
              </div>
              <span class="control-label col-sm-5 text-left" style="height:34px;" data-bind="text:price"></span>
            </div>

          </div>
      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-success" data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 云硬盘单个 -->
<!-- 云硬盘多个 -->
<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAdd_VdiskMore }">
  <div class='modal-dialog modal-lg' role='document'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请云硬盘服务</h3>
      </div>
      <div class='modal-body form-horizontal'>
        <a class="btn btn-default pull-right" data-bind="click:$root.changeSingle_Vdisk">单个申请</a>
        <div class="form-inline">
          <div class="input-group">
             <span class="input-group-addon">申请数量</span>
             <input type="text" class="form-control" data-bind="value: num_vdisk, valueUpdate: 'afterkeydown'">
          </div>
        </div>
        <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
          <table class="table table-striped">
            <thead>
              <th>序号</th>
              <th>云硬盘名称<i style="color:red">*</i></th>
              <th>存储大小(G)<i style="color:red">*</i></th>
              <th>所属VDC<i style="color:red">*</i></th>
              <th>可用分区<i style="color:red">*</i></th>
              <th>挂载云主机</th>
              <th>申请时长</th>
              <th data-bind="visible:$root.diskCharge()=='YES'">套餐</th>
              <th data-bind="visible:$root.diskCharge()=='YES'">收费标准</th>
            </thead>
            <tbody data-bind="foreach: model_Vdisk().vdiskCartInfo">
              <tr>
					<td><span data-bind="text: ($index()+1)"></span></td>
					<td><input type="text" class="form-control input-sm"
						data-bind="value: name"></td>
					<td><input type="text" class="form-control input-sm"
						data-bind="value: size,event:{change:$root.sizeChange}">
					</td>
					<td>
					    <select class="form-control input-sm" id="vdiskVdc" data-bind="options:$parent.vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid,optionsCaption:'请选择',event:{change:$root.vdcChange}"></select>
					</td>
					<td>
					    <select class="form-control input-sm" data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value:azUuid,event:{change:$root.azChangeGetVm},optionsCaption:'请选择'"></select>
					</td>
					<td>
					    <select class="form-control input-sm"  data-bind="options:vmList,optionsText:'name',optionsValue:'uuid',value:mountVmUuid,event:{change:$root.vmChangeGetDate},optionsCaption:'请选择'"></select>
					</td>
					<td>
						<input type="text" style="width:126px" class="form-control" data-bind="value: applyTime,attr:{disabled:true}">
					</td>
					<td data-bind="visible:charge()=='YES'">
					    <select class="form-control w-xs" data-bind="options:billRuleArray,optionsText:'name',optionsValue:'value',value:billRuleUuid,event:{change:function(data, event){ $root.chargeChange('size',data,event) }},optionsCaption:'请选择'"></select>
					</td>
					<td data-bind="visible:charge()=='YES',text:price"></td>
				</tr>
            </tbody>
          </table>
        </div>
        
      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-default btn-success" data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 云硬盘多个 -->

<!-- 对象存储单个 -->
<div role="dialog" aria-hidden="true" class="simple_form form-horizontal modal fade applyModeShow" data-bind="modal: { show: isAdd_ObjectStorageSingle }">
  <div class='modal-dialog modal-lg' data-bind="foreach: model_ObjectStorage().objectStorageCartInfo">
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请对象存储服务</h3>
      </div>
      <div class='modal-body form-horizontal row'>
        <div class="form-inline clearfix" style="padding:0 15px 15px 0">
          <a class="btn btn-default pull-right" data-bind="click: $root.changeList_ObjectStorage">批量申请</a>
        </div>
        
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">对象存储名称：</label>
              <div class="col-sm-8">
                <input type="text" class="form-control w" data-bind="value: name">
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">存储大小(GB)：</label>
              <div class="col-sm-8">
                <input type="text" class="form-control w" data-bind="value: size,event:{change:$root.sizeChange}" ">
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">所属VDC：</label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:$parent.vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid,event:{change:$root.vdcChange},optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">可用分区：</label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value:azUuid,optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">备注：</label>
              <div class="col-sm-8">
                <textarea class="form-control" cols="30" rows="5" data-bind="value: remark"></textarea>
              </div>
            </div>
          </div>
          
          <div class="clearfix"></div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">申请时长：</label>
              <div class="col-sm-8">
                <div class="radio">
                  <label class="form-inline">
                    <input type="radio" value="1" data-bind="checked: applyType,name:objectSingle" > 永久
                  </label>
                </div>
                <div class="radio">
                  <label class="form-inline">
                  	<input type="radio" class="form-control" style="top:2px;" value="2" data-bind="checked: applyType,name:objectSingle" > 
                    <select class="form-control"  data-bind="options:$parent.applyList,optionsText:'name',optionsValue:'value',value:applyNum"></select> 个月
                  </label>
                </div>
                <div class="radio">
                  <label class="form-inline">
                    <input type="radio" class="form-control" style="top: 2px;" value="3" data-bind="checked: applyType,name: objectSingle"> 
                    <span class="">有效期至 </span>
                    <input type="text" style="width:126px" data-bind="value:applyTime" class="form-control applyDateFormat">
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="form-group col-md-6" data-bind="visible:charge()=='YES'">
            <div class="row">
              <label class="col-sm-4 control-label">套餐：</label>
              <div class="col-sm-3">
				 <select class="form-control w-xs" data-bind="options:billRuleArray,optionsText:'name',optionsValue:'value',value:billRuleUuid,event:{change:function(data, event){ $root.chargeChange('size',data,event) }},optionsCaption:'请选择'"></select>
              </div>
              <span class="control-label col-sm-5 text-left" style="height:34px;" data-bind="text:price"></span>
            </div>

          </div>
          

      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-success" data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 对象存储单个 -->
<!-- 对象存储多个 -->
<div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_ObjectStorageMore }">
  <div class='modal-dialog modal-lg'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请对象存储</h3>
      </div>
      <div class='modal-body form-horizontal'>
        <a class="btn btn-default pull-right" data-bind="click:$root.changeSingle_ObjectStorage">单个申请</a>
        <div class="form-inline">
          <div class="input-group">
             <span class="input-group-addon">申请数量</span>
             <input type="text" class="form-control" data-bind="value: num_ObjectStorage, valueUpdate: 'afterkeydown'">
          </div>
        </div>
        <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
          <table class="table table-striped">
            <thead>
              <th>序号</th>
              <th>对象存储名称<i style="color:red">*</i></th>
              <th>存储大小(G)<i style="color:red">*</i></th>
              <th>所属VDC<i style="color:red">*</i></th>
              <th>可用分区<i style="color:red">*</i></th>
              <th>申请时长</th>
              <th data-bind="visible:$root.objStorageCharge()=='YES'">套餐</th>
              <th data-bind="visible:$root.objStorageCharge()=='YES'">收费标准</th>
            </thead>
            <tbody data-bind="foreach: model_ObjectStorage().objectStorageCartInfo">
                <tr>
                    <td><span data-bind="text: ($index()+1)"></span></td>
					<td><input type="text" class="form-control input-sm" data-bind="value: name"></td>
					<td><input type="text" class="form-control input-sm" data-bind="value: size,event:{change:$root.sizeChange}"></td>
					<td><select class="form-control input-sm" data-bind="options:$parent.vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid,event:{change:$root.vdcChange},optionsCaption:'请选择'"></select></td>
					<td><select class="form-control input-sm" data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value:azUuid,optionsCaption:'请选择'"></select></td>
					<td>
						<div class="radio">
							<label class="form-inline"> <input type="radio"
							
								value="1" data-bind="checked: applyType,name:$index()" > 永久
							</label>
						</div>
						<div class="radio">
							<label class="form-inline"> <input type="radio"
								class="form-control" style="top: 2px;"
								value="2" data-bind="checked: applyType,name:$index()"> <select class="form-control"  data-bind="options:$parent.applyList,optionsText:'name',optionsValue:'value',value:applyNum"></select> 个月
							</label>
						</div>
						<div class="radio disabled">
							<label class="form-inline"> <input type="radio"
								class="form-control" style="top: 2px;"
								value="3" data-bind="checked: applyType,name:$index()"> <input type="text"
								style="width: 206px" class="form-control applyDateFormat" data-bind="value: applyTime">
							</label>
						</div>
					</td>
					<td data-bind="visible:charge()=='YES'">
					<select class="form-control w-xs" data-bind="options:billRuleArray,optionsText:'name',optionsValue:'value',value:billRuleUuid,event:{change:function(data, event){ $root.chargeChange('size',data,event) }},optionsCaption:'请选择'"></select>
					</td>
					<td data-bind="visible:charge()=='YES',text:price"></td>
				</tr>            
            </tbody>
          </table>
        </div>
        
      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-default btn-success"  data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 对象存储多个 -->
<!-- 公网IP单个 -->
<div role="dialog" aria-hidden="true" class="simple_form form-horizontal modal fade applyModeShow" data-bind="modal: { show: isAdd_PublicNetworkSingle }">
  <div class='modal-dialog modal-lg' data-bind="foreach: model_PublicNetwork().publicNetworkCartInfo">
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请公网IP服务</h3>
      </div>
      <div class='modal-body form-horizontal row'>
        <div class="form-inline clearfix" style="padding:0 15px 15px 0">
          <a class="btn btn-default pull-right" data-bind="click: $root.changeList_PublicNetwork">批量申请</a>
        </div>
        
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">公网IP名称：</label>
              <div class="col-sm-8">
                <input type="text" class="form-control w" data-bind="value: name">
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">所属VDC：</label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:$parent.vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid,event:{change:$root.vdcChange},optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">可用分区：</label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value:azUuid,event:{change:$root.azChangeGetVpc},optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">所属VPC：</label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:vpcList,optionsText:'name',optionsValue:'uuid',value:vpcUuid,event:{change:$root.vpcChangeByPublic},optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">网络名称：</label>
              <div class="col-sm-8">
                <select class="form-control input-sm" data-bind="options:networkList,optionsText:'name',optionsValue:'uuid',value:netWorkId,optionsCaption:'请选择'"></select>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">备注：</label>
              <div class="col-sm-8">
                <textarea class="form-control" cols="30" rows="5" data-bind="value: remark"></textarea>
              </div>
            </div>
          </div>
          
          <div class="clearfix"></div>
          <div class="form-group col-md-6">
            <div class="row">
              <label class="col-sm-4 control-label">申请时长：</label>
              <div class="col-sm-8">
                <div class="radio">
                  <label class="form-inline">
                    <input type="radio" value="1" data-bind="checked: applyType,name:publicNetworkSingle" > 永久
                  </label>
                </div>
                <div class="radio">
                  <label class="form-inline">
                    <input type="radio" class="form-control" style="top: 2px;" value="2" data-bind="checked: applyType,name:publicNetworkSingle">
                    <select class="form-control"  data-bind="options:$parent.applyList,optionsText:'name',optionsValue:'value',value:applyNum"></select> 个月
                  </label>
                </div>
                <div class="radio">
                  <label class="form-inline">
                    <input type="radio" class="form-control" style="top: 2px;" value="3" data-bind="checked: applyType,name:publicNetworkSingle">
                    <span class="">有效期至 </span>
                    <input type="text" style="width:126px" class="form-control applyDateFormat" data-bind="value: applyTime">
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="form-group col-md-6" data-bind="visible:charge()=='YES'">
            <div class="row">
              <label class="col-sm-4 control-label" >套餐：</label>
              <div class="col-sm-3">
				<select class="form-control w-xs" data-bind="options:billRuleArray,optionsText:'name',optionsValue:'value',value:billRuleUuid,event:{change:function(data, event){ $root.chargeChange('single',data,event) }},optionsCaption:'请选择'"></select>
              </div>
              <span class="control-label col-sm-5 text-left" style="height:34px;" data-bind="text:price"></span>
            </div>

          </div>
          

      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-success" data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 公网IP单个 -->
<!-- 公网IP多个 -->
<div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_PublicNetworkMore }">
  <div class='modal-dialog modal-lg'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请公网IP</h3>
      </div>
      <div class='modal-body form-horizontal'>
        <a class="btn btn-default pull-right" data-bind="click:$root.changeSingle_PublicNetwork">单个申请</a>
        <div class="form-inline">
          <div class="input-group">
             <span class="input-group-addon">申请数量</span>
             <input type="text" class="form-control" data-bind="value: num_PublicNetwork, valueUpdate: 'afterkeydown'">
          </div>
        </div>
        <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
          <table class="table table-striped">
            <thead>
              <th>序号</th>
              <th>公网IP名称<i style="color:red">*</i></th>
              <th>所属VDC<i style="color:red">*</i></th>
              <th>可用分区<i style="color:red">*</i></th>
              <th>VPC<i style="color:red">*</i></th>
              <th>网络名称</th>
              <th>申请时长<i style="color:red">*</i></th>
              <th data-bind="visible:$root.pubNetworkCharge()=='YES'">套餐</th>
              <th data-bind="visible:$root.pubNetworkCharge()=='YES'">收费标准</th>
            </thead>
            <tbody  data-bind="foreach: model_PublicNetwork().publicNetworkCartInfo">
                 <tr>
                    <td><span data-bind="text: ($index()+1)"></span></td>
					<td><input type="text" class="form-control input-sm" data-bind="value: name"></td>
					<td><select class="form-control input-sm" data-bind="options:$parent.vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid,event:{change:$root.vdcChange},optionsCaption:'请选择'"></select></td>
					<td><select class="form-control input-sm" data-bind="options:azList,optionsText:'name',optionsValue:'uuid',value:azUuid,event:{change:$root.azChangeGetVpc},optionsCaption:'请选择'"></select></td>
					<td><select class="form-control input-sm" data-bind="options:vpcList,optionsText:'name',optionsValue:'uuid',value:vpcUuid,event:{change:$root.vpcChangeByPublic},optionsCaption:'请选择'"></select></td>
					<td><select class="form-control input-sm" data-bind="options:networkList,optionsText:'name',optionsValue:'uuid',value:netWorkId,optionsCaption:'请选择'"></select></td>
					<td>
						<div class="radio">
							<label class="form-inline"> <input type="radio"
							
								value="1" data-bind="checked: applyType,name:$index()" > 永久
							</label>
						</div>
						<div class="radio">
							<label class="form-inline"> <input type="radio"
								class="form-control" style="top: 2px;"
								value="2" data-bind="checked: applyType,name:$index()"> <select class="form-control"  data-bind="options:$parent.applyList,optionsText:'name',optionsValue:'value',value:applyNum"></select> 个月
							</label>
						</div>
						<div class="radio disabled">
							<label class="form-inline"> <input type="radio"
								class="form-control" style="top: 2px;"
								value="3" data-bind="checked: applyType,name:$index()"> <input type="text"
								style="width: 206px" class="form-control applyDateFormat" data-bind="value: applyTime">
							</label>
						</div>
					</td>
					<td data-bind="visible:charge()=='YES'">
					   <select class="form-control w-xs" data-bind="options:billRuleArray,optionsText:'name',optionsValue:'value',value:billRuleUuid,event:{change:function(data, event){ $root.chargeChange('single',data,event) }},optionsCaption:'请选择'"></select>
					</td>
					<td data-bind="visible:charge()=='YES',text:price"></td>
				</tr>               
            </tbody>
          </table>
        </div>
        
      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-default btn-success"  data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 公网IP多个 -->
<!-- VDC -->
<div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_VDC }">
  <div class='modal-dialog modal-lg'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请VDC</h3>
      </div>
      <div class='modal-body form-horizontal row'>
        <div class="form-group">
          <label class="col-sm-3 control-label">VDC名称：</label>
          <div class="col-sm-8">
            <input type="text" class="form-control col-sm-5" placeholder="请输入名称" data-bind="value:model_VDC().vdcCartInfo().name">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">支持操作系统：</label>
            <div class="col-sm-8 form-inline" data-bind="foreach:osTypeArray">
              <div class="checkbox">
                <label>
                  <input type="checkbox" data-bind="checked: $parent.model_VDC().vdcCartInfo().osTypesSelelct,value:$data"><span data-bind="text:$data"></span>
                </label>
              </div>
            </div>
        </div>     
        <div class="form-group">
        	<label class="col-sm-3 control-label">配额限制：</label>
        	<div class="col-xs-4 form-inline">
        	<div class="form-inline"> 
        	<div class="radio"> 
        		<label class="form-inline"> 
					<input type="radio" class="form-control" style="top: 2px;" value="1" data-bind="checked: model_VDC().vdcCartInfo().quota,name:quota,attr:{disabled:true}">限制
				</label>
			</div> 
        	<div class="radio"> 
        		<label class="form-inline"> 
					<input type="radio" class="form-control" style="top: 2px;" value="-1" data-bind="checked: model_VDC().vdcCartInfo().quota,name:quota,attr:{disabled:true}">不限制
				</label>
			</div>			
			</div>
			</div>
        </div>
        <div data-bind="visible:model_VDC().vdcCartInfo().quota()=='1'">
	        <div class="form-group col-sm-4" >
	          <div >
	            <label class="col-xs-8 control-label">CPU配额(个)：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vdcCartInfo().cpu,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">内存配额(G)：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vdcCartInfo().memory,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">存储配额(G)：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vdcCartInfo().storage,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">云主机最大申请数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vdcCartInfo().vm,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">云硬盘最大申请数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vdcCartInfo().disk,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">对象存储最大申请数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vdcCartInfo().objectStorage,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">VPC最大可创建数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vdcCartInfo().vpcNum,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">路由器最大可创建数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vdcCartInfo().router,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">防火墙最大可创建数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vdcCartInfo().fireWall,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">公网IP最大申请数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vdcCartInfo().publicIp,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">负载均衡器最大申请数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vdcCartInfo().loadBalancer,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
	        <div class="form-group col-sm-4">
	          <div >
	            <label class="col-xs-8 control-label">SSH密钥最大申请数：</label>
	            <div class="col-xs-4">
	              <input type="text" class="form-control" data-bind="value:model_VDC().vdcCartInfo().secretKey,attr:{disabled:true}">
	            </div>
	          </div>
	        </div>
        </div>
        <div class="clearfix"></div>
        <div class="form-group">
          <label class="col-sm-3 control-label">备注：</label>
          <div class="col-sm-8">
            <textarea class="form-control" cols="30" rows="5" data-bind="value:model_VDC().vdcCartInfo().remark"></textarea>
          </div>
        </div>
          <div class="clearfix"></div>
        <div class="form-group" data-bind="visible:false">
          <label class="col-sm-3 control-label">申请时长：</label>
			<div class="col-sm-8">
			<div class="radio">
				<label class="form-inline"> 
					<input type="radio" value="1" data-bind="checked: model_VDC().vdcCartInfo().applyType,name:vdcRadio" > 永久
				</label>
			</div>
			<div class="radio">
				<label class="form-inline"> 
					<input type="radio" class="form-control" style="top: 2px;" value="2" data-bind="checked: model_VDC().vdcCartInfo().applyType,name:vdcRadio"> 
					<select class="form-control"  data-bind="options:applyList,optionsText:'name',optionsValue:'value',value:model_VDC().vdcCartInfo().applyNum"></select> 个月
				</label>
			</div>
			<div class="radio disabled">
				<label class="form-inline"> 
					<input type="radio" class="form-control" style="top: 2px;" value="3" data-bind="checked: model_VDC().vdcCartInfo().applyType,name:vdcRadio"> 
					<input type="text" style="width: 206px" class="form-control applyDateFormat" data-bind="value:model_VDC().vdcCartInfo().applyTime">
				</label>
			</div>
			</div>
        </div>
        <div class="form-group" data-bind="visible:model_VDC().vdcCartInfo().charge()=='YES'">
          <div>
            <label class="col-sm-3 control-label">套餐：</label>
            <div class="col-sm-2">
                <select class="form-control"  data-bind="options:model_VDC().vdcCartInfo().billRuleArray,optionsText:'name',optionsValue:'value',value:model_VDC().vdcCartInfo().billRuleUuid,event:{change:function(data, event){ $root.chargeTypeChange('vdcCartInfo',data,event) }}"></select>
            </div>
            <span class="col-sm-3 control-label text-left" data-bind="text:model_VDC().vdcCartInfo().price"></span>
          </div>
        </div>

      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info" data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- VDC -->

<!-- 云主机 单个 -->
<div role="dialog" aria-hidden="true" class="modal fade applyModeShow" data-bind="modal: { show: isAdd_VMSingle }">
  <div class='modal-dialog modal-lg'>
    <div class='modal-content'>
      <div class='modal-header'>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>云主机服务</h3>
      </div>
      <div class='modal-body form-horizontal row' data-bind="foreach:model_VM().vmCartInfo">
        <div class="panel panel-default no-height" style="margin:0;border:none">
          <div class="panel-heading">基本信息 <span style="cursor:pointer;" class="glyphicon pull-right" data-bind="click: $root.step1(!$root.step1()),css:{'glyphicon-chevron-up': $root.step1(), 'glyphicon-chevron-down': !$root.step1()}"></span></div>
          <div class="panel-body" data-bind="visible: $root.step1">
            <div class="form-group col-md-6">
              <div class="row">
                <label class="col-sm-4 control-label">云主机名称：</label>
                <div class="col-sm-8">
                  <input type="text" class="form-control w" data-bind="value:  vmName">
                </div>
              </div>
            </div>
            <div class="clearfix"></div>
            <div class="form-group col-md-6">
              <div class="row">
                <label class="col-sm-4 control-label">所属VDC：</label>
                <div class="col-sm-8">
                  <select class="form-control w-xs" data-bind="options:  vdcList,optionsText:'name',optionsValue:'uuid',value:  vdcUuid,event:{change:$root.getAzForVdcChange},optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <div class="row">
                <label class="col-sm-4 control-label">可用分区：</label>
                <div class="col-sm-8">
                  <select class="form-control w-xs" data-bind="options:  azList,optionsText:'name',optionsValue:'uuid',value:  azUuid,event:{change:$root.getVpcForAzChange},optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <div class="row">
                <label class="col-sm-4 control-label">操作系统类型：</label>
                <div class="col-sm-8">
                  <select class="form-control w-xs" data-bind="options:  osTypeList,optionsText:$data,optionsValue:$data,value:  osType,event:{change:$root.getOsVersionForOsTypeChange},optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <div class="row">
                <label class="col-sm-4 control-label">操作系统版本：</label>
                <div class="col-sm-8">
                  <select class="form-control w-xs" data-bind="options:  osVersionList,optionsText:'opSysVersion',optionsValue:'uuid',value: osVersion,optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-3">
              <div class="row">
                <label class="col-xs-5 control-label">CPU(个)：</label>
                <div class="col-xs-7">
                  <select class="form-control w-xs" data-bind="options:  cpuList,optionsText:$data,optionsValue:$data,value:  cpu,optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">内存(GB)：</label>
                <div class="col-xs-7">
                  <select class="form-control w-xs" data-bind="options:  memoryList,optionsText:$data,optionsValue:$data,value:  memory,optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">存储(GB)：</label>
                <div class="col-xs-7">
                  <input type="text" class="form-control" data-bind="value:  storage">
                </div>
              </div>
            </div>
            <div class="form-group col-md-3">
              <div class="row">
                <label class="col-xs-5 control-label">VPC/IP池：</label>
                <div class="col-xs-7">
                  <select class="form-control w-xs" data-bind="options:  vpcList,optionsText:'name',optionsValue:'uuid',value:  vpcOrIpPoolList,event:{change:$root.vpcChange},optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">网络名称：</label>
                <div class="col-xs-7">
                  <select class="form-control w-xs" data-bind="options:  networkList,optionsText:'name',optionsValue:'originalId',value:  vpcNetworkUuid,optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">指定IP：</label>
                <div class="col-xs-7">
                  <input type="text" class="form-control" data-bind="value:  ip">
                </div>
              </div>
            </div>
            <div class="form-group col-md-3">
              <div class="row">
                <label class="col-xs-5 control-label">主机账号：</label>
                <div class="col-xs-7">
                  <input type="text" class="form-control"  data-bind="value:  account">
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">密码：</label>
                <div class="col-xs-7">
                  <input type="text" class="form-control"  data-bind="value:  password">
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">重复密码：</label>
                <div class="col-xs-7">
                  <input type="text" class="form-control"  data-bind="value:  repeatPassword">
                </div>
              </div>
            </div>
            <div class="form-group col-md-3">
              <div class="row">
                <label class="col-xs-5 control-label">绑定密钥：</label>
                <div class="col-xs-7">
                  <select class="form-control w-xs" data-bind="options:  $root.sshIsMountList,optionsText:'name',optionsValue:'value',value:  sshIsMount"></select>
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <div class="row">
                <label class="col-xs-5 control-label">选择密钥：</label>
                <div class="col-xs-7">
                  <select class="form-control w-xs" data-bind="options:sshList,optionsText:'name',optionsValue:'uuid',value:sshUuid,optionsCaption:'请选择'"></select>
                </div>
              </div>
            </div>
            <div class="clearfix"></div>
            <div class="form-group col-md-5">
               <div class="row">
	              <label class="col-xs-5 control-label">申请时长：</label>
	              <div class="col-sm-7">
	                <div class="radio">
	                  <label class="form-inline">
	                    <input type="radio" name="optionsRadiosi"  value="1" data-bind="checked:  applyType"> 永久
	                  </label>
	                </div>
	                <div class="radio">
	                  <label class="form-inline">
	                    <input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="2"  data-bind="checked:  applyType"> 
	                    <select class="form-control" data-bind="options: $root.applyList,optionsText:'name',optionsValue:'value',value:  applyNum"></select> 个月
	                  </label>
	                </div>
	                <div class="radio">
	                  <label class="form-inline">
	                    <input type="radio" class="form-control" style="top:2px;" name="optionsRadiosi" value="3"  data-bind="checked:  applyType">
	                    <span class="">有效期至 </span>
	                    <input type="text" style="width:126px" class="form-control applyDateFormat" data-bind="value:  applyTime">
	                  </label>
	                </div>
	              </div>
	            </div>
            </div>
            <div class="clearfix"></div>
             <div class="form-group col-md-3">
                 <div class="row">
                     <label class="col-xs-5 control-label">套餐：</label>
                     <div class="col-xs-7">
                         <select class="form-control w-xs" data-bind="options: billRuleList,optionsText:'name',optionsValue:'value',value:billRuleUuid,event:{change:function(data, event){ $root.chargeChangeCart('VM',data,event) }},optionsCaption:'请选择'"></select>
                     </div>
                 </div>
             </div>
             <span class="control-label col-md-3 text-left" style="height:34px;" data-bind="text: price"></span>
          </div>
        </div>

        <div class="panel panel-default no-height" style="margin:0;border:none">
          <div class="panel-heading">挂载云硬盘 <span style="cursor:pointer;" class="glyphicon pull-right" data-bind="click: $root.step2(!$root.step2()),css:{'glyphicon-chevron-up': $root.step2(), 'glyphicon-chevron-down': !$root.step2()}"></span></div>
          <div class="panel-body" data-bind="visible: $root.step2">
            <div style="margin:0;">
              <a class="btn btn-info btn-sm pull-right" data-bind="click: $root.addVdisk_VM">添加硬盘</a>
              <div class="clearfix" style="height:10px;clear:both;"></div>
              <div class="panel panel-default table-responsive no-height">
                <table class="table table-striped">
                  <thead>
                    <th>序号</th>
                    <th>云硬盘名称<i style="color:red">*</i></th>
                    <th>存储大小</th>
                    <th>所属服务</th>
                    <th>申请时长</th>
                    <th>套餐</th>
                    <th>收费标准</th>
                    <th>操作</th>
                  </thead>
                  <tbody data-bind="foreach: mountDisks">
                    <tr>
                        <td><span data-bind="text: ($index()+1)"></span></td>
                        <td><input type="text" class="form-control" data-bind="value:name"/></td>
                        <td><input type="text" class="form-control" data-bind="value:size"/></td>
                        <td><input type="text" data-bind="value:serviceName" disabled/> <a class="btn btn-xs btn-default" data-bind="click:$root.selectVdiskService_VM">选择</a></td>
                        <td><span data-bind="text: $parent.applyTimeText"></span></td>
                        <td><select class="form-control w-xs" data-bind="options: billRuleList,optionsText:'name',optionsValue:'value',value:billRuleUuid,event:{change:function(data, event){ $root.chargeChangeCart('vdisk_VM',data,event) }},optionsCaption:'请选择'"></select></td>
                        <td><span data-bind="text: price"></span></td>
                        <td><a class="btn btn-xs btn-danger" data-bind="click:$root.delVdisk_VM">删除</a></td>
                    </tr>
                    
                   
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>



        <div class="panel panel-default no-height" style="margin:0;border:none">
          <div class="panel-heading">安装软件 <span style="cursor:pointer;" class="glyphicon pull-right" data-bind="click: $root.step3(!$root.step3()),css:{'glyphicon-chevron-up': $root.step3(), 'glyphicon-chevron-down': !$root.step3()}"></span></div>
          <div class="panel-body" data-bind="visible: $root.step3">
            <div style="margin:0;">
              <a class="btn btn-info btn-sm pull-right" data-bind="click: $root.addSoftware">添加软件</a>
              <div class="clearfix" style="height:10px;clear:both;"></div>
              <div class="panel panel-default table-responsive no-height">
                <table class="table table-striped">
                  <thead>
                    <th>软件名称</th>
                    <th>软件分类</th>
                    <th>软件类型</th>
                    <th>软件版本</th>
                    <th>静默安装属性</th>
                    <th>操作</th>
                  </thead>
                  <tbody>
                    <tr>
                      <td>oracle 10g</td>
                      <td>数据库</td>
                      <td>oracle</td>
                      <td>10G 企业版</td>
                      <td><a class="btn btn-xs btn-default">查看</a> <a class="btn btn-xs btn-default">修改</a></td>
                      <td><a class="btn btn-xs btn-danger" onclick="confirm(\'确定删除吗？\')">删除</a></td>
                    </tr>
                    <tr>
                      <td>oracle 10g</td>
                      <td>数据库</td>
                      <td>oracle</td>
                      <td>10G 企业版</td>
                      <td><a class="btn btn-xs btn-default">查看</a> <a class="btn btn-xs btn-default">修改</a></td>
                      <td><a class="btn btn-xs btn-danger" onclick="confirm(\'确定删除吗？\')">删除</a></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="panel panel-default no-height" style="margin:0;border:none">
          <div class="panel-heading">系统盘分区 <span style="cursor:pointer;" class="glyphicon pull-right" data-bind="click: $root.step4(!$root.step4()),css:{'glyphicon-chevron-up': $root.step4(), 'glyphicon-chevron-down': !$root.step4()}"></span></div>
          <div class="panel-body" data-bind="visible: $root.step4">
            <div style="margin:0;">
              <a class="btn btn-info btn-sm pull-right" data-bind="click: $root.addPartition_VM">添加分区</a>
              <div class="clearfix" style="height:10px;clear:both;"></div>
              <div class="panel panel-default table-responsive no-height">
                <table class="table table-striped">
                  <thead>
                    <th>分区名称</th>
                    <th>分区大小</th>
                    <th>操作</th>
                  </thead>
                  <tbody data-bind="foreach: partitions">
                    <tr>
                      <td><input type="text" class="form-control" data-bind="value:name"/></td>
                      <td><input type="text" class="form-control" data-bind="value:size"/></td>
                      <td><a class="btn btn-xs btn-danger" data-bind="click: $root.delPartition_VM">删除</a></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="panel panel-default no-height" style="margin:0;border:none">
          <div class="panel-heading">高级选项 <span style="cursor:pointer;" class="glyphicon pull-right" data-bind="click: $root.step5(!$root.step5()),css:{'glyphicon-chevron-up': $root.step5(), 'glyphicon-chevron-down': !$root.step5()}"></span></div>
          <div class="panel-body" data-bind="visible: $root.step5">
              <div class="form-group col-md-6">
                  <div class="row">
                      <label class="col-sm-4 control-label">所属业务系统：</label>
                      <div class="col-sm-8">
                          <select class="form-control w-xs" data-bind="options: bussyList,optionsText:'name',optionsValue:'uuid',value:projectUuid,optionsCaption:'请选择'"></select>
                      </div>
                  </div>
              </div>
              <div class="clearfix"></div>
              <div class="form-group col-md-6">
                  <div class="row">
                      <label class="col-sm-4 control-label">备注：</label>
                      <div class="col-sm-8">
                          <textarea class="form-control" cols="30" rows="5" data-bind="value: remark"></textarea>
                      </div>
                  </div>
              </div>
          </div>
        </div>

      </div>
      <div class='modal-footer' style="text-align:center;">
        <a class="btn btn-default btn-info" data-bind="click: $root.addToCart">添加到购物车</a>
        <a class="btn btn-default btn-success"  data-bind="click: $root.addToOrder">提交订单</a>
        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
      </div>
    </div>
  </div>
</div>
<!-- 云主机 单个 -->

<!-- 云主机 多个 -->
<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: false }">
	<div class='modal-dialog modal-lg' role='document'>
	    <div class='modal-content'>
	    	<div class='modal-header'>
	        	<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>申请云主机服务</h3>
	      	</div>
		    <div class='modal-body'>
		        <ul class="nav nav-tabs service-step-select">
		          <li data-bind="css: {active: myStep()==1}"><a >1基本信息</a></li>
		          <li data-bind="css: {active: myStep()==2}"><a >2规格配置</a></li>
		          <li data-bind="css: {active: myStep()==3}"><a >3网络配置</a></li>
		          <li data-bind="css: {active: myStep()==4}"><a >4系统盘分区</a></li>
		          <li data-bind="css: {active: myStep()==5}"><a >5挂载云硬盘</a></li>
		          <li data-bind="css: {active: myStep()==6}"><a >6软件安装</a></li>
		          <li data-bind="css: {active: myStep()==7}"><a >7信息确认</a></li>
		        </ul>
				<div class="tab-content service-step-box" style="margin-top:20px;">
			    	  <div data-bind="visible: myStep()==1">
			        	<div class="form-inline">
			                <div class="input-group">
			                    <span class="input-group-addon">申请数量</span>
			                    <input type="text" class="form-control" data-bind="value: num_VM, valueUpdate: 'afterkeydown'">
			                </div>
			            </div>
			            <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
			                <table class="table table-striped">
				                <thead>
				                  <th>序号</th>
				                  <th>云主机名称<i style="color:red">*</i></th>
				                  <th>计算机名称</th>
				                  <th>可用分区</th>
				                  <th>业务系统</th>
				                  <th>所属VDC<i style="color:red">*</i></th>
				                  <th>备注</th>
				                  <th>申请时长<i style="color:red">*</i></th>
				                  <th>套餐</th>
				                </thead>
				                <tbody data-bind="foreach: model_VM().vmCartInfo">
				                     <tr>
					                     <td><span data-bind="text: ($index()+1)"></span></td>
					                     <td><input type="text" class="form-control w" data-bind="value:vmName"></td>
					                     <td><input type="text" class="form-control w" data-bind="value:computerName"></td>
					                     <td><select class="form-control w-xs" data-bind="options:$parent.projectList,optionsText:'name',optionsValue:'value',value:azUuid"></select></td>
					                     <td><select class="form-control w-xs" data-bind="options:$parent.projectList,optionsText:'name',optionsValue:'value',value:projectUuid"></select></td>
					                     <td><select class="form-control w-xs" data-bind="options:$parent.vdcList,optionsText:'name',optionsValue:'uuid',value:vdcUuid"></select></td>
					                     <td><input type="text" class="form-control w"></td>
					                     <td>
					                         <div class="radio">
												<label class="form-inline"> <input type="radio" value="1" data-bind="checked: applyType,name: ($index()+1)" > 永久
												</label>
											</div>
											<div class="radio">
												<label class="form-inline"> <input type="radio"
													class="form-control" style="top: 2px;" value="2" data-bind="checked: applyType,name: ($index()+1)"> 
													<select class="form-control"  data-bind="options:$parent.applyList,optionsText:'name',optionsValue:'value',value:applyNum"></select> 个月
												</label>
											</div>
											<div class="radio disabled">
												<label class="form-inline"> <input type="radio"
													class="form-control" style="top: 2px;" value="3" data-bind="checked: applyType,name: ($index()+1)"> 
													<input style="width: 206px" class="form-control" data-bind="datePicker : MyDate,value:applyTime" type="date">
												</label>
											</div>
					                     </td>
					                     <td>
					                         <select class="form-control w-xs" data-bind="options:$parent.billRoleList,optionsText:'name',optionsValue:'value',value:billRuleUuid"></select>
					                     </td>
					                 </tr>  
				                </tbody>
			                </table>
			            </div>
			          </div>
			
			          <div data-bind="visible: myStep()==2">
			            <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
			              <table class="table table-striped">
			                <thead>
			                  <th>序号</th>
			                  <th>云主机名称</th>
			                  <th>操作系统类型<i style="color:red">*</i></th>
			                  <th>操作系统版本<i style="color:red">*</i></th>
			                  <th>CPU(核)<i style="color:red">*</i></th>
			                  <th>内存(G)<i style="color:red">*</i></th>
			                  <th>存储(G)</th>
			                  <th>用户名<i style="color:red">*</i></th>
			                  <th>密码<i style="color:red">*</i></th>
			                  <th>重复密码<i style="color:red">*</i></th>
			                </thead>
			                <tbody data-bind="foreach: model_VM().vmCartInfo">
			                  <tr>
                                <td><span data-bind="text: ($index()+1)"></span></td>
		                        <td><span data-bind="text:vmName"></span></td>
		                        <td><select class="form-control" data-bind="options:$parent.osTypeList,optionsText:'name',optionsValue:'value',value:osType"></select></td>
		                        <td><select class="form-control" data-bind="options:$parent.osVersionList,optionsText:'name',optionsValue:'value',value:osVersion"></select></td>
		                        <td><select class="form-control" style="width: 80px;" data-bind="options:$parent.cpuList,optionsText:'name',optionsValue:'value',value:cpu"></select></td>
		                        <td><select class="form-control" style="width: 80px;" data-bind="options:$parent.memoryList,optionsText:'name',optionsValue:'value',value:memory"></select></td>
		                        <td><input type="text" class="form-control" data-bind="value:storage"></td>
		                        <td><input type="text" class="form-control" data-bind="value:userName"></td>
		                        <td><input type="text" class="form-control" data-bind="value:password"></td>
		                        <td><input type="text" class="form-control" data-bind="value:repeatPassword"></td>
		                      </tr>
			                </tbody>
			              </table>
			            </div>
			          </div> 
			
			          <div data-bind="visible: myStep()==3">
			            <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px">
			              <table class="table table-striped">
			                <thead>
			                  <th>序号</th>
			                  <th>云主机名称</th>
			                  <th>网络类型<i style="color:red">*</i></th>
			                  <th>VPC/IP池<i style="color:red">*</i></th>
			                  <th>网络名称</th>
			                  <th>指定IP</th>
			                  <th>绑定密钥</th>
			                </thead>
			                <tbody data-bind="foreach: model_VM().vmCartInfo">
			                    <tr>
			                       <td><span data-bind="text: ($index()+1)"></span></td>
			                       <td><span data-bind="text:vmName"></span></td>
			                       <td><select class="form-control" data-bind="options:$parent.netTypeList,optionsText:'name',optionsValue:'value',value:networkType"></select></td>
			                       <td><select class="form-control" data-bind="options:$parent.vpcOrIpPoolList,optionsText:'name',optionsValue:'value',value:vpcOrIpPoolList"></select></td>
			                       <td><select class="form-control" data-bind="options:$parent.netNameList,optionsText:'name',optionsValue:'value',value:vpcNetworkUuid"></select></td>
			                       <td><select class="form-control" data-bind="options:$parent.ipList,optionsText:'name',optionsValue:'value',value:ip"></select></td>
			                       <td>
			                           <input type="radio" data-bind="checked: sshIsMount" value="NO" >否<input type="radio" data-bind="checked: sshIsMount" value="YES">是 <select class="form-control" data-bind="options:$parent.osTypeList,optionsText:'name',optionsValue:'value',value:sshUuid"></select>
			                       </td>
			                    </tr>
			                </tbody>
			              </table>
			            </div>
			          </div>
			
			          <div data-bind="visible: myStep()==4">
			              <div data-bind="foreach: model_VM().vmCartInfo">
				              <div style="margin:0;margin-top:10px">
				              <span class="pull-left" style="font-size:16px;position:relative;top:8px;" data-bind="text:vmName"></span><a class="btn btn-info btn-sm pull-right" data-bind="click:$root.addPartitions">添加分区</a>
				              <div class="clearfix" style="height:10px;clear:both;"></div>
				              <div class="panel panel-default table-responsive no-height">
				                  <table class="table table-striped">
				                      <thead>
				                          <th>分区名称</th>
				                          <th>分区大小(G)</th>
				                          <th>操作</th>
				                      </thead>
				                      <tbody data-bind="foreach: partitions">
				                          <tr >
				                              <td><span data-bind="text:name"></span></td>
				                              <td><span data-bind="text:size"></span></td>
				                              <td><a class="btn btn-xs btn-default" data-bind="click:function(object, event){ $root.updatePartitions($parent, object, event) }">修改</a> 
				                              <a class="btn btn-xs btn-danger" data-bind="click:function(object, event){ $root.delPartitions($parent, object, event) }">删除</a></td>
				                          </tr>
				                      </tbody>
				                  </table>
				               </div>
				               </div>
				           </div>    
			          </div>
			
			          <div data-bind="visible: myStep()==5">
			              <div data-bind="foreach: model_VM().vmCartInfo">
				              <div style="margin:0;margin-top:10px">
					              <span class="pull-left" style="font-size:16px;position:relative;top:8px;" data-bind="text:vmName"></span><a class="btn btn-info btn-sm pull-right" data-bind="click:$root.addMountdisks">挂载云硬盘</a>
					              <div class="clearfix" style="height:10px;clear:both;"></div>
				                  <div class="panel panel-default table-responsive no-height">
				                      <table class="table table-striped">
				                          <thead>
				                              <th>云硬盘名称</th>
				                              <th>云硬盘类型</th>
				                              <th>云硬盘大小</th>
				                              <th>操作</th>
				                          </thead>
				                          <tbody data-bind="foreach: mountDisks">
				                              <tr>
				                                  <td><span data-bind="text:name"></span></td>
				                                  <td><span data-bind="text:type"></span></td>
				                                  <td><span data-bind="text:size"></span></td>
				                                  <td><a class="btn btn-xs btn-default" data-bind="click:function(object, event){ $root.updateMountdisks($parent, object, event) }">修改</a> 
				                                      <a class="btn btn-xs btn-danger" data-bind="click:function(object, event){ $root.delMountdisks($parent, object, event) }">删除</a></td>
				                              </tr>
				                          </tbody>
				                      </table>
				                  </div>
				              </div>
				          </div>    
			          </div>

			          <div  data-bind="visible: myStep()==6">
			              <div data-bind="foreach: model_VM().vmCartInfo">
			              <div style="margin:0;margin-top:10px">
				              <span class="pull-left" style="font-size:16px;position:relative;top:8px;" data-bind="text:vmName"></span><a class="btn btn-info btn-sm pull-right">添加软件</a>
				              <div class="clearfix" style="height:10px;clear:both;"></div>
				              <div class="panel panel-default table-responsive no-height">
				                  <table class="table table-striped">
				                      <thead>
				                          <th>软件名称</th>
				                          <th>软件分类</th>
				                          <th>软件类型</th>
				                          <th>软件版本</th>
				                          <th>静默安装属性</th>
				                          <th>操作</th>
				                      </thead>
				                      <tbody data-bind="foreach: softwares">
				                          <tr>
					                          <td>oracle 10g</td>
					                          <td>数据库</td>
					                          <td>oracle</td>
					                          <td>10g企业版</td>
					                          <td><a class="btn btn-xs btn-info">查看</a> <a class="btn btn-xs btn-default">修改</a></td>
					                          <td><a class="btn btn-xs btn-danger" onclick="confirm(\'确定删除吗？\')">删除</a></td>
				                          </tr>
				                      </tbody>
				                  </table>
				              </div>
				          </div> 
				          </div>   
			          </div> 
			
			         <div data-bind="visible: myStep()==7">
			            <div style="margin:0;margin-top:10px">
			              <span class="pull-left" style="font-size:16px;">云主机个数：<span data-bind="text: model_VM().vmCartInfo().length"></span></span>
			              <div class="clearfix" style="height:10px;clear:both;"></div>
			              <div class="panel panel-default table-responsive no-height">
			                <table class="table table-striped">
			                  <thead>
			                    <th>云主机名称</th>
			                    <th>CPU(核)</th>
			                    <th>内存(G)</th>
			                    <th>存储(G)</th>
			                    <th>软件个数</th>
			                    <th>云盘个数</th>
			                    <th>所属VDC</th>
			                    <th>申请时长</th>
			                    <th>收费标准</th>
			                  </thead>
			                  <tbody data-bind="foreach: model_VM().vmCartInfo">
			                    <tr>
			                      <td data-bind="text: vmName"></td>
			                      <td data-bind="text: cpu"></td>
			                      <td data-bind="text: memory"></td>
			                      <td data-bind="text: storage">100</td>
			                      <td data-bind="text: softwares().length"></td>
			                      <td data-bind="text: mountdisks().length"></td>
			                      <td data-bind="text: vdcText"></td>
			                      <td data-bind="text: applyTimeText"></td>
			                      <td data-bind="text: vmName"></td>
			                    </tr>
			                  </tbody>
			                </table>
			              </div>
			            </div>
			          </div>  
		
		        </div>
		        
		      </div>
		    <div class='modal-footer' style="text-align:center;">
		        <a class="btn btn-default btn-info " data-bind="visible: myStep()>1,click:pre">上一步</a>
		        <a class="btn btn-default btn-info " data-bind="visible: myStep()<7,click:next">下一步</a>
		        <a class="btn btn-default btn-info " data-bind="visible: myStep()==7,click:addToCart">添加到购物车</a>
		        <a class="btn btn-default btn-success " data-bind="visible: myStep()==7,click:addToOrder">提交订单</a>
		        <!-- <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a> -->
		    </div>
	    </div>
	</div>
</div>
<!-- 云主机 多个-->

    <!-- 选择云服务页面 -->
    <div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: selectVdiskService }">
      <div class='modal-dialog modal-lg' role='document'>
        <div class='modal-content'>
          <div class='modal-header'>
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>选择云硬盘服务</h3>
          </div>
          <div class='modal-body form-horizontal'>
            <div class="panel panel-default table-responsive no-height" style="margin:0;margin-top:10px" data-bind="with: $root.table_Vdisk_VM">
             <table class="table table-striped">
               <thead>
                 <th></th>
                 <th>云硬盘服务名称<i style="color:red">*</i></th>
                 <th>类型<i style="color:red">*</i></th>
                 <th>是否收费<i style="color:red">*</i></th>
               </thead>
               <tbody>
               <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
                 <tr>
                   <td><input type="radio" style="top:-2px;" name="optionsRadios0"  data-bind="checkedValue: $data, checked: $parent.chosenItems"></td>
                   <td data-bind="text:serviceName"></td>
                   <td data-bind="text:diskType">类型</td>
                   <td data-bind="text:isFee">是/否</td>
                 </tr>
                 <!-- /ko -->
               </tbody>
             </table>
             <footer class="panel-footer" data-bind="with: $root.table_Vdisk_VM">
        <ul class="pagination">
            <li data-bind="css: leftPagerClass, click: prevPage">
              <a href="#">&laquo;</a>
            </li>
            <!-- ko foreach: {data: (new Array(pages()))} -->
            <li data-bind="css: $parent.pageClass($index() + 1)">
              <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
            </li>
            <!-- /ko -->
            <li data-bind="css: rightPagerClass, click: nextPage">
              <a href="#">&raquo;</a>
            </li>
        </ul>
        </footer>
           </div>
           
         </div>
         <div class='modal-footer' style="text-align:center;">
            <a class="btn btn-default btn-info" data-bind="click: submitVdiskService">确定添加</a>
            <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
          </div>
        </div>
      </div>
    </div>
    <!-- 选择云服务页面 -->
