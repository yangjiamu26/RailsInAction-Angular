<style>
.form-item-block .checkbox, .form-item-block .radio{display:block;}
</style>
<div class="app-content-full">
  <div class="bg-light lter b-b wrapper-sm">
    <ol class="breadcrumb">
      <li>当前位置：</li>
      <li>服务</li>
      <li class="active">产品定义</li>
    </ol>
  </div>
  <!-- hbox layout -->
  <div class="hbox hbox-auto-xs bg-light ">
    <!-- column -->
    <div class="col w lter b-r">
      <div class="vbox">
        <div class="wrapper b-b">
          <div class="left-title"><span style="font-size:16px;">产品列表</span><span class="glyphicon glyphicon-minus pull-right product-delete-btn" style="color:#9c9c9c;top:3px;"></span><span class="glyphicon glyphicon-plus pull-right product-add-btn" style="color:#2aabd2;top:3px;margin-right:5px;"></span></div>
        </div>
        <div class="row-row">
          <div class="cell scrollable hover">
            <div class="cell-inner">
              <div class='table-responsive'>
                <table class='table table-striped table-hover left-list'>
                	<tbody data-bind="foreach: products">
                    	<tr data-bind="css: {'active': $root.currentProduct().name==name}">
							<td><a data-bind="text: name, click: $root.setCurrent"></a></td>
						</tr> 
			     </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /column -->
	
	<!-- column -->
    <div class="col">
      <div class="vbox">
        <div class="row-row">
          <div class="cell">
            <div class="cell-inner">
              <div class="wrapper-md">
				<div class="service-right-content">
					<form>
						<a class="btn btn-info btn-sm form-edit">修改</a><a style="display:none;" class="btn btn-success btn-sm form-save">保存</a>
						<div class="row">
							<div class="col-xs-6" style="margin-top:10px;">
								<label>产品名称：</label><span class="value-span" data-bind="text:currentProduct().name"></span>
								<span class="input-span" style="display:none;"><input type="text" data-bind="value: currentProduct().name"><i style="color:red">*</i></span>
							</div>
							<div class="col-xs-6">
								<div class="img-box" style="width:100px;text-align:center">
									<img src="" alt="" width="100%" height="80">
									<a class="btn btn-info btn-xs" onclick="showModal('pages/services/product_definitions/uploadimg.html')">上传图片</a>
								</div>
							</div>
						</div>
						<div>
							<p><label>产品配置项：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" data-bind="click: addConfig"></span></p>
							<div class="panel panel-default b-blue" data-bind="with: configsTable">
								<table class="table table-striped">
									<thead>
										<tr>
											<th>配置项名称</th>
											<th>是否必填</th>
											<th>操作</th>
										</tr>
									</thead>
									<tbody>
										<tr data-bind="visible: showNoData">
							           		<td colspan="3" class="aligncenter">
							              		This table has no data.
							           		</td>
							            </tr>
							            <!-- ko foreach: {data: pagedRows, as: '$row'}  -->
							            	<tr><td data-bind="text:name"></td><td data-bind="text:requiredDesc"></td><td><a onclick="showModal('pages/services/product_definitions/addSetting.html')">查看</a> | <a data-bind="click: $root.editConfig">修改</a></td></tr>
							            <!-- /ko -->
									</tbody>
								</table>
							</div>
						</div>
						<div>
							<p><label>产品配置项关系：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" data-bind="click: addConfigRelation"></span></p>
							<div class="panel panel-default b-blue" data-bind="with: configRelationsTable">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>关联关系</th>
										<th>关联配置项</th>
										<th>操作</th>
									</thead>
									<tbody>
										<!-- ko foreach: {data: pagedRows, as: '$row'}  -->
							            	<tr><td data-bind="text:sourceName"></td><td data-bind="text:relationTypeDesc"></td><td data-bind="text:targetName"></td><td><a onclick="showModal('pages/services/product_definitions/addRelation.html')">查看</a> | <a onclick="showModal('pages/services/product_definitions/addRelation.html')">修改</a></td></tr>
							            <!-- /ko -->
									</tbody>
								</table>
							</div>
						</div>
					</form>
				</div>
				<div class="service-right-content" style="display:none;">
					<form>
						<a class="btn btn-info btn-sm form-edit">修改</a><a style="display:none;" class="btn btn-success btn-sm form-save">保存</a>
						<div class="row">
							<div class="col-xs-6" style="margin-top:10px;">
								<label>产品名称：</label><span class="value-span">云主机</span><span class="input-span" style="display:none;"><input type="text" value="云主机"><i style="color:red">*</i></span>
							</div>
							<div class="col-xs-6">
								<div class="img-box" style="width:100px;text-align:center">
									<img src="assets/img/winhost.png" alt="" width="100%" height="80">
									<a class="btn btn-info btn-xs" onclick="showModal('pages/services/product_definitions/uploadimg.html')">上传图片</a>
								</div>
							</div>
						</div>
						<div>
							<p><label>产品配置项：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addSetting.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>是否必填</th>
										<th>操作</th>
									</thead>
									<tbody>
										<tr><td>虚拟化</td><td>是</td><td><a>查看</a> |  <a>修改</a> </td></tr>
										<tr><td>操作系统类型</td><td>是</td><td><a>查看</a> |  <a>修改</a> </td></tr>
										<tr><td>操作系统版本</td><td>是</td><td><a>查看</a> |  <a>修改</a> </td></tr>
										<tr><td>CPU（个）</td><td>是</td><td><a>查看</a> |  <a>修改</a> </td></tr>
										<tr><td>内存（G）</td><td>是</td><td><a>查看</a> |  <a>修改</a> </td></tr>
										<tr><td>存储（G）</td><td>是</td><td><a>查看</a> |  <a>修改</a> </td></tr>
									</tbody>
								</table>
							</div>
						</div>
						<div>
							<p><label>产品配置项关系：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addRelation.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>关联关系</th>
										<th>关联配置项</th>
										<th>操作</th>
									</thead>
									<tbody>
										<tr><td>虚拟化</td><td>一对多</td><td>操作系统类型</td><td><a>查看</a> |  <a>修改</a> </td></tr>
										<tr><td>操作系统类型</td><td>一对多</td><td>操作系统版本</td><td><a>查看</a> |  <a>修改</a> </td></tr>
									</tbody>
								</table>
							</div>
						</div>
					</form>
				</div>
				<div class="service-right-content" style="display:none;">
					<form>
						<a class="btn btn-info btn-sm form-edit">修改</a><a style="display:none;" class="btn btn-success btn-sm form-save">保存</a>
						<div class="row">
							<div class="col-xs-6" style="margin-top:10px;">
								<label>产品名称：</label><span class="value-span">云硬盘</span><span class="input-span" style="display:none;"><input type="text" value="云硬盘"><i style="color:red">*</i></span>
							</div>
							<div class="col-xs-6">
								<div class="img-box" style="width:100px;text-align:center">
									<img src="assets/img/windisc.png" alt="" width="100%" height="80">
									<a class="btn btn-info btn-xs" onclick="showModal('pages/services/product_definitions/uploadimg.html')">上传图片</a>
								</div>
							</div>
						</div>
						<div>
							<p><label>产品配置项：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addSetting.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>是否必填</th>
										<th>操作</th>
									</thead>
									<tbody>
										<tr><td>硬盘类型</td><td>是</td><td><a>查看</a> |  <a>修改</a> </td></tr>
										<tr><td>存储（G）</td><td>是</td><td><a>查看</a> |  <a>修改</a> </td></tr>
									</tbody>
								</table>
							</div>
						</div>
						<div>
							<p><label>产品配置项关系：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addRelation.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>关联关系</th>
										<th>关联配置项</th>
										<th>操作</th>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
					</form>
				</div>
				<div class="service-right-content" style="display:none;">
					<form>
						<a class="btn btn-info btn-sm form-edit">修改</a><a style="display:none;" class="btn btn-success btn-sm form-save">保存</a>
						<div class="row">
							<div class="col-xs-6" style="margin-top:10px;">
								<label>产品名称：</label><span class="value-span">对象存储</span><span class="input-span" style="display:none;"><input type="text" value="对象存储"><i style="color:red">*</i></span>
							</div>
							<div class="col-xs-6">
								<div class="img-box" style="width:100px;text-align:center">
									<img src="" alt="" width="100%" height="80">
									<a class="btn btn-info btn-xs" onclick="showModal('pages/services/product_definitions/uploadimg.html')">上传图片</a>
								</div>
							</div>
						</div>
						<div>
							<p><label>产品配置项：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addSetting.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>是否必填</th>
										<th>操作</th>
									</thead>
									<tbody>
										<tr><td>存储（G）</td><td>是</td><td><a>查看</a> |  <a>修改</a> </td></tr>
										
									</tbody>
								</table>
							</div>
						</div>
						<div>
							<p><label>产品配置项关系：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addRelation.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>关联关系</th>
										<th>关联配置项</th>
										<th>操作</th>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
					</form>
				</div>
				<div class="service-right-content" style="display:none;">
					<form>
						<a class="btn btn-info btn-sm form-edit">修改</a><a style="display:none;" class="btn btn-success btn-sm form-save">保存</a>
						<div class="row">
							<div class="col-xs-6" style="margin-top:10px;">
								<label>产品名称：</label><span class="value-span">公网IP</span><span class="input-span" style="display:none;"><input type="text" value="公网IP"><i style="color:red">*</i></span>
							</div>
							<div class="col-xs-6">
								<div class="img-box" style="width:100px;text-align:center">
									<img src="" alt="" width="100%" height="80">
									<a class="btn btn-info btn-xs" onclick="showModal('pages/services/product_definitions/uploadimg.html')">上传图片</a>
								</div>
							</div>
						</div>
						<div>
							<p><label>产品配置项：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addSetting.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>是否必填</th>
										<th>操作</th>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
						<div>
							<p><label>产品配置项关系：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addRelation.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>关联关系</th>
										<th>关联配置项</th>
										<th>操作</th>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
					</form>
				</div>
				<div class="service-right-content" style="display:none;">
					<form>
						<a class="btn btn-info btn-sm form-edit">修改</a><a style="display:none;" class="btn btn-success btn-sm form-save">保存</a>
						<div class="row">
							<div class="col-xs-6" style="margin-top:10px;">
								<label>产品名称：</label><span class="value-span">负载均衡器</span><span class="input-span" style="display:none;"><input type="text" value="负载均衡器"><i style="color:red">*</i></span>
							</div>
							<div class="col-xs-6">
								<div class="img-box" style="width:100px;text-align:center">
									<img src="" alt="" width="100%" height="80">
									<a class="btn btn-info btn-xs" onclick="showModal('pages/services/product_definitions/uploadimg.html')">上传图片</a>
								</div>
							</div>
						</div>
						<div>
							<p><label>产品配置项：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addSetting.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>是否必填</th>
										<th>操作</th>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
						<div>
							<p><label>产品配置项关系：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addRelation.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>关联关系</th>
										<th>关联配置项</th>
										<th>操作</th>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
					</form>
				</div>
				<div class="service-right-content" style="display:none;">
					<form>
						<a class="btn btn-info btn-sm form-edit">修改</a><a style="display:none;" class="btn btn-success btn-sm form-save">保存</a>
						<div class="row">
							<div class="col-xs-6" style="margin-top:10px;">
								<label>产品名称：</label><span class="value-span">SSH密钥</span><span class="input-span" style="display:none;"><input type="text" value="SSH密钥"><i style="color:red">*</i></span>
							</div>
							<div class="col-xs-6">
								<div class="img-box" style="width:100px;text-align:center">
									<img src="" alt="" width="100%" height="80">
									<a class="btn btn-info btn-xs" onclick="showModal('pages/services/product_definitions/uploadimg.html')">上传图片</a>
								</div>
							</div>
						</div>
						<div>
							<p><label>产品配置项：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addSetting.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>是否必填</th>
										<th>操作</th>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
						<div>
							<p><label>产品配置项关系：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addRelation.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>关联关系</th>
										<th>关联配置项</th>
										<th>操作</th>
									</thead>
									<tbody>
									</tbody>
								</table>
							</div>
						</div>
					</form>
				</div>
				<div class="service-right-content" style="display:none;">
					<form>
						<a class="btn btn-info btn-sm form-edit">修改</a><a style="display:none;" class="btn btn-success btn-sm form-save">保存</a>
						<div class="row">
							<div class="col-xs-6" style="margin-top:10px;">
								<label>产品名称：</label><span class="value-span">自定义产品</span><span class="input-span" style="display:none;"><input type="text" value="自定义产品"><i style="color:red">*</i></span>
							</div>
							<div class="col-xs-6">
								<div class="img-box" style="width:100px;text-align:center">
									<img src="" alt="" width="100%" height="80">
									<a class="btn btn-info btn-xs" onclick="showModal('pages/services/product_definitions/uploadimg.html')">上传图片</a>
								</div>
							</div>
						</div>
						<div>
							<p><label>产品配置项：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addSetting.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>是否必填</th>
										<th>操作</th>
									</thead>
									<tbody>
										<tr><td>配置项一</td><td>是</td><td><a onclick="showModal('pages/services/product_definitions/addSetting.html')">查看</a> | <a onclick="showModal('pages/services/product_definitions/addSetting.html')">修改</a> | <a onclick="confirm('确定删除吗？')">删除</a></td></tr>
										<tr><td>配置项二</td><td>是</td><td><a onclick="showModal('pages/services/product_definitions/addSetting.html')">查看</a> | <a onclick="showModal('pages/services/product_definitions/addSetting.html')">修改</a> | <a onclick="confirm('确定删除吗？')">删除</a></td></tr>
									</tbody>
								</table>
							</div>
						</div>
						<div>
							<p><label>产品配置项关系：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addRelation.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>配置项名称</th>
										<th>关联关系</th>
										<th>关联配置项</th>
										<th>操作</th>
									</thead>
									<tbody>
										<tr><td>配置项一</td><td>一对多</td><td>配置项二</td><td><a onclick="showModal('pages/services/product_definitions/addRelation.html')">查看</a> | <a onclick="showModal('pages/services/product_definitions/addRelation.html')">修改</a> | <a onclick="confirm('确定删除吗？')">删除</a></td></tr>
									</tbody>
								</table>
							</div>
						</div>
						<div>
							<p><label>产品功能定义：</label><span class="glyphicon glyphicon-plus-sign" style="color:#47b007;top:4px;font-size:18px;cursor:pointer;" onclick="showModal('pages/services/product_definitions/addDefine.html')"></span></p>
							<div class="panel panel-default b-blue">
								<table class="table table-striped">
									<thead>
										<th>功能名称</th>
										<th>功能路径</th>
										<th>脚本</th>
										<th>操作</th>
									</thead>
									<tbody>
										<tr><td>服务发布表单</td><td>/server/boat</td><td>服务发布表单脚本</td><td><a onclick="showModal('pages/services/product_definitions/addDefine.html')">查看</a> | <a onclick="showModal('pages/services/product_definitions/addDefine.html')">修改</a> | <a onclick="confirm('确定删除吗？')">删除</a></td></tr>
										<tr><td>服务申请列表</td><td>/server/applylist</td><td>服务申请列表脚本</td><td><a onclick="showModal('pages/services/product_definitions/addDefine.html')">查看</a> | <a onclick="showModal('pages/services/product_definitions/addDefine.html')">修改</a> | <a onclick="confirm('确定删除吗？')">删除</a></td></tr>
									</tbody>
								</table>
							</div>
						</div>
					</form>
				</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

<!-- 配置项列表  -->
<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAddConfig }">
	<div class="simple_form form-horizontal">
	  <div class='modal-dialog modal-lg' style="width:600px;">
	    <div class='modal-content'>
	      <div class='modal-header'>
	        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>新增产品配置项</h3>
	      </div>
	      <div class='modal-body form-horizontal row'>
	        <div class="form-group">
	          <label class="col-xs-3 control-label">配置项名称</label>
	          <div class="col-xs-8">
	            <input type="email" class="form-control" placeholder="请输入名称" data-bind="value: currentConfig().name">
	          </div>
	          <div class="col-xs-1">
	            <span class="text-danger inline m-l-n m-t-sm">*</span>
	          </div>           
	        </div>
	        <div class="form-group">
	          <label class="col-xs-3 control-label">是否必填</label>
	          <div class="col-xs-8">
	            <select class="form-control" data-bind="value: currentConfig().required">
	              <option value="1">是</option>
	              <option value="0">否</option>
	            </select>
	          </div>
	          <div class="col-xs-1">
	            <span class="text-danger inline m-l-n m-t-sm">*</span>
	          </div>           
	        </div>
	        <div class="form-group">
	          <label class="col-xs-3 control-label">配置项规则</label>
	          <div class="col-xs-8">
	            <select class="form-control" data-bind="value: currentConfig().regulation">
	              <option value="0">枚举选择</option>
	              <option value="1">单项选择</option>
	            </select>
	          </div>
	          <div class="col-xs-1">
	            <span class="text-danger inline m-l-n m-t-sm">*</span>
	          </div>           
	        </div>
	        <div class="form-group">
	          <label class="col-xs-3 control-label">配置项可用值</label>
	          <div class="col-xs-8">
	            <textarea class="form-control" cols="30" rows="3" data-bind="value: currentConfig().values"></textarea>
	          </div>
	          <div class="col-xs-1">
	            <span class="text-danger inline m-l-n m-t-sm">*</span>
	          </div>           
	        </div>
	      	
	      </div>
	      <div class='modal-footer' style="text-align:center;">
	        <a class="btn btn-default btn-info" data-bind="click: saveConfig">确定</a>
	        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
	      </div>
	    </div>
	  </div>
	</div>
</div>






<!-- 配置项关系列表  -->
<div role="dialog" aria-hidden="true" class="modal fade" data-bind="modal: { show: isAddConfigRelation }">
	<div class="simple_form form-horizontal">
	  <div class='modal-dialog modal-lg' style="width:640px;">
	    <div class='modal-content'>
	      <div class='modal-header'>
	        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button><h3 class='modal-title'>新增产品配置项关系</h3>
	      </div>
	      <div class='modal-body row'>
	        <div class="col-xs-4">
	          <div class="input-group">
	            <span class="input-group-addon">配置项名称</span>
	            <select class="form-control input-sm" data-bind="value: configRelation().configA, options: configA_list, optionsText: 'name', optionsValue: 'id'"></select>
	          </div>      
	        </div>      
	        <div class="col-xs-4">
	          <div class="input-group">
	            <span class="input-group-addon">关系</span>
	            <select class="form-control input-sm" data-bind="value: configRelation().relation, options: relation_list, optionsText: 'name', optionsValue: 'type'"></select>
	          </div>      
	        </div>      
	        <div class="col-xs-4">
	          <div class="input-group">
	            <span class="input-group-addon">配置项名称</span>
	            <select class="form-control input-sm" data-bind="value: configRelation().configB, options: configA_list, optionsText: 'name', optionsValue: 'id'"></select>
	          </div>      
	        </div>      
	        <div class="col-xs-6 form-item-block">
	          <label class="control-label"><span data-bind="text: configRelation().configA_Name"></span></label>
	          <!-- ko if: (configRelation().relation()=="1TO1" || configRelation().relation()=="1TON")  -->
	          <div style="border:1px solid #eee;padding:10px;" data-bind="foreach: configA_options">
	          	<div class="radio">
	              <label>
	                <input type="radio" name="optionsRadiosA" data-bind="value: value, checked: $root.configRelation().chosenA"><span data-bind="text: value"></span>
	              </label>
	            </div>
	          </div>
	          <!-- /ko -->
	          <!-- ko if: (configRelation().relation()=="NTO1" || configRelation().relation()=="NTON")  -->
	          <div style="border:1px solid #eee;padding:10px;" data-bind="foreach: configA_options">
	            <div class="checkbox">
	              <label>
	                <input type="checkbox" data-bind="checkedValue: value, checked: $root.configRelation().chosenA"><span data-bind="text: value"></span>
	              </label>
	            </div>
	          </div>
	          <!-- /ko -->
	        </div>
	        <div class="col-xs-6 form-item-block">
	          <label class="control-label"><span data-bind="text: configRelation().configB_Name"></span></label>
	          <!-- ko if: (configRelation().relation()=="1TO1" || configRelation().relation()=="NTO1")  -->
	          <div style="border:1px solid #eee;padding:10px;" data-bind="foreach: configB_options">
	          	<div class="radio">
	              <label>
	                <input type="radio" name="optionsRadiosB" data-bind="value: value, checked: $root.configRelation().chosenB"><span data-bind="text: value"></span>
	              </label>
	            </div>
	          </div>
	          <!-- /ko -->
	          <!-- ko if: (configRelation().relation()=="1TON" || configRelation().relation()=="NTON")  -->
	          <div style="border:1px solid #eee;padding:10px;" data-bind="foreach: configB_options">
	            <div class="checkbox">
	              <label>
	                <input type="checkbox" data-bind="checkedValue: value, checked: $root.configRelation().chosenB"><span data-bind="text: value"></span>
	              </label>
	            </div>
	          </div>
	          <!-- /ko -->
	        </div>
	        <div class="col-xs-12 form-item-block text-center" style="padding: 10px 0px 10px;">
	        	<a class="btn btn-sm btn-success" data-bind="click: addRelation">添加</a>
	        </div>
	      	<div class="col-xs-12 form-item-block">
	      		<table class="table">
	      			<thead>
	      			<tr>
	      			  <th>配置项名称</th>
	      			  <th>配置项值</th>
	      			  <th>关系</th>
	      			  <th>配置项名称</th>
	      			  <th>配置项值</th>
	      			  <th>操作</th>
	      			</tr>
	      			</thead>
	      			<tbody data-bind="foreach: configList">
	      				<tr>
	      					<td data-bind="text: configA_Name"></td>
	      					<td data-bind="text: chosenA"></td>
	      					<td data-bind="text: relation"></td>
	      					<td data-bind="text: configB_Name"></td>
	      					<td data-bind="text: chosenB"></td>
	      					<td><a data-bind="click: $root.removeRelation">删除</a></td>
	      				</tr>
	      			</tbody>
	      		</table>
	      	</div>
	      </div>
	      <div class='modal-footer' style="text-align:center;">
	        <a class="btn btn-default btn-info" data-bind="click: saveConfigRelation">确定</a>
	        <a class="btn btn-default btn btn-default" data-dismiss="modal">取消</a>
	      </div>
	    </div>
	  </div>
	</div>
</div>

<!-- page specific plugin scripts -->
<script type="text/javascript">
  var scripts = [null, null]
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(args) {
    

    $(".form-edit").click(function(){
    	$(this).hide();
    	$(this).siblings('.form-save').show();
    	$(this).siblings('.row').find(".value-span").hide().next('.input-span').show();
    })
    $(".form-save").click(function(){
    	$(this).hide();
    	$(this).siblings('.form-edit').show();
    	$(this).siblings('.row').find('.value-span').show().html($(this).siblings('.row').find('input').val());
    	$(this).siblings('.row').find(".input-span").hide();
    })

    $(".product-add-btn").click(function(){
    	$(".add-praoduct").show().siblings().hide();
    })
    $(".product-delete-btn").click(function(){
    	if(confirm('确认删除吗？')){
    		console.log('执行删除！')
    	}
    })
    
    
    //产品基本信息模型
    function ViewModel_Products() {
        var self = this;
        this.isAddConfig = ko.observable(false);
        this.isAddConfigRelation = ko.observable(false);
        
        //产品基本
        this.products = ko.observableArray([]);
        this.currentProduct = ko.observable({
        	name: ""
        });
        
        
        //配置项
        this.currentConfig = ko.validatedObservable({
        	//productId : ko.observable(),
        	//uuid : ko.observable(),
        	name : ko.observable().extend({required: true}),
        	required : ko.observable().extend({required: true}),
        	regulation : ko.observable().extend({required: true}),
        	values : ko.observable().extend({required: true})
        });
        
        this.configsTable = new DataTable([], {path: 'api/v5.0.0/products/configs'});
        this.searchConfigsParam = this.currentConfig;
        this.searchConfigs = function(){
        	self.configsTable.params(self.searchConfigsParam.toJSON());
      	}
        
        this.configRelation = ko.validatedObservable({
        	configA_Name: ko.observable(),
        	configA: ko.observable(),
        	configB_Name: ko.observable(),
        	configB: ko.observable(),
        	relation: ko.observable(),
        	chosenA: ko.observableArray().extend({requried: true}),
        	chosenB: ko.observableArray().extend({requried: true})
        });
        
        this.configA_list = ko.observableArray([
        	{id: 1, name: 'CPU', options: [{id: 1, value: '1'}, {id: 2, value: '2'}]},
        	{id: 2, name: '内存', options: [{id: 1, value: '3'}, {id: 2, value: '4'}]}
        ]);
        this.configB_list = ko.observableArray([
         	{id: 1, name: 'CPU', options: [{id: 1, value: '1'}, {id: 2, value: '2'}]},
         	{id: 2, name: '内存', options: [{id: 1, value: '4'}, {id: 2, value: '5'}]}
        ]);
        this.relation_list = ko.observableArray([                  
        	{type: '1TO1', name: '1对1'},
        	{type: '1TON', name: '1对多'},
        	{type: 'NTO1', name: '多对1'},
        	{type: 'NTON', name: '多对多'}
        ]);
        this.configA_options = ko.observableArray();
        this.configB_options = ko.observableArray();
        this.configRelation().relation.subscribe(function(value){
        	self.configRelation().chosenA([])
        	self.configRelation().chosenB([])
        })
        this.configRelation().configA.subscribe(function(value){
        	var config = _.findWhere(self.configA_list(), {id: value});
        	self.configA_options(config.options)
        	self.configRelation().chosenA([])
        	self.configRelation().configA_Name(config.name);
        })
        this.configRelation().configB.subscribe(function(value){
        	var config = _.findWhere(self.configB_list(), {id: value});
        	self.configB_options(config.options)
        	self.configRelation().chosenB([])
        	self.configRelation().configB_Name(config.name);
        })
        this.configList = ko.observableArray();
        this.addRelation = function(){
        	if(this.configRelation.isValid()){
        		if(!(this.configRelation().chosenA().length==0 || this.configRelation().chosenB().length==0)){
        			this.configList.push(this.configRelation.toJSON())
        			
        			this.configRelation().chosenA([])
        			this.configRelation().chosenB([])
        		}
        	}
        }
        this.removeRelation = function(object,event){
        	self.configList.remove(object);
        }
        this.saveConfigRelation = function(){
        	console.log(this.configList())
        }
        this.addConfig = function(){
    		self.isAddConfig(true);
    		self.currentConfig.fromJSON({
    			productId : self.currentProduct().uuid,
            	uuid : null,
            	name : '',
            	required : '',
            	regulation : '',
            	values : ''
      		});
  		}
        
        this.saveConfig = function(){
			ko.validation.group(this.currentConfig).showAllMessages();
	        if(self.currentConfig.isValid()){
	        	if(self.currentConfig().uuid){
	        		debugger;
	        		csc.rest.put('api/v5.0.0/products/'+ self.currentConfig().productId +'/configs/'+self.currentConfig().uuid,self.currentConfig.toJSON(),function(data){
				 		self.isAddConfig(false);
			        	self.configsTable.refreshData();
				 		alert('修改配置项成功！');
				    }); 
	        	}else{
	        		csc.rest.post('api/v5.0.0/products/'+ self.currentConfig().productId +'/configs',self.currentConfig.toJSON(),function(data){
				 		self.isAddConfig(false);
			        	self.configsTable.refreshData();
				 		alert('添加配置项成功！');
				    }); 
	        	}
	        }
  		}
        
      	//修改
      	this.editConfig = function(object, event){
        	self.currentConfig.fromJSON(object);
        	console.log(self.currentConfig.toJSON());
        	self.isAddConfig(true); 
      	}
        
        
        //配置项关联关系
        this.currentConfigRelations = ko.observable({
        	productId: ""
        });
        this.configRelationsTable = new DataTable([], {path: 'api/v5.0.0/products/configRelations'});
        this.searchConfigRelationsParam = this.currentConfigRelations;
        this.searchConfigRelations = function(){
        	self.configRelationsTable.params(self.searchConfigRelationsParam());
      	}
        
        this.sourceConfigList = ko.observableArray([]);
        this.addConfigRelation = function(){
    		self.isAddConfigRelation(true);
    		csc.rest.get('api/v5.0.0/products/configsAndRelations',function(data){
        		self.sourceConfigList = data["sourceConfigList"];
      		});
  		}
        
        this.loadProducts = function() {
        	csc.rest.get('api/v5.0.0/products',function(data){
        		self.products(data);
        		self.currentProduct(data[0]);
        		self.currentConfig().productId = data[0].uuid;
        		self.currentConfigRelations().productId = data[0].uuid;

    	      	self.searchConfigs();
    	      	self.searchConfigRelations();
      		});
        }
        
        //左侧产品列表点击事件
        this.setCurrent = function(object, event) {
        	self.currentProduct(object);
        	self.currentConfig().productId = object.uuid;
        	self.currentConfigRelations().productId = object.uuid;
        	
        	self.searchConfigs();
        	self.searchConfigRelations();
        }
        
        this.loadProducts();
   	}
    
    //产品配置项信息模型
    /* function ViewModel_ProductConfigs() {
        var self = this;
        
        this.productConfigs = ko.observableArray([]);
        this.currentProductConfigs = ko.observable({
        	uuid: ""
        });
        this.loadProductConfigs = function() {
        	csc.rest.get('api/v5.0.0/products',function(data){
        		self.productConfigs(data);
        		self.currentProductConfigs(data[0])
      		});
        }
        this.setCurrent = function(object, event) {
        	self.currentProduct(object);
        }
   	} */

    ko.applyBindings(new ViewModel_Products(), $('#page-content')[0]);
    //ko.applyBindings(new ViewModel_ProductConfigs(), $('#page-content')[1]);
  });
</script>