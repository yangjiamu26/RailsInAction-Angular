<style>
  .ace-settings-container {
  position: fixed;
  right: 0;
  top: 60px;
  z-index: 12;
}
.bigger-130{font-size:22px;padding:6px 0;}
.btn.btn-app.ace-settings-btn {
  float: left;
  display: block;
  text-align: center;
  border-radius: 6px 0 0 6px;
  opacity: 0.55;
  vertical-align: top;
  margin: 0;
}
.btn.btn-app.ace-settings-btn:hover,
.btn.btn-app.ace-settings-btn.open {
  opacity: 1;
}
.btn.btn-app.ace-settings-btn.btn-xs {
  width: 42px;
}
.ace-settings-box {
  display: block;
  float: left;
  max-width: 0;
  max-height: 0;
  overflow: hidden;
  padding: 0;
  -moz-transform: translate(0,0);
  -webkit-transform: translate(0,0);
  -o-transform: translate(0,0);
  -ms-transform: translate(0,0);
  transform: translate(0,0);
  background-color: #FFF;
  border: 0 solid #fad733;
  -webkit-transition: max-width 0.25s linear 0s, max-height 0s linear 0.25s, padding 0s linear 0.25s, border-width 0s linear 0.25s;
  -o-transition: max-width 0.25s linear 0s, max-height 0s linear 0.25s, padding 0s linear 0.25s, border-width 0s linear 0.25s;
  transition: max-width 0.25s linear 0s, max-height 0s linear 0.25s, padding 0s linear 0.25s, border-width 0s linear 0.25s;
}
.ace-settings-box.open {
  max-width: 320px;
  max-height: 1000px;
  padding: 0 14px;
  border-width: 2px;
  -webkit-transition-delay: 0s;
  -moz-transition-delay: 0s;
  -o-transition-delay: 0s;
  transition-delay: 0s;
}
.ace-settings-box.open .ace-settings-item {
  z-index: auto;
  min-width: 140px;
}
.ace-settings-box .ace-settings-item {
  margin: 6px 0;
  color: #444;
  max-height: 24px;
  position: relative;
  z-index: -1;
  white-space: nowrap;
}
.ace-settings-box .ace-settings-item > label.lbl {
  font-size: 13px;
}
.checkbox{padding:5px;display: block;}
.checkbox label{position:relative;display: block;background:#fff;border-radius:5px;height:30px;line-height:30px;text-align:center;}
.widget-placeholder{border:2px dashed #D9D9D9}
input[type="checkbox"]{opacity: 0;position:absolute!important;}
input[type="checkbox"]+span{display:block;z-index:1;width:100%;height:100%;border-radius:5px;border:1px solid #eee;left:0;top:0;position:absolute;font: normal normal normal 14px/1 FontAwesome;}
input[type="checkbox"]:checked+span{border:1px solid #39bee8;color:#39bee8;}
input[type="checkbox"]:checked+span::before{display:block;z-index:1;width:20px;height:20px;top:0;left:0;content:"\f00c";}
</style>
<div class="ace-settings-container" id="ace-settings-container">
  <div class="btn btn-app btn-xs btn-warning ace-settings-btn" id="ace-settings-btn">
    <i class="ace-icon fa fa-cog bigger-130"></i>
  </div>
  
  <!-- 浮动配置窗 -->
  <div class="ace-settings-box clearfix" id="ace-settings-box">
    <form action="" class="wrapper-sm form-inline w-lg row">
      <div id="setting_box">
        <div class="checkbox col-xs-6 widget-container-col">
              <label>
                <input type="checkbox" id="index_check_1" index="1"><span></span> 资源管理
              </label>
          </div>
          <div class="checkbox col-xs-6 widget-container-col">
              <label>
                <input type="checkbox" id="index_check_2" index="2"><span></span> 快捷入口
              </label>
          </div>
          <div class="checkbox col-xs-6 widget-container-col">
              <label>
                <input type="checkbox" id="index_check_3" index="3"><span></span> 最新通知
              </label>
          </div>
          <div class="checkbox col-xs-6 widget-container-col">
              <label>
                <input type="checkbox" id="index_check_5" index="5"><span></span> 我的任务
              </label>
          </div>
          <div class="checkbox col-xs-6 widget-container-col">
              <label>
                <input type="checkbox" id="index_check_6" index="6"><span></span> 最近订单
              </label>
          </div>
          <div class="checkbox col-xs-6 widget-container-col">
              <label>
                <input type="checkbox" id="index_check_7" index="7"><span></span> 最近告警
              </label>
          </div>
          <div class="checkbox col-xs-6 widget-container-col">
              <label>
                <input type="checkbox" id="index_check_8" index="8"><span></span> VDC配额信息
              </label>
          </div>
          <div class="checkbox col-xs-6 widget-container-col">
              <label>
                <input type="checkbox" id="index_check_9" index="9"><span></span> 总体告警统计
              </label>
          </div>
          
      </div>
    </form>
  </div><!-- /.ace-settings-box -->
</div>


<div class='wrapper-md'>
  <div class='row'>
    <div class='col-md-6'>
      <!-- 资源管理 -->
      <div class='panel panel-default'>
        <div class='panel-heading text-base'>资源管理</div>
        <div class='panel-body h-sm'>
          <div class='row text-center'>
            <a href="#">
              <div class='col-lg-2-4 col-xs-6'>
                <div>业务系统</div>
                <div class='h2 m-b-sm'>4</div></div>
            </a>
            <a href="#">
              <div class='col-lg-2-4 col-xs-6'>
                <div>云主机</div>
                <div class='h2 m-b-sm'>13</div></div>
            </a>
            <a href="#">
              <div class='col-lg-2-4 col-xs-6'>
                <div>云硬盘</div>
                <div class='h2 m-b-sm'>20</div></div>
            </a>
            <a href="#">
              <div class='col-lg-2-4 col-xs-6'>
                <div>安全组</div>
                <div class='h2 m-b-sm'>10</div></div>  
            </a>
            <a href="#">          
              <div class='col-lg-2-4 col-xs-6'>
                <div>公网IP</div>
                <div class='h2 m-b-sm'>20</div></div>
            </a>
            <a href="#">
              <div class='col-lg-2-4 col-xs-6'>
                <div>负载均衡</div>
                <div class='h2 m-b-sm'>5</div></div>
            </a>
            <a href="#">
              <div class='col-lg-2-4 col-xs-6'>
                <div>防火墙</div>
                <div class='h2 m-b-sm'>4</div></div>
            </a>
            <a href="#">
              <div class='col-lg-2-4 col-xs-6'>
                <div>SSH密钥</div>
                <div class='h2 m-b-sm'>13</div></div>
            </a>
            <a href="#">
              <div class='col-lg-2-4 col-xs-6'>
                <div>对象存储</div>
                <div class='h2 m-b-sm'>13</div></div>
            </a>
          </div>
        </div>
      </div>
      <!-- VDC配额信息 -->
      <div class='panel panel-default'>
        <div class='panel-heading'>
          <span class="text-base">VDC配额信息</span>
          <select class="pull-right">
            <option selected="selected">VDC总览</option>
            <option>VDC总览</option>
            <option>VDC总览</option>
          </select>  
        </div>
        <div class='panel-body'>
          <div class='row text-center'>
            <div class='col-lg-2-4 col-xs-6 m-b m-t-md'>
              <div>CPU<h4>100个</h4></div>
              <div class='inline m-t-xs m-b-xs easyPieChart' ui-jq='easyPieChart' ui-options="{percent: 75,lineWidth: 4,trackColor: '#e8eff0',barColor: '#fad733',scaleColor: false,size: 60,rotate: 0,lineCap: 'butt'}">
                <div>
                  <span class='text-warning h4'>75%</span></div>
              </div>
              <div class="text-primary-lt">
                <div class="inline m-a text-left">已用：75个<br/>未用：25个</div>
              </div>
            </div>
            <div class='col-lg-2-4 col-xs-6 m-b m-t-md'>
              <div>内存<h4>100GB</h4></div>
              <div class='inline m-t-xs m-b-xs easyPieChart' ui-jq='easyPieChart' ui-options="{percent: 35,lineWidth: 4,trackColor: '#e8eff0',barColor: '#27c24c',scaleColor: false,size: 60,rotate: 0,lineCap: 'butt'}">
                <div>
                  <span class='text-success h4'>35%</span></div>
              </div>
              <div class="text-primary-lt">
                <div class="inline m-a text-left">已用：35个<br/>未用：65个</div>
              </div>
            </div>
            <div class='col-lg-2-4 col-xs-6 m-b m-t-md'>
              <div>存储<h4>100GB</h4></div>
              <div class='inline m-t-xs m-b-xs easyPieChart' ui-jq='easyPieChart' ui-options="{percent: 50,lineWidth: 4,trackColor: '#e8eff0',barColor: '#27c24c',scaleColor: false,size: 60,rotate: 0,lineCap: 'butt'}">
                <div>
                  <span class='text-success h4'>50%</span></div>
              </div>
              <div class="text-primary-lt">
                <div class="inline m-a text-left">已用：50个<br/>未用：50个</div>
              </div>
            </div>
            <div class='col-lg-2-4 col-xs-6 m-b m-t-md'>
              <div>VPC<h4>20个</h4></div>
              <div class='inline m-t-xs m-b-xs easyPieChart' ui-jq='easyPieChart' ui-options="{percent: 60,lineWidth: 4,trackColor: '#e8eff0',barColor: '#27c24c',scaleColor: false,size: 60,rotate: 0,lineCap: 'butt'}">
                <div>
                  <span class='text-success h4'>60%</span></div>
              </div>
              <div class="text-primary-lt">
                <div class="inline m-a text-left">已用：60个<br/>未用：40个</div>
              </div>
            </div>
            <div class='col-lg-2-4 col-xs-6 m-b m-t-md'>
              <div>云主机<h4>20个</h4></div>
              <div class='inline m-t-xs m-b-xs easyPieChart' ui-jq='easyPieChart' ui-options="{percent: 90,lineWidth: 4,trackColor: '#e8eff0',barColor: '#f05050',scaleColor: false,size: 60,rotate: 0,lineCap: 'butt'}">
                <div>
                  <span class='text-danger h4'>90%</span></div>
              </div>
              <div class="text-primary-lt">
                <div class="inline m-a text-left">已用：90个<br/>未用：10个</div>
              </div>
            </div>
            <div class='col-lg-2-4 col-xs-6 m-b m-t-md'>
              <div>云硬盘<h4>20个</h4></div>
              <div class='inline m-t-xs m-b-xs easyPieChart' ui-jq='easyPieChart' ui-options="{percent: 60,lineWidth: 4,trackColor: '#e8eff0',barColor: '#27c24c',scaleColor: false,size: 60,rotate: 0,lineCap: 'butt'}">
                <div>
                  <span class='text-success h4'>60%</span></div>
              </div>
              <div class="text-primary-lt">
                <div class="inline m-a text-left">已用：60个<br/>未用：40个</div>
              </div>
            </div>
            <div class='col-lg-2-4 col-xs-6 m-b m-t-md'>
              <div>对象存储<h4>20个</h4></div>
              <div class='inline m-t-xs m-b-xs easyPieChart' ui-jq='easyPieChart' ui-options="{percent: 75,lineWidth: 4,trackColor: '#e8eff0',barColor: '#fad733',scaleColor: false,size: 60,rotate: 0,lineCap: 'butt'}">
                <div>
                  <span class='text-warning h4'>75%</span></div>
              </div>
              <div class="text-primary-lt">
                <div class="inline m-a text-left">已用：75个<br/>未用：25个</div>
              </div>
            </div>
            <div class='col-lg-2-4 col-xs-6 m-b m-t-md'>
              <div>负载均衡器<h4>20个</h4></div>
              <div class='inline m-t-xs m-b-xs easyPieChart' ui-jq='easyPieChart' ui-options="{percent: 35,lineWidth: 4,trackColor: '#e8eff0',barColor: '#27c24c',scaleColor: false,size: 60,rotate: 0,lineCap: 'butt'}">
                <div>
                  <span class='text-success h4'>35%</span></div>
              </div>
              <div class="text-primary-lt">
                <div class="inline m-a text-left">已用：35个<br/>未用：65个</div>
              </div>
            </div>
            <div class='col-lg-2-4 col-xs-6 m-b m-t-md'>
              <div>公网IP<h4>20个</h4></div>
              <div class='inline m-t-xs m-b-xs easyPieChart' ui-jq='easyPieChart' ui-options="{percent: 60,lineWidth: 4,trackColor: '#e8eff0',barColor: '#27c24c',scaleColor: false,size: 60,rotate: 0,lineCap: 'butt'}">
                <div>
                  <span class='text-success h4'>60%</span></div>
              </div>
              <div class="text-primary-lt">
                <div class="inline m-a text-left">已用：60个<br/>未用：40个</div>
              </div>
            </div>
            <div class='col-lg-2-4 col-xs-6 m-b m-t-md'>
              <div>SSH密钥<h4>20个</h4></div>
              <div class='inline m-t-xs m-b-xs easyPieChart' ui-jq='easyPieChart' ui-options="{percent: 60,lineWidth: 4,trackColor: '#e8eff0',barColor: '#27c24c',scaleColor: false,size: 60,rotate: 0,lineCap: 'butt'}">
                <div>
                  <span class='text-success h4'>60%</span></div>
              </div>
              <div class="text-primary-lt">
                <div class="inline m-a text-left">已用：60个<br/>未用：40个</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- 最近订单 -->
      <div class='panel panel-default'>
        <div class='panel-heading'>
          <span class="text-base">最近订单</span>
          <a href="#pages/orders/service_orders" class="pull-right">更多</a>
        </div>
        <div class='panel-body' ui-jq='slimScroll' ui-options="{height:'250px'}">
              <table class="table table-properties">
                  <tbody>
                      <tr>
                          <td width="10%"><span class='label text-base bg-info pos-rlt m-r'><i class='arrow right arrow-info'></i>等待审核</span></td>
                          <td>D201601011230</td>
                          <td>服务实例名称一</td>
                      </tr>
                      <tr>
                          <td><span class='label text-base bg-success pos-rlt m-r'><i class='arrow right arrow-success'></i>审核通过</span></td>
                          <td>D201601011230</td>
                          <td>服务实例名称一</td>
                      </tr>
                      <tr>
                          <td><span class='label text-base bg-danger pos-rlt m-r'><i class='arrow right arrow-danger'></i>审核不通过</span></td>
                          <td>D201601011230</td>
                          <td>服务实例名称一服务实例名称一服务实例名称一服务实例名称一服务实例名称一服务实例名称一服务实例名称一</td>
                      </tr>
                      <tr>
                          <td><span class='label text-base bg-info pos-rlt m-r'><i class='arrow right arrow-info'></i>等待审核</span></td>
                          <td>D201601011230</td>
                          <td>服务实例名称一</td>
                      </tr>
                      <tr>
                          <td><span class='label text-base bg-info pos-rlt m-r'><i class='arrow right arrow-info'></i>等待审核</span></td>
                          <td>D201601011230</td>
                          <td>服务实例名称一</td>
                      </tr>
                  </tbody>
              </table>
        </div>
      </div>
      <!-- 最新通知 -->
      <div class='panel panel-default'>
        <div class='panel-heading'>
          <span class="text-base">最新通知</span>
          <a href="#pages/systems/notices/index" class="pull-right" >更多</a>
        </div>
        <div class='panel-body' ui-jq='slimScroll' ui-options="{height:'310px'}">
          <div class='media'>
            <div class='media-body'>
              <div class='pull-right text-right text-muted'>
                <strong>12:18</strong>
                <br>
                <small class='label bg-light m-l-sm'>下午</small>
              </div>
              <span class='label bg-dark pull-left'>未读</span>
              <a class='text-danger w-xl text-ellipsis' href='#'>服务到期服务到期服务到期服务到期服务到期服务到期服务到期服务到期服务到期
              </a>
              <div class='m-t-sm'>云主机在2016-09-09将会过期.云主机在2016-09-09将会过期.云主机在2016-09-09将会过期.</div>
            </div>
          </div>
          <div class='line'></div>
          <div class='media'>
            <div class='media-body'>
              <div class='pull-right text-right text-muted'>
                <strong>12:18</strong>
                <br>
                <small class='label bg-light m-l-sm'>2016-06-19</small>
              </div>
              <span class='label bg-light pull-left'>已读</span>
              <a class='text-success w-xl text-ellipsis' href='#'>审核通过
              </a>
              <div class='m-t-sm'>云主机在2016-09-09将会过期.云主机在2016-09-09将会过期.云主机在2016-09-09将会过期.</div>
            </div>
          </div>
          <div class='line'></div>
          <div class='media'>
            <div class='media-body'>
              <div class='pull-right text-right text-muted'>
                <strong>12:18</strong>
                <br>
                <small class='label bg-light m-l-sm'>2016-06-19</small>
              </div>
              <span class='label bg-light pull-left'>已读</span>
              <a class='text-info w-xl text-ellipsis' href='#'>普通提醒
              </a>
              <div class='block m-t-sm'>云主机在2016-09-09将会过期.云主机在2016-09-09将会过期.云主机在2016-09-09将会过期.</div>
            </div>
          </div>
          <div class='line'></div>

        </div>
      </div>
    </div>
    <div class='col-md-6'>
      <!-- 快捷入口 -->
      <div class='panel panel-default'>
        <div class='panel-heading text-base'>快捷入口</div>
        <div class='panel-body h-sm'>
          <div class='row row-sm text-center'>
            <div class='col-xs-4'>
              <a class='block panel padder-v bg-primary m-t' href='#'>
                <span class='text-white font-thin h4 block'>创建业务系统</span>
              </a>
            </div>
            <div class='col-xs-4'>
              <a class='block panel padder-v bg-info m-t' href='#'>
                <span class='text-white font-thin h4 block'>申请服务</span>
              </a>
            </div>
            <div class='col-xs-4'>
              <a class='block panel padder-v bg-success m-t' href='#'>
                <span class='text-white font-thin h4 block'>创建服务</span>
              </a>
            </div>
          </div>
        </div>
      </div>
      <!-- 我的任务 -->
      <div class='panel panel-default'>
        <div class='panel-heading text-base'>我的任务</div>
        <div class='panel-body'>
          <div class='list-group list-group-lg m-b-none'>
            <a class='list-group-item'>
              <span class='pull-right label bg-danger inline'>7</span>我的待办</a>
            <a class='list-group-item'>
              <span class='pull-right label bg-info inline'>2</span>我的已办</a></div>
        </div>
      </div>
      <!-- 总体告警统计 -->
      <div class='panel panel-default'>
        <div class='panel-heading text-base'>总体告警统计</div>
        <div class='panel-body'>
          <div id="total_alarm_chart" style="height:190px;"></div>
          <div id="vdc_alarm_chart" class="m-t" style="height:190px;"></div>
        </div>
      </div>
      <!-- 最近告警 -->
      <div class='panel panel-default'>
        <div class='panel-heading'>
          <span class="text-base">最近告警</span>
          <a href="#pages/systems/warnings/index" class="pull-right">更多</a>          
          </div>
        <div class='panel-body' ui-jq='slimScroll' ui-options="{height:'250px'}">
          <div class='streamline b-l m-b b-warning'>
            <div class='sl-item b-l'>
              <div class='m-l'>
                <div><span class='text-muted small'>5分钟前</span> <span class='text-danger'>云主机告警</span> <span>告警对象名称</span></div>
                <p><span class='text-danger'>VM-123</span>上的磁盘使用速率达到2.67KB/S，该报警设置为在磁盘使用速率超过1.00KB/s时触发</p>
              </div>
            </div>
            <div class='sl-item b-l b-warning'>
              <div class='m-l'>
                <div><span class='text-muted small'>2016-06-21 9:47:40</span> <span class='text-danger'>云硬盘告警</span> <span>告警对象名称</span></div>
                <p><span class='text-danger'>VM-123</span>上的磁盘使用速率达到2.67KB/S，该报警设置为在磁盘使用速率超过1.00KB/s时触发</p>
              </div>
            </div>
            <div class='sl-item b-l b-primary'>
              <div class='m-l'>
                <div><span class='text-muted small'>2016-06-21 9:47:40</span> <span class='text-danger'>云硬盘告警</span> <span>告警对象名称</span></div>
                <p><span class='text-danger'>VM-123</span>上的磁盘使用速率达到2.67KB/S，该报警设置为在磁盘使用速率超过1.00KB/s时触发</p>
              </div>
            </div>
            <div class='sl-item b-l b-success'>
              <div class='m-l'>
                <div><span class='text-muted small'>2016-06-21 9:47:40</span> <span class='text-danger'>云硬盘告警</span> <span>告警对象名称</span></div>
                <p><span class='text-danger'>VM-123</span>上的磁盘使用速率达到2.67KB/S，该报警设置为在磁盘使用速率超过1.00KB/s时触发</p>
              </div>
            </div>
            <div class='sl-item b-l b-info'>
              <div class='m-l'>
                <div><span class='text-muted small'>2016-06-21 9:47:40</span> <span class='text-danger'>云硬盘告警</span> <span>告警对象名称</span></div>
                <p><span class='text-danger'>VM-123</span>上的磁盘使用速率达到2.67KB/S，该报警设置为在磁盘使用速率超过1.00KB/s时触发</p>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- page specific plugin scripts -->
<script type="text/javascript">
  var scripts = [null,"assets/lib/highcharts/highstock.js", "assets/js/jquery-ui.custom.js","assets/js/jquery.ui.touch-punch.js"];
  $('.page-content-area').ace_ajax('loadScripts', scripts, function(query) {
    console.log(query)
    // 资源告警统计
    $("#total_alarm_chart").highcharts({
        chart: {
                type: 'column'
            },
        credits:{ 
            enabled:false
          },
        title: {
            text: '资源告警统计',
            style:{
              fontSize:'12px'
            }
        },
        legend: {
            margin: 10,
            padding: 0,
            itemStyle: {
                fontWeight: 'normal'
            }
        },
        colors:['#39bee8'],
        xAxis: {
            categories: [
                'VDC配额告警','云主机告警'
            ]
        },
        yAxis: {
            min: 0,
            gridLineColor: '#eee',
            title: {
                text: '单位 (条)'
            }
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
        series: [
          {
              name: '告警数量',
              data: [2, 5]
          }
        ]
      });

    // VDC配额告警统计
    $("#vdc_alarm_chart").highcharts({
        chart: {
                type: 'column'
            },
        credits:{ 
            enabled:false
          },
        title: {
            text: 'VDC配额告警统计',
            style:{
              fontSize:'12px'
            }            
        },
        legend: {
            margin: 10,
            padding: 0,
            itemStyle: {
                fontWeight: 'normal'
            }
        },
        colors:['#f9d21a'],
        xAxis: {
            categories: [
                'CPU','内存','存储','VPC','云主机','云硬盘','对象存储','负载均衡器','公网IP','SSH密钥'
            ]
        },
        yAxis: {
            min: 0,
            gridLineColor: '#eee',
            title: {
                text: '单位 (条)'
            }
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0,
            }
        },
        series: [
          {
              name: '告警数量',
              data: [2, 5, 3, 4,2, 5, 3, 5,3,4]
          }
        ]
      });

      
      var userId = "D155332114";
  //var userId = "D155332115";
  //var userId = "D155332116";
  var defalutHtml=[];
  for(var i=1;i<14;i++){ 
    defalutHtml.push($("#index_list_"+i));
  }
  $("#index_list_box").css("opacity",1);
  //localStorage 操作 start
  var myList;
  if(window.localStorage.index_list){
     $.each(JSON.parse(window.localStorage.index_list),function(index,value){
      if(value.userId == userId){
        myList = value;
        return;
      };
    });
    if(myList){
      myList = myList;
    }else{
      myList = {"userId":userId.toString(),"list":[{"index":1,"select":true},{"index":2,"select":true},{"index":3,"select":true},{"index":4,"select":true},{"index":5,"select":true},{"index":6,"select":true},{"index":7,"select":true},{"index":8,"select":true},{"index":9,"select":true}]};
      //var index_list = eval('(' + window.localStorage.index_list + ')');
      var index_list = JSON.parse(window.localStorage.index_list);
      index_list.push(myList);
      window.localStorage.removeItem("index_list");
      window.localStorage.setItem("index_list",JSON.stringify(index_list));
    }
  }else{
    var index_list = '[{"userId":"'+userId+'","list":[{"index":1,"select":true},{"index":2,"select":true},{"index":3,"select":true},{"index":4,"select":true},{"index":5,"select":true},{"index":6,"select":true},{"index":7,"select":true},{"index":8,"select":true},{"index":9,"select":true}]}]';
    //myList=eval('(' + index_list + ')');
    myList = JSON.parse(index_list)[0];
    window.localStorage.setItem("index_list",index_list);
  }
  var index_LocalStorage = JSON.parse(window.localStorage.index_list);
  var MY_List = myList.list;
  //localStorage 操作 end

  //配置栏 start
  var settingOptoins = [];
  for(var i=0;i<MY_List.length;i++){
    if(MY_List[i].select){
      $("#setting_box .checkbox").eq(MY_List[i].index-1).find("input").attr("checked",true);
      settingOptoins.push($("#setting_box .checkbox").eq(MY_List[i].index-1));
    }
  }
  for(var i=0;i<MY_List.length;i++){
    if(!MY_List[i].select){
      settingOptoins.push($("#setting_box .checkbox").eq(MY_List[i].index-1));
    }
  }
  $("#setting_box").html('');
  for(var i=0;i<settingOptoins.length;i++){
    $("#setting_box").append(settingOptoins[i]);
  }
  //配置栏 end

  //列表渲染 start
  function enterList(_List){
    return;
    var newListHtml=[];
    for(var i=0;i<_List.length;i++){
      if(_List[i].select){
        newListHtml.push(defalutHtml[_List[i].index-1]);
      }
    }
    $("#index_list_box").html('');
    for(var i=0;i<newListHtml.length;i++){
      $("#index_list_box").append(newListHtml[i]);
      if((i+1)%2==0){
        $("#index_list_box").append("<div style='clear:both;'></div>");
      }
    }
  }
  enterList(MY_List);
  //列表渲染 end

  function updateList(){
    var list=[];
    $("#ace-settings-box input[type=checkbox]").each(function(){
      var sel=false;
      if($(this).is(':checked')){
        sel=true;
      }
      list.push({"index":$(this).attr("index"),"select":sel});
    });
    $.each(index_LocalStorage,function(index,value){
      if(value.userId == userId){ 
        index_LocalStorage[index].list = list;
      }
    });
    window.localStorage.removeItem("index_list");
    window.localStorage.setItem("index_list",JSON.stringify(index_LocalStorage));
    //location.reload();
    enterList(list);
  }

  $("#ace-settings-btn").click(function(){ 
    $("#ace-settings-box").toggleClass('open');
  });

  $("#ace-settings-box input[type=checkbox]").change(function() {
    updateList();
  });

  $('.widget-container-col').sortable({
        connectWith: '.widget-container-col',
    items:'> label',
    handle: ace.vars['touch'] ? 'label' : false,
    cancel: '.fullscreen',
    opacity:0.8,
    revert:true,
    forceHelperSize:true,
    placeholder: 'widget-placeholder',
    forcePlaceholderSize:true,
    tolerance:'pointer',
    start: function(event, ui) {
      //when an element is moved, it's parent becomes empty with almost zero height.
      //we set a min-height for it to be large enough so that later we can easily drop elements back onto it
      ui.item.parent().css({'min-height':ui.item.height()})
      //ui.sender.css({'min-height':ui.item.height() , 'background-color' : '#F5F5F5'})
    },
    update: function(event, ui) {
      ui.item.parent({'min-height':''})
      //p.style.removeProperty('background-color');

      updateList();
    }
    });

  });
</script>